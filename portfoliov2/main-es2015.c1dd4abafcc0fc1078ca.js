(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+wBB":function(t,e,n){"use strict";function i(t){return function e(n,i,r){switch(i*=t,r){case"years":case"year":n.setFullYear(n.getFullYear()+i);break;case"months":case"month":n.setMonth(n.getMonth()+i);break;case"weeks":case"week":return e(n,7*i,"days");case"days":case"day":n.setDate(n.getDate()+i);break;case"hours":case"hour":n.setHours(n.getHours()+i);break;case"minutes":case"minute":n.setMinutes(n.getMinutes()+i);break;case"seconds":case"second":n.setSeconds(n.getSeconds()+i);break;case"milliseconds":case"millisecond":n.setMilliseconds(n.getMilliseconds()+i);break;default:throw new Error("Invalid range: "+r)}return n}}t.exports={add:i(1),subtract:i(-1)}},"/n4a":function(t,e,n){"use strict";t.exports=function(t,e,n){n=n||"0";var i=(e=e||2)-(t=t.toString()).length;return(i<=0?"":n.repeat(i))+t}},0:function(t,e,n){t.exports=n("zUnb")},1:function(t,e){},2:function(t,e){},"2goO":function(t,e,n){"use strict";t.exports=["#eee","#d6e685","#8cc665","#44a340","#1e6823"]},"5ZIp":function(t,e){t.exports=["January","February","March","April","May","June","July","August","September","October","November","December"],t.exports.abbr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.exports.it=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],t.exports.abbr.it=["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],t.exports.de=["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],t.exports.abbr.de=["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},A2q2:function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t,e){var n=0,r=[];if(Array.isArray(t))for(;n<t.length&&!1!==e(t[n],n,t);++n);else if("object"===(void 0===t?"undefined":i(t))&&null!==t)for(r=Object.keys(t);n<r.length&&!1!==e(t[r[n]],r[n],t);++n);}},Au0k:function(t,e,n){"use strict";var i=n("VWjb"),r=n("rD7L"),s=n("+wBB"),o=n("nPAm");t.exports=function(t,e,n){return t=r(t),(n=n||{}).summary_text=n.summary_text||'Summary of pull requests, issues opened, and commits made by <a href="https://github.com/'+e+'" target="blank">@'+e+"</a>",!1===n.global_stats&&(t.style.minHeight="175px"),n.proxy=n.proxy||function(t){return"https://urlreq.appspot.com/req?method=GET&url="+t},function a(){return fetch(n.proxy("https://github.com/"+e)).then(function(t){return t.text()}).then(function(e){var l=document.createElement("div");l.innerHTML=e;var c=l.querySelector(".js-yearly-contributions");if(r(".position-relative h2",c).remove(),c.querySelector(".float-left.text-gray").innerHTML=n.summary_text,c.querySelector("include-fragment"))setTimeout(a,500);else{if(!0===n.responsive){var h=c.querySelector("svg.js-calendar-graph-svg"),u=h.getAttribute("width"),d=h.getAttribute("height");h.removeAttribute("height"),h.setAttribute("width","100%"),h.setAttribute("viewBox","0 0 "+u+" "+d)}if(!1!==n.global_stats){var p=i(r("svg",c).outerHTML),f=p.current_streak?o(p.current_streak_range[0],"MMMM D")+" &ndash; "+o(p.current_streak_range[1],"MMMM D"):p.last_contributed?"Last contributed in "+o(p.last_contributed,"MMMM D")+".":"Rock - Hard Place",m=p.longest_streak?o(p.longest_streak_range[0],"MMMM D")+" &ndash; "+o(p.longest_streak_range[1],"MMMM D"):p.last_contributed?"Last contributed in "+o(p.last_contributed,"MMMM D")+".":"Rock - Hard Place",g=r("<div>",{class:"contrib-column contrib-column-first table-column",html:'<span class="text-muted">Contributions in the last year</span>\n                               <span class="contrib-number">'+p.last_year+' total</span>\n                               <span class="text-muted">'+o(s.subtract(new Date,1,"year"),"MMM D, YYYY")+" &ndash; "+o(new Date,"MMM D, YYYY")+"</span>"}),v=r("<div>",{class:"contrib-column table-column",html:'<span class="text-muted">Longest streak</span>\n                               <span class="contrib-number">'+p.longest_streak+' days</span>\n                               <span class="text-muted">'+m+"</span>"}),y=r("<div>",{class:"contrib-column table-column",html:'<span class="text-muted">Current streak</span>\n                               <span class="contrib-number">'+p.current_streak+' days</span>\n                               <span class="text-muted">'+f+"</span>"});c.appendChild(g),c.appendChild(v),c.appendChild(y)}t.innerHTML=c.innerHTML}}).catch(function(t){return console.error(t)})}()}},CKw4:function(t,e){t.exports=function(t,e,n){var i=[],r=t.length;if(0===r)return i;var s=e<0?Math.max(0,e+r):e||0;for(void 0!==n&&(r=n<0?n+r:n);r-- >s;)i[r-s]=t[r];return i}},EQhZ:function(t,e,n){var i,r,s;!function(n,o){"use strict";r=[],void 0===(s="function"==typeof(i=function(){var t={wrapper:"#luxy",targets:".luxy-el",wrapperSpeed:.08,targetSpeed:.02,targetPercentage:.1},e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=e;var n=window.cancelAnimationFrame||window.mozCancelAnimationFrame,i=function(){this.Targets=[],this.TargetsLength=0,this.wrapper="",this.windowHeight=0,this.wapperOffset=0};return i.prototype={isAnimate:!1,isResize:!1,scrollId:"",resizeId:"",init:function(e){if(this.settings=function(){for(var t={},e=0,n=arguments.length;e<n;e++){var i=arguments[e];!function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(i)}return t}(t,e||{}),this.wrapper=document.querySelector(this.settings.wrapper),"undefined"===this.wrapper)return!1;this.targets=document.querySelectorAll(this.settings.targets),document.body.style.height=this.wrapper.clientHeight+"px",this.windowHeight=window.clientHeight,this.attachEvent(),this.apply(this.targets,this.wrapper),this.animate(),this.resize()},apply:function(t,e){this.wrapperInit(),this.targetsLength=t.length;for(var n=0;n<this.targetsLength;n++){var i={offset:t[n].getAttribute("data-offset"),speedX:t[n].getAttribute("data-speed-x"),speedY:t[n].getAttribute("data-speed-Y"),percentage:t[n].getAttribute("data-percentage"),horizontal:t[n].getAttribute("data-horizontal")};this.targetsInit(t[n],i)}},wrapperInit:function(){this.wrapper.style.width="100%",this.wrapper.style.position="fixed"},targetsInit:function(t,e){this.Targets.push({elm:t,offset:e.offset?e.offset:0,horizontal:e.horizontal?e.horizontal:0,top:0,left:0,speedX:e.speedX?e.speedX:1,speedY:e.speedY?e.speedY:1,percentage:e.percentage?e.percentage:0})},scroll:function(){document.documentElement.scrollTop||document,this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop,this.wrapperUpdate(this.scrollTop);for(var t=0;t<this.Targets.length;t++)this.targetsUpdate(this.Targets[t])},animate:function(){this.scroll(),this.scrollId=e(this.animate.bind(this))},wrapperUpdate:function(){this.wapperOffset+=(this.scrollTop-this.wapperOffset)*this.settings.wrapperSpeed,this.wrapper.style.transform="translate3d(0,"+Math.round(100*-this.wapperOffset)/100+"px ,0)"},targetsUpdate:function(t){t.top+=(this.scrollTop*Number(this.settings.targetSpeed)*Number(t.speedY)-t.top)*this.settings.targetPercentage,t.left+=(this.scrollTop*Number(this.settings.targetSpeed)*Number(t.speedX)-t.left)*this.settings.targetPercentage;var e=parseInt(t.percentage)-t.top-parseInt(t.offset),n=Math.round(-100*e)/100,i=0;if(t.horizontal){var r=parseInt(t.percentage)-t.left-parseInt(t.offset);i=Math.round(-100*r)/100}t.elm.style.transform="translate3d("+i+"px ,"+n+"px ,0)"},resize:function(){var t=this;t.windowHeight=window.innerHeight||document.documentElement.clientHeight||0,parseInt(t.wrapper.clientHeight)!=parseInt(document.body.style.height)&&(document.body.style.height=t.wrapper.clientHeight+"px"),t.resizeId=e(t.resize.bind(t))},attachEvent:function(){var t=this;window.addEventListener("resize",function(){t.isResize||(n(t.resizeId),n(t.scrollId),t.isResize=!0,setTimeout(function(){t.isResize=!1,t.resizeId=e(t.resize.bind(t)),t.scrollId=e(t.animate.bind(t))},200))})}},new i})?i.apply(e,r):i)||(t.exports=s)}()},EVdn:function(t,n,i){var r;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(i,s){"use strict";var o=[],a=i.document,l=Object.getPrototypeOf,c=o.slice,h=o.concat,u=o.push,d=o.indexOf,p={},f=p.toString,m=p.hasOwnProperty,g=m.toString,v=g.call(Object),y={},_=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},b=function(t){return null!=t&&t===t.window},x={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var i,r,s=(n=n||a).createElement("script");if(s.text=t,e)for(i in x)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function A(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?p[f.call(t)]||"object":typeof t}var E=function(t,e){return new E.fn.init(t,e)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function M(t){var e=!!t&&"length"in t&&t.length,n=A(t);return!_(t)&&!b(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}E.fn=E.prototype={jquery:"3.4.1",constructor:E,length:0,toArray:function(){return c.call(this)},get:function(t){return null==t?c.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},E.extend=E.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||_(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(c&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[e],s=r&&!Array.isArray(n)?[]:r||E.isPlainObject(n)?n:{},r=!1,o[e]=E.extend(c,s,i)):void 0!==i&&(o[e]=i));return o},E.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t)||(e=l(t))&&("function"!=typeof(n=m.call(e,"constructor")&&e.constructor)||g.call(n)!==v))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){w(t,{nonce:e&&e.nonce})},each:function(t,e){var n,i=0;if(M(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(S,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(M(Object(t))?E.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:d.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,o=!n;r<s;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,o=[];if(M(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&o.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&o.push(r);return h.apply([],o)},guid:1,support:y}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=o[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){p["[object "+e+"]"]=e.toLowerCase()});var T=function(t){var n,i,r,s,o,a,l,c,h,u,d,p,f,m,g,v,y,_,b,x="sizzle"+1*new Date,w=t.document,A=0,E=0,S=ct(),M=ct(),T=ct(),C=ct(),L=function(t,e){return t===e&&(d=!0),0},P={}.hasOwnProperty,R=[],O=R.pop,I=R.push,D=R.push,k=R.slice,N=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",z="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\["+F+"*("+z+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+F+"*\\]",j=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",H=new RegExp(F+"+","g"),V=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),G=new RegExp("^"+F+"*,"+F+"*"),W=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),q=new RegExp(F+"|>"),X=new RegExp(j),Y=new RegExp("^"+z+"$"),Q={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,tt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),it=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,st=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){p()},at=xt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{D.apply(R=k.call(w.childNodes),w.childNodes)}catch(e){D={apply:R.length?function(t,e){I.apply(t,k.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function lt(t,e,n,r){var s,o,l,h,u,d,m,y=e&&e.ownerDocument,_=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==_&&9!==_&&11!==_)return n;if(!r&&((e?e.ownerDocument||e:w)!==f&&p(e),e=e||f,g)){if(11!==_&&(u=tt.exec(t)))if(s=u[1]){if(9===_){if(!(l=e.getElementById(s)))return n;if(l.id===s)return n.push(l),n}else if(y&&(l=y.getElementById(s))&&b(e,l)&&l.id===s)return n.push(l),n}else{if(u[2])return D.apply(n,e.getElementsByTagName(t)),n;if((s=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return D.apply(n,e.getElementsByClassName(s)),n}if(i.qsa&&!C[t+" "]&&(!v||!v.test(t))&&(1!==_||"object"!==e.nodeName.toLowerCase())){if(m=t,y=e,1===_&&q.test(t)){for((h=e.getAttribute("id"))?h=h.replace(rt,st):e.setAttribute("id",h=x),o=(d=a(t)).length;o--;)d[o]="#"+h+" "+bt(d[o]);m=d.join(","),y=et.test(t)&&yt(e.parentNode)||e}try{return D.apply(n,y.querySelectorAll(m)),n}catch(A){C(t,!0)}finally{h===x&&e.removeAttribute("id")}}}return c(t.replace(V,"$1"),e,n,r)}function ct(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ht(t){return t[x]=!0,t}function ut(t){var n=f.createElement("fieldset");try{return!!t(n)}catch(e){return!1}finally{n.parentNode&&n.parentNode.removeChild(n),n=null}}function dt(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function pt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function mt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function vt(t){return ht(function(e){return e=+e,ht(function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function yt(t){return t&&void 0!==t.getElementsByTagName&&t}for(n in i=lt.support={},o=lt.isXML=function(t){var e=(t.ownerDocument||t).documentElement;return!Z.test(t.namespaceURI||e&&e.nodeName||"HTML")},p=lt.setDocument=function(t){var e,n,s=t?t.ownerDocument||t:w;return s!==f&&9===s.nodeType&&s.documentElement?(m=(f=s).documentElement,g=!o(f),w!==f&&(n=f.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ot,!1):n.attachEvent&&n.attachEvent("onunload",ot)),i.attributes=ut(function(t){return t.className="i",!t.getAttribute("className")}),i.getElementsByTagName=ut(function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length}),i.getElementsByClassName=$.test(f.getElementsByClassName),i.getById=ut(function(t){return m.appendChild(t).id=x,!f.getElementsByName||!f.getElementsByName(x).length}),i.getById?(r.filter.ID=function(t){var e=t.replace(nt,it);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(nt,it);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),r.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},r.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},y=[],v=[],(i.qsa=$.test(f.querySelectorAll))&&(ut(function(t){m.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+F+"*(?:value|"+B+")"),t.querySelectorAll("[id~="+x+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||v.push(".#.+[+~]")}),ut(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),m.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(i.matchesSelector=$.test(_=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&ut(function(t){i.disconnectedMatch=_.call(t,"*"),_.call(t,"[s!='']:x"),y.push("!=",j)}),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),e=$.test(m.compareDocumentPosition),b=e||$.test(m.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},L=e?function(t,e){if(t===e)return d=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===f||t.ownerDocument===w&&b(w,t)?-1:e===f||e.ownerDocument===w&&b(w,e)?1:u?N(u,t)-N(u,e):0:4&n?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,i=0,r=t.parentNode,s=e.parentNode,o=[t],a=[e];if(!r||!s)return t===f?-1:e===f?1:r?-1:s?1:u?N(u,t)-N(u,e):0;if(r===s)return pt(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;o[i]===a[i];)i++;return i?pt(o[i],a[i]):o[i]===w?-1:a[i]===w?1:0},f):f},lt.matches=function(t,e){return lt(t,null,null,e)},lt.matchesSelector=function(t,n){if((t.ownerDocument||t)!==f&&p(t),i.matchesSelector&&g&&!C[n+" "]&&(!y||!y.test(n))&&(!v||!v.test(n)))try{var r=_.call(t,n);if(r||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(e){C(n,!0)}return lt(n,f,null,[t]).length>0},lt.contains=function(t,e){return(t.ownerDocument||t)!==f&&p(t),b(t,e)},lt.attr=function(t,e){(t.ownerDocument||t)!==f&&p(t);var n=r.attrHandle[e.toLowerCase()],s=n&&P.call(r.attrHandle,e.toLowerCase())?n(t,e,!g):void 0;return void 0!==s?s:i.attributes||!g?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},lt.escape=function(t){return(t+"").replace(rt,st)},lt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},lt.uniqueSort=function(t){var e,n=[],r=0,s=0;if(d=!i.detectDuplicates,u=!i.sortStable&&t.slice(0),t.sort(L),d){for(;e=t[s++];)e===t[s]&&(r=n.push(s));for(;r--;)t.splice(n[r],1)}return u=null,t},s=lt.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=s(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=s(e);return n},(r=lt.selectors={cacheLength:50,createPseudo:ht,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(nt,it),t[3]=(t[3]||t[4]||t[5]||"").replace(nt,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||lt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&lt.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&X.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(nt,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&S(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=lt.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(H," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,h,u,d,p,f,m=s!==o?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,_=!1;if(g){if(s){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(_=(p=(c=(h=(u=(d=g)[x]||(d[x]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===A&&c[1])&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(_=p=0)||f.pop();)if(1===d.nodeType&&++_&&d===e){h[t]=[A,p,_];break}}else if(y&&(_=p=(c=(h=(u=(d=e)[x]||(d[x]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===A&&c[1]),!1===_)for(;(d=++p&&d&&d[m]||(_=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++_||(y&&((h=(u=d[x]||(d[x]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]=[A,_]),d!==e)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||lt.error("unsupported pseudo: "+t);return i[x]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ht(function(t,n){for(var r,s=i(t,e),o=s.length;o--;)t[r=N(t,s[o])]=!(n[r]=s[o])}):function(t){return i(t,0,n)}):i}},pseudos:{not:ht(function(t){var e=[],n=[],i=l(t.replace(V,"$1"));return i[x]?ht(function(t,e,n,r){for(var s,o=i(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,r,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}}),has:ht(function(t){return function(e){return lt(t,e).length>0}}),contains:ht(function(t){return t=t.replace(nt,it),function(e){return(e.textContent||s(e)).indexOf(t)>-1}}),lang:ht(function(t){return Y.test(t||"")||lt.error("unsupported lang: "+t),t=t.replace(nt,it).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===m},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt(function(){return[0]}),last:vt(function(t,e){return[e-1]}),eq:vt(function(t,e,n){return[n<0?n+e:n]}),even:vt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:vt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:vt(function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t}),gt:vt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})r.pseudos[n]=mt(n);function _t(){}function bt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function xt(t,e,n){var i=e.dir,r=e.next,s=r||i,o=n&&"parentNode"===s,a=E++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,l){var c,h,u,d=[A,a];if(l){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(h=(u=e[x]||(e[x]={}))[e.uniqueID]||(u[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=h[s])&&c[0]===A&&c[1]===a)return d[2]=c[2];if(h[s]=d,d[2]=t(e,n,l))return!0}return!1}}function wt(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function At(t,e,n,i,r){for(var s,o=[],a=0,l=t.length,c=null!=e;a<l;a++)(s=t[a])&&(n&&!n(s,i,r)||(o.push(s),c&&e.push(a)));return o}function Et(t,e,n,i,r,s){return i&&!i[x]&&(i=Et(i)),r&&!r[x]&&(r=Et(r,s)),ht(function(s,o,a,l){var c,h,u,d=[],p=[],f=o.length,m=s||function(t,e,n){for(var i=0,r=e.length;i<r;i++)lt(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),g=!t||!s&&e?m:At(m,d,t,a,l),v=n?r||(s?t:f||i)?[]:o:g;if(n&&n(g,v,a,l),i)for(c=At(v,p),i(c,[],a,l),h=c.length;h--;)(u=c[h])&&(v[p[h]]=!(g[p[h]]=u));if(s){if(r||t){if(r){for(c=[],h=v.length;h--;)(u=v[h])&&c.push(g[h]=u);r(null,v=[],c,l)}for(h=v.length;h--;)(u=v[h])&&(c=r?N(s,u):d[h])>-1&&(s[c]=!(o[c]=u))}}else v=At(v===o?v.splice(f,v.length):v),r?r(null,o,v,l):D.apply(o,v)})}function St(t){for(var e,n,i,s=t.length,o=r.relative[t[0].type],a=o||r.relative[" "],l=o?1:0,c=xt(function(t){return t===e},a,!0),u=xt(function(t){return N(e,t)>-1},a,!0),d=[function(t,n,i){var r=!o&&(i||n!==h)||((e=n).nodeType?c(t,n,i):u(t,n,i));return e=null,r}];l<s;l++)if(n=r.relative[t[l].type])d=[xt(wt(d),n)];else{if((n=r.filter[t[l].type].apply(null,t[l].matches))[x]){for(i=++l;i<s&&!r.relative[t[i].type];i++);return Et(l>1&&wt(d),l>1&&bt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(V,"$1"),n,l<i&&St(t.slice(l,i)),i<s&&St(t=t.slice(i)),i<s&&bt(t))}d.push(n)}return wt(d)}return _t.prototype=r.filters=r.pseudos,r.setFilters=new _t,a=lt.tokenize=function(t,e){var n,i,s,o,a,l,c,h=M[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],c=r.preFilter;a;){for(o in n&&!(i=G.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(s=[])),n=!1,(i=W.exec(a))&&(n=i.shift(),s.push({value:n,type:i[0].replace(V," ")}),a=a.slice(n.length)),r.filter)!(i=Q[o].exec(a))||c[o]&&!(i=c[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?lt.error(t):M(t,l).slice(0)},l=lt.compile=function(t,e){var n,i=[],s=[],o=T[t+" "];if(!o){for(e||(e=a(t)),n=e.length;n--;)(o=St(e[n]))[x]?i.push(o):s.push(o);(o=T(t,function(t,e){var n=e.length>0,i=t.length>0,s=function(s,o,a,l,c){var u,d,m,v=0,y="0",_=s&&[],b=[],x=h,w=s||i&&r.find.TAG("*",c),E=A+=null==x?1:Math.random()||.1,S=w.length;for(c&&(h=o===f||o||c);y!==S&&null!=(u=w[y]);y++){if(i&&u){for(d=0,o||u.ownerDocument===f||(p(u),a=!g);m=t[d++];)if(m(u,o||f,a)){l.push(u);break}c&&(A=E)}n&&((u=!m&&u)&&v--,s&&_.push(u))}if(v+=y,n&&y!==v){for(d=0;m=e[d++];)m(_,b,o,a);if(s){if(v>0)for(;y--;)_[y]||b[y]||(b[y]=O.call(l));b=At(b)}D.apply(l,b),c&&!s&&b.length>0&&v+e.length>1&&lt.uniqueSort(l)}return c&&(A=E,h=x),_};return n?ht(s):s}(s,i))).selector=t}return o},c=lt.select=function(t,e,n,i){var s,o,c,h,u,d="function"==typeof t&&t,p=!i&&a(t=d.selector||t);if(n=n||[],1===p.length){if((o=p[0]=p[0].slice(0)).length>2&&"ID"===(c=o[0]).type&&9===e.nodeType&&g&&r.relative[o[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(nt,it),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=Q.needsContext.test(t)?0:o.length;s--&&!r.relative[h=(c=o[s]).type];)if((u=r.find[h])&&(i=u(c.matches[0].replace(nt,it),et.test(o[0].type)&&yt(e.parentNode)||e))){if(o.splice(s,1),!(t=i.length&&bt(o)))return D.apply(n,i),n;break}}return(d||l(t,p))(i,e,!g,n,!e||et.test(t)&&yt(e.parentNode)||e),n},i.sortStable=x.split("").sort(L).join("")===x,i.detectDuplicates=!!d,p(),i.sortDetached=ut(function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))}),ut(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||dt("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),i.attributes&&ut(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||dt("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ut(function(t){return null==t.getAttribute("disabled")})||dt(B,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),lt}(i);E.find=T,E.expr=T.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=T.uniqueSort,E.text=T.getText,E.isXMLDoc=T.isXML,E.contains=T.contains,E.escapeSelector=T.escape;var C=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&E(t).is(n))break;i.push(t)}return i},L=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},P=E.expr.match.needsContext;function R(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(t,e,n){return _(e)?E.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?E.grep(t,function(t){return t===e!==n}):"string"!=typeof e?E.grep(t,function(t){return d.call(e,t)>-1!==n}):E.filter(e,t,n)}E.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?E.find.matchesSelector(i,t)?[i]:[]:E.find.matches(t,E.grep(e,function(t){return 1===t.nodeType}))},E.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(E(t).filter(function(){for(e=0;e<i;e++)if(E.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)E.find(t,r[e],n);return i>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(I(this,t||[],!1))},not:function(t){return this.pushStack(I(this,t||[],!0))},is:function(t){return!!I(this,"string"==typeof t&&P.test(t)?E(t):t||[],!1).length}});var D,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||D,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:k.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(E.merge(this,E.parseHTML(i[1],(e=e instanceof E?e[0]:e)&&e.nodeType?e.ownerDocument||e:a,!0)),O.test(i[1])&&E.isPlainObject(e))for(i in e)_(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=a.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):_(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,D=E(a);var N=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function F(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,s=[],o="string"!=typeof t&&E(t);if(!P.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?E.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?d.call(E(t),this[0]):d.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C(t,"parentNode")},parentsUntil:function(t,e,n){return C(t,"parentNode",n)},next:function(t){return F(t,"nextSibling")},prev:function(t){return F(t,"previousSibling")},nextAll:function(t){return C(t,"nextSibling")},prevAll:function(t){return C(t,"previousSibling")},nextUntil:function(t,e,n){return C(t,"nextSibling",n)},prevUntil:function(t,e,n){return C(t,"previousSibling",n)},siblings:function(t){return L((t.parentNode||{}).firstChild,t)},children:function(t){return L(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(R(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},function(t,e){E.fn[t]=function(n,i){var r=E.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=E.filter(i,r)),this.length>1&&(B[t]||E.uniqueSort(r),N.test(t)&&r.reverse()),this.pushStack(r)}});var z=/[^\x20\t\r\n\f]+/g;function U(t){return t}function j(t){throw t}function H(t,e,n,i){var r;try{t&&_(r=t.promise)?r.call(t).done(e).fail(n):t&&_(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(z)||[],function(t,n){e[n]=!0}),e}(t):E.extend({},t);var e,n,i,r,s=[],o=[],a=-1,l=function(){for(r=r||t.once,i=e=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},c={add:function(){return s&&(n&&!e&&(a=s.length-1,o.push(n)),function e(n){E.each(n,function(n,i){_(i)?t.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==A(i)&&e(i)})}(arguments),n&&!e&&l()),this},remove:function(){return E.each(arguments,function(t,e){for(var n;(n=E.inArray(e,s,n))>-1;)s.splice(n,1),n<=a&&a--}),this},has:function(t){return t?E.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||e||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},E.extend({Deferred:function(t){var n=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],r="pending",s={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var t=arguments;return E.Deferred(function(e){E.each(n,function(n,i){var r=_(t[i[4]])&&t[i[4]];o[i[1]](function(){var t=r&&r.apply(this,arguments);t&&_(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(t,r,s){var o=0;function a(t,n,r,s){return function(){var l=this,c=arguments,h=function(){var e,i;if(!(t<o)){if((e=r.apply(l,c))===n.promise())throw new TypeError("Thenable self-resolution");_(i=e&&("object"==typeof e||"function"==typeof e)&&e.then)?s?i.call(e,a(o,n,U,s),a(o,n,j,s)):i.call(e,a(++o,n,U,s),a(o,n,j,s),a(o,n,U,n.notifyWith)):(r!==U&&(l=void 0,c=[e]),(s||n.resolveWith)(l,c))}},u=s?h:function(){try{h()}catch(e){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(e,u.stackTrace),t+1>=o&&(r!==j&&(l=void 0,c=[e]),n.rejectWith(l,c))}};t?u():(E.Deferred.getStackHook&&(u.stackTrace=E.Deferred.getStackHook()),i.setTimeout(u))}}return E.Deferred(function(e){n[0][3].add(a(0,e,_(s)?s:U,e.notifyWith)),n[1][3].add(a(0,e,_(t)?t:U)),n[2][3].add(a(0,e,_(r)?r:j))}).promise()},promise:function(t){return null!=t?E.extend(t,s):s}},o={};return E.each(n,function(t,e){var i=e[2],a=e[5];s[e[1]]=i.add,a&&i.add(function(){r=a},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),i.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=i.fireWith}),s.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=c.call(arguments),s=E.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?c.call(arguments):n,--e||s.resolveWith(i,r)}};if(e<=1&&(H(t,s.done(o(n)).resolve,s.reject,!e),"pending"===s.state()||_(r[n]&&r[n].then)))return s.then();for(;n--;)H(r[n],o(n),s.reject);return s.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&V.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){i.setTimeout(function(){throw t})};var G=E.Deferred();function W(){a.removeEventListener("DOMContentLoaded",W),i.removeEventListener("load",W),E.ready()}E.fn.ready=function(t){return G.then(t).catch(function(t){E.readyException(t)}),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||G.resolveWith(a,[E]))}}),E.ready.then=G.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?i.setTimeout(E.ready):(a.addEventListener("DOMContentLoaded",W),i.addEventListener("load",W));var q=function(t,e,n,i,r,s,o){var a=0,l=t.length,c=null==n;if("object"===A(n))for(a in r=!0,n)q(t,e,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,_(i)||(o=!0),c&&(o?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(E(t),n)})),e))for(;a<l;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:c?e.call(t):l?e(t[0],n):s},X=/^-ms-/,Y=/-([a-z])/g;function Q(t,e){return e.toUpperCase()}function Z(t){return t.replace(X,"ms-").replace(Y,Q)}var K=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function J(){this.expando=E.expando+J.uid++}J.uid=1,J.prototype={cache:function(t){var e=t[this.expando];return e||(e={},K(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[Z(e)]=n;else for(i in e)r[Z(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Z(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Z):(e=Z(e))in i?[e]:e.match(z)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||E.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var $=new J,tt=new J,et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,nt=/[A-Z]/g;function it(t,n,i){var r;if(void 0===i&&1===t.nodeType)if(r="data-"+n.replace(nt,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(r))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:et.test(t)?JSON.parse(t):t)}(i)}catch(e){}tt.set(t,n,i)}else i=void 0;return i}E.extend({hasData:function(t){return tt.hasData(t)||$.hasData(t)},data:function(t,e,n){return tt.access(t,e,n)},removeData:function(t,e){tt.remove(t,e)},_data:function(t,e,n){return $.access(t,e,n)},_removeData:function(t,e){$.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=tt.get(s),1===s.nodeType&&!$.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=Z(i.slice(5)),it(s,i,r[i]));$.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){tt.set(this,t)}):q(this,function(e){var n;if(s&&void 0===e)return void 0!==(n=tt.get(s,t))?n:void 0!==(n=it(s,t))?n:void 0;this.each(function(){tt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){tt.remove(this,t)})}}),E.extend({queue:function(t,e,n){var i;if(t)return i=$.get(t,e=(e||"fx")+"queue"),n&&(!i||Array.isArray(n)?i=$.access(t,e,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){var n=E.queue(t,e=e||"fx"),i=n.length,r=n.shift(),s=E._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,function(){E.dequeue(t,e)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return $.get(t,n)||$.access(t,n,{empty:E.Callbacks("once memory").add(function(){$.remove(t,[e+"queue",n])})})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each(function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)})},dequeue:function(t){return this.each(function(){E.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=E.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=$.get(s[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,st=new RegExp("^(?:([+-])=|)("+rt+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],at=a.documentElement,lt=function(t){return E.contains(t.ownerDocument,t)},ct={composed:!0};at.getRootNode&&(lt=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(ct)===t.ownerDocument});var ht=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&lt(t)&&"none"===E.css(t,"display")},ut=function(t,e,n,i){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];for(s in r=n.apply(t,i||[]),e)t.style[s]=o[s];return r};function dt(t,e,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return E.css(t,e,"")},l=a(),c=n&&n[3]||(E.cssNumber[e]?"":"px"),h=t.nodeType&&(E.cssNumber[e]||"px"!==c&&+l)&&st.exec(E.css(t,e));if(h&&h[3]!==c){for(c=c||h[3],h=+(l/=2)||1;o--;)E.style(t,e,h+c),(1-s)*(1-(s=a()/l||.5))<=0&&(o=0),h/=s;E.style(t,e,(h*=2)+c),n=n||[]}return n&&(h=+h||+l||0,r=n[1]?h+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=h,i.end=r)),r}var pt={};function ft(t){var e,n=t.ownerDocument,i=t.nodeName,r=pt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=E.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),pt[i]=r,r)}function mt(t,e){for(var n,i,r=[],s=0,o=t.length;s<o;s++)(i=t[s]).style&&(n=i.style.display,e?("none"===n&&(r[s]=$.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&ht(i)&&(r[s]=ft(i))):"none"!==n&&(r[s]="none",$.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}E.fn.extend({show:function(){return mt(this,!0)},hide:function(){return mt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ht(this)?E(this).show():E(this).hide()})}});var gt=/^(?:checkbox|radio)$/i,vt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yt=/^$|^module$|\/(?:java|ecma)script/i,_t={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&R(t,e)?E.merge([t],n):n}function xt(t,e){for(var n=0,i=t.length;n<i;n++)$.set(t[n],"globalEval",!e||$.get(e[n],"globalEval"))}_t.optgroup=_t.option,_t.tbody=_t.tfoot=_t.colgroup=_t.caption=_t.thead,_t.th=_t.td;var wt,At,Et=/<|&#?\w+;/;function St(t,e,n,i,r){for(var s,o,a,l,c,h,u=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((s=t[p])||0===s)if("object"===A(s))E.merge(d,s.nodeType?[s]:s);else if(Et.test(s)){for(o=o||u.appendChild(e.createElement("div")),a=(vt.exec(s)||["",""])[1].toLowerCase(),o.innerHTML=(l=_t[a]||_t._default)[1]+E.htmlPrefilter(s)+l[2],h=l[0];h--;)o=o.lastChild;E.merge(d,o.childNodes),(o=u.firstChild).textContent=""}else d.push(e.createTextNode(s));for(u.textContent="",p=0;s=d[p++];)if(i&&E.inArray(s,i)>-1)r&&r.push(s);else if(c=lt(s),o=bt(u.appendChild(s),"script"),c&&xt(o),n)for(h=0;s=o[h++];)yt.test(s.type||"")&&n.push(s);return u}wt=a.createDocumentFragment().appendChild(a.createElement("div")),(At=a.createElement("input")).setAttribute("type","radio"),At.setAttribute("checked","checked"),At.setAttribute("name","t"),wt.appendChild(At),y.checkClone=wt.cloneNode(!0).cloneNode(!0).lastChild.checked,wt.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!wt.cloneNode(!0).lastChild.defaultValue;var Mt=/^key/,Tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ct=/^([^.]*)(?:\.(.+)|)/;function Lt(){return!0}function Pt(){return!1}function Rt(t,e){return t===function(){try{return a.activeElement}catch(t){}}()==("focus"===e)}function Ot(t,e,n,i,r,s){var o,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)Ot(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Pt;else if(!r)return t;return 1===s&&(o=r,(r=function(t){return E().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=E.guid++)),t.each(function(){E.event.add(this,e,r,i,n)})}function It(t,e,n){n?($.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var i,r,s=$.get(this,e);if(1&t.isTrigger&&this[e]){if(s.length)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(s=c.call(arguments),$.set(this,e,s),i=n(this,e),this[e](),s!==(r=$.get(this,e))||i?$.set(this,e,!1):r={},s!==r)return t.stopImmediatePropagation(),t.preventDefault(),r.value}else s.length&&($.set(this,e,{value:E.event.trigger(E.extend(s[0],E.Event.prototype),s.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===$.get(t,e)&&E.event.add(t,e,Lt)}E.event={global:{},add:function(t,e,n,i,r){var s,o,a,l,c,h,u,d,p,f,m,g=$.get(t);if(g)for(n.handler&&(n=(s=n).handler,r=s.selector),r&&E.find.matchesSelector(at,r),n.guid||(n.guid=E.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(z)||[""]).length;c--;)p=m=(a=Ct.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(u=E.event.special[p]||{},u=E.event.special[p=(r?u.delegateType:u.bindType)||p]||{},h=E.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,i,f,o)||t.addEventListener&&t.addEventListener(p,o)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),E.event.global[p]=!0)},remove:function(t,e,n,i,r){var s,o,a,l,c,h,u,d,p,f,m,g=$.hasData(t)&&$.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(z)||[""]).length;c--;)if(p=m=(a=Ct.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(u=E.event.special[p]||{},d=l[p=(i?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)h=d[s],!r&&m!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||i&&i!==h.selector&&("**"!==i||!h.selector)||(d.splice(s,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));o&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||E.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)E.event.remove(t,p+e[c],n,i,!0);E.isEmptyObject(l)&&$.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,o,a=E.event.fix(t),l=new Array(arguments.length),c=($.get(this,"events")||{})[a.type]||[],h=E.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(o=E.event.handlers.call(this,a,c),e=0;(r=o[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==s.namespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(i=((E.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,r,s,o,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(s=[],o={},n=0;n<l;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?E(r,this).index(c)>-1:E.find(r,this,null,[c]).length),o[r]&&s.push(i);s.length&&a.push({elem:c,handlers:s})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:_(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&R(e,"input")&&It(e,"click",Lt),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&R(e,"input")&&It(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&R(e,"input")&&$.get(e,"click")||R(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Lt:Pt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Pt,isPropagationStopped:Pt,isImmediatePropagationStopped:Pt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Lt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Lt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Lt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Mt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Tt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},function(t,e){E.event.special[t]={setup:function(){return It(this,t,Rt),!1},trigger:function(){return It(this,t),!0},delegateType:e}}),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return r&&(r===i||E.contains(i,r))||(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),E.fn.extend({on:function(t,e,n,i){return Ot(this,t,e,n,i)},one:function(t,e,n,i){return Ot(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Pt),this.each(function(){E.event.remove(this,t,n,e)})}});var Dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,kt=/<script|<style|<link/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ft(t,e){return R(t,"table")&&R(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function zt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ut(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function jt(t,e){var n,i,r,s,o,a,l,c;if(1===e.nodeType){if($.hasData(t)&&(s=$.access(t),o=$.set(e,s),c=s.events))for(r in delete o.handle,o.events={},c)for(n=0,i=c[r].length;n<i;n++)E.event.add(e,r,c[r][n]);tt.hasData(t)&&(a=tt.access(t),l=E.extend({},a),tt.set(e,l))}}function Ht(t,e){var n=e.nodeName.toLowerCase();"input"===n&&gt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Vt(t,e,n,i){e=h.apply([],e);var r,s,o,a,l,c,u=0,d=t.length,p=d-1,f=e[0],m=_(f);if(m||d>1&&"string"==typeof f&&!y.checkClone&&Nt.test(f))return t.each(function(r){var s=t.eq(r);m&&(e[0]=f.call(this,r,s.html())),Vt(s,e,n,i)});if(d&&(s=(r=St(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=(o=E.map(bt(r,"script"),zt)).length;u<d;u++)l=r,u!==p&&(l=E.clone(l,!0,!0),a&&E.merge(o,bt(l,"script"))),n.call(t[u],l,u);if(a)for(c=o[o.length-1].ownerDocument,E.map(o,Ut),u=0;u<a;u++)yt.test((l=o[u]).type||"")&&!$.access(l,"globalEval")&&E.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&!l.noModule&&E._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):w(l.textContent.replace(Bt,""),l,c))}return t}function Gt(t,e,n){for(var i,r=e?E.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||E.cleanData(bt(i)),i.parentNode&&(n&&lt(i)&&xt(bt(i,"script")),i.parentNode.removeChild(i));return t}E.extend({htmlPrefilter:function(t){return t.replace(Dt,"<$1></$2>")},clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),l=lt(t);if(!(y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(o=bt(a),i=0,r=(s=bt(t)).length;i<r;i++)Ht(s[i],o[i]);if(e)if(n)for(s=s||bt(t),o=o||bt(a),i=0,r=s.length;i<r;i++)jt(s[i],o[i]);else jt(t,a);return(o=bt(a,"script")).length>0&&xt(o,!l&&bt(t,"script")),a},cleanData:function(t){for(var e,n,i,r=E.event.special,s=0;void 0!==(n=t[s]);s++)if(K(n)){if(e=n[$.expando]){if(e.events)for(i in e.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,e.handle);n[$.expando]=void 0}n[tt.expando]&&(n[tt.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Gt(this,t,!0)},remove:function(t){return Gt(this,t)},text:function(t){return q(this,function(t){return void 0===t?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Vt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ft(this,t).appendChild(t)})},prepend:function(){return Vt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ft(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Vt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Vt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return E.clone(this,t,e)})},html:function(t){return q(this,function(t){var n=this[0]||{},i=0,r=this.length;if(void 0===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!kt.test(t)&&!_t[(vt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;i<r;i++)1===(n=this[i]||{}).nodeType&&(E.cleanData(bt(n,!1)),n.innerHTML=t);n=0}catch(e){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Vt(this,arguments,function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(bt(this)),n&&n.replaceChild(e,this))},t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){E.fn[t]=function(t){for(var n,i=[],r=E(t),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),E(r[o])[e](n),u.apply(i,n.get());return this.pushStack(i)}});var Wt=new RegExp("^("+rt+")(?!px)[a-z%]+$","i"),qt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Xt=new RegExp(ot.join("|"),"i");function Yt(t,e,n){var i,r,s,o,a=t.style;return(n=n||qt(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||lt(t)||(o=E.style(t,e)),!y.pixelBoxStyles()&&Wt.test(o)&&Xt.test(e)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function Qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(h){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(c).appendChild(h);var t=i.getComputedStyle(h);n="1%"!==t.top,l=12===e(t.marginLeft),h.style.right="60%",o=36===e(t.right),r=36===e(t.width),h.style.position="absolute",s=12===e(h.offsetWidth/3),at.removeChild(c),h=null}}function e(t){return Math.round(parseFloat(t))}var n,r,s,o,l,c=a.createElement("div"),h=a.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===h.style.backgroundClip,E.extend(y,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s}}))}();var Zt=["Webkit","Moz","ms"],Kt=a.createElement("div").style,Jt={};function $t(t){return E.cssProps[t]||Jt[t]||(t in Kt?t:Jt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Zt.length;n--;)if((t=Zt[n]+e)in Kt)return t}(t)||t)}var te=/^(none|table(?!-c[ea]).+)/,ee=/^--/,ne={position:"absolute",visibility:"hidden",display:"block"},ie={letterSpacing:"0",fontWeight:"400"};function re(t,e,n){var i=st.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function se(t,e,n,i,r,s){var o="width"===e?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=E.css(t,n+ot[o],!0,r)),i?("content"===n&&(l-=E.css(t,"padding"+ot[o],!0,r)),"margin"!==n&&(l-=E.css(t,"border"+ot[o]+"Width",!0,r))):(l+=E.css(t,"padding"+ot[o],!0,r),"padding"!==n?l+=E.css(t,"border"+ot[o]+"Width",!0,r):a+=E.css(t,"border"+ot[o]+"Width",!0,r));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-a-.5))||0),l}function oe(t,e,n){var i=qt(t),r=(!y.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,i),s=r,o=Yt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Wt.test(o)){if(!n)return o;o="auto"}return(!y.boxSizingReliable()&&r||"auto"===o||!parseFloat(o)&&"inline"===E.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===E.css(t,"boxSizing",!1,i),(s=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+se(t,e,n||(r?"border":"content"),s,i,o)+"px"}function ae(t,e,n,i,r){return new ae.prototype.init(t,e,n,i,r)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Yt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=Z(e),l=ee.test(e),c=t.style;if(l||(e=$t(a)),o=E.cssHooks[e]||E.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:c[e];"string"==(s=typeof n)&&(r=st.exec(n))&&r[1]&&(n=dt(t,e,r),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=r&&r[3]||(E.cssNumber[a]?"":"px")),y.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var r,s,o,a=Z(e);return ee.test(e)||(e=$t(a)),(o=E.cssHooks[e]||E.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=Yt(t,e,i)),"normal"===r&&e in ie&&(r=ie[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),E.each(["height","width"],function(t,e){E.cssHooks[e]={get:function(t,n,i){if(n)return!te.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?oe(t,e,i):ut(t,ne,function(){return oe(t,e,i)})},set:function(t,n,i){var r,s=qt(t),o=!y.scrollboxSize()&&"absolute"===s.position,a=(o||i)&&"border-box"===E.css(t,"boxSizing",!1,s),l=i?se(t,e,i,a,s):0;return a&&o&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-se(t,e,"border",!1,s)-.5)),l&&(r=st.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),re(0,n,l)}}}),E.cssHooks.marginLeft=Qt(y.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Yt(t,"marginLeft"))||t.getBoundingClientRect().left-ut(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(t,e){E.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+ot[i]+e]=s[i]||s[i-2]||s[0];return r}},"margin"!==t&&(E.cssHooks[t+e].set=re)}),E.fn.extend({css:function(t,e){return q(this,function(t,e,n){var i,r,s={},o=0;if(Array.isArray(e)){for(i=qt(t),r=e.length;o<r;o++)s[e[o]]=E.css(t,e[o],!1,i);return s}return void 0!==n?E.style(t,e,n):E.css(t,e)},t,e,arguments.length>1)}}),E.Tween=ae,(ae.prototype={constructor:ae,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(E.cssNumber[n]?"":"px")},cur:function(){var t=ae.propHooks[this.prop];return t&&t.get?t.get(this):ae.propHooks._default.get(this)},run:function(t){var e,n=ae.propHooks[this.prop];return this.pos=e=this.options.duration?E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ae.propHooks._default.set(this),this}}).init.prototype=ae.prototype,(ae.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[$t(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ae.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=ae.prototype.init,E.fx.step={};var le,ce,he=/^(?:toggle|show|hide)$/,ue=/queueHooks$/;function de(){ce&&(!1===a.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(de):i.setTimeout(de,E.fx.interval),E.fx.tick())}function pe(){return i.setTimeout(function(){le=void 0}),le=Date.now()}function fe(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=ot[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function me(t,e,n){for(var i,r=(ge.tweeners[e]||[]).concat(ge.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function ge(t,e,n){var i,r,s=0,o=ge.prefilters.length,a=E.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=le||pe(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),s=0,o=c.tweens.length;s<o;s++)c.tweens[s].run(i);return a.notifyWith(t,[c,i,n]),i<1&&o?n:(o||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:le||pe(),duration:n.duration,tweens:[],createTween:function(e,n){var i=E.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),h=c.props;for(function(t,e){var n,i,r,s,o;for(n in t)if(r=e[i=Z(n)],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=E.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(h,c.opts.specialEasing);s<o;s++)if(i=ge.prefilters[s].call(c,t,h,c.opts))return _(i.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return E.map(h,me,c),_(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(ge,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return dt(n.elem,t,st.exec(e),n),n}]},tweener:function(t,e){_(t)?(e=t,t=["*"]):t=t.match(z);for(var n,i=0,r=t.length;i<r;i++)(ge.tweeners[n=t[i]]=ge.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var i,r,s,o,a,l,c,h,u="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&ht(t),g=$.get(t,"fxshow");for(i in n.queue||(null==(o=E._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,E.queue(t,"fx").length||o.empty.fire()})})),e)if(he.test(r=e[i])){if(delete e[i],s=s||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||E.style(t,i)}if((l=!E.isEmptyObject(e))||!E.isEmptyObject(p))for(i in u&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=$.get(t,"display")),"none"===(h=E.css(t,"display"))&&(c?h=c:(mt([t],!0),c=t.style.display||c,h=E.css(t,"display"),mt([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===E.css(t,"float")&&(l||(d.done(function(){f.display=c}),null==c&&(c="none"===(h=f.display)?"":h)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=$.access(t,"fxshow",{display:c}),s&&(g.hidden=!m),m&&mt([t],!0),d.done(function(){for(i in m||mt([t]),$.remove(t,"fxshow"),p)E.style(t,i,p[i])})),l=me(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ge.prefilters.unshift(t):ge.prefilters.push(t)}}),E.speed=function(t,e,n){var i=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||_(t)&&t,duration:t,easing:n&&e||e&&!_(e)&&e};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration=i.duration in E.fx.speeds?E.fx.speeds[i.duration]:E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){_(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(ht).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=E.isEmptyObject(t),s=E.speed(e,n,i),o=function(){var e=ge(this,E.extend({},t),s);(r||$.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=E.timers,o=$.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&ue.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||E.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=$.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=E.timers,o=i?i.length:0;for(n.finish=!0,E.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),E.each(["toggle","show","hide"],function(t,e){var n=E.fn[e];E.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(fe(e,!0),t,i,r)}}),E.each({slideDown:fe("show"),slideUp:fe("hide"),slideToggle:fe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){E.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(le=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),le=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){ce||(ce=!0,de())},E.fx.stop=function(){ce=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,this.queue(e=e||"fx",function(e,n){var r=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(r)}})},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",y.checkOn=""!==t.value,y.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",y.radioValue="t"===t.value}();var ve,ye=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return q(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){E.removeAttr(this,t)})}}),E.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?E.prop(t,e,n):(1===s&&E.isXMLDoc(t)||(r=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?ve:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=E.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!y.radioValue&&"radio"===e&&R(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(z);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),ve={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ye[e]||E.find.attr;ye[e]=function(t,e,i){var r,s,o=e.toLowerCase();return i||(s=ye[o],ye[o]=r,r=null!=n(t,e,i)?o:null,ye[o]=s),r}});var _e=/^(?:input|select|textarea|button)$/i,be=/^(?:a|area)$/i;function xe(t){return(t.match(z)||[]).join(" ")}function we(t){return t.getAttribute&&t.getAttribute("class")||""}function Ae(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(z)||[]}E.fn.extend({prop:function(t,e){return q(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[E.propFix[t]||t]})}}),E.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&E.isXMLDoc(t)||(r=E.propHooks[e=E.propFix[e]||e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):_e.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(E.propHooks.selected={get:function(t){return null},set:function(t){}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(t){var e,n,i,r,s,o,a,l=0;if(_(t))return this.each(function(e){E(this).addClass(t.call(this,e,we(this)))});if((e=Ae(t)).length)for(;n=this[l++];)if(r=we(n),i=1===n.nodeType&&" "+xe(r)+" "){for(o=0;s=e[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r!==(a=xe(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,s,o,a,l=0;if(_(t))return this.each(function(e){E(this).removeClass(t.call(this,e,we(this)))});if(!arguments.length)return this.attr("class","");if((e=Ae(t)).length)for(;n=this[l++];)if(r=we(n),i=1===n.nodeType&&" "+xe(r)+" "){for(o=0;s=e[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");r!==(a=xe(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):_(t)?this.each(function(n){E(this).toggleClass(t.call(this,n,we(this),e),e)}):this.each(function(){var e,r,s,o;if(i)for(r=0,s=E(this),o=Ae(t);e=o[r++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==n||((e=we(this))&&$.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":$.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+xe(we(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ee=/\r/g;E.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=_(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,E(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,function(t){return null==t?"":t+""})),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Ee,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:xe(E.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,o="select-one"===t.type,a=o?null:[],l=o?s+1:r.length;for(i=s<0?l:o?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!R(n.parentNode,"optgroup"))){if(e=E(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=E.makeArray(e),o=r.length;o--;)((i=r[o]).selected=E.inArray(E.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},y.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),y.focusin="onfocusin"in i;var Se=/^(?:focusinfocus|focusoutblur)$/,Me=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,n,r){var s,o,l,c,h,u,d,p,f=[n||a],g=m.call(t,"type")?t.type:t,v=m.call(t,"namespace")?t.namespace.split("."):[];if(o=p=l=n=n||a,3!==n.nodeType&&8!==n.nodeType&&!Se.test(g+E.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),h=g.indexOf(":")<0&&"on"+g,(t=t[E.expando]?t:new E.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),d=E.event.special[g]||{},r||!d.trigger||!1!==d.trigger.apply(n,e))){if(!r&&!d.noBubble&&!b(n)){for(Se.test((c=d.delegateType||g)+g)||(o=o.parentNode);o;o=o.parentNode)f.push(o),l=o;l===(n.ownerDocument||a)&&f.push(l.defaultView||l.parentWindow||i)}for(s=0;(o=f[s++])&&!t.isPropagationStopped();)p=o,t.type=s>1?c:d.bindType||g,(u=($.get(o,"events")||{})[t.type]&&$.get(o,"handle"))&&u.apply(o,e),(u=h&&o[h])&&u.apply&&K(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),e)||!K(n)||h&&_(n[g])&&!b(n)&&((l=n[h])&&(n[h]=null),E.event.triggered=g,t.isPropagationStopped()&&p.addEventListener(g,Me),n[g](),t.isPropagationStopped()&&p.removeEventListener(g,Me),E.event.triggered=void 0,l&&(n[h]=l)),t.result}},simulate:function(t,e,n){var i=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(i,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each(function(){E.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}}),y.focusin||E.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){E.event.simulate(e,t.target,E.event.fix(t))};E.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=$.access(i,e);r||i.addEventListener(t,n,!0),$.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=$.access(i,e)-1;r?$.access(i,e,r):(i.removeEventListener(t,n,!0),$.remove(i,e))}}});var Te=i.location,Ce=Date.now(),Le=/\?/;E.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new i.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+t),n};var Pe=/\[\]$/,Re=/\r?\n/g,Oe=/^(?:submit|button|image|reset|file)$/i,Ie=/^(?:input|select|textarea|keygen)/i;function De(t,e,n,i){var r;if(Array.isArray(e))E.each(e,function(e,r){n||Pe.test(t)?i(t,r):De(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==A(e))i(t,e);else for(r in e)De(t+"["+r+"]",e[r],n,i)}E.param=function(t,e){var n,i=[],r=function(t,e){var n=_(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,function(){r(this.name,this.value)});else for(n in t)De(n,t[n],e,r);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Ie.test(this.nodeName)&&!Oe.test(t)&&(this.checked||!gt.test(t))}).map(function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,function(t){return{name:e.name,value:t.replace(Re,"\r\n")}}):{name:e.name,value:n.replace(Re,"\r\n")}}).get()}});var ke=/%20/g,Ne=/#.*$/,Be=/([?&])_=[^&]*/,Fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,ze=/^(?:GET|HEAD)$/,Ue=/^\/\//,je={},He={},Ve="*/".concat("*"),Ge=a.createElement("a");function We(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(z)||[];if(_(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function qe(t,e,n,i){var r={},s=t===He;function o(a){var l;return r[a]=!0,E.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}return o(e.dataTypes[0])||!r["*"]&&o("*")}function Xe(t,e){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&E.extend(!0,t,i),t}Ge.href=Te.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Te.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Te.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Xe(Xe(t,E.ajaxSettings),e):Xe(E.ajaxSettings,t)},ajaxPrefilter:We(je),ajaxTransport:We(He),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0);var r,s,o,l,c,h,u,d,p,f,m=E.ajaxSetup({},n=n||{}),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?E(g):E.event,y=E.Deferred(),_=E.Callbacks("once memory"),b=m.statusCode||{},x={},w={},A="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(u){if(!l)for(l={};e=Fe.exec(o);)l[e[1].toLowerCase()+" "]=(l[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=l[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==u&&(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)S.always(t[S.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||A;return r&&r.abort(e),M(0,e),this}};if(y.promise(S),m.url=((t||m.url||Te.href)+"").replace(Ue,Te.protocol+"//"),m.type=n.method||n.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(z)||[""],null==m.crossDomain){h=a.createElement("a");try{h.href=m.url,h.href=h.href,m.crossDomain=Ge.protocol+"//"+Ge.host!=h.protocol+"//"+h.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=E.param(m.data,m.traditional)),qe(je,m,n,S),u)return S;for(p in(d=E.event&&m.global)&&0==E.active++&&E.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!ze.test(m.type),s=m.url.replace(Ne,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(ke,"+")):(f=m.url.slice(s.length),m.data&&(m.processData||"string"==typeof m.data)&&(s+=(Le.test(s)?"&":"?")+m.data,delete m.data),!1===m.cache&&(s=s.replace(Be,"$1"),f=(Le.test(s)?"&":"?")+"_="+Ce+++f),m.url=s+f),m.ifModified&&(E.lastModified[s]&&S.setRequestHeader("If-Modified-Since",E.lastModified[s]),E.etag[s]&&S.setRequestHeader("If-None-Match",E.etag[s])),(m.data&&m.hasContent&&!1!==m.contentType||n.contentType)&&S.setRequestHeader("Content-Type",m.contentType),S.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ve+"; q=0.01":""):m.accepts["*"]),m.headers)S.setRequestHeader(p,m.headers[p]);if(m.beforeSend&&(!1===m.beforeSend.call(g,S,m)||u))return S.abort();if(A="abort",_.add(m.complete),S.done(m.success),S.fail(m.error),r=qe(He,m,n,S)){if(S.readyState=1,d&&v.trigger("ajaxSend",[S,m]),u)return S;m.async&&m.timeout>0&&(c=i.setTimeout(function(){S.abort("timeout")},m.timeout));try{u=!1,r.send(x,M)}catch(e){if(u)throw e;M(-1,e)}}else M(-1,"No Transport");function M(t,n,a,l){var h,p,f,x,w,A=n;u||(u=!0,c&&i.clearTimeout(c),r=void 0,o=l||"",S.readyState=t>0?4:0,h=t>=200&&t<300||304===t,a&&(x=function(t,e,n){for(var i,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}(m,S,a)),x=function(t,n,i,r){var s,o,a,l,c,h={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=n),!c&&r&&t.dataFilter&&(n=t.dataFilter(n,t.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(a=h[c+" "+o]||h["* "+o]))for(s in h)if((l=s.split(" "))[1]===o&&(a=h[c+" "+l[0]]||h["* "+l[0]])){!0===a?a=h[s]:!0!==h[s]&&(o=l[0],u.unshift(l[1]));break}if(!0!==a)if(a&&t.throws)n=a(n);else try{n=a(n)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:n}}(m,x,S,h),h?(m.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(E.lastModified[s]=w),(w=S.getResponseHeader("etag"))&&(E.etag[s]=w)),204===t||"HEAD"===m.type?A="nocontent":304===t?A="notmodified":(A=x.state,p=x.data,h=!(f=x.error))):(f=A,!t&&A||(A="error",t<0&&(t=0))),S.status=t,S.statusText=(n||A)+"",h?y.resolveWith(g,[p,A,S]):y.rejectWith(g,[S,A,f]),S.statusCode(b),b=void 0,d&&v.trigger(h?"ajaxSuccess":"ajaxError",[S,m,h?p:f]),_.fireWith(g,[S,A]),d&&(v.trigger("ajaxComplete",[S,m]),--E.active||E.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],function(t,e){E[e]=function(t,n,i,r){return _(n)&&(r=r||i,i=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:r,data:n,success:i},E.isPlainObject(t)&&t))}}),E._evalUrl=function(t,e){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(_(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return _(t)?this.each(function(e){E(this).wrapInner(t.call(this,e))}):this.each(function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=_(t);return this.each(function(n){E(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Ye={0:200,1223:204},Qe=E.ajaxSettings.xhr();y.cors=!!Qe&&"withCredentials"in Qe,y.ajax=Qe=!!Qe,E.ajaxTransport(function(t){var n,r;if(y.cors||Qe&&!t.crossDomain)return{send:function(s,o){var a,l=t.xhr();if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)l[a]=t.xhrFields[a];for(a in t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)l.setRequestHeader(a,s[a]);n=function(t){return function(){n&&(n=r=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===t?l.abort():"error"===t?"number"!=typeof l.status?o(0,"error"):o(l.status,l.statusText):o(Ye[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=n(),r=l.onerror=l.ontimeout=n("error"),void 0!==l.onabort?l.onabort=r:l.onreadystatechange=function(){4===l.readyState&&i.setTimeout(function(){n&&r()})},n=n("abort");try{l.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),E.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),E.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}});var Ze,Ke=[],Je=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||E.expando+"_"+Ce++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",function(t,e,n){var r,s,o,a=!1!==t.jsonp&&(Je.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Je.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=_(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Je,"$1"+r):!1!==t.jsonp&&(t.url+=(Le.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||E.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=i[r],i[r]=function(){o=arguments},n.always(function(){void 0===s?E(i).removeProp(r):i[r]=s,t[r]&&(t.jsonpCallback=e.jsonpCallback,Ke.push(r)),o&&_(s)&&s(o[0]),o=s=void 0}),"script"}),y.createHTMLDocument=((Ze=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ze.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(y.createHTMLDocument?((i=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(i)):e=a),s=!n&&[],(r=O.exec(t))?[e.createElement(r[1])]:(r=St([t],e,s),s&&s.length&&E(s).remove(),E.merge([],r.childNodes)));var i,r,s},E.fn.load=function(t,e,n){var i,r,s,o=this,a=t.indexOf(" ");return a>-1&&(i=xe(t.slice(a)),t=t.slice(0,a)),_(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&E.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){s=arguments,o.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,s||[t.responseText,e,t])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){E.fn[e]=function(t){return this.on(e,t)}}),E.expr.pseudos.animated=function(t){return E.grep(E.timers,function(e){return t===e.elem}).length},E.offset={setOffset:function(t,e,n){var i,r,s,o,a,l,c=E.css(t,"position"),h=E(t),u={};"static"===c&&(t.style.position="relative"),a=h.offset(),s=E.css(t,"top"),l=E.css(t,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(o=(i=h.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),_(e)&&(e=e.call(t,n,E.extend({},a))),null!=e.top&&(u.top=e.top-a.top+o),null!=e.left&&(u.left=e.left-a.left+r),"using"in e?e.using.call(t,u):h.css(u)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){E.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?{top:(e=i.getBoundingClientRect()).top+(n=i.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),r.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-E.css(i,"marginTop",!0),left:e.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||at})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;E.fn[t]=function(i){return q(this,function(t,i,r){var s;if(b(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r},t,i,arguments.length)}}),E.each(["top","left"],function(t,e){E.cssHooks[e]=Qt(y.pixelPosition,function(t,n){if(n)return n=Yt(t,e),Wt.test(n)?E(t).position()[e]+"px":n})}),E.each({Height:"height",Width:"width"},function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){E.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return q(this,function(e,n,r){var s;return b(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?E.css(e,n,a):E.style(e,n,r,a)},e,o?r:void 0,o)}})}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),E.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),E.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),_(t))return i=c.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(c.call(arguments)))}).guid=t.guid=t.guid||E.guid++,r},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=R,E.isFunction=_,E.isWindow=b,E.camelCase=Z,E.type=A,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(r=(function(){return E}).apply(n,[]))||(t.exports=r);var $e=i.jQuery,tn=i.$;return E.noConflict=function(t){return i.$===E&&(i.$=tn),t&&i.jQuery===E&&(i.jQuery=$e),E},s||(i.jQuery=i.$=E),E})},IiLU:function(t,n,i){var r,s,o;(function(a,l){var c=(a=a||i(1)).window,h=a.document,u=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],n=e.slice,i=Object.create,r=Object.getOwnPropertyDescriptor,s=Object.defineProperty,o=e.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},a=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},c=function(t,e,n){if(t){var i=r(t,"length");(i&&"number"==typeof i.value?o:function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}).call(t,e,n=n||t)}return n};function h(e,n,i,o,a){var l={};function c(t,c){"string"==typeof(c=c||(c=r(n,t))&&(c.get?c:c.value))&&"#"===c[0]&&(c=e[c.substring(1)]||c);var h,d="function"==typeof c,p=c,f=a||d&&!c.base?c&&c.get?t in e:e[t]:null;a&&f||(d&&f&&(c.base=f),d&&!1!==o&&(h=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[h[3].toLowerCase()+h[4]]=h[2]),p&&!d&&p.get&&"function"==typeof p.get&&u.isPlainObject(p)||(p={value:p,writable:!0}),(r(e,t)||{configurable:!0}).configurable&&(p.configurable=!0,p.enumerable=null!=i?i:!h),s(e,t,p))}if(n){for(var h in n)n.hasOwnProperty(h)&&!t.test(h)&&c(h);for(var h in l){var d=l[h],p=e["set"+d],f=e["get"+d]||p&&e["is"+d];!f||!0!==o&&0!==f.length||c(h,{get:f,set:p})}}return e}function u(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&a(this,n)}return this}return h(u,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve;e!==t&&h(this.prototype,t,t.enumerable,n,i),h(this,e,null,n,i)}for(var r=1,s=arguments.length;r<s;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n,r=this,o=0,a=arguments.length;o<a&&(!t||!e);o++)n=arguments[o],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){r.apply(this,arguments)}).prototype=e||i(this.prototype),s(e,"constructor",{value:t,writable:!0,configurable:!0}),h(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=r,t}}).inject({enumerable:!1,initialize:u,set:u,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=i(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:a,each:c,create:i,define:s,describe:r,clone:function(t){return a(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===u||"Object"===e.name)},pick:function(t,e){return t!==l?t:e},slice:function(t,e,i){return n.call(t,e,i)}}})};t.exports=u,u.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+u.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?m.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return u.importJSON(t,this)},exportJSON:function(t){return u.exportJSON(this,t)},toJSON:function(){return u.serialize(this)},set:function(t,e){return t&&u.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!u.exports[n]&&(u.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!u.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!u.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===u){var r=this.peek(t,e);return t.__index++,r}var s=this.prototype,o=s._readIndex,a=e||o&&t.__index||0,c=t.length,h=t[a];if(i=i||c-a,h instanceof this||n&&n.readNull&&null==h&&i<=1)return o&&(t.__index=a+1),h&&n&&n.clone?h.clone():h;if(h=u.create(s),o&&(h.__read=!0),h=h.initialize.apply(h,a>0||a+i<c?u.slice(t,a,a+i):t)||h,o){t.__index=a+h.__read;var d=h.__filtered;d&&(t.__filtered=d,h.__filtered=l),h.__read=l}return h},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,s=[],o=e||0,a=i?o+i:t.length,l=o;l<a;l++)s.push(Array.isArray(r=t[l])?this.read(r,0,n):this.read(t,l,n,1));return s},readNamed:function(t,e,n,i,r){var s=this.getNamed(t,e),o=s!==l;if(o){var a=t.__filtered;a||((a=t.__filtered=u.create(t[0])).__unfiltered=t[0]),a[e]=l}return this.read(o?[s]:t,n,i,r)},getNamed:function(t,e){var n=t[0];if(t._hasObject===l&&(t._hasObject=1===t.length&&u.isPlainObject(n)),t._hasObject)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,i){var r;function s(i){if(!(n&&i in n||r&&i in r)){var s=e[i];s!==l&&(t[i]=s)}}if(i){for(var o,a={},c=0,h=i.length;c<h;c++)(o=i[c])in e&&(s(o),a[o]=!0);r=a}return Object.keys(e.__unfiltered||e).forEach(s),t},isPlainValue:function(t,e){return u.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,s=!i;if(s&&(e.formatter=new m(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var o=t._class;!o||t._compactSerialize||!s&&n||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var a=0,l=t.length;a<l;a++)r[a]=u.serialize(t[a],e,n,i)}else if(u.isPlainObject(t)){r={};var c=Object.keys(t);for(a=0,l=c.length;a<l;a++){var h=c[a];r[h]=u.serialize(t[h],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,r){var s=t,o=!n,a=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var l=t[0],c="dictionary"===l;if(1==t.length&&/^#/.test(l))return n.dictionary[l];s=[];for(var h=(l=u.exports[l])?1:0,d=t.length;h<d;h++)s.push(u.deserialize(t[h],e,n,c,a));if(l){var p=s;s=e?e(l,p,o||r):new l(p)}}else if(u.isPlainObject(t))for(var f in s={},i&&(n.dictionary=s),t)s[f]=u.deserialize(t[f],e,n);return a?s[1]:s},exportJSON:function(t,e){var n=u.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return u.deserialize("string"==typeof t?JSON.parse(t):t,function(t,n,i){var r=i&&e&&e.constructor===t,s=r?e:u.create(t.prototype);if(1===n.length&&s instanceof T&&(r||!(s instanceof L))){var o=n[0];u.isPlainObject(o)&&(o.insert=!1,r&&(n=n.concat([{insert:!0}])))}return(r?s.set:t).apply(s,n),r&&(e=null),s})},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}return t},splice:function(t,e,n,i){var r=e&&e.length,s=n===l;(n=s?t.length:n)>t.length&&(n=t.length);for(var o=0;o<r;o++)e[o]._index=n+o;if(s)return u.push(t,e),[];var a=[n,i];e&&u.push(a,e);for(var c=t.splice.apply(t,a),h=(o=0,c.length);o<h;o++)c[o]._index=l;for(o=n+r,h=t.length;o<h;o++)t[o]._index=o;return c},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var d={on:function(t,e){if("string"!=typeof t)u.each(t,function(t,e){this.on(e,t)},this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var n,i=this._eventTypes,r=i&&i[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||-1!==(n=s.indexOf(e))&&1===s.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&s.splice(n,1)),this}u.each(t,function(t,e){this.off(e,t)},this)},once:function(t,e){return this.on(t,function n(){e.apply(this,arguments),this.off(t,n)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=u.slice(arguments,1),r=e&&e.target&&!e.currentTarget;n=n.slice(),r&&(e.currentTarget=this);for(var s=0,o=n.length;s<o;s++)if(0==n[s].apply(this,i)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var s=e[r],o=s&&s[i];o&&o.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};u.each(n,function(t,n){var r="string"==typeof t,s=r?t:n,o=u.capitalize(s),a=s.substring(2).toLowerCase();i[a]=r?{}:t,s="_"+s,e["get"+o]=function(){return this[s]},e["set"+o]=function(t){var e=this[s];e&&this.off(a,e),t&&this.on(a,t),this[s]=t}}),e._eventTypes=i}return t.base.apply(this,arguments)}}},p=u.extend({_class:"PaperScope",initialize:function t(){dt=this,this.settings=new u({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=lt.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ct.nativeModes},lt.release(n)}if(!this.agent){var i=a.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],s="darwin"===r?"mac":r,o=e.agent=e.browser={platform:s};s&&(o[s]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,n,i,r){if(!o.chrome){var s="opera"===e?i:/^(node|trident)$/.test(e)?r:n;o.version=s,o.versionNumber=parseFloat(s),o.name=e={trident:"msie",jsdom:"node"}[e]||e,o[e]=!0}}),o.chrome&&delete o.webkit,o.atom&&delete o.chrome}},version:"0.12.3",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var n=dt.PaperScript.execute(t,this,e);return J.updateFocus(),n},install:function(t){var e=this;for(var n in u.each(["project","view","tool"],function(n){u.define(t,n,{configurable:!0,get:function(){return e[n]}})}),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return dt=this,this.project=new M(t),this},createCanvas:function(t,e){return lt.getCanvas(t,e)},activate:function(){dt=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete p._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),f=u.extend(d,{initialize:function(t){this._scope=dt,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(u.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),m=u.extend({initialize:function(t){this.precision=u.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});m.instance=new m;var g=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,s=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function o(t,e,n){return t<e?e:t>n?n:t}function a(t,e,i){function r(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var s=e*e-t*i,o=e*e+t*i;if(3*n(s)<o){var a=r(t),l=r(e),c=r(i),h=e*e,u=t*i;s=h-u+(l[0]*l[0]-h+2*l[0]*l[1]+l[1]*l[1]-(a[0]*c[0]-u+a[0]*c[1]+a[1]*c[0]+a[1]*c[1]))}return s}function l(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?r(2,-Math.round(s(t))):0}return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(i(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:o,integrate:function(n,i,r,s){for(var o=t[s-2],a=e[s-2],l=.5*(r-i),c=l+i,h=0,u=s+1>>1,d=1&s?a[h++]*n(c):0;h<u;){var p=l*o[h];d+=a[h++]*(n(c+p)+n(c-p))}return l*d},findRoot:function(t,e,i,r,s,a,l){for(var c=0;c<a;c++){var h=t(i),u=h/e(i),d=i-u;if(n(u)<l){i=d;break}h>0?(s=i,i=d<=r?.5*(r+s):d):(r=i,i=d>=s?.5*(r+s):d)}return o(i,r,s)},solveQuadratic:function(t,e,r,s,c,h){var u,d=1/0;if(n(t)<1e-12){if(n(e)<1e-12)return n(r)<1e-12?-1:0;u=-r/e}else{var p=a(t,e*=-.5,r);if(p&&n(p)<112e-18){var f=l(n(t),n(e),n(r));f&&(p=a(t*=f,e*=f,r*=f))}if(p>=-112e-18){var m=p<0?0:i(p),g=e+(e<0?-m:m);0===g?d=-(u=r/t):(u=g/t,d=r/g)}}var v=0,y=null==c,_=c-1e-12,b=h+1e-12;return isFinite(u)&&(y||u>_&&u<b)&&(s[v++]=y?u:o(u,c,h)),d!==u&&isFinite(d)&&(y||d>_&&d<b)&&(s[v++]=y?d:o(d,c,h)),v},solveCubic:function(t,e,s,a,c,h,u){var d,p,f,m,v,y=l(n(t),n(e),n(s),n(a));function _(n){var i=t*(d=n);m=(i+(p=i+e))*d+(f=p*d+s),v=f*d+a}if(y&&(t*=y,e*=y,s*=y,a*=y),n(t)<1e-12)t=e,p=s,f=a,d=1/0;else if(n(a)<1e-12)p=e,f=s,d=0;else{_(-e/t/3);var b=v/t,x=r(n(b),1/3),w=b<0?-1:1,A=-m/t,E=A>0?1.324717957244746*Math.max(x,i(A)):x,S=d-w*E;if(S!==d){do{_(S),S=0===m?d:d-v/m/(1+112e-18)}while(w*S>w*d);n(t)*d*d>n(a/d)&&(p=((f=-a/d)-s)/d)}}var M=g.solveQuadratic(t,p,f,c,h,u),T=null==h;return isFinite(d)&&(0===M||M>0&&d!==c[0]&&d!==c[1])&&(T||d>h-1e-12&&d<u+1e-12)&&(c[M++]=T?d:o(d,h,u)),M}}},v={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},y=u.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new y(this.x,this.y)},toString:function(){var t=m.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();g.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=y.read(arguments),e=this.getLength()*t.getLength();if(g.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=y.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=y.read(arguments),e=t.x-this.x,n=t.y-this.y,i=e*e+n*n,r=u.read(arguments);return r?i:Math.sqrt(i)},normalize:function(t){t===l&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,i=new y(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new y(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=y.read(arguments);return new y(this.x+t.x,this.y+t.y)},subtract:function(){var t=y.read(arguments);return new y(this.x-t.x,this.y-t.y)},multiply:function(){var t=y.read(arguments);return new y(this.x*t.x,this.y*t.y)},divide:function(){var t=y.read(arguments);return new y(this.x/t.x,this.y/t.y)},modulo:function(){var t=y.read(arguments);return new y(this.x%t.x,this.y%t.y)},negate:function(){return new y(-this.x,-this.y)},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var t=y.read(arguments),e=u.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=y.read(arguments);return y.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=y.read(arguments);return y.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=g.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=y.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=y.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=y.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new y(t.x*e,t.y*e)},statics:{min:function(){var t=y.read(arguments),e=y.read(arguments);return new y(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=y.read(arguments),e=y.read(arguments);return new y(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new y(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},u.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new y(e(this.x),e(this.y))}},{})),_=y.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),b=u.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new b(this.width,this.height)},toString:function(){var t=m.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=b.read(arguments);return new b(this.width+t.width,this.height+t.height)},subtract:function(){var t=b.read(arguments);return new b(this.width-t.width,this.height-t.height)},multiply:function(){var t=b.read(arguments);return new b(this.width*t.width,this.height*t.height)},divide:function(){var t=b.read(arguments);return new b(this.width/t.width,this.height/t.height)},modulo:function(){var t=b.read(arguments);return new b(this.width%t.width,this.height%t.height)},negate:function(){return new b(-this.width,-this.height)},isZero:function(){var t=g.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new b(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new b(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new b(Math.random(),Math.random())}}},u.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new b(e(this.width),e(this.height))}},{})),x=b.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),w=u.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var r,s=typeof t;if("number"===s?(this._set(t,e,n,i),r=4):"undefined"===s||null===t?(this._set(0,0,0,0),r=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),r=1):t.x!==l||t.width!==l?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),r=1):t.from===l&&t.to===l&&(this._set(0,0,0,0),u.filter(this,t),r=1)),r===l){var o,a,c=y.readNamed(arguments,"from"),h=u.peek(arguments),d=c.x,p=c.y;if(h&&h.x!==l||u.hasNamed(arguments,"to")){var f=y.readNamed(arguments,"to");(o=f.x-d)<0&&(d=f.x,o=-o),(a=f.y-p)<0&&(p=f.y,a=-a)}else{var m=b.read(arguments);o=m.width,a=m.height}this._set(d,p,o,a),r=arguments.__index;var g=arguments.__filtered;g&&(this.__filtered=g)}return this.__read&&(this.__read=r),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(t){var e=u.isPlainValue(t)?w.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=m.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?y:_)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=y.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?b:x)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=b.read(arguments),e=this._sx,n=this._sy,i=t.width,r=t.height;e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?y:_)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=y.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==l||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(y.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=w.read(arguments),e=u.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=w.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new w(e,n,i-e,r-n)},unite:function(){var t=w.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new w(e,n,i-e,r-n)},include:function(){var t=y.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new w(e,n,i-e,r-n)},expand:function(){var t=b.read(arguments),e=t.width,n=t.height;return new w(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===l?t:e)-this.height)}},u.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],o="get"+r,a="get"+s,l="set"+r,c="set"+s,h="set"+n;this["get"+n]=function(t){return new(t?y:_)(this[o](),this[a](),this,h)},this[h]=function(){var t=y.read(arguments);this[l](t.x),this[c](t.y)}},{beans:!0})),A=w.extend({initialize:function(t,e,n,i,r,s){this._set(t,e,n,i,!0),this._owner=r,this._setter=s},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=w.prototype;return u.each(["x","y","width","height"],function(t){var e=u.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}},u.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),E=u.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments.length,r=!0;if(i>=6?this._set.apply(this,arguments):1===i||2===i?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):r=!1:i?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,s,o){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=s,o||this._changed(),this},_serialize:function(t,e){return u.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new E(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=m.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,u.pick(t,!0),e),this.isIdentity())},translate:function(){var t=y.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=y.read(arguments),e=y.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=y.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),o=n-n*r+i*s,a=i-n*s-i*r,l=this._a,c=this._b,h=this._c,u=this._d;return this._a=r*l+s*h,this._b=r*c+s*u,this._c=-s*l+r*h,this._d=-s*c+r*u,this._tx+=o*l+a*h,this._ty+=o*c+a*u,this._changed(),this},shear:function(){var t=y.read(arguments),e=y.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=y.read(arguments),e=y.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new y(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},append:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,o=t._a,a=t._c,l=t._b,c=t._d,h=t._tx,u=t._ty;this._a=o*n+l*r,this._c=a*n+c*r,this._b=o*i+l*s,this._d=a*i+c*s,this._tx+=h*n+u*r,this._ty+=h*i+u*s,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,o=this._tx,a=this._ty,l=t._a,c=t._c,h=t._b,u=t._d,d=t._tx,p=t._ty;this._a=l*n+c*i,this._c=l*r+c*s,this._b=h*n+u*i,this._d=h*r+u*s,this._tx=l*o+c*a+d,this._ty=h*o+u*a+p,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,s=this._ty,o=t*i-e*n,a=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(s)&&(this._a=i/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*s-i*r)/o,this._ty=(e*r-t*s)/o,a=this),a},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new E(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(y.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new y),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var s=t[i],o=t[i+1];e[i]=s*this._a+o*this._c+this._tx,e[i+1]=s*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=r.slice(),o=2;o<8;o++){var a=i[o],l=1&o;a<r[l]?r[l]=a:a>s[l]&&(s[l]=a)}return e||(e=new w),e._set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(y.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,s=this._c,o=this._d,a=this._tx,l=this._ty,c=i*o-r*s,h=null;if(c&&!isNaN(c)&&isFinite(a)&&isFinite(l)){var u=t.x-this._tx,d=t.y-this._ty;e||(e=new y),h=e._set((u*o-d*s)/c,(d*i-u*r)/c,n)}return h},decompose:function(){var t,e,n,i=this._a,r=this._b,s=this._c,o=this._d,a=i*o-r*s,l=Math.sqrt,c=Math.atan2,h=180/Math.PI;if(0!==i||0!==r){var u=l(i*i+r*r);t=Math.acos(i/u)*(r>0?1:-1),e=[u,a/u],n=[c(i*s+r*o,u*u),0]}else if(0!==s||0!==o){var d=l(s*s+o*o);t=Math.asin(s/d)*(o>0?1:-1),e=[a/d,d],n=[0,c(i*s+r*o,d*d)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*h,scaling:new y(e),skewing:new y(n[0]*h,n[1]*h)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new y(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},u.each(["a","b","c","d","tx","ty"],function(t){var e=u.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}},{})),S=u.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new y(this._px,this._py)},getVector:function(){return new y(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return S.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return S.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return S.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return y.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return y.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,s,o,a,l,c){l||(n-=t,i-=e,o-=r,a-=s);var h=n*a-i*o;if(!g.isZero(h)){var u=t-r,d=e-s,p=(o*d-a*u)/h,f=(n*d-i*u)/h;if(c||-1e-12<p&&p<1+1e-12&&-1e-12<f&&f<1+1e-12)return c||(p=p<=0?0:p>=1?1:p),new y(t+p*n,e+p*i)}},getSide:function(t,e,n,i,r,s,o,a){o||(n-=t,i-=e);var l=r-t,c=l*i-(s-e)*n;return!a&&g.isZero(c)&&(c=(l*n+l*n)/(n*n+i*i))>=0&&c<=1&&(c=0),c<0?-1:c>0?1:0},getSignedDistance:function(t,e,n,i,r,s,o){return o||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?s-e:e-s:((r-t)*i-(s-e)*n)/Math.sqrt(n*n+i*i)},getDistance:function(t,e,n,i,r,s,o){return Math.abs(S.getSignedDistance(t,e,n,i,r,s,o))}}}),M=f.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){f.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Q(null,null,this),this._view=J.create(this,t||lt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return u.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,s=e._id,o=r[s];o?o.flags|=t:i.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new L({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:O,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(l,t)},insertLayer:function(t,e){if(e instanceof L){e._remove(!1,!0),u.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(l,new L(T.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return T._getItems(this,t)},getItem:function(t){return T._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return u.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var s in e){var o=e[s];o&&o!=n&&delete o[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new u({offset:new y(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new E],updateMatrix:!0}),s=0,o=i.length;s<o;s++)i[s].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var a=this._selectionItems,l=this._scope.settings.handleSize,c=this._updateVersion;for(var h in a)a[h]._drawSelection(t,e,l,a,c);t.restore()}}}),T=u.extend(d,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=u.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new E,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return u.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&u.isPlainObject(t),i=n&&!0===t.internal,r=this._matrix=new E,s=n&&t.project||dt.project,o=dt.settings;return this._id=i?null:v.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,e&&r.translate(e),r._owner=this,this._style=new Q(s._currentStyle,this,s),i||n&&0==t.insert||!o.insertItems&&(!n||!0!==t.insert)?this._setProject(s):(n&&t.parent||s)._insertItem(l,this,!0),n&&t!==T.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var n={},i=this;function r(r){for(var s in r){var o=i[s];u.equals(o,"leading"===s?1.2*r.fontSize:r[s])||(n[s]=u.serialize(o,t,"data"!==s,e))}}return r(this._serializeFields),this instanceof C||r(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,n=this._parent||e,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=l),16&t&&(this._globalMatrix=l),n&&72&t&&T._clearBoundsCache(n),2&t&&T._clearBoundsCache(this),i&&i._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,i=e._namedChildren;(i[t]=i[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||l,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},u.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=u.capitalize(t),n="_"+t,i={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?y:_,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(y.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new _(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=y.read(arguments,0,{clone:!0,readNull:!0}),this._position=l}},u.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var n=e||t instanceof E,i=u.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&t,i).rect;return arguments.length?r:new A(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=w.read(arguments),e=this.getBounds(),n=this._matrix,i=new E,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new E).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(T._updateBoundsCache(this,e.cacheItem),T._getBounds(n,t,e)):new w},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i=e.internal&&!n,r=e.cacheItem,s=i?null:this._matrix._orNullIfIdentity(),o=r&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,i),a=this._bounds;if(T._updateBoundsCache(this._parent||this._symbol,r),o&&a&&o in a)return{rect:(d=a[o]).rect.clone(),nonscaling:d.nonscaling};var l=this._getBounds(t||s,e),c=l.rect||l,h=this._style,u=l.nonscaling||h.hasStroke()&&!h.getStrokeScaling();if(o){a||(this._bounds=a={});var d=a[o]={rect:c.clone(),nonscaling:u,internal:i}}return{rect:c,nonscaling:u}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=l;for(var n=0,i=e.list,r=i.length;n<r;n++){var s=i[n];s!==t&&(s._bounds=s._position=l,s._boundsCache&&T._clearBoundsCache(s))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,s=i,o=r,a=!1;n=n||{};for(var l=0,c=t.length;l<c;l++){var h=t[l];if(h._visible&&!h.isEmpty(!0)){var u=h._getCachedBounds(e&&e.appended(h._matrix),n,!0),d=u.rect;i=Math.min(d.x,i),s=Math.min(d.y,s),r=Math.max(d.x+d.width,r),o=Math.max(d.y+d.height,o),u.nonscaling&&(a=!0)}}return{rect:isFinite(i)?new w(i,s,r-i,o-s):new w,nonscaling:a}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new _(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=y.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),i=this._decomposed,r=new E,s=this.getPosition(!0);r.translate(s),n&&r.rotate(n),r.scale(e.x/t.x,e.y/t.y),n&&r.rotate(-n),r.translate(s.negate()),this.transform(r),i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){e=null;for(var r=0,s=i.length;r<s;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}return e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0))),t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof L)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return u.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(T.NO_INSERT),n=this._children,i=u.pick(t?t.insert:l,t===l||!0===t),r=u.pick(t?t.deep:l,!0);n&&e.copyAttributes(this),n&&!r||e.copyContent(this),n||e.copyAttributes(this),i&&e.insertAbove(this);var s=this._name,o=this._parent;if(s&&o){n=o._children;for(var a=s,c=1;n[s];)s=a+" "+c++;s!==a&&e.setName(s)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var s=n[i];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,a=t._name;this._data=o?u.clone(o):null,a&&this.setName(a)},rasterize:function(t,e){var n=this.getStrokeBounds(),i=(t||this.getView().getResolution())/72,r=n.getTopLeft().floor(),s=n.getBottomRight().ceil(),o=new b(s.subtract(r)),a=new R(T.NO_INSERT);if(!o.isZero()){var c=lt.getCanvas(o.multiply(i)),h=c.getContext("2d"),d=(new E).scale(i).translate(r.negate());h.save(),d.applyToContext(h),this.draw(h,new u({matrices:[d]})),h.restore(),a.setCanvas(c)}return a.transform((new E).translate(r.add(o.divide(2))).scale(1/i)),(e===l||e)&&a.insertAbove(this),a},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(y.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new U.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof T&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(y.read(arguments),D.getOptions(arguments))}function e(){var t=y.read(arguments),e=D.getOptions(arguments),n=[];return this._hitTest(t,u.set({all:n},e)),n}function n(t,e,n,i){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var o=r[s],a=o!==i&&o._hitTest(t,e,n);if(a&&!e.all)return a}return null}return M.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,r=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),s=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new b(U._getStrokePadding(s,i._shiftless().invert()));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var a,l,c=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==u.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=e.match,d=this;function p(t){return t&&h&&!h(t)&&(t=null),t&&e.all&&e.all.push(t),t}function f(e,n){var i=n?a["get"+n]():d.getPosition();if(t.subtract(i).divide(o).length<=1)return new D(e,d,{name:n?u.hyphenate(n):e,point:i})}var m=e.position,g=e.center,v=e.bounds;if(c&&this._parent&&(m||g||v)){if((g||v)&&(a=this.getInternalBounds()),!(l=m&&f("position")||g&&f("center","Center"))&&v)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],_=0;_<8&&!l;_++)l=f("bounds",y[_]);l=p(l)}return l||(l=this._hitTestChildren(t,e,r)||c&&p(this._hitTestSelf(t,e,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null),l&&l.point&&(l.point=i.transform(l.point)),l},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new D("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var r=/^(empty|editable)$/.test(t)?this["is"+u.capitalize(t)]():"type"===t?u.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;r=this._class}if("function"==typeof e)return!!e(r);if(e){if(e.test)return e.test(r);if(u.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],s=n[i];if(u.isPlainObject(r)&&u.isPlainObject(s)){if(!t(r,s))return!1}else if(!u.equals(r,s))return!1}return!0}(e,r)}return u.equals(r,e)},getItems:function(t){return T._getItems(this,t,this._matrix)},getItem:function(t){return T._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,r,s){if(!r){var o="object"==typeof n&&n,a=o&&o.overlapping,l=o&&o.inside,c=(y=a||l)&&w.read([y]);r={items:[],recursive:o&&!1!==o.recursive,inside:!!l,overlapping:!!a,rect:c,path:a&&new U.Rectangle({rectangle:c,insert:!1})},o&&(n=u.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=e._children,d=r.items;i=(c=r.rect)&&(i||new E);for(var p=0,f=h&&h.length;p<f;p++){var m=h[p],g=i&&i.appended(m._matrix),v=!0;if(c){var y=m.getBounds(g);if(!c.intersects(y))continue;c.contains(y)||r.overlapping&&(y.contains(c)||r.path.intersects(m,g))||(v=!1)}if(v&&m.matches(n)&&(d.push(m),s))break;if(!1!==r.recursive&&t(m,n,g,r,s),s&&d.length>0)break}return d}}},{importJSON:function(t){var e=u.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(l,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){for(var i={},r=(e=u.slice(e)).length-1;r>=0;r--){var s=(c=e[r])&&c._id;!c||i[s]?e.splice(r,1):(c._remove(!1,!0),i[s]=!0)}u.splice(n,e,t,0);for(var o=this._project,a=o._changes,l=(r=0,e.length);r<l;r++){var c,h=(c=e[r])._name;c._parent=this,c._setProject(o,!0),h&&c.setName(h),a&&c._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(l,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(l,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],s=r?r.indexOf(this):-1;-1!==s&&(e[i]==this&&delete e[i],r.splice(s,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),u.splice(n._children,null,r,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=u.pick(e,this._children.length);for(var n=u.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var i=0;i<n;i++)if(!e[i].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);r<s;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},u.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?u:y).read(arguments),i=y.read(arguments,0,{readNull:!0});return this.transform((new E)[t](n,i||this.getPosition(!0)))}},{translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,i){var r=this._matrix,s=t&&!t.isIdentity(),o=(e||this._applyMatrix)&&(!r.isIdentity()||s||e&&n&&this._children);if(!s&&!o)return this;if(s){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var a=this._style,l=a.getFillColor(!0),c=a.getStrokeColor(!0);l&&l.transform(t),c&&c.transform(t)}if(o&&(o=this._transformContent(r,n,i))){var h=this._pivot;h&&r._transformPoint(h,h,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var u=this._bounds,d=this._position;(s||o)&&this._changed(25);var p=s&&u&&t.decompose();if(p&&p.skewing.isZero()&&p.rotation%90==0){for(var f in u){var m=u[f];if(m.nonscaling)delete u[f];else if(o||!m.internal){var g=m.rect;t._transformBounds(g,g)}}this._bounds=u;var v=u[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else s&&d&&this._pivot&&(this._position=t._transformPoint(d,d));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,s=i.length;r<s;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(y.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(y.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(y.read(arguments))},localToParent:function(){return this._matrix._transformPoint(y.read(arguments))},fitBounds:function(t,e){t=w.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:i<r)?t.width/n.width:t.height/n.height,o=new w(new y,new b(n.width*s,n.height*s));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t,r)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=i.getStrokeWidth();var s=i.getStrokeJoin(),o=i.getStrokeCap(),a=i.getMiterLimit();if(s&&(t.lineJoin=s),o&&(t.lineCap=o),a&&(t.miterLimit=a),dt.support.nativeDash){var l=i.getDashArray(),c=i.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=c):(t.mozDash=l,t.mozDashOffset=c))}}if(i.hasShadow()){var h=e.pixelRatio||1,u=n._shiftless().prepend((new E).scale(h,h)),d=u.transform(new y(i.getShadowBlur(),0)),p=u.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=p.x,t.shadowOffsetY=p.y}},draw:function(t,e,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var i=e.matrices,r=e.viewMatrix,s=this._matrix,o=i[i.length-1].appended(s);if(o.isInvertible()){r=r?r.appended(o):o,i.push(o),e.updateMatrix&&(this._globalMatrix=o);var a,l,c,h=this._blendMode,u=this._opacity,d="normal"===h,p=ct.nativeModes[h],f=d&&1===u||e.dontStart||e.clip||(p||d&&u<1)&&this._canComposite(),m=e.pixelRatio||1;if(!f){var g=this.getStrokeBounds(r);if(!g.width||!g.height)return void i.pop();c=e.offset,l=e.offset=g.getTopLeft().floor(),a=t,t=lt.getContext(g.getSize().ceil().add(1).multiply(m)),1!==m&&t.scale(m,m)}t.save();var v=n?n.appended(s):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,y=!f&&e.clipItem,_=!v||y;if(f?(t.globalAlpha=u,p&&(t.globalCompositeOperation=h)):_&&t.translate(-l.x,-l.y),_&&(f?s:r).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),v){t.setTransform(m,0,0,m,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,r,v),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),f||(ct.process(h,t,a,u,l.subtract(c).multiply(m)),lt.release(t),e.offset=c)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof j)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var s=this._selection,o=1&s,a=2&s||o&&this._selectBounds,l=4&s;if(this._drawSelected||(o=!1),(o||a||l)&&this._isUpdated(r)){var c,h=this.getSelectedColor(!0)||(c=this.getLayer())&&c.getSelectedColor(!0),u=e.appended(this.getGlobalMatrix(!0)),d=n/2;if(t.strokeStyle=t.fillStyle=h?h.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,u,i),l){var p=this.getPosition(!0),f=this._parent,m=f?f.localToGlobal(p):p,g=m.x,v=m.y;t.beginPath(),t.arc(g,v,d,0,2*Math.PI,!0),t.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],_=d,b=n+1,x=0;x<4;x++){var w=y[x],A=w[0],E=w[1];t.moveTo(g+A*_,v+E*_),t.lineTo(g+A*b,v+E*b),t.stroke()}}if(a){var S=u._transformCorners(this.getInternalBounds());for(t.beginPath(),x=0;x<8;x++)t[x?"lineTo":"moveTo"](S[x],S[++x]);for(t.closePath(),t.stroke(),x=0;x<8;x++)t.fillRect(S[x]-d,S[++x]-d,n,n)}}},_canComposite:function(){return!1}},u.each(["down","drag","up","move"],function(t){this["removeOn"+u.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=null!=n&&("number"==typeof n?n:n.duration),r=new ot(this,t,e,i,n&&n.easing,n&&n.start);return i&&this.on("frame",function t(e){r._handleFrame(1e3*e.time),r.running||this.off("frame",t)}),r},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),C=T.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=l)},_getClipItem:function(){var t=this._clipItem;if(t===l){t=null;for(var e=this._children,n=0,i=e.length;n<i;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(e),u.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,o=r.length;s<o;s++){var a=r[s];a!==i&&a.draw(t,e)}}}),L=C.extend({_class:"Layer",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),P=T.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&u.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new x(t.width,t.height,this,"setSize")},setSize:function(){var t=b.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(b.min(this._radius,t.divide(2))):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new x(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=b.read(arguments),this._radius){if(this._radius.equals(t))return;this._radius.set(t),"rectangle"===e?(n=b.max(this._size,t.multiply(2)),this._size.set(n)):"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(U[u.capitalize(this._type)])({center:new y,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),dt.settings.applyMatrix&&e.setApplyMatrix(!0),(t===l||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r=this._style,s=r.hasFill(),o=r.hasStroke(),a=e.dontFinish||e.clip,l=!i;if(s||o||a){var c=this._type,h=this._radius,u="circle"===c;if(e.dontStart||t.beginPath(),l&&u)t.arc(0,0,h,0,2*Math.PI,!0);else{var d=u?h:h.width,p=u?h:h.height,f=this._size,m=f.width,g=f.height;if(l&&"rectangle"===c&&0===d&&0===p)t.rect(-m/2,-g/2,m,g);else{var v=m/2,y=g/2,_=.44771525016920644,b=d*_,x=p*_,w=[-v,-y+p,-v,-y+x,-v+b,-y,-v+d,-y,v-d,-y,v-b,-y,v,-y+x,v,-y+p,v,y-p,v,y-x,v-b,y,v-d,y,-v+d,y,-v+b,y,-v,y-x,-v,y-p];i&&i.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==d&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==p&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==d&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}a||!s&&!o||(this._setStyles(t,e,n),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(U._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),s=1;s<=4;s++){var o=new y(s>1&&s<4?-1:1,s>2?-1:1),a=o.multiply(r),l=a.subtract(o.multiply(i));if(new w(n?a.add(o.multiply(n)):a,l).contains(e))return{point:l,quadrant:s}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,s,o){var a=!1,l=this._style,c=r.stroke&&l.hasStroke(),h=r.fill&&l.hasFill();if(c||h){var u=this._type,d=this._radius,p=c?l.getStrokeWidth()/2:0,f=r._tolerancePadding.add(U._getStrokePadding(p,!l.getStrokeScaling()&&o));if("rectangle"===u){var m=f.multiply(2),g=t(this,i,m);if(g)a=e(i.subtract(g.point),d,f,g.quadrant);else{var v=new w(this._size).setCenter(0,0),y=v.expand(m),_=v.expand(m.negate());a=y._containsPoint(i)&&!_._containsPoint(i)}}else a=e(i,d,f)}return a?new D(c?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var s=new P(u.getNamed(r),e);return s._type=t,s._size=n,s._radius=i,s}return{Circle:function(){var e=y.readNamed(arguments,"center"),n=u.readNamed(arguments,"radius");return t("circle",e,new b(2*n),n,arguments)},Rectangle:function(){var e=w.readNamed(arguments,"rectangle"),n=b.min(b.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=P._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(u.hasNamed(t,"radius"))e=y.readNamed(t,"center"),n=b.readNamed(t,"radius");else{var i=w.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),R=T.extend({},{_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:!0,beans:!0,initialize:function(t,e){if(!this._initialize(t,e!==l&&y.read(arguments))){var n,i=typeof t,r="string"===i?h.getElementById(t):"object"===i?t:null;if(r&&r!==T.NO_INSERT)if(r.getContent||null!=r.naturalHeight)n=r;else if(r){var s=b.read(arguments);s.isZero()||(n=lt.getCanvas(s))}n?this.setImage(n):this.setSource(t)}this._size||(this._size=new b,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=lt.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new x(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=b.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(lt.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&lt.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new y(0,0).transform(t),n=new y(1,0).transform(t).subtract(e),i=new y(0,1).transform(t).subtract(e);return new b(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),i=t&&t.type||"load";n&&e.responds(i)&&(dt=n._scope,e.emit(i,new tt(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&K.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&lt.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new b(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=lt.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){lt.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new a.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=t,this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=w.read(arguments),e=lt.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=w.read(arguments),e=new R(T.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=y.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof z?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new w(t):"x"in t&&(e=new w(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=Math.min(e.width,32),r=Math.min(e.height,32),s=R._sampleContext;s?s.clearRect(0,0,33,33):s=R._sampleContext=lt.getContext(new b(32)),s.save();var o=(new E).scale(i/e.width,r/e.height).translate(-e.x,-e.y);o.applyToContext(s),n&&n.draw(s,new u({clip:!0,matrices:[o]})),this._matrix.applyToContext(s);var a=this.getElement(),l=this._size;a&&s.drawImage(a,-l.width/2,-l.height/2),s.restore();for(var c=s.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,h=[0,0,0],d=0,p=0,f=c.length;p<f;p+=4){var m=c[p+3];d+=m,h[0]+=c[p]*(m/=255),h[1]+=c[p+1]*m,h[2]+=c[p+2]*m}for(p=0;p<3;p++)h[p]/=d;return d?q.read(h):null},getPixel:function(){var t=y.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new q("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=y.read(arguments),e=q.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),o=s.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=i?255*i:255,r.putImageData(s,t.x,t.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=b.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=w.read(arguments);return t.isEmpty()&&(t=new w(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=y.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new D("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();i&&i.width>0&&i.height>0&&(t.globalAlpha=this._opacity,this._setStyles(t,e,n),Z.setPrefixed(t,"imageSmoothingEnabled",this._smoothing),t.drawImage(i,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),O=T.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==l&&y.read(arguments,1))||this.setDefinition(t instanceof I?t:new I(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var i=this._definition._item._hitTest(t,e,n);return i&&(i.item=this),i},_draw:function(t,e){this._definition._item.draw(t,e)}}),I=u.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=v.get(),this.project=dt.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return u.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&T._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new y),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new O(this,t)},clone:function(){return new I(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),D=u.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&u.read(t);return u.set({type:null,tolerance:dt.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),k=u.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,i,r,s){var o,a,c,h,u=arguments.length;u>0&&(null==t||"object"==typeof t?1===u&&t&&"point"in t?(o=t.point,a=t.handleIn,c=t.handleOut,h=t.selection):(o=t,a=e,c=n,h=i):(o=[t,e],a=n!==l?[n,i]:null,c=r!==l?[r,s]:null)),new N(o,this,"_point"),new N(a,this,"_handleIn"),new N(c,this,"_handleOut"),h&&this.setSelection(h)},_serialize:function(t,e){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),u.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(y.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(y.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(y.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==l?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new F(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var i=t||{},r=i.type,s=i.factor,o=this.getPrevious(),a=this.getNext(),c=(o||this)._point,h=this._point,u=(a||this)._point,d=c.getDistance(h),p=h.getDistance(u);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(o&&a){var f=c.subtract(u),m=s===l?.4:s,g=m*d/(d+p);e||this.setHandleIn(f.multiply(g)),n||this.setHandleOut(f.multiply(g-m))}}else{var v,_=s===l?.5:s,b=Math.pow(d,_),x=b*b,w=Math.pow(p,_),A=w*w;if(!e&&o){var E=2*A+3*w*b+x;this.setHandleIn(0!=(v=3*w*(w+b))?new y((A*c._x+E*h._x-x*u._x)/v-h._x,(A*c._y+E*h._y-x*u._y)/v-h._y):new y)}!n&&a&&(E=2*x+3*b*w+A,this.setHandleOut(0!=(v=3*b*(b+w))?new y((x*u._x+E*h._x-A*c._x)/v-h._x,(x*u._y+E*h._y-A*c._y)/v-h._y):new y))}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new k(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new k(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,s=t._point,o=e._point,a=t._handleIn,l=e._handleIn,c=e._handleOut,h=t._handleOut;this._point._set(i*s._x+r*o._x,i*s._y+r*o._y,!0),this._handleIn._set(i*a._x+r*l._x,i*a._y+r*l._y,!0),this._handleOut._set(i*h._x+r*c._x,i*h._y+r*c._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,a=i._y,l=2;return e[0]=o,e[1]=a,r&&(e[l++]=r._x+o,e[l++]=r._y+a),s&&(e[l++]=s._x+o,e[l++]=s._y+a),t&&(t._transformCoordinates(e,e,l/2),o=e[0],a=e[1],n?(i._x=o,i._y=a,l=2,r&&(r._x=e[l++]-o,r._y=e[l++]-a),s&&(s._x=e[l++]-o,s._y=e[l++]-a)):(r||(e[l++]=o,e[l++]=a),s||(e[l++]=o,e[l++]=a))),e}}),N=y.extend({initialize:function(t,e,n){var i,r,s;if(t)if((i=t[0])!==l)r=t[1];else{var o=t;(i=o.x)===l&&(i=(o=y.read(arguments)).x),r=o.y,s=o.selected}else i=r=0;this._x=i,this._y=r,this._owner=e,e[n]=this,s&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=g.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),B=u.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,s,o,a){var l,c,h,u,d,p,f=arguments.length;3===f?(this._path=t,l=e,c=n):f?1===f?"segment1"in t?(l=new k(t.segment1),c=new k(t.segment2)):"point1"in t?(h=t.point1,d=t.handle1,p=t.handle2,u=t.point2):Array.isArray(t)&&(h=[t[0],t[1]],u=[t[6],t[7]],d=[t[2]-t[0],t[3]-t[1]],p=[t[4]-t[6],t[5]-t[7]]):2===f?(l=new k(t),c=new k(e)):4===f?(h=t,d=e,p=n,u=i):8===f&&(h=[t,e],u=[o,a],d=[n-t,i-e],p=[r-o,s-a]):(l=new k,c=new k),this._segment1=l||new k(h,null,d),this._segment2=c||new k(u,p,null)},_serialize:function(t,e){return u.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=l},clone:function(){return new B(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return B.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(y.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(y.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(y.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(y.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return B.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new y(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=B.getLength(this.getValues(),0,1)),this._length},getArea:function(){return B.getArea(this.getValues())},getLine:function(){return new S(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new B(B.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return B.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=1-1e-8){var i=B.subdivide(this.getValues(),t),r=i[0],s=i[1],o=e||this.hasHandles(),a=this._segment1,l=this._segment2,c=this._path;o&&(a._handleOut._set(r[2]-r[0],r[3]-r[1]),l._handleIn._set(s[4]-s[6],s[5]-s[7]));var h=r[6],u=r[7],d=new k(new y(h,u),o&&new y(r[4]-h,r[5]-u),o&&new y(s[2]-h,s[3]-u));c?(c.insert(a._index+1,d),n=this.getNext()):(this._segment2=d,this._changed(),n=new B(d,l))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===l?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===l?.5:e?t:this.getTimeAt(t))},reversed:function(){return new B(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,s=t._handleOut,o=e._handleIn,a=e._point,l=r.x,c=r.y,h=a.x,u=a.y,d=i?[l,c,l,c,h,u,h,u]:[l,c,l+s._x,c+s._y,h+o._x,u+o._y,h,u];return n&&n._transformCoordinates(d,d,4),d},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],c=t[6],h=t[7];e===l&&(e=.5);var u=1-e,d=u*n+e*r,p=u*i+e*s,f=u*r+e*o,m=u*s+e*a,g=u*o+e*c,v=u*a+e*h,y=u*d+e*f,_=u*p+e*m,b=u*f+e*g,x=u*m+e*v,w=u*y+e*b,A=u*_+e*x;return[[n,i,d,p,y,_,w,A],[w,A,b,x,g,v,c,h]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],s=t[i+2],o=t[i+4],a=t[i+6];if(r>=s==s>=o&&s>=o==o>=a||B.isStraight(t))n.push(t);else{var l=[],c=g.solveQuadratic(3*(s-o)-r+a,2*(r+o)-4*s,s-r,l,1e-8,1-1e-8);if(c){l.sort();var h=l[0],u=B.subdivide(t,h);n.push(u[0]),c>1&&(u=B.subdivide(u[1],h=(l[1]-h)/(1-h)),n.push(u[0])),n.push(u[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,s){var o=t[e],a=t[e+2],l=t[e+4],c=t[e+6],h=0;if(!(o<n&&c<n&&a<n&&l<n||o>n&&c>n&&a>n&&l>n)){var u=3*(a-o),d=3*(l-a)-u;h=g.solveCubic(c-o-u-d,d,u,o-n,i,r,s)}return h},getTimeOf:function(t,e){var n=new y(t[0],t[1]),i=new y(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var r=[e.x,e.y],s=[],o=0;o<2;o++)for(var a=B.solveCubic(t,o,r[o],s,0,1),l=0;l<a;l++){var c=s[l];if(e.isClose(B.getPoint(t,c),1e-7))return c}return e.isClose(n,1e-7)?0:e.isClose(i,1e-7)?1:null},getNearestTime:function(t,e){if(B.isStraight(t)){var n=t[0],i=t[1],r=t[6]-n,s=t[7]-i,o=r*r+s*s;if(0===o)return 0;var a=((e.x-n)*r+(e.y-i)*s)/o;return a<1e-12?0:a>.999999999999?1:B.getTimeOf(t,new y(n+a*r,i+a*s))}var l=1/0,c=0;function h(n){if(n>=0&&n<=1){var i=e.getDistance(B.getPoint(t,n),!0);if(i<l)return l=i,c=n,!0}}for(var u=0;u<=100;u++)h(u/100);for(var d=.005;d>1e-8;)h(c-d)||h(c+d)||(d/=2);return c},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=B.subdivide(t,e)[1]),n<1&&(t=B.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[6],s=t[7],o=3*t[2]-2*n-r,a=3*t[3]-2*i-s,l=3*t[4]-2*r-n,c=3*t[5]-2*s-i;return Math.max(o*o,l*l)+Math.max(a*a,c*c)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7];return 3*((l-n)*(i+s)-(a-e)*(r+o)+r*(e-s)-i*(n-o)+l*(s+e/3)-a*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)B._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new w(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,o,a,l){function c(t,e){var n=t-e,i=t+e;n<o[r]&&(o[r]=n),i>a[r]&&(a[r]=i)}var h=o[r]-(s/=2),u=a[r]+s;if(t<h||e<h||n<h||i<h||t>u||e>u||n>u||i>u)if(e<t!=e<i&&n<t!=n<i)c(t,s),c(i,s);else{var d=g.solveQuadratic(3*(e-n)-t+i,2*(t+n)-4*e,e-t,l);c(i,0);for(var p=0;p<d;p++){var f=l[p],m=1-f;1e-8<=f&&f<=1-1e-8&&c(m*m*m*t+3*m*m*f*e+3*m*f*f*n+f*f*f*i,s)}}}}},u.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=U[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),u.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var s=new S(t,i);if(s.getDistance(t.add(e))<1e-7&&s.getDistance(i.add(n))<1e-7){var o=r.dot(r),a=r.dot(e)/o,l=r.dot(n)/o;return a>=0&&a<=1&&l<=0&&l>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],s=e[6],o=e[7];return t(new y(i,r),new y(e[2]-i,e[3]-r),new y(e[4]-s,e[5]-o),new y(s,o),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new F(this,t):null},getTimeAt:function(t,e){return B.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=y.read(arguments);return t.isZero()?[]:B.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(y.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return B.getTimeOf(this.getValues(),y.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=y.read(arguments),e=this.getValues(),n=B.getNearestTime(e,t),i=B.getPoint(e,n);return new F(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return u.each(t,function(t){this[t+"At"]=function(e,n){var i=this.getValues();return B[t](i,n?e:B.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return B[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=9*(i-s)+3*(t[6]-e),l=6*(e+s)-12*i,c=3*(i-e),h=9*(r-o)+3*(t[7]-n),u=6*(n+o)-12*r,d=3*(r-n);return function(t){var e=(a*t+l)*t+c,n=(h*t+u)*t+d;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5],h=t[6],u=t[7],d=g.isZero;d(o-r)&&d(a-s)&&(o=r,a=s),d(l-h)&&d(c-u)&&(l=h,c=u);var p,f,m=3*(o-r),v=3*(l-o)-m,_=h-r-m-v,b=3*(a-s),x=3*(c-a)-b,w=u-s-b-x;if(0===n)p=0===e?r:1===e?h:((_*e+v)*e+m)*e+r,f=0===e?s:1===e?u:((w*e+x)*e+b)*e+s;else{if(e<1e-8?(p=m,f=b):e>1-1e-8?(p=3*(h-l),f=3*(u-c)):(p=(3*_*e+2*v)*e+m,f=(3*w*e+2*x)*e+b),i){0===p&&0===f&&(e<1e-8||e>1-1e-8)&&(p=l-o,f=c-a);var A=Math.sqrt(p*p+f*f);A&&(p/=A,f/=A)}if(3===n){l=6*_*e+2*v,c=6*w*e+2*x;var E=Math.pow(p*p+f*f,1.5);p=0!==E?(p*c-f*l)/E:0,f=0}}return 2===n?new y(f,-p):new y(p,f)}return{statics:{classify:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],h=i*(n-c)+r*(a-e)+e*c-n*a,u=3*(s*(r-n)+o*(e-i)+i*n-r*e),d=u-h,p=d-h+(e*(c-o)+n*(s-a)+a*o-c*s),f=Math.sqrt(p*p+d*d+u*u),m=0!==f?1/f:0,v=g.isZero;function y(t,e,n){var i=e!==l,r=i&&e>0&&e<1,s=i&&n>0&&n<1;return!i||(r||s)&&("loop"!==t||r&&s)||(t="arch",r=s=!1),{type:t,roots:r||s?r&&s?e<n?[e,n]:[n,e]:[r?e:n]:null}}if(d*=m,u*=m,v(p*=m))return v(d)?y(v(u)?"line":"quadratic"):y("serpentine",u/(3*d));var _=3*d*d-4*p*u;if(v(_))return y("cusp",d/(2*p));var b=_>0?Math.sqrt(_/3):Math.sqrt(-_),x=2*p;return y(_>0?"serpentine":"loop",(d+b)/x,(d-b)/x)},getLength:function(n,i,r,s){if(i===l&&(i=0),r===l&&(r=1),B.isStraight(n)){var o=n;r<1&&(o=B.subdivide(o,r)[0],i/=r),i>0&&(o=B.subdivide(o,i)[1]);var a=o[6]-o[0],c=o[7]-o[1];return Math.sqrt(a*a+c*c)}return g.integrate(s||t(n),i,r,e(i,r))},getTimeAt:function(n,i,r){if(r===l&&(r=i<0?1:0),0===i)return r;var s=Math.abs,o=i>0,a=o?r:0,c=o?1:r,h=t(n),u=B.getLength(n,a,c,h),d=s(i)-u;if(s(d)<1e-12)return o?c:a;if(d>1e-12)return null;var p=0;return g.findRoot(function(t){return p+=g.integrate(h,r,t,e(r,t)),r=t,p-i},h,r+i/u,a,c,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=3*i-e-3*s+t[6],l=3*e-6*i+3*s,c=-3*e+3*i,h=3*r-n-3*o+t[7],u=3*n-6*r+3*o,d=-3*n+3*r,p=[];return g.solveCubic(9*(a*a+h*h),9*(a*l+u*h),2*(l*l+u*u)+3*(c*a+d*h),c*l+u*d,p,1e-8,1-1e-8),p.sort()}}}},new function(){function t(t,e,n,i,r,s,o){var a=!o&&n.getPrevious()===r,l=!o&&n!==r&&n.getNext()===r;if(null!==i&&i>=(a?1e-8:0)&&i<=(l?1-1e-8:1)&&null!==s&&s>=(l?1e-8:0)&&s<=(a?1-1e-8:1)){var c=new F(n,i,null,o),h=new F(r,s,null,o);c._intersection=h,h._intersection=c,e&&!e(c)||F.insert(t,c,!0)}}function e(t,e,i,r){return t[0][1]<i?n(t,!0,i):e[0][1]>r?n(e,!1,r):t[0][0]}function n(t,e,n){for(var i=t[0][0],r=t[0][1],s=1,o=t.length;s<o;s++){var a=t[s][0],l=t[s][1];if(e?l>=n:l<=n)return l===n?a:i+(n-r)*(a-i)/(l-r);i=a,r=l}return null}function i(t,e,n,i,r){var s=g.isZero;if(s(i)&&s(r)){var o=B.getTimeOf(t,new y(e,n));return null===o?[]:[o]}for(var a=Math.atan2(-r,i),l=Math.sin(a),c=Math.cos(a),h=[],u=[],d=0;d<8;d+=2){var p=t[d]-e,f=t[d+1]-n;h.push(p*c-f*l,p*l+f*c)}return B.solveCubic(h,1,0,u,0,1),u}function r(n,r,s,a,l,c){var h=Math.min,u=Math.max;if(u(n[0],n[2],n[4],n[6])+1e-12>h(r[0],r[2],r[4],r[6])&&h(n[0],n[2],n[4],n[6])-1e-12<u(r[0],r[2],r[4],r[6])&&u(n[1],n[3],n[5],n[7])+1e-12>h(r[1],r[3],r[5],r[7])&&h(n[1],n[3],n[5],n[7])-1e-12<u(r[1],r[3],r[5],r[7])){var d=o(n,r);if(d)for(var p=0;p<2;p++){var f=d[p];t(l,c,s,f[0],a,f[1],!0)}else{var m=B.isStraight(n),g=B.isStraight(r),v=m&&g,_=m&&!g,b=l.length;if((v?function(e,n,i,r,s,o){var a=S.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);a&&t(s,o,i,B.getTimeOf(e,a),r,B.getTimeOf(n,a))}:m||g?function(e,n,r,s,o,a,l){for(var c=n[0],h=n[1],u=i(e,c,h,n[6]-c,n[7]-h),d=0,p=u.length;d<p;d++){var f=u[d],m=B.getPoint(e,f),g=B.getTimeOf(n,m);null!==g&&t(o,a,l?s:r,l?g:f,l?r:s,l?f:g)}}:function n(i,r,s,o,a,l,c,h,u,d,p,f,m){if(++u>=4096||++h>=40)return u;var g,v,y=r[0],_=r[1],b=r[6],x=r[7],w=S.getSignedDistance,A=w(y,_,b,x,r[2],r[3]),E=w(y,_,b,x,r[4],r[5]),M=A*E>0?.75:4/9,T=M*Math.min(0,A,E),C=M*Math.max(0,A,E),L=w(y,_,b,x,i[0],i[1]),P=w(y,_,b,x,i[2],i[3]),R=w(y,_,b,x,i[4],i[5]),O=w(y,_,b,x,i[6],i[7]),I=function(t,e,n,i){var r,s=[0,L],o=[1/3,P],a=[2/3,R],l=[1,O],c=P-(2*L+O)/3,h=R-(L+2*O)/3;if(c*h<0)r=[[s,o,l],[s,a,l]];else{var u=c/h;r=[u>=2?[s,o,l]:u<=.5?[s,a,l]:[s,o,a,l],[s,l]]}return(c||h)<0?r.reverse():r}(),D=I[0],k=I[1];if(0===A&&0===E&&0===L&&0===P&&0===R&&0===O||null==(g=e(D,k,T,C))||null==(v=e(D.reverse(),k.reverse(),T,C)))return u;var N=d+(p-d)*g,F=d+(p-d)*v;if(Math.max(m-f,F-N)<1e-9){var z=(N+F)/2,U=(f+m)/2;t(a,l,c?o:s,c?U:z,c?s:o,c?z:U)}else{var j;i=B.getPart(i,g,v),v-g>.8?F-N>m-f?(u=n(r,(j=B.subdivide(i,.5))[0],o,s,a,l,!c,h,u,f,m,N,z=(N+F)/2),u=n(r,j[1],o,s,a,l,!c,h,u,f,m,z,F)):(u=n((j=B.subdivide(r,.5))[0],i,o,s,a,l,!c,h,u,f,U=(f+m)/2,N,F),u=n(j[1],i,o,s,a,l,!c,h,u,U,m,N,F)):u=m-f>=1e-9?n(r,i,o,s,a,l,!c,h,u,f,m,N,F):n(i,r,s,o,a,l,c,h,u,N,F,f,m)}return u})(_?r:n,_?n:r,_?a:s,_?s:a,l,c,_,0,0,0,1,0,1),!v||l.length===b)for(p=0;p<4;p++){var x=p>>1,w=1&p,A=6*x,E=6*w,M=new y(n[A],n[A+1]),T=new y(r[E],r[E+1]);M.isClose(T,1e-12)&&t(l,c,s,x,a,w)}}}return l}function s(e,n,i,r){var s=B.classify(e);if("loop"===s.type){var o=s.roots;t(i,r,n,o[0],n,o[1])}return i}function o(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=S.getDistance,s=B.isStraight(t),o=B.isStraight(e),a=s&&o,l=n(t)<n(e),c=l?e:t,h=l?t:e,u=c[0],d=c[1],p=c[6]-u,f=c[7]-d;if(r(u,d,p,f,h[0],h[1],!0)<1e-7&&r(u,d,p,f,h[6],h[7],!0)<1e-7)!a&&r(u,d,p,f,c[2],c[3],!0)<1e-7&&r(u,d,p,f,c[4],c[5],!0)<1e-7&&r(u,d,p,f,h[2],h[3],!0)<1e-7&&r(u,d,p,f,h[4],h[5],!0)<1e-7&&(s=o=a=!0);else if(a)return null;if(s^o)return null;for(var m=[t,e],g=[],v=0;v<4&&g.length<2;v++){var _=1&v,b=1^_,x=v>>1,w=B.getTimeOf(m[_],new y(m[b][x?6:0],m[b][x?7:1]));if(null!=w){var A=_?[x,w]:[w,x];(!g.length||i(A[0]-g[0][0])>1e-8&&i(A[1]-g[0][1])>1e-8)&&g.push(A)}if(v>2&&!g.length)break}if(2!==g.length)g=null;else if(!a){var E=B.getPart(t,g[0][0],g[1][0]),M=B.getPart(e,g[0][1],g[1][1]);(i(M[2]-E[2])>1e-7||i(M[3]-E[3])>1e-7||i(M[4]-E[4])>1e-7||i(M[5]-E[5])>1e-7)&&(g=null)}return g}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?r(e,n,this,t,[]):s(e,this,[])},statics:{getOverlaps:o,getIntersections:function(t,e,n,i,o,a){var l=!e;l&&(e=t);for(var c,h,d=t.length,p=e.length,f=[],m=[],g=0;g<p;g++)f[g]=e[g].getValues(o);for(g=0;g<d;g++){var v=t[g],y=l?f[g]:v.getValues(i),_=v.getPath();_!==h&&(h=_,m.push(c=[])),l&&s(y,v,c,n);for(var b=l?g+1:0;b<p;b++){if(a&&c.length)return c;r(y,f[b],v,e[b],c,n)}}c=[],g=0;for(var x=m.length;g<x;g++)u.push(c,m[g]);return c},getCurveLineIntersections:i,getTimesWithTangent:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=e.normalize(),u=h.x,d=h.y,p=3*l-9*o+9*r-3*n,f=3*c-9*a+9*s-3*i,m=6*o-12*r+6*n,v=6*a-12*s+6*i,y=3*r-3*n,_=3*s-3*i,b=2*p*d-2*f*u,x=[];if(Math.abs(b)<g.CURVETIME_EPSILON){if(0!=(b=p*v-f*m)){var w=-(p*_-f*y)/b;w>=0&&w<=1&&x.push(w)}}else{var A=(m*m-4*p*y)*d*d+(-2*m*v+4*f*y+4*p*_)*u*d+(v*v-4*f*_)*u*u,E=m*d-v*u;if(A>=0&&0!=b){var S=Math.sqrt(A),M=-(E+S)/b,T=(-E+S)/b;M>=0&&M<=1&&x.push(M),T>=0&&T<=1&&x.push(T)}}return x}}}}),F=u.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof F){var i=this.getCurve(),r=t.getCurve(),s=i._path;if(s===r._path){var o=Math.abs,a=o(this.getOffset()-t.getOffset()),l=!e&&this._intersection,c=!e&&t._intersection;n=(a<1e-7||s&&o(s.getLength()-a)<1e-7)&&(!l&&!c||l&&c&&l.equals(c,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=m.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),i=e>=1e-8&&e<=1-1e-8,r=n>=1e-8&&n<=1-1e-8;if(i&&r)return!this.isTouching();var s=this.getCurve(),o=e<1e-8?s.getPrevious():s,a=t.getCurve(),l=n<1e-8?a.getPrevious():a;if(e>1-1e-8&&(s=s.getNext()),n>1-1e-8&&(a=a.getNext()),!(o&&s&&l&&a))return!1;var c=[];function h(t,e){var n=t.getValues(),i=B.classify(n).roots||B.getPeaks(n),r=i.length,s=e&&r>1?i[r-1]:r>0?i[0]:.5;c.push(B.getLength(n,e?s:0,e?1:s)/2)}function u(t,e,n){return e<n?t>e&&t<n:t>e||t<n}i||(h(o,!0),h(s,!1)),r||(h(l,!0),h(a,!1));var d=this.getPoint(),p=Math.min.apply(Math,c),f=i?s.getTangentAtTime(e):s.getPointAt(p).subtract(d),m=i?f.negate():o.getPointAt(-p).subtract(d),g=r?a.getTangentAtTime(n):a.getPointAt(p).subtract(d),v=r?g.negate():l.getPointAt(-p).subtract(d),y=m.getAngle(),_=f.getAngle(),b=v.getAngle(),x=g.getAngle();return!!(i?u(y,b,x)^u(_,b,x)&&u(y,x,b)^u(_,x,b):u(b,y,_)^u(x,y,_)&&u(b,_,y)^u(x,_,y))},hasOverlap:function(){return!!this._overlap}},u.each(B._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}},{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,s=i-1;function o(n,r){for(var s=n+r;s>=-1&&s<=i;s+=r){var o=t[(s%i+i)%i];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(;r<=s;){var a,l=r+s>>>1,c=t[l];if(n&&(a=e.equals(c)?c:o(l,-1)||o(l,1)))return e._overlap&&(a._overlap=a._intersection._overlap=!0),a;var h=e.getPath(),u=c.getPath();(h!==u?h._id-u._id:e.getIndex()+e.getTime()-(c.getIndex()+c.getTime()))<0?s=l-1:r=l+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),z=T.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(u.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var r=n[0];i=r&&Array.isArray(r[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(i?j:U)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,i,r=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,o=new y,a=new y;function l(t,n){var i=+e[t];return s&&(i+=o[n]),i}function c(t){return new y(l(t,"x"),l(t+1,"y"))}this.clear();for(var h=0,u=r&&r.length;h<u;h++){var d=r[h],p=d[0],f=p.toLowerCase(),m=(e=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(s=p===f,"z"!==n||/[mz]/.test(f)||this.moveTo(o),f){case"m":case"l":for(var g="m"===f,v=0;v<m;v+=2)this[g?"moveTo":"lineTo"](o=c(v)),g&&(a=o,g=!1);i=o;break;case"h":case"v":var _="h"===f?"x":"y";for(o=o.clone(),v=0;v<m;v++)o[_]=l(v,_),this.lineTo(o);i=o;break;case"c":for(v=0;v<m;v+=6)this.cubicCurveTo(c(v),i=c(v+2),o=c(v+4));break;case"s":for(v=0;v<m;v+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(i):o,i=c(v),o=c(v+2)),n=f;break;case"q":for(v=0;v<m;v+=4)this.quadraticCurveTo(i=c(v),o=c(v+2));break;case"t":for(v=0;v<m;v+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?o.multiply(2).subtract(i):o,o=c(v)),n=f;break;case"a":for(v=0;v<m;v+=7)this.arcTo(o=c(v+5),new b(+e[v],+e[v+1]),+e[v+2],+e[v+4],+e[v+3]);break;case"z":this.closePath(1e-12),o=a}n=f}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),o=r?s:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(s).intersects(t.getBounds(o),1e-12)?B.getIntersections(this.getCurves(),!r&&t.getCurves(),e,s,o,i):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=y.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;r<s;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",s=t[r],o=e[r],a=this[r];if(!s||!o||s.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=a.length,c=o.length;if(l<c)for(var h=i?k:U,u=l;u<c;u++)this.add(new h);else l>c&&this[i?"removeSegments":"removeChildren"](c,l);for(u=0;u<c;u++)a[u].interpolate(s[u],o[u],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=i.length,s=[],o=0;e=!0;for(var a=n.length-1;a>=0&&e;a--){var l=n[a];e=!1;for(var c=r-1;c>=0&&!e;c--)l.compare(i[c])&&(s[c]||(s[c]=!0,o++),e=!0)}e=e&&o===r}return e}}),U=z.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==l||t.x===l&&t.point===l?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=l,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&u.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=l,32&e)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 64&e&&(this._bounds=l)},getStyle:function(){var t=this._parent;return(t instanceof j?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=l,n){var i=t[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(k.readList(t,0,{},n))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new B(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new B(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,i,r,s,o,a,l,c,h=this._segments,u=h.length,d=new m(e),p=new Array(6),f=!0,g=[];function v(e,h){if(e._transformCoordinates(t,p),n=p[0],i=p[1],f)g.push("M"+d.pair(n,i)),f=!1;else if(a=p[3],(o=p[2])===n&&a===i&&l===r&&c===s){if(!h){var u=n-r,m=i-s;g.push(0===u?"v"+d.number(m):0===m?"h"+d.number(u):"l"+d.pair(u,m))}}else g.push("c"+d.pair(l-r,c-s)+" "+d.pair(o-r,a-s)+" "+d.pair(n-r,i-s));r=n,s=i,l=p[4],c=p[5]}if(!u)return"";for(var y=0;y<u;y++)v(h[y]);return this._closed&&u>0&&(v(h[0],!0),g.push("z")),g.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,s=null==e,o=(e=s?n.length:e,0);o<r;o++){var a=t[o];a._path&&(a=t[o]=a.clone()),a._path=this,a._index=e+o,a._selection&&this._updateSelection(a,0,a._selection)}if(s)u.push(n,t);else{n.splice.apply(n,[e,0].concat(t)),o=e+r;for(var l=n.length;o<l;o++)n[o]._index=o}if(i){var c=this._countCurves(),h=e>0&&e+r-1===c?e-1:e,d=h,p=Math.min(h+r,c);for(t._curves&&(i.splice.apply(i,[h,0].concat(t._curves)),d+=t._curves.length),o=d;o<p;o++)i.splice(o,0,new B(this,null,null));this._adjustCurves(h,p)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;s<e;s++)(n=r[s])._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(k.readList(arguments)):this._add([k.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(k.readList(arguments,1),t):this._add([k.read(arguments,1)],t)[0]},addSegment:function(){return this._add([k.read(arguments)])[0]},insertSegment:function(t){return this._add([k.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(k.readList(t))},insertSegments:function(t,e){return this._add(k.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=u.pick(e,this._segments.length);var i=this._segments,r=this._curves,s=i.length,o=i.splice(t,e-t),a=o.length;if(!a)return o;for(var l=0;l<a;l++){var c=o[l];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}l=t;for(var h=i.length;l<h;l++)i[l]._index=l;if(r){var d=t>0&&e===s+(this._closed?1:0)?t-1:t;for(l=(r=r.splice(d,a)).length-1;l>=0;l--)r[l]._path=null;n&&(o._curves=r.slice(1)),this._adjustCurves(d,d)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var s=i+1===r;t+=B.getArea(B.getValues(e[i],e[s?0:i+1],null,s&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time;i>1-1e-8&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var s,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new U(T.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(o,0),this.addSegment(o[0]),s}return null},split:function(t,e){var n,i=e===l?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=i?this.splitAt(i):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,n)&&t.reverse();var o=t.getFirstSegment();if(r&&r._point.isClose(o._point,n))r.setHandleOut(o._handleOut),this._add(i.slice(1));else{var a=this.getFirstSegment();a&&a._point.isClose(o._point,n)&&t.reverse(),s=t.getLastSegment(),a&&a._point.isClose(s._point,n)?(a.setHandleIn(s._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var l=this.getFirstSegment(),c=this.getLastSegment();return l!==c&&l._point.isClose(c._point,n)&&(l.setHandleIn(c._handleIn),c.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(!s.hasLength(i)||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new H(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new k(e[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new k(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new V(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,n=t||{},i=n.type||"asymmetric",r=this._segments,s=r.length,o=this._closed;function a(t,n){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==e)throw new Error(t._class+" "+i+" of "+r+" is not part of "+e);n&&t instanceof B&&i++}else i="number"==typeof t?t:n;return Math.min(i<0&&o?i%s:i<0?i+s:i,s-1)}var c=o&&n.from===l&&n.to===l,h=a(n.from,0),u=a(n.to,s-1);if(h>u)if(o)h-=s;else{var d=h;h=u,u=d}if(/^(?:asymmetric|continuous)$/.test(i)){var p="asymmetric"===i,f=Math.min,m=u-h+1,g=m-1,v=c?f(m,4):1,y=v,_=v,b=[];if(o||(y=f(1,h),_=f(1,s-u-1)),(g+=y+_)<=1)return;for(var x=0,w=h-y;x<=g;x++,w++)b[x]=r[(w<0?w+s:w)%s]._point;var A=b[0]._x+2*b[1]._x,E=b[0]._y+2*b[1]._y,S=2,M=g-1,T=[A],C=[E],L=[S],P=[],R=[];for(x=1;x<g;x++){var O=x<M,I=O?4:p?3:8,D=O?2:p?0:1,k=(O?1:p?1:2)/S;S=L[x]=(O?4:p?2:7)-k,A=T[x]=I*b[x]._x+D*b[x+1]._x-k*A,E=C[x]=I*b[x]._y+D*b[x+1]._y-k*E}for(P[M]=T[M]/L[M],R[M]=C[M]/L[M],x=g-2;x>=0;x--)P[x]=(T[x]-P[x+1])/L[x],R[x]=(C[x]-R[x+1])/L[x];P[g]=(3*b[g]._x-P[M])/2,R[g]=(3*b[g]._y-R[M])/2,x=y;var N=g-_;for(w=h;x<=N;x++,w++){var F=r[w<0?w+s:w],z=F._point,U=P[x]-z._x,j=R[x]-z._y;(c||x<N)&&F.setHandleOut(U,j),(c||x>y)&&F.setHandleIn(-U,-j)}}else for(x=h;x<=u;x++)r[x<0?x+s:x].smooth(n,!c&&x===h,!c&&x===u)},toShape:function(t){if(!this._closed)return null;var e,n,i,r,s,o,a,c=this._segments;function h(t,e){var n=c[t],i=n.getNext(),r=c[e],s=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(s._point.subtract(r._point))}function u(t){var e=c[t],n=e.getNext(),i=e._handleOut,r=n._handleIn;if(i.isOrthogonal(r)){var s=e._point,o=n._point,a=new S(s,i,!0).intersect(new S(o,r,!0),!0);return a&&g.isZero(i.getLength()/a.subtract(s).getLength()-.5522847498307936)&&g.isZero(r.getLength()/a.subtract(o).getLength()-.5522847498307936)}return!1}function d(t,e){return c[t]._point.getDistance(c[e]._point)}if(!this.hasHandles()&&4===c.length&&h(0,2)&&h(1,3)&&(o=(s=c[1]).getPrevious(),a=s.getNext(),o._handleOut.isZero()&&s._handleIn.isZero()&&s._handleOut.isZero()&&a._handleIn.isZero()&&s._point.subtract(o._point).isOrthogonal(a._point.subtract(s._point)))?(e=P.Rectangle,n=new b(d(0,3),d(0,1)),r=c[1]._point.add(c[2]._point).divide(2)):8===c.length&&u(0)&&u(2)&&u(4)&&u(6)&&h(1,5)&&h(3,7)?(e=P.Rectangle,i=(n=new b(d(1,6),d(0,3))).subtract(new b(d(0,7),d(1,2))).divide(2),r=c[3]._point.add(c[4]._point).divide(2)):4===c.length&&u(0)&&u(1)&&u(2)&&u(3)&&(g.isZero(d(0,2)-d(1,3))?(e=P.Circle,i=d(0,2)/2):(e=P.Ellipse,i=new b(d(2,0)/2,d(3,1)/2)),r=c[1]._point),e){var p=this.getPosition(!0),f=new e({center:p,size:n,radius:i,insert:!1});return f.copyAttributes(this,!0),f._matrix.prepend(this._matrix),f.rotate(r.subtract(p).getAngle()+90),(t===l||t)&&f.insertAbove(this),f}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof j)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,s=i.length;if(!r||!s)return r==s;for(var o,a,l=n[0].getValues(),c=[],h=0,u=0,d=0;d<s;d++){var p=i[d].getValues();if(c.push(p),g=B.getOverlaps(l,p)){o=!d&&g[0][0]>0?s-1:d,a=g[0][1];break}}var f,m=Math.abs;for(p=c[o];l&&p;){var g;if((g=B.getOverlaps(l,p))&&m(g[0][0]-u)<1e-8){1===(u=g[1][0])&&(l=++h<r?n[h].getValues():null,u=0);var v=g[0][1];if(m(v-a)<1e-8){if(f||(f=[o,v]),1===(a=g[1][1])&&(++o>=s&&(o=0),p=c[o]||i[o].getValues(),a=0),!l)return f[0]===o&&f[1]===a;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){var r,s,o,a,l,c,h=this,u=this.getStyle(),d=this._segments,p=d.length,f=this._closed,m=e._tolerancePadding,g=m,v=e.stroke&&u.hasStroke(),y=e.fill&&u.hasFill(),_=e.curves,b=v?u.getStrokeWidth()/2:y&&e.tolerance>0||_?0:null;function x(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(n!==r&&(n=n.add(r)),x(n,g))return new D(i,h,{segment:t,point:n})}}function A(t,n){return(n||e.segments)&&w(t,t._point,"segment")||!n&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function E(t){a.add(t)}function S(e){var n,l=f||e._index>0&&e._index<p-1;return"round"===(l?r:s)?x(e._point,g):(a=new U({internal:!0,closed:!0}),l?e.isSmooth()||U._addBevelJoin(e,r,b,o,null,i,E,!0):"square"===s&&U._addSquareCap(e,s,b,null,i,E,!0),a.isEmpty()?void 0:a.contains(t)||(n=a.getNearestLocation(t))&&x(n.getPoint(),m))}if(null!==b&&(b>0?(r=u.getStrokeJoin(),s=u.getStrokeCap(),o=u.getMiterLimit(),g=g.add(U._getStrokePadding(b,i))):r=s="round"),!e.ends||e.segments||f){if(e.segments||e.handles)for(var M=0;M<p;M++)if(c=A(d[M]))return c}else if(c=A(d[0],!0)||A(d[p-1],!0))return c;if(null!==b){if(l=this.getNearestLocation(t)){var T=l.getTime();0===T||1===T&&p>1?S(l.getSegment())||(l=null):x(l.getPoint(),g)||(l=null)}if(!l&&"miter"===r&&p>1)for(M=0;M<p;M++){var C=d[M];if(t.getDistance(C._point)<=o*b&&S(C)){l=C.getLocation();break}}}return!l&&y&&this._contains(t)||l&&!v&&!_?new D("fill",this):l?new D(v?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},u.each(B._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}},{beans:!1,getLocationOf:function(){for(var t=y.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var s=n,o=e[i];if((n+=o.getLength())>t)return o.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new F(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=y.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),r=0,s=i.length;r<s;r++){for(var o=i[r],a=o.getTimesWithTangent(t),l=0,c=a.length;l<c;l++){var h=n+o.getOffsetAtTime(a[l]);e.indexOf(h)<0&&e.push(h)}n+=o.length}return e}}),new function(){function t(t,e,n){var i,r,s,o,a,l,c,h,u=e._segments,d=u.length,p=new Array(6),f=!0;function m(e){if(n)e._transformCoordinates(n,p),i=p[0],r=p[1];else{var u=e._point;i=u._x,r=u._y}var d;f?(t.moveTo(i,r),f=!1):(n?(a=p[2],l=p[3]):(a=i+(d=e._handleIn)._x,l=r+d._y),a===i&&l===r&&c===s&&h===o?t.lineTo(i,r):t.bezierCurveTo(c,h,a,l,i,r)),s=i,o=r,n?(c=p[4],h=p[5]):(c=s+(d=e._handleOut)._x,h=o+d._y)}for(var g=0;g<d;g++)m(u[g]);e._closed&&d>0&&m(u[0])}return{_draw:function(e,n,i,r){var s=n.dontStart,o=n.dontFinish||n.clip,a=this.getStyle(),l=a.hasFill(),c=a.hasStroke(),h=a.getDashArray(),u=!dt.support.nativeDash&&c&&h&&h.length;function d(t){return h[(t%u+u)%u]}if(s||e.beginPath(),(l||c&&!u||o)&&(t(e,this,r),this._closed&&e.closePath()),!o&&(l||c)&&(this._setStyles(e,n,i),l&&(e.fill(a.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),c)){if(u){s||e.beginPath();var p,f=new H(this,.25,32,!1,r),m=f.length,g=-a.getDashOffset(),v=0;for(g%=m;g>0;)g-=d(v--)+d(v--);for(;g<m;)p=g+d(v++),(g>0||p>0)&&f.drawPart(e,Math.max(g,0),Math.max(p,0)),g=p+d(v++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){if(!(i<=0))for(var r,s,o=i/2,a=i-2,l=o-1,c=new Array(6),h=0,u=e.length;h<u;h++){var d=e[h],p=d._selection;if(d._transformCoordinates(n,c),r=c[0],s=c[1],2&p&&m(2),4&p&&m(4),t.fillRect(r-o,s-o,i,i),a>0&&!(1&p)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-l,s-l,a,a),t.fillStyle=f}}function m(e){var n=c[e],i=c[e+1];r==n&&s==i||(t.beginPath(),t.moveTo(r,s),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,o,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,dt.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new k(y.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new k(y.read(arguments))])},cubicCurveTo:function(){var e=y.read(arguments),n=y.read(arguments),i=y.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new k(i,n.subtract(i))])},quadraticCurveTo:function(){var e=y.read(arguments),n=y.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=y.read(arguments),n=y.read(arguments),i=u.pick(u.read(arguments),.5),r=1-i,s=t(this)._point,o=e.subtract(s.multiply(r*r)).subtract(n.multiply(i*i)).divide(2*i*r);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(o,n)},arcTo:function(){var e,n,i,r,s=Math.abs,o=Math.sqrt,a=t(this),l=a._point,c=y.read(arguments),h=u.peek(arguments);if("boolean"==typeof(v=u.pick(h,!0)))var d=(x=l.add(c).divide(2)).add(x.subtract(l).rotate(v?-90:90));else if(u.remain(arguments)<=2)d=c,c=y.read(arguments);else if(!l.equals(c)){var p=b.read(arguments),f=g.isZero;if(f(p.width)||f(p.height))return this.lineTo(c);var m=u.read(arguments),v=!!u.read(arguments),_=!!u.read(arguments),x=l.add(c).divide(2),w=(X=l.subtract(x).rotate(-m)).x,A=X.y,M=s(p.width),T=s(p.height),C=M*M,L=T*T,P=w*w,R=A*A,O=o(P/C+R/L);if(O>1&&(C=(M*=O)*M,L=(T*=O)*T),s(O=(C*L-C*R-L*P)/(C*R+L*P))<1e-12&&(O=0),O<0)throw new Error("Cannot create an arc with the given arguments");e=new y(M*A/T,-T*w/M).multiply((_===v?-1:1)*o(O)).rotate(m).add(x),n=(i=(r=(new E).translate(e).rotate(m).scale(M,T))._inverseTransform(l)).getDirectedAngle(r._inverseTransform(c)),!v&&n>0?n-=360:v&&n<0&&(n+=360)}if(d){var I=new S(l.add(d).divide(2),d.subtract(l).rotate(90),!0),D=new S(d.add(c).divide(2),c.subtract(d).rotate(90),!0),N=new S(l,c),B=N.getSide(d);if(!(e=I.intersect(D,!0))){if(!B)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}n=(i=l.subtract(e)).getDirectedAngle(c.subtract(e));var F=N.getSide(e,!0);0===F?n=B*s(n):B===F&&(n+=n<0?360:-360)}if(n){for(var z=1e-7,U=s(n),j=U>=360?4:Math.ceil((U-z)/90),H=n/j,V=H*Math.PI/360,G=4/3*Math.sin(V)/(1+Math.cos(V)),W=[],q=0;q<=j;q++){var X=c,Y=null;if(q<j&&(Y=i.rotate(90).multiply(G),r?(X=r._transformPoint(i),Y=r._transformPoint(i.add(Y)).subtract(X)):X=e.add(i)),q){var Q=i.rotate(-90).multiply(G);r&&(Q=r._transformPoint(i.add(Q)).subtract(X)),W.push(new k(X,Q,Y))}else a.setHandleOut(Y);i=i.rotate(H)}this._add(W)}},lineBy:function(){var e=y.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=y.read(arguments),n=y.read(arguments),i=u.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(n),i)},cubicCurveBy:function(){var e=y.read(arguments),n=y.read(arguments),i=y.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=y.read(arguments),n=y.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(y.read(arguments)),i=u.pick(u.peek(arguments),!0);this.arcTo(n,"boolean"==typeof i?i:e.add(y.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){return U[e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds"](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,s){var o=t[0];if(!o)return new w;var a=new Array(6),l=o._transformCoordinates(i,new Array(6)),c=l.slice(0,2),h=c.slice(),u=new Array(2);function d(t){t._transformCoordinates(i,a);for(var e=0;e<2;e++)B._addBounds(l[e],l[e+4],a[e+2],a[e],e,s?s[e]:0,c,h,u);var n=l;l=a,a=n}for(var p=1,f=t.length;p<f;p++)d(t[p]);return e&&d(o),new w(c[0],c[1],h[0]-c[0],h[1]-c[1])},getStrokeBounds:function(t,e,n,i,r){var s=n.getStyle(),o=s.hasStroke(),a=s.getStrokeWidth(),l=o&&n._getStrokeMatrix(i,r),c=o&&U._getStrokePadding(a,l),h=U.getBounds(t,e,n,i,r,c);if(!o)return h;var u=a/2,d=s.getStrokeJoin(),p=s.getStrokeCap(),f=s.getMiterLimit(),m=new w(new b(c));function g(t){h=h.include(t)}function v(t){h=h.unite(m.setCenter(t._point.transform(i)))}function y(t,e){"round"===e||t.isSmooth()?v(t):U._addBevelJoin(t,e,u,f,i,l,g)}function _(t,e){"round"===e?v(t):U._addSquareCap(t,e,u,i,l,g)}for(var x=t.length-(e?0:1),A=1;A<x;A++)y(t[A],d);return e?y(t[0],d):x>0&&(_(t[0],p),_(t[t.length-1],p)),h},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new y(t,0).transform(e),i=new y(0,t).transform(e),r=n.getAngleInRadians(),s=n.getLength(),o=i.getLength(),a=Math.sin(r),l=Math.cos(r),c=Math.tan(r),h=Math.atan2(o*c,s),u=Math.atan2(o,c*s);return[Math.abs(s*Math.cos(h)*l+o*Math.sin(h)*a),Math.abs(o*Math.sin(u)*l+s*Math.cos(u)*a)]},_addBevelJoin:function(t,e,n,i,r,s,o,a){var l=t.getCurve(),c=l.getPrevious(),h=l.getPoint1().transform(r),u=c.getNormalAtTime(1).multiply(n).transform(s),d=l.getNormalAtTime(0).multiply(n).transform(s),p=u.getDirectedAngle(d);if((p<0||p>=180)&&(u=u.negate(),d=d.negate()),a&&o(h),o(h.add(u)),"miter"===e){var f=new S(h.add(u),new y(-u.y,u.x),!0).intersect(new S(h.add(d),new y(-d.y,d.x),!0),!0);f&&h.getDistance(f)<=i*n&&o(f)}o(h.add(d))},_addSquareCap:function(t,e,n,i,r,s,o){var a=t._point.transform(i),l=t.getLocation(),c=l.getNormal().multiply(0===l.getTime()?n:-n).transform(r);"square"===e&&(o&&(s(a.subtract(c)),s(a.add(c))),a=a.add(c.rotate(-90))),s(a.add(c)),s(a.subtract(c))},getHandleBounds:function(t,e,n,i,r){var s,o,a=n.getStyle();if(r.stroke&&a.hasStroke()){var l=n._getStrokeMatrix(i,r),c=a.getStrokeWidth()/2,h=c;"miter"===a.getStrokeJoin()&&(h=c*a.getMiterLimit()),"square"===a.getStrokeCap()&&(h=Math.max(h,c*Math.SQRT2)),s=U._getStrokePadding(c,l),o=U._getStrokePadding(h,l)}for(var u=new Array(6),d=1/0,p=-d,f=d,m=p,g=0,v=t.length;g<v;g++){t[g]._transformCoordinates(i,u);for(var y=0;y<6;y+=2){var _=y?s:o,b=_?_[0]:0,x=_?_[1]:0,A=u[y],E=u[y+1],S=A-b,M=A+b,T=E-x,C=E+x;S<d&&(d=S),M>p&&(p=M),T<f&&(f=T),C>m&&(m=C)}}return new w(d,f,p-d,m-f)}}});U.inject({statics:new function(){var t=.5522847498307936,e=[new k([-1,0],[0,t],[0,-t]),new k([0,-1],[-t,0],[t,0]),new k([1,0],[0,-t],[0,t]),new k([0,1],[t,0],[-t,0])];function n(t,e,n){var i=u.getNamed(n),r=new U(i&&0==i.insert&&T.NO_INSERT);return r._add(t),r._closed=e,r.set(i,{insert:!0})}function i(t,i,r){for(var s=new Array(4),o=0;o<4;o++){var a=e[o];s[o]=new k(a._point.multiply(i).add(t),a._handleIn.multiply(i),a._handleOut.multiply(i))}return n(s,!0,r)}return{Line:function(){return n([new k(y.readNamed(arguments,"from")),new k(y.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=y.readNamed(arguments,"center"),e=u.readNamed(arguments,"radius");return i(t,new b(e),arguments)},Rectangle:function(){var e,i=w.readNamed(arguments,"rectangle"),r=b.readNamed(arguments,"radius",0,{readNull:!0}),s=i.getBottomLeft(!0),o=i.getTopLeft(!0),a=i.getTopRight(!0),l=i.getBottomRight(!0);if(!r||r.isZero())e=[new k(s),new k(o),new k(a),new k(l)];else{var c=(r=b.min(r,i.getSize(!0).divide(2))).width,h=r.height,u=c*t,d=h*t;e=[new k(s.add(c,0),null,[-u,0]),new k(s.subtract(0,h),[0,d]),new k(o.add(0,h),null,[0,-d]),new k(o.add(c,0),[-u,0],null),new k(a.subtract(c,0),null,[u,0]),new k(a.add(0,h),[0,-d],null),new k(l.subtract(0,h),null,[0,d]),new k(l.subtract(c,0),[u,0])]}return n(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=P._readEllipse(arguments);return i(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=y.readNamed(arguments,"from"),e=y.readNamed(arguments,"through"),n=y.readNamed(arguments,"to"),i=u.getNamed(arguments),r=new U(i&&0==i.insert&&T.NO_INSERT);return r.moveTo(t),r.arcTo(e,n),r.set(i)},RegularPolygon:function(){for(var t=y.readNamed(arguments,"center"),e=u.readNamed(arguments,"sides"),i=u.readNamed(arguments,"radius"),r=360/e,s=e%3==0,o=new y(0,s?-i:i),a=s?-1:.5,l=new Array(e),c=0;c<e;c++)l[c]=new k(t.add(o.rotate((c+a)*r)));return n(l,!0,arguments)},Star:function(){for(var t=y.readNamed(arguments,"center"),e=2*u.readNamed(arguments,"points"),i=u.readNamed(arguments,"radius1"),r=u.readNamed(arguments,"radius2"),s=360/e,o=new y(0,-1),a=new Array(e),l=0;l<e;l++)a[l]=new k(t.add(o.rotate(s*l).multiply(l%2?r:i)));return n(a,!0,arguments)}}}});var j=z.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,r=i[0];r&&"number"==typeof r[0]&&(i=[i]);for(var s=n.length-1;s>=0;s--){var o=i[s];i!==n||o instanceof U||(i=u.slice(i)),Array.isArray(o)?i[s]=new U({segments:o,insert:!1}):o instanceof j&&(i.splice.apply(i,[s,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--){var r;(r=n[i].reduce(e)).isEmpty()&&r.remove()}return n.length?t.base.call(this):((r=new U(T.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)u.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,s=n.length;r<s;r++){var o=n[r],a=o._matrix;i.push(o.getPathData(t&&!a.isIdentity()?t.appended(a):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===U||"path"===n.type?n:u.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,o=r.length;s<o;s++)r[s].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var a=this._style;a.hasFill()&&(t.fill(a.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,s=i.length;r<s;r++){var o=i[r],a=o._matrix;n[o._id]||o._drawSelected(t,a.isIdentity()?e:e.appended(a))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return u.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}},{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new U(T.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=y.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},u.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var n,i=this._children,r=0,s=i.length;r<s;r++)n=i[r][t](e)||n;return n}},{}));z.inject(new function(){var t=Math.min,e=Math.max,n=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function r(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0):n}function s(t,e,n,i,r){var s=new j(T.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),r&&0==r.insert||s.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),s.copyAttributes(n,!0),s}function o(t,e,n,o){if(o&&(0==o.trace||o.stroke)&&/^(subtract|intersect)$/.test(n))return a(t,e,n);var l=r(t,!0),c=e&&t!==e&&r(e,!0),h=i[n];h[n]=!0,c&&(h.subtract||h.exclude)^c.isClockwise()^l.isClockwise()&&c.reverse();var f,g=p(F.expand(l.getCrossings(c))),y=l._children||[l],_=c&&(c._children||[c]),b=[],x=[];function w(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];u.push(b,i._segments),u.push(x,i.getCurves()),i._overlapsOnly=!0}}if(g.length){w(y),_&&w(_);for(var A=0,E=g.length;A<E;A++)m(g[A]._segment,l,c,x,h);for(A=0,E=b.length;A<E;A++){var S=b[A],M=S._intersection;S._winding||m(S,l,c,x,h),M&&M._overlap||(S._path._overlapsOnly=!1)}f=v(b,h)}else f=d(_?y.concat(_):y.slice(),function(t){return!!h[t]});return s(f,!0,t,e,o)}function a(t,e,n){var i=r(t),o=r(e),a=i.getCrossings(o),l="subtract"===n,c="divide"===n,h={},u=[];function d(t){if(!h[t._id]&&(c||o.contains(t.getPointAt(t.getLength()/2))^l))return u.unshift(t),h[t._id]=!0}for(var p=a.length-1;p>=0;p--){var f=a[p].split();f&&(d(f)&&f.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return d(i),s(u,!1,t,e)}function c(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function h(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function d(t,e,i){var r=t&&t.length;if(r){var s=u.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),o=t.slice().sort(function(t,e){return n(e.getArea())-n(t.getArea())});null==i&&(i=o[0].isClockwise());for(var a=0;a<r;a++){for(var l=o[a],c=s[l._id],h=l.getInteriorPoint(),d=0,p=a-1;p>=0;p--){var f=o[p];if(f.contains(h)){var m=s[f._id];c.winding+=d=m.winding,c.container=m.exclude?m.container:f;break}}if(e(c.winding)===e(d))c.exclude=!0,t[c.index]=null;else{var g=c.container;l.setClockwise(g?!g.isClockwise():i)}}}return t}function p(t,e,n){var i,r,s,o=e&&[],a=!1,l=n||[],u=n&&{};function d(t){return t._path._id+"."+t._segment1._index}for(var p=(n&&n.length)-1;p>=0;p--)(f=n[p])._path&&(u[d(f)]=!0);for(p=t.length-1;p>=0;p--){var f,m,g=t[p],v=g._time,y=v,_=e&&!e(g);if((f=g._curve)&&(f!==r?(a=!f.hasHandles()||u&&u[d(f)],i=[],s=null,r=f):s>=1e-8&&(v/=s)),_)i&&i.push(g);else{if(e&&o.unshift(g),s=y,v<1e-8)m=f._segment1;else if(v>1-1e-8)m=f._segment2;else{var b=f.divideAtTime(v,!0);a&&l.push(f,b),m=b._segment1;for(var x=i.length-1;x>=0;x--){var w=i[x];w._time=(w._time-v)/(1-v)}}g._setSegment(m);var A=m._intersection,E=g._intersection;if(A){c(A,E);for(var S=A;S;)c(S._intersection,A),S=S._next}else m._intersection=E}}return n||h(l),o||t}function f(i,r,s,o,a){var l,c,h=s?1:0,u=1^h,d=[i.x,i.y],p=d[h],m=d[u],g=1e-6,v=p-1e-9,y=p+1e-9,_=0,b=0,x=0,w=0,A=!1,E=!1,S=1,M=[];function T(n){var c=n[u+0],d=n[u+6];if(!(m<t(c,d)||m>e(c,d))){var _=n[h+0],b=n[h+2],E=n[h+4],T=n[h+6];if(c!==d){var C=m===c?0:m===d?1:v>e(_,b,E,T)||y<t(_,b,E,T)?1:B.solveCubic(n,u,m,M,0,1)>0?M[0]:1,L=0===C?_:1===C?T:B.getPoint(n,C)[s?"y":"x"],P=c>d?1:-1,R=l[h+6];return m!==c?(L<v?x+=P:L>y?w+=P:A=!0,L>p-g&&L<p+g&&(S/=2)):(P!==(l[u]>l[u+6]?1:-1)?_<v?x+=P:_>y&&(w+=P):_!=R&&(R<y&&L>y?(w+=P,A=!0):R>v&&L<v&&(x+=P,A=!0)),S=0),l=n,!a&&L>v&&L<y&&0===B.getTangent(n,C)[s?"x":"y"]&&f(i,r,!s,o,!0)}(_<y&&T>v||T<y&&_>v)&&(A=!0)}}function C(n){var i=n[u+0],r=n[u+2],o=n[u+4],a=n[u+6];if(m<=e(i,r,o,a)&&m>=t(i,r,o,a))for(var l,c=n[h+0],d=n[h+2],p=n[h+4],f=n[h+6],g=v>e(c,d,p,f)||y<t(c,d,p,f)?[n]:B.getMonoCurves(n,s),_=0,b=g.length;_<b;_++)if(l=T(g[_]))return l}for(var L=0,P=r.length;L<P;L++){var R,O=r[L],I=O._path,D=O.getValues();if(!(L&&r[L-1]._path===I||(l=null,I._closed||(c=B.getValues(I.getLastCurve().getSegment2(),O.getSegment1(),null,!o))[u]!==c[u+6]&&(l=c),l))){l=D;for(var k=I.getLastCurve();k&&k!==O;){var N=k.getValues();if(N[u]!==N[u+6]){l=N;break}k=k.getPrevious()}}if(R=C(D))return R;if(L+1===P||r[L+1]._path!==I){if(c&&(R=C(c)))return R;!A||x||w||(x=w=I.isClockwise(o)^s?1:-1),_+=x,b+=w,x=w=0,A&&(E=!0,A=!1),c=null}}return _=n(_),b=n(b),{winding:e(_,b),windingL:_,windingR:b,quality:S,onPath:E}}function m(t,e,i,r,s){var o=[],a=t,l=0;do{var c=(_=t.getCurve()).getLength();o.push({segment:t,curve:_,length:c}),l+=c,t=t.getNext()}while(t&&!t._intersection&&t!==a);for(var h=[.5,.25,.75],u={winding:0,quality:-1},d=0;d<h.length&&u.quality<.5;d++){c=l*h[d];for(var p=0,m=o.length;p<m;p++){var v=o[p],y=v.length;if(c<=y){var _,b=(_=v.curve)._path,x=b._parent,w=x instanceof j?x:b,A=g.clamp(_.getTimeAt(c),1e-8,1-1e-8),E=_.getPointAtTime(A),S=n(_.getTangentAtTime(A).y)<Math.SQRT1_2,M=null;if(s.subtract&&i){var T=w===e?i._getWinding(E,S,!0):e._getWinding(E,S,!0);if(w===e&&T.winding||w===i&&!T.winding){if(T.quality<1)continue;M={winding:0,quality:1}}}(M=M||f(E,r,S,!0)).quality>u.quality&&(u=M);break}c-=y}}for(p=o.length-1;p>=0;p--)o[p].segment._winding=u}function v(t,e){var n,i=[];function r(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function s(t){if(t)for(var e=0,i=n.length;e<i;e++)if(t===n[e])return!0;return!1}function o(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}function a(t,e){var i=t._intersection,o=i,a=[];function l(i,o){for(;i&&i!==o;){var l=i._segment,c=l&&l._path;if(c){var h=l.getNext()||c.getFirstSegment(),u=h._intersection;l!==t&&(s(l)||s(h)||h&&r(l)&&(r(h)||u&&r(u._segment)))&&a.push(l),e&&n.push(l)}i=i._next}}if(e&&(n=[t]),i){for(l(i);i&&i._prev;)i=i._prev;l(i,o)}return a}t.sort(function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),s=t._path,o=e._path;return r^!(!i||!i._overlap)?r?1:-1:!n^!i?n?1:-1:s!==o?s._id-o._id:t._index-e._index});for(var l=0,c=t.length;l<c;l++){var h,u,d,p=t[l],f=r(p),m=null,g=!1,v=!0,y=[];if(f&&p._path._overlapsOnly){var _=p._path,b=p._intersection._segment._path;_.compare(b)&&(_.getArea()&&i.push(_.clone(!1)),o(_),o(b),f=!1)}for(;f;){var x=!m,w=a(p,x),A=w.shift(),E=!(g=!x&&(s(p)||s(A)))&&A;if(x&&(m=new U(T.NO_INSERT),h=null),g){(p.isFirst()||p.isLast())&&(v=p._path._closed),p._visited=!0;break}if(E&&h&&(y.push(h),h=null),h||(E&&w.push(p),h={start:m._segments.length,crossings:w,visited:u=[],handleIn:d}),E&&(p=A),!r(p)){m.removeSegments(h.start);for(var S=0,M=u.length;S<M;S++)u[S]._visited=!1;u.length=0;do{(p=h&&h.crossings.shift())&&p._path||(p=null,(h=y.pop())&&(u=h.visited,d=h.handleIn))}while(h&&!r(p));if(!p)break}var C=p.getNext();m.add(new k(p._point,d,C&&p._handleOut)),p._visited=!0,u.push(p),p=C||p._path.getFirstSegment(),d=C&&C._handleIn}g&&(v&&(m.getFirstSegment().setHandleIn(d),m.setClosed(v)),0!==m.getArea()&&i.push(m))}return i}return{_getWinding:function(t,e,n){return f(t,this.getCurves(),e,n)},unite:function(t,e){return o(this,t,"unite",e)},intersect:function(t,e){return o(this,t,"intersect",e)},subtract:function(t,e){return o(this,t,"subtract",e)},exclude:function(t,e){return o(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?a(this,t,"divide"):s([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var i=!1,r=!1,s=this.getIntersections(null,function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(r=!0)}),o=i&&r&&[];if(s=F.expand(s),i)for(var a=p(s,function(t){return t.hasOverlap()},o),l=a.length-1;l>=0;l--){var c=a[l],d=c._path,f=c._segment,m=f.getPrevious(),g=f.getNext();n(m,d)&&n(g,d)&&(f.remove(),m._handleOut._set(0,0),g._handleIn._set(0,0),m===f||m.getCurve().hasLength()||(g._handleIn.set(m._handleIn),m.remove()))}r&&(p(s,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,s=i._segment;if(e&&r&&e._path&&r._path)return!0;n&&(n._intersection=null),s&&(s._intersection=null)},o),o&&h(o),e=v(u.each(e,function(t){u.push(this,t._segments)},[])));var y,_=e.length;return _>1&&t?(e!==t&&this.setChildren(e),y=this):1!==_||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),y=this),y||((y=new j(T.NO_INSERT)).addChildren(e),(y=y.reduce()).copyAttributes(this),this.replaceWith(y)),y},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(d(this.removeChildren(),function(e){return!!(t?e:1&e)},e)):e!==l&&this.setClockwise(e),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var i=this.getCurves(),r=n.y,s=[],o=[],a=0,l=i.length;a<l;a++){var c=i[a].getValues(),h=c[1],u=c[3],d=c[5],p=c[7];if(r>=t(h,u,d,p)&&r<=e(h,u,d,p))for(var f=B.getMonoCurves(c),m=0,g=f.length;m<g;m++){var v=f[m],y=v[1],_=v[7];if(y!==_&&(r>=y&&r<=_||r>=_&&r<=y)){var b=r===y?v[0]:r===_?v[6]:1===B.solveCubic(v,1,r,o,0,1)?B.getPoint(v,o[0]).x:(v[0]+v[6])/2;s.push(b)}}}s.length>1&&(s.sort(function(t,e){return t-e}),n.x=(s[0]+s[1])/2)}return n}}});var H=u.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){var s,o=[],a=[],l=0,c=1/(n||32),h=t._segments,u=h[0];function d(t,n){var s=B.getValues(t,n,r);o.push(s),function t(n,r,s,o){if(!(o-s>c)||i&&B.isStraight(n)||B.isFlatEnough(n,e||.25)){var h=n[6]-n[0],u=n[7]-n[1],d=Math.sqrt(h*h+u*u);d>0&&a.push({offset:l+=d,curve:n,index:r,time:o})}else{var p=B.subdivide(n,.5),f=(s+o)/2;t(p[0],r,s,f),t(p[1],r,f,o)}}(s,t._index,0,1)}for(var p=1,f=h.length;p<f;p++)d(u,s=h[p]),u=s;t._closed&&d(s||u,h[0]),this.curves=o,this.parts=a,this.length=l,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var s=n[e];if(s.offset>=t){this.index=e;var o=n[e-1],a=o&&o.index===s.index?o.time:0,l=o?o.offset:0;return{index:s.index,time:a+(s.time-a)*(t-l)/(s.offset-l)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),s=i.index,o=r.index;s<=o;s++){var a=B.getPart(this.curves[s],s===i.index?i.time:0,s===r.index?r.time:1);s===i.index&&t.moveTo(a[0],a[1]),t.bezierCurveTo.apply(t,a.slice(2))}}},u.each(B._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this._get(e);return B[t](this.curves[n.index],n.time)}},{})),V=u.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,s=0,o=i.length;s<o;s++){var a=i[s].point;e&&e.equals(a)||n.push(e=a.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new k(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,s){var o=this.points;if(i-n!=1){for(var a,l=this.chordLengthParameterize(n,i),c=Math.max(e,e*e),h=!0,u=0;u<=4;u++){var d=this.generateBezier(n,i,l,r,s),p=this.findMaxError(n,i,d,l);if(p.error<e&&h)return void this.addCurve(t,d);if(a=p.index,p.error>=c)break;h=this.reparameterize(n,i,l,d),c=p.error}var f=o[a-1].subtract(o[a+1]);this.fitCubic(t,e,n,a,r,f),this.fitCubic(t,e,a,i,f.negate(),s)}else{var m=o[n],g=o[i],v=m.getDistance(g)/3;this.addCurve(t,[m,m.add(r.normalize(v)),g.add(s.normalize(v)),g])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new k(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var s=Math.abs,o=this.points,a=o[t],l=o[e],c=[[0,0],[0,0]],h=[0,0],u=0,d=e-t+1;u<d;u++){var p=n[u],f=1-p,m=3*p*f,g=f*f*f,v=m*f,y=m*p,_=p*p*p,b=i.normalize(v),x=r.normalize(y),w=o[t+u].subtract(a.multiply(g+v)).subtract(l.multiply(y+_));c[0][0]+=b.dot(b),c[0][1]+=b.dot(x),c[1][0]=c[0][1],c[1][1]+=x.dot(x),h[0]+=b.dot(w),h[1]+=x.dot(w)}var A,E,S=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(s(S)>1e-12)A=(h[0]*c[1][1]-h[1]*c[0][1])/S,E=(c[0][0]*h[1]-c[1][0]*h[0])/S;else{var M=c[0][0]+c[0][1],T=c[1][0]+c[1][1];A=E=s(M)>1e-12?h[0]/M:s(T)>1e-12?h[1]/T:0}var C,L,P=l.getDistance(a),R=1e-12*P;if(A<R||E<R)A=E=P/3;else{var O=l.subtract(a);C=i.normalize(A),L=r.normalize(E),C.dot(O)-L.dot(O)>P*P&&(A=E=P/3,C=L=null)}return[a,a.add(C||i.normalize(A)),l.add(L||r.normalize(E)),l]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var s=n.length;r<s;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],s=0;s<=2;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var o=this.evaluate(3,t,n),a=this.evaluate(2,i,n),l=this.evaluate(1,r,n),c=o.subtract(e),h=a.dot(a)+c.dot(l);return g.isZero(h)?n:n-c.dot(a)/h},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,o=t+1;o<e;o++){var a=this.evaluate(3,n,i[o-t]).subtract(this.points[o]),l=a.x*a.x+a.y*a.y;l>=s&&(s=l,r=o)}return{error:s,index:r}}}),G=T.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&u.isPlainObject(t)&&t.x===l&&t.y===l;this._initialize(e&&t,!e&&y.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),W=G.extend({_class:"PointText",initialize:function(){G.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new _(t.x,t.y,this,"setPoint")},setPoint:function(){var t=y.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,s=r.hasFill(),o=r.hasStroke(),a=r.getLeading(),l=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var c=0,h=i.length;c<h;c++){t.shadowColor=l;var u=i[c];s&&(t.fillText(u,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(u,0,0),t.translate(0,a)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,s=n.getJustification(),o=n.getLeading(),a=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==s&&(l-=a/("center"===s?2:1));var c=new w(l,r?-.75*o:0,a,r*o);return t?t._transformBounds(c,c):c}}),q=u.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={transparent:[0,0,0,0]};function r(e){var n,r=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),s="rgb";if(r){var o=r[4]?4:3;n=new Array(o);for(var a=0;a<o;a++){var l=r[a+1];n[a]=parseInt(1==l.length?l+l:l,16)/255}}else if(r=e.match(/^(rgb|hsl)a?\((.*)\)$/)){s=r[1],n=r[2].trim().split(/[,\s]+/g);for(var h="hsl"===s,u=(a=0,Math.min(n.length,4));a<u;a++){var d=n[a];if(l=parseFloat(d),h)if(0===a){var p=d.match(/([a-z]*)$/)[1];l*={turn:360,rad:180/Math.PI,grad:.9}[p]||1}else a<3&&(l/=100);else a<3&&(l/=255);n[a]=l}}else{var f=i[e];if(!f)if(c){t||((t=lt.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var m=t.getImageData(0,0,1,1).data;f=i[e]=[m[0]/255,m[1]/255,m[2]/255]}else f=[0,0,0];n=f.slice()}return[s,n]}var s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i,r=(t=(t/60%6+6)%6)-(i=Math.floor(t)),o=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[o[(i=s[i])[0]],o[i[1]],o[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s,a=(i+r)/2;return[o?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),o?0:a<.5?s/(i+r):s/(2-i-r),a]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,o=[],a=0;a<3;a++){var l=i[a];l<0&&(l+=1),l>1&&(l-=1),o[a]=6*l<1?s+6*(r-s)*l:2*l<1?r:3*l<2?s+(r-s)*(2/3-l)*6:s}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return u.each(e,function(t,i){n[i]=[],u.each(t,function(t,r){var s=u.capitalize(t),o=/^(hue|saturation)$/.test(t),a=n[i][r]="gradient"===i?"gradient"===t?function(t){var e=this._components[0];return e!==(t=X.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return y.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+s]=function(){return this._type===i||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+s]=function(t){this._type===i||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=e[i],this._type=i),this._components[r]=a.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function t(i){var s,o,a,l,c=arguments,h=this.__read,d=0;Array.isArray(i)&&(i=(c=i)[0]);var p=null!=i&&typeof i;if("string"===p&&i in e&&(s=i,i=c[1],Array.isArray(i)?(o=i,a=c[2]):(h&&(d=1),c=u.slice(c,1),p=typeof i)),!o){if(l="number"===p?c:"object"===p&&null!=i.length?i:null){s||(s=l.length>=3?"rgb":"gray");var f=e[s].length;a=l[f],h&&(d+=l===arguments?f+(null!=a?1:0):1),l.length>f&&(l=u.slice(l,0,f))}else if("string"===p){var m=r(i);s=m[0],4===(o=m[1]).length&&(a=o[3],o.length--)}else if("object"===p)if(i.constructor===t){if(s=i._type,o=i._components.slice(),a=i._alpha,"gradient"===s)for(var g=1,v=o.length;g<v;g++){var y=o[g];y&&(o[g]=y.clone())}}else if(i.constructor===X)s="gradient",l=c;else{var _=e[s="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb"],b=n[s];for(this._components=o=[],g=0,v=_.length;g<v;g++)null==(x=i[_[g]])&&!g&&"gradient"===s&&"stops"in i&&(x={stops:i.stops,radial:i.radial}),null!=(x=b[g].call(this,x))&&(o[g]=x);a=i.alpha}h&&s&&(d=1)}if(this._type=s||"rgb",!o)for(this._components=o=[],g=0,v=(b=n[this._type]).length;g<v;g++){var x;null!=(x=b[g].call(this,l&&l[g]))&&(o[g]=x)}return this._components=o,this._properties=e[this._type],this._alpha=a,h&&(this.__read=d),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return u.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new q(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=u.isPlainValue(t,!0)?q.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&u.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=m.instance,r=0,s=t.length;r<s;r++){var o=this._components[r];null!=o&&e.push(t[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],s=r._stops,o=i[1],a=i[2],l=i[3],c=e&&e.inverted();if(c&&(o=c._transformPoint(o),a=c._transformPoint(a),l&&(l=c._transformPoint(l))),r._radial){var h=a.getDistance(o);if(l){var u=l.subtract(o);u.getLength()>h&&(l=o.add(u.normalize(h-.1)))}var d=l||o;n=t.createRadialGradient(d.x,d.y,0,o.x,o.y,h)}else n=t.createLinearGradient(o.x,o.y,a.x,a.y);for(var p=0,f=s.length;p<f;p++){var m=s[p],g=m._offset;n.addColorStop(null==g?p/(f-1):g,m._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new q(t(),t(),t())},_setOwner:function(t,e,n){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=n||null)),t}}})},new function(){return u.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},function(t,e){this[e]=function(e){e=q.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),s=0,o=i.length;s<o;s++)r[s]=t(i[s],r[s]);return new q(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),X=u.extend({_class:"Gradient",initialize:function(t,e){this._id=v.get(),t&&u.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return u.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=l))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new X(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,i=e.length;n<i;n++)e[n]._owner=l;for(n=0,i=(e=this._stops=Y.readList(t,0,{clone:!0})).length;n<i;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),Y=u.extend({_class:"GradientStop",initialize:function(t,e){var n=t,i=e;"object"==typeof t&&e===l&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new Y(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return u.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){q._setOwner(this._color,null),this._color=q._setOwner(q.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Q=u.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new y,selectedColor:null},e=u.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=u.set({},e,{fillColor:new q}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},s={_class:"Style",beans:!0,initialize:function(i,r,s){this._values={},this._owner=r,this._project=r&&r._project||s||dt.project,this._defaults=!r||r instanceof C?e:r instanceof G?n:t,i&&this.set(i)}};return u.each(e,function(t,e){var n=/Color$/.test(e),o="shadowOffset"===e,a=u.capitalize(e),c=i[e],h="set"+a,d="get"+a;s[h]=function(t){var i=this._owner,r=i&&i._children,s=r&&r.length>0&&!(i instanceof j);if(s)for(var o=0,a=r.length;o<a;o++)r[o]._style[h](t);if(("selectedColor"===e||!s)&&e in this._defaults){var l=this._values[e];l!==t&&(n&&(l&&(q._setOwner(l,null),l._canvasStyle=null),t&&t.constructor===q&&(t=q._setOwner(t,i,s&&h))),this._values[e]=t,i&&i._changed(c||129))}},s[d]=function(t){var i=this._owner,r=i&&i._children,s=r&&r.length>0&&!(i instanceof j);if(s&&!t)for(var a=0,c=r.length;a<c;a++){var p=r[a]._style[d]();if(a){if(!u.equals(f,p))return l}else f=p}else if(e in this._defaults){var f;if((f=this._values[e])===l)(f=this._defaults[e])&&f.clone&&(f=f.clone());else{var m=n?q:o?y:null;!m||f&&f.constructor===m||(this._values[e]=f=m.read([f],0,{readNull:!0,clone:!0}))}}return f&&n&&(f=q._setOwner(f,i,s&&h)),f},r[d]=function(t){return this._style[d](t)},r[h]=function(t){this._style[h](t)}}),u.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var n="get"+e,i="set"+e;s[n]=r[n]="#get"+t,s[i]=r[i]="#set"+t}),T.inject(r),s},{set:function(t){var e=t instanceof Q,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function e(t,e,n){var i=t._values,r=e._values,s=e._defaults;for(var o in i){var a=r[o];if(!(n&&o in r||u.equals(i[o],a===l?s[o]:a)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),Z=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var a=r[o],l=a?a+s:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,n){var i,r=t.ownerDocument,s=r.body,o=r.documentElement;try{i=t.getBoundingClientRect()}catch(e){i={left:0,top:0,width:0,height:0}}var a=i.left-(o.clientLeft||s.clientLeft||0),l=i.top-(o.clientTop||s.clientTop||0);if(!n){var c=r.defaultView;a+=c.pageXOffset||o.scrollLeft||s.scrollLeft,l+=c.pageYOffset||o.scrollTop||s.scrollTop}return new w(a,l,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new w(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return Z.getBounds(t,e).getPoint()},getSize:function(t){return Z.getBounds(t,!0).getSize()},isInvisible:function(t){return Z.getSize(t).equals(new b(0,0))},isInView:function(t){return!Z.isInvisible(t)&&Z.getViewportBounds(t).intersects(Z.getBounds(t,!0))},isInserted:function(t){return h.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},K={add:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,o=r.length;s<o;s++){var a=r[s];t.addEventListener(a,i,t===h&&("touchstart"===a||"touchmove"===a)&&{passive:!1})}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,o=r.length;s<o;s++)t.removeEventListener(r[s],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new y(e.pageX||e.clientX+h.documentElement.scrollLeft,e.pageY||e.clientY+h.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return K.getPoint(t).subtract(Z.getOffset(e||K.getTarget(t)))}};K.requestAnimationFrame=new function(){var t,e=Z.getPrefixed(c,"requestAnimationFrame"),n=!1,i=[];function r(){var t=i;i=[];for(var s=0,o=t.length;s<o;s++)t[s]();(n=e&&i.length)&&e(r)}return function(s){i.push(s),e?n||(e(r),n=!0):t||(t=setInterval(r,1e3/60))}};var J=u.extend(d,{_class:"View",initialize:function t(e,n){function i(t){return n[t]||parseInt(n.getAttribute(t),10)}function r(){var t=Z.getSize(n);return t.isNaN()||t.isZero()?new b(i("width"),i("height")):t}var s;if(c&&n){if(this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+t._id++),K.add(n,this._viewEvents),Z.setPrefixed(n.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),p.hasAttribute(n,"resize")){var o=this;K.add(c,this._windowEvents={resize:function(){o.setViewSize(r())}})}if(s=r(),p.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var a=this._stats.domElement,l=a.style,u=Z.getOffset(n);l.position="absolute",l.left=u.x+"px",l.top=u.y+"px",h.body.appendChild(a)}}else s=new b(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=c&&c.devicePixelRatio||1),this._setElementSize(s.width,s.height),this._viewSize=s,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new E)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!dt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;J._focused===this&&(J._focused=null),J._views.splice(J._views.indexOf(this),1),delete J._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),K.remove(this._element,this._viewEvents),K.remove(c,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:u.each(T._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;K.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;Z.getPrefixed(h,"hidden")&&"true"!==p.getAttribute(e,"keepalive")||!Z.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){dt=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new u({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new u(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=l},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new x(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=b.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new y,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Z.isInView(this._element)},isInserted:function(){return Z.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var i=n.parentNode,r=h.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat(Z.getStyles(r).fontSize),i.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},u.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?u:y).read(arguments),i=y.read(arguments,0,{readNull:!0});return this.transform((new E)[t](n,i||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=y.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new E).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new _(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=y.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(y.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(y.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(y.read(arguments))},getEventPoint:function(t){return this.viewToProject(K.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return h&&"string"==typeof e&&(e=h.getElementById(e)),new(c?$:J)(t,e)}}},new function(){if(c){var t,e,n,i,r,s=!1,o=!1,a=c.navigator;a.pointerEnabled||a.msPointerEnabled?(n="pointerdown MSPointerDown",i="pointermove MSPointerMove",r="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",i="touchmove",r="touchend touchcancel","ontouchstart"in c&&a.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",i+=" mousemove",r+=" mouseup"));var l={},u={mouseout:function(t){var e=J._focused,n=K.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var i=K.getOffset(t,e._element),r=i.x,s=Math.abs,o=s(r),a=o-(1<<25);i.x=s(a)<o?a*(r<0?-1:1):r,T(e,t,e.viewToProject(i))}},scroll:M};l[n]=function(t){var e=J._focused=S(t);s||(s=!0,e._handleMouseEvent("mousedown",t))},u[i]=function(n){var i=J._focused;if(!o){var r=S(n);r?i!==r&&(i&&T(i,n),t||(t=i),i=J._focused=e=r):e&&e===i&&(t&&!t.isInserted()&&(t=null),i=J._focused=t,t=null,M())}i&&T(i,n)},u[n]=function(){o=!0},u[r]=function(t){var e=J._focused;e&&s&&e._handleMouseEvent("mouseup",t),o=s=!1},K.add(h,u),K.add(c,{load:M});var d,p,f,m,g,v,y,_,b=!1,x=!1,w={doubleclick:"click",mousedrag:"mousemove"},A=!1,E={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:l,_handleMouseEvent:function(t,e,n){var i=this._itemEvents,r=i.native[t],o="mousemove"===t,a=this._scope.tool,l=this;function c(t){return i.virtual[t]||l.responds(t)||a&&a.responds(t)}o&&s&&c("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var h=this.getBounds().contains(n),u=r&&h&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=u&&u.item||null,E=!1,S={};if(S[t.substr(5)]=!0,r&&w!==m&&(m&&C(m,null,"mouseleave",e,n),w&&C(w,null,"mouseenter",e,n),m=w),A^h&&(C(this,null,h?"mouseenter":"mouseleave",e,n),E=!0),!h&&!S.drag||n.equals(p)||(L(this,w,o?t:"mousemove",e,n,p),E=!0),A=h,S.down&&h||S.up&&d){if(L(this,w,t,e,n,d),S.down){if(_=w===v&&Date.now()-y<300,f=v=w,!x&&w){for(var M=w;M&&!M.responds("mousedrag");)M=M._parent;M&&(g=w)}d=n}else S.up&&(x||w!==f||(y=Date.now(),L(this,w,_?"doubleclick":"click",e,n,d),_=!1),f=g=null);A=!1,E=!0}p=n,E&&a&&(b=a._handleMouseEvent(t,e,n,S)||b),!1!==e.cancelable&&(b&&!S.move||S.down&&c("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){var r,s=this._scope,o=s.tool;function a(o){o.responds(t)&&(dt=s,o.emit(t,r=r||new et(t,e,n,i)))}this.isVisible()&&(a(this),o&&o.responds(t)&&a(o))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var s in E)i[s]=(i[s]||0)+(E[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:M,_resetState:function(){s=o=b=A=!1,t=e=d=p=f=m=g=v=y=_=null}}}}function S(t){var e=K.getTarget(t);return e.getAttribute&&J._viewsById[e.getAttribute("id")]}function M(){var t=J._focused;if(!t||!t.isVisible())for(var n=0,i=J._views.length;n<i;n++)if((t=J._views[n]).isVisible()){J._focused=e=t;break}}function T(t,e,n){t._handleMouseEvent("mousemove",e,n)}function C(t,e,n,i,r,s,o){var a,l=!1;function c(t,n){if(t.responds(n)){if(a||(a=new it(n,i,r,e||t,s?r.subtract(s):null)),t.emit(n,a)&&(b=!0,a.prevented&&(x=!0),a.stopped))return l=!0}else{var o=w[n];if(o)return c(t,o)}}for(;t&&t!==o&&!c(t,n);)t=t._parent;return l}function L(t,e,n,i,r,s){return t._project.removeOn(n),x=b=!1,g&&C(g,null,n,i,r,s)||e&&e!==g&&!e.isDescendant(g)&&C(e,null,"mousedrag"===n?"mousemove":n,i,r,s,g)||C(t,g||e||t,n,i,r,s)}}),$=J.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof c.HTMLCanvasElement)){var n=b.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+u.slice(arguments,1));e=lt.getCanvas(n)}var i=this._context=e.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(p.getAttribute(e,"hidpi"))){var r=c.devicePixelRatio||1,s=Z.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=r/s}J.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,s=this._context;if(!p.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=n+"px"}s.restore(),s.save(),s.scale(i,i)}},getContext:function(){return this._context},getPixelSize:function t(e){var n,i=dt.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,s=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=s}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var s=0,o=e.length;s<o;s++)r=Math.max(r,n.measureText(e[s]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),tt=u.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return nt.modifiers}}),et=tt.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),nt=new function(){var t,e,n={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"\t",space:" ",enter:"\r"},r={},s={},o=new u({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=dt&&dt.agent;return t&&t.mac?this.meta:this.control}}});function a(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===l?String.fromCharCode(t.keyCode):e,n[e]||(e.length>1?u.hyphenate(e):e.toLowerCase())}function d(e,n,i,a){var l,c=J._focused;if(r[n]=e,e?s[n]=i:delete s[n],n.length>1&&(l=u.camelize(n))in o){o[l]=e;var h=dt&&dt.agent;if("meta"===l&&h&&h.mac)if(e)t={};else{for(var p in t)p in s&&d(!1,p,t[p],a);t=null}}else e&&t&&(t[n]=i);c&&c._handleKeyEvent(e?"keydown":"keyup",a,n,i)}return K.add(h,{keydown:function(t){var n=a(t),r=dt&&dt.agent;n.length>1||r&&r.chrome&&(t.altKey||r.mac&&t.metaKey||!r.mac&&t.ctrlKey)?d(!0,n,i[n]||(n.length>1?"":n),t):e=n},keypress:function(t){if(e){var n=a(t),i=t.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==e&&(n=r.toLowerCase()),d(!0,n,r,t),e=null}},keyup:function(t){var e=a(t);e in s&&d(!1,e,s[e],t)}}),K.add(c,{blur:function(t){for(var e in s)d(!1,e,s[e],t)}}),{modifiers:o,isDown:function(t){return!!r[t]}}},it=tt.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),rt=tt.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),st=f.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){f.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){dt=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var r=i.move||i.drag,s=this.responds(t),o=this.minDistance,a=this.maxDistance,l=!1,c=this;function h(t,e){var s=n,o=r?c._point:c._downPoint||s;if(r){if(c._moveCount>=0&&s.equals(o))return!1;if(o&&(null!=t||null!=e)){var a=s.subtract(o),l=a.getLength();if(l<(t||0))return!1;e&&(s=o.add(a.normalize(Math.min(l,e))))}c._moveCount++}return c._point=s,c._lastPoint=o||s,i.down&&(c._moveCount=-1,c._downPoint=s,c._downCount++),!0}function u(){s&&(l=c.emit(t,new rt(c,t,e))||l)}if(i.down)h(),u();else if(i.up)h(null,a),u();else if(s)for(;h(o,a);)u();return l}}),ot=u.extend(d,{_class:"Tween",statics:{easings:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},initialize:function t(e,n,i,r,s,o){this.object=e;var a=typeof s,l="function"===a;this.type=l?a:"string"===a?s:"linear",this.easing=l?s:t.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var c=n||i;this._keys=c?Object.keys(c):[],this._parsedKeys=this._parseKeys(this._keys),this._from=c&&this._getState(n),this._to=c&&this._getState(i),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,i=function(n){return"function"==typeof n?n(e,t):n},r=0,s=n&&n.length;r<s;r++){var o=n[r],a=i(this._from[o]),l=i(this._to[o]),c=a&&l&&a.__add&&l.__add?l.__subtract(a).__multiply(e).__add(a):(l-a)*e+a;this._setProperty(this._parsedKeys[o],c)}!this.running&&this._then&&this._then(this.object),this.responds("update")&&this.emit("update",new u({progress:t,factor:e}))}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,r=e.length;i<r;i++){var s,o=e[i],a=this._parsedKeys[o],l=this._getProperty(a);if(t){var c=this._resolveValue(l,t[o]);this._setProperty(a,c),s=(s=this._getProperty(a))&&s.clone?s.clone():s,this._setProperty(a,l)}else s=l&&l.clone?l.clone():l;n[o]=s}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"==typeof e){var i=e.match(/^[+\-*\/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],r)}}}return e},_calculate:function(t,e,n){return dt.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n],s=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[r]=s.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,r=t.length-(e||0);i<r&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),at={request:function(t){var e=new a.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,u.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,i='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(i);t.onError(i,n)},e.send(null)}},lt={canvases:[],getCanvas:function(t,e){if(!c)return null;var n,i=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=h.createElement("canvas"),i=!1);var r=n.getContext("2d");if(!r)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),r.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},ct=new function(){var t,n,i,r,s,o,a,l,c,h,d,p=Math.min,f=Math.max,m=Math.abs;function g(t,e,n){return.2989*t+.587*e+.114*n}function v(t,e,n,i){var r=i-g(t,e,n),s=(i=g(c=t+r,h=e+r,d=n+r),p(c,h,d)),o=f(c,h,d);if(s<0){var a=i-s;c=i+(c-i)*i/a,h=i+(h-i)*i/a,d=i+(d-i)*i/a}if(o>255){var l=255-i,u=o-i;c=i+(c-i)*l/u,h=i+(h-i)*l/u,d=i+(d-i)*l/u}}function y(t,e,n){return f(t,e,n)-p(t,e,n)}function _(t,e,n,i){var r,s=[t,e,n],o=f(t,e,n),a=p(t,e,n);r=0===p(a=a===t?0:a===e?1:2,o=o===t?0:o===e?1:2)?1===f(a,o)?2:1:0,s[o]>s[a]?(s[r]=(s[r]-s[a])*i/(s[o]-s[a]),s[o]=i):s[r]=s[o]=0,s[a]=0,c=s[0],h=s[1],d=s[2]}var b={multiply:function(){c=s*t/255,h=o*n/255,d=a*i/255},screen:function(){c=s+t-s*t/255,h=o+n-o*n/255,d=a+i-a*i/255},overlay:function(){c=s<128?2*s*t/255:255-2*(255-s)*(255-t)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255,d=a<128?2*a*i/255:255-2*(255-a)*(255-i)/255},"soft-light":function(){var e=t*s/255;c=e+s*(255-(255-s)*(255-t)/255-e)/255,h=(e=n*o/255)+o*(255-(255-o)*(255-n)/255-e)/255,d=(e=i*a/255)+a*(255-(255-a)*(255-i)/255-e)/255},"hard-light":function(){c=t<128?2*t*s/255:255-2*(255-t)*(255-s)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255,d=i<128?2*i*a/255:255-2*(255-i)*(255-a)/255},"color-dodge":function(){c=0===s?0:255===t?255:p(255,255*s/(255-t)),h=0===o?0:255===n?255:p(255,255*o/(255-n)),d=0===a?0:255===i?255:p(255,255*a/(255-i))},"color-burn":function(){c=255===s?255:0===t?0:f(0,255-255*(255-s)/t),h=255===o?255:0===n?0:f(0,255-255*(255-o)/n),d=255===a?255:0===i?0:f(0,255-255*(255-a)/i)},darken:function(){c=s<t?s:t,h=o<n?o:n,d=a<i?a:i},lighten:function(){c=s>t?s:t,h=o>n?o:n,d=a>i?a:i},difference:function(){(c=s-t)<0&&(c=-c),(h=o-n)<0&&(h=-h),(d=a-i)<0&&(d=-d)},exclusion:function(){c=s+t*(255-s-s)/255,h=o+n*(255-o-o)/255,d=a+i*(255-a-a)/255},hue:function(){_(t,n,i,y(s,o,a)),v(c,h,d,g(s,o,a))},saturation:function(){_(s,o,a,y(t,n,i)),v(c,h,d,g(s,o,a))},luminosity:function(){v(s,o,a,g(t,n,i))},color:function(){v(t,n,i,g(s,o,a))},add:function(){c=p(s+t,255),h=p(o+n,255),d=p(a+i,255)},subtract:function(){c=f(s-t,0),h=f(o-n,0),d=f(a-i,0)},average:function(){c=(s+t)/2,h=(o+n)/2,d=(a+i)/2},negation:function(){c=255-m(255-t-s),h=255-m(255-n-o),d=255-m(255-i-a)}},x=this.nativeModes=u.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),w=lt.getContext(1,1);w&&(u.each(b,function(t,n){var i="darken"===n,r=!1;w.save();try{w.fillStyle=i?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=n,w.globalCompositeOperation===n&&(w.fillStyle=i?"#a00":"#300",w.fillRect(0,0,1,1),r=w.getImageData(0,0,1,1).data[0]!==i?170:51)}catch(e){}w.restore(),x[n]=r}),lt.release(w)),this.process=function(e,u,p,f,m){var g=u.canvas,v="normal"===e;if(v||x[e])p.save(),p.setTransform(1,0,0,1,0,0),p.globalAlpha=f,v||(p.globalCompositeOperation=e),p.drawImage(g,m.x,m.y),p.restore();else{var y=b[e];if(!y)return;for(var _=p.getImageData(m.x,m.y,g.width,g.height),w=_.data,A=u.getImageData(0,0,g.width,g.height).data,E=0,S=w.length;E<S;E+=4){t=A[E],s=w[E],n=A[E+1],o=w[E+1],i=A[E+2],a=w[E+2],r=A[E+3],l=w[E+3],y();var M=r*f/255,T=1-M;w[E]=M*c+T*s,w[E+1]=M*h+T*o,w[E+2]=M*d+T*a,w[E+3]=r*f+T*l}p.putImageData(_,m.x,m.y)}}},ht=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function r(t,e,n){for(var r in e){var s=e[r],o=i[r];"number"==typeof s&&n&&(s=n.number(s)),o?t.setAttributeNS(o,r,s):t.setAttribute(r,s)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,i){return r(h.createElementNS(t,e),n,i)},get:function(t,e){var n=i[e],r=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===r?null:r},set:r}},ut=u.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof z||t instanceof P||t instanceof G)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var n=u.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&u.each(i,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});new function(){var t;function e(e,n,i){var r,s=new u,o=e.getTranslation();if(n&&(e.isInvertible()?(r=(e=e._shiftless())._inverseTransform(o),o=null):r=new y,s[i?"cx":"x"]=r.x,s[i?"cy":"y"]=r.y),!e.isIdentity()){var a=e.decompose();if(a){var l=[],c=a.rotation,h=a.scaling,d=a.skewing;o&&!o.isZero()&&l.push("translate("+t.point(o)+")"),c&&l.push("rotate("+t.number(c)+")"),g.isZero(h.x-1)&&g.isZero(h.y-1)||l.push("scale("+t.point(h)+")"),d.x&&l.push("skewX("+t.number(d.x)+")"),d.y&&l.push("skewY("+t.number(d.y)+")"),s.transform=l.join(" ")}else s.transform="matrix("+e.getValues().join(",")+")"}return s}function n(n,i){for(var r=e(n._matrix),s=n._children,o=ht.create("g",r,t),a=0,c=s.length;a<c;a++){var u=s[a],d=h(u,i);if(d)if(u.isClipMask()){var p=ht.create("clipPath");p.appendChild(d),l(u,p,"clip"),ht.set(o,{"clip-path":"url(#"+p.id+")"})}else o.appendChild(d)}return o}function i(n){var i=n._type,r=n._radius,s=e(n._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var o=n._size,a=o.width,l=o.height;s.x-=a/2,s.y-=l/2,s.width=a,s.height=l,r.isZero()&&(r=null)}return r&&("circle"===i?s.r=r:(s.rx=r.width,s.ry=r.height)),ht.create(i,s,t)}var r,s={Group:n,Layer:n,Raster:function(n,i){var r=e(n._matrix,!0),s=n.getSize(),o=n.getImage();return r.x-=s.width/2,r.y-=s.height/2,r.width=s.width,r.height=s.height,r.href=0==i.embedImages&&o&&o.src||n.toDataURL(),ht.create("image",r,t)},Path:function(n,r){var s=r.matchShapes;if(s){var o=n.toShape(!1);if(o)return i(o)}var a,l=n._segments,c=l.length,h=e(n._matrix);if(s&&c>=2&&!n.hasHandles())if(c>2){a=n._closed?"polygon":"polyline";for(var u=[],d=0;d<c;d++)u.push(t.point(l[d]._point));h.points=u.join(" ")}else{a="line";var p=l[0]._point,f=l[1]._point;h.set({x1:p.x,y1:p.y,x2:f.x,y2:f.y})}else a="path",h.d=n.getPathData(null,r.precision);return ht.create(a,h,t)},Shape:i,CompoundPath:function(n,i){var r=e(n._matrix),s=n.getPathData(null,i.precision);return s&&(r.d=s),ht.create("path",r,t)},SymbolItem:function(n,i){var r=e(n._matrix,!0),s=n._definition,a=o(s,"symbol"),c=s._item,u=c.getStrokeBounds();return a||((a=ht.create("symbol",{viewBox:t.rectangle(u)})).appendChild(h(c,i)),l(s,a,"symbol")),r.href="#"+a.id,r.x+=u.x,r.y+=u.y,r.width=u.width,r.height=u.height,r.overflow="visible",ht.create("use",r,t)},PointText:function(n){var i=ht.create("text",e(n._matrix,!0),t);return i.textContent=n._content,i}};function o(t,e){return r||(r={ids:{},svgs:{}}),t&&r.svgs[e+"-"+(t._id||t.__id||(t.__id=v.get("svg")))]}function l(t,e,n){r||o();var i=r.ids[n]=(r.ids[n]||0)+1;e.id=n+"-"+i,r.svgs[n+"-"+(t._id||t.__id)]=e}function c(t,e){var n=t,i=null;if(r){for(var s in n="svg"===t.nodeName.toLowerCase()&&t,r.svgs)i||(n||(n=ht.create("svg")).appendChild(t),i=n.insertBefore(ht.create("defs"),n.firstChild)),i.appendChild(r.svgs[s]);r=null}return e.asString?(new a.XMLSerializer).serializeToString(n):n}function h(e,n,i){var r=s[e._class],a=r&&r(e,n);if(a){var c=n.onExport;c&&(a=c(e,a,n)||a);var h=JSON.stringify(e._data);h&&"{}"!==h&&"null"!==h&&a.setAttribute("data-paper-data",h)}return a&&function(e,n,i){var r={},s=!i&&e.getParent(),a=[];return null!=e._name&&(r.id=e._name),u.each(ut,function(n){var i=n.get,c=n.type,h=e[i]();if(n.exportFilter?n.exportFilter(e,h):!s||!u.equals(s[i](),h)){if("color"===c&&null!=h){var d=h.getAlpha();d<1&&(r[n.attribute+"-opacity"]=d)}"style"===c?a.push(n.attribute+": "+h):r[n.attribute]=null==h?"none":"color"===c?h.gradient?function(e){var n=o(e,"color");if(!n){var i,r=e.getGradient(),s=r._radial,a=e.getOrigin(),c=e.getDestination();if(s){i={cx:a.x,cy:a.y,r:a.getDistance(c)};var h=e.getHighlight();h&&(i.fx=h.x,i.fy=h.y)}else i={x1:a.x,y1:a.y,x2:c.x,y2:c.y};i.gradientUnits="userSpaceOnUse",n=ht.create((s?"radial":"linear")+"Gradient",i,t);for(var u=r._stops,d=0,p=u.length;d<p;d++){var f=u[d],m=f._color,g=m.getAlpha(),v=f._offset;i={offset:null==v?d/(p-1):v},m&&(i["stop-color"]=m.toCSS(!0)),g<1&&(i["stop-opacity"]=g),n.appendChild(ht.create("stop",i,t))}l(e,n,"color")}return"url(#"+n.id+")"}(h):h.toCSS(!0):"array"===c?h.join(","):"lookup"===c?n.toSVG[h]:h}}),a.length&&(r.style=a.join(";")),1===r.opacity&&delete r.opacity,e._visible||(r.visibility="hidden"),ht.set(n,r,t)}(e,a,i)}function d(e){return e||(e={}),t=new m(e.precision),e}T.inject({exportSVG:function(t){return c(h(this,t=d(t),!0),t)}}),M.inject({exportSVG:function(n){n=d(n);var i=this._children,r=this.getView(),s=u.pick(n.bounds,"view"),o=n.matrix||"view"===s&&r._matrix,a=o&&E.read([o]),l="view"===s?new w([0,0],r.getViewSize()):"content"===s?T._getBounds(i,a,{stroke:!0}).rect:w.read([s],0,{readNull:!0}),p={version:"1.1",xmlns:ht.svg,"xmlns:xlink":ht.xlink};l&&(p.width=l.width,p.height=l.height,(l.x||0===l.x||l.y||0===l.y)&&(p.viewBox=t.rectangle(l)));var f=ht.create("svg",p,t),m=f;a&&!a.isIdentity()&&(m=f.appendChild(ht.create("g",e(a),t)));for(var g=0,v=i.length;g<v;g++)m.appendChild(h(i[g],n,!0));return c(f,n)}})},new function(){var t,n={};function i(e,n,i,r,s,o){var a=ht.get(e,n)||o,l=null==a?r?null:i?"":0:i?a:parseFloat(a);return/%\s*$/.test(a)?l/100*(s?1:t[/x|^width/.test(n)?"width":"height"]):l}function r(t,e,n,r,s,o,a){return e=i(t,e||"x",!1,r,s,o),n=i(t,n||"y",!1,r,s,a),!r||null!=e&&null!=n?new y(e,n):null}function s(t,e,n,r,s){return e=i(t,e||"width",!1,r,s),n=i(t,n||"height",!1,r,s),!r||null!=e&&null!=n?new b(e,n):null}function o(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?S(t)||t:"lookup"===e?n[t]:t}function d(t,e,n,i){var r=t.childNodes,s="clippath"===e,o="defs"===e,a=new C,l=a._project,c=l._currentStyle,h=[];if(s||o||(a=A(a,t,i),l._currentStyle=a._style.clone()),i)for(var u=t.querySelectorAll("defs"),d=0,p=u.length;d<p;d++)L(u[d],n,!1);for(d=0,p=r.length;d<p;d++){var f,m=r[d];1!==m.nodeType||/^defs$/i.test(m.nodeName)||!(f=L(m,n,!1))||f instanceof I||h.push(f)}return a.addChildren(h),s&&(a=A(a.reduce(),t,i)),l._currentStyle=c,(s||o)&&(a.remove(),a=null),a}function p(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,s=n.length;r<s;r+=2)i.push(new y(parseFloat(n[r]),parseFloat(n[r+1])));var o=new U(i);return"polygon"===e&&o.closePath(),o}function f(t,e){var s,o=(i(t,"href",!0)||"").substring(1),a="radialgradient"===e;if(o)(s=n[o].getGradient())._radial^a&&((s=s.clone())._radial=a);else{for(var l=t.childNodes,c=[],h=0,u=l.length;h<u;h++){var d=l[h];1===d.nodeType&&c.push(A(new Y,d))}s=new X(c,a)}var p,f,m,g="userSpaceOnUse"!==i(t,"gradientUnits",!0);return a?(f=(p=r(t,"cx","cy",!1,g,"50%","50%")).add(i(t,"r",!1,!1,g,"50%"),0),m=r(t,"fx","fy",!0,g)):(p=r(t,"x1","y1",!1,g,"0%","0%"),f=r(t,"x2","y2",!1,g,"100%","0%")),A(new q(s,p,f,m),t)._scaleToBounds=g,null}var m={"#document":function(t,e,n,i){for(var r=t.childNodes,s=0,o=r.length;s<o;s++){var a=r[s];if(1===a.nodeType)return L(a,n,i)}},g:d,svg:d,clippath:d,polygon:p,polyline:p,path:function(t){return z.create(t.getAttribute("d"))},lineargradient:f,radialgradient:f,image:function(t){var e=new R(i(t,"href",!0));return e.on("load",function(){var e=s(t);this.setSize(e);var n=r(t).add(e.divide(2));this._matrix.append((new E).translate(n))}),e},symbol:function(t,e,n,i){return new I(d(t,e,n,i),!0)},defs:d,use:function(t){var e=(i(t,"href",!0)||"").substring(1),s=n[e],o=r(t);return s?s instanceof I?s.place(o):s.clone().translate(o):null},circle:function(t){return new P.Circle(r(t,"cx","cy"),i(t,"r"))},ellipse:function(t){return new P.Ellipse({center:r(t,"cx","cy"),radius:s(t,"rx","ry")})},rect:function(t){return new P.Rectangle(new w(r(t),s(t)),s(t,"rx","ry"))},line:function(t){return new U.Line(r(t,"x1","y1"),r(t,"x2","y2"))},text:function(t){var e=new W(r(t).add(r(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:d};function g(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new E,o=0,a=r.length;o<a;o++){var l=r[o];if(!l)break;for(var c=l.split(/\(\s*/),h=c[0],u=c[1].split(/[\s,]+/g),d=0,p=u.length;d<p;d++)u[d]=parseFloat(u[d]);switch(h){case"matrix":s.append(new E(u[0],u[1],u[2],u[3],u[4],u[5]));break;case"rotate":s.rotate(u[0],u[1]||0,u[2]||0);break;case"translate":s.translate(u[0],u[1]||0);break;case"scale":s.scale(u);break;case"skewX":s.skew(u[0],0);break;case"skewY":s.skew(0,u[0])}}t.transform(s)}}function v(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}var _=u.set(u.each(ut,function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](o(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i&&i._scaleToBounds){var r=e.getBounds();i.transform((new E).translate(r.getPoint()).scale(r.getSize()))}}}},{}),{id:function(t,e){n[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=S(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof C))return new C(n,t);t.insertChild(0,n)}},gradientTransform:g,transform:g,"fill-opacity":v,"stroke-opacity":v,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,r){var a,l=new w(o(e,"array")),c=s(i,null,null,!0);if(t instanceof C){var h=c?c.divide(l.getSize()):1,u=(new E).scale(h).translate(l.getPoint().negate());a=t}else t instanceof I&&(c&&l.setSize(c),a=t._item);if(a){if("visible"!==x(i,"overflow",r)){var d=new P.Rectangle(l);d.setClipMask(!0),a.addChild(d)}u&&a.transform(u)}}});function x(t,e,n){var i=t.attributes[e],r=i&&i.value;if(!r&&t.style){var s=u.camelize(e);(r=t.style[s])||n.node[s]===n.parent[s]||(r=n.node[s])}return r?"none"===r?null:r:l}function A(t,e,n){var i=e.parentNode,r={node:Z.getStyles(e)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&Z.getStyles(i)||{}};return u.each(_,function(n,i){var s=x(e,i,r);t=s!==l&&n(t,s,i,e,r)||t}),t}function S(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=e&&e[1],r=i&&n[c?i.replace(c.location.href.split("#")[0]+"#",""):i];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function L(e,i,r){var o,a,l,c=e.nodeName.toLowerCase(),d="#document"!==c,p=h.body;r&&d&&(t=dt.getView().getSize(),t=s(e,null,null,!0)||t,o=ht.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),a=e.parentNode,l=e.nextSibling,o.appendChild(e),p.appendChild(o));var f=dt.settings,g=f.applyMatrix,v=f.insertItems;f.applyMatrix=!1,f.insertItems=!1;var y=m[c],_=y&&y(e,c,i,r)||null;if(f.insertItems=v,f.applyMatrix=g,_){!d||_ instanceof C||(_=A(_,e,r));var b=i.onImport,x=d&&e.getAttribute("data-paper-data");b&&(_=b(e,_,i)||_),i.expandShapes&&_ instanceof P&&(_.remove(),_=_.toPath()),x&&(_._data=JSON.parse(x))}return o&&(p.removeChild(o),a&&(l?a.insertBefore(e,l):a.appendChild(e))),r&&(n={},_&&u.pick(i.applyMatrix,g)&&_.matrix.apply(!0,!0)),_}function O(t,n,i){if(!t)return null;n="function"==typeof n?{onLoad:n}:n||{};var r=dt,s=null;function o(o){try{var h="object"==typeof o?o:(new a.DOMParser).parseFromString(o,"image/svg+xml");if(!h.nodeName)throw h=null,new Error("Unsupported SVG source: "+t);dt=r,s=L(h,n,!0),n&&!1===n.insert||i._insertItem(l,s);var u=n.onLoad;u&&u(s,o)}catch(e){c(e)}}function c(t,e){var i=n.onError;if(!i)throw new Error(t);i(t,e)}if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var u=new FileReader;return u.onload=function(){o(u.result)},u.onerror=function(){c(u.error)},u.readAsText(t)}o(t)}else{var d=h.getElementById(t);d?o(d):at.request({url:t,async:!0,onLoad:o,onError:c})}return s}T.inject({importSVG:function(t,e){return O(t,e,this)}}),M.inject({importSVG:function(t,e){return this.activate(),O(t,e,this)}})},u.exports.PaperScript=(function(){var t,n,d,f=this,m=f.acorn;if(!m)try{m=i("sOAE")}catch(e){}function g(t,e){return(f.acorn||m).parse(t,e)}m||(m=t=n={},d=function(t){"use strict";var n,i,r,s;t.version="0.5.0",t.parse=function(t,e){return i=String(t),r=i.length,a(e),Xt(),function(t){y=_=l,n.locations&&(b=new qt),x=A=null,w=[],Jt();var e=t||he(),i=!0;for(t||(e.body=[]);p!==R;){var r=we();e.body.push(r),i&&pe(r)&&ae(!0),i=!1}return de(e,"Program")}(n.program)};var o=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function a(t){for(var e in n=t||{},o)Object.prototype.hasOwnProperty.call(n,e)||(n[e]=o[e]);s=n.sourceFile||null}var l,c,h,u,d,p,f,m,g,v,y,_,b,x,w,A,E=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Vt.lastIndex=i;var r=Vt.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};function S(t,e){var n=E(i,t),r=new SyntaxError(e+=" ("+n.line+":"+n.column+")");throw r.pos=t,r.loc=n,r.raisedAt=l,r}t.tokenize=function(t,e){i=String(t),r=i.length,a(e),Xt();var s={};function o(t){return _=h,Jt(t),s.start=c,s.end=h,s.startLoc=u,s.endLoc=d,s.type=p,s.value=f,s}return o.jumpTo=function(t,e){var r;if(l=t,n.locations)for(g=1,v=Vt.lastIndex=0;(r=Vt.exec(i))&&r.index<t;)++g,v=r.index+r[0].length;m=e,Kt()},o};var M=[],T={type:"num"},C={type:"regexp"},L={type:"string"},P={type:"name"},R={type:"eof"},O={keyword:"break"},I={keyword:"case",beforeExpr:!0},D={keyword:"catch"},k={keyword:"continue"},N={keyword:"debugger"},B={keyword:"default"},F={keyword:"do",isLoop:!0},z={keyword:"else",beforeExpr:!0},U={keyword:"finally"},j={keyword:"for",isLoop:!0},H={keyword:"function"},V={keyword:"if"},G={keyword:"return",beforeExpr:!0},W={keyword:"switch"},q={keyword:"throw",beforeExpr:!0},X={keyword:"try"},Y={keyword:"var"},Q={keyword:"while",isLoop:!0},Z={keyword:"with"},K={keyword:"new",beforeExpr:!0},J={keyword:"this"},$={keyword:"null",atomValue:null},tt={keyword:"true",atomValue:!0},et={keyword:"false",atomValue:!1},nt={keyword:"in",binop:7,beforeExpr:!0},it={break:O,case:I,catch:D,continue:k,debugger:N,default:B,do:F,else:z,finally:U,for:j,function:H,if:V,return:G,switch:W,throw:q,try:X,var:Y,while:Q,with:Z,null:$,true:tt,false:et,new:K,in:nt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:J,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},rt={type:"[",beforeExpr:!0},st={type:"]"},ot={type:"{",beforeExpr:!0},at={type:"}"},lt={type:"(",beforeExpr:!0},ct={type:")"},ht={type:",",beforeExpr:!0},ut={type:";",beforeExpr:!0},dt={type:":",beforeExpr:!0},pt={type:"."},ft={type:"?",beforeExpr:!0},mt={binop:10,beforeExpr:!0},gt={isAssign:!0,beforeExpr:!0},vt={isAssign:!0,beforeExpr:!0},yt={postfix:!0,prefix:!0,isUpdate:!0},_t={prefix:!0,beforeExpr:!0},bt={binop:1,beforeExpr:!0},xt={binop:2,beforeExpr:!0},wt={binop:3,beforeExpr:!0},At={binop:4,beforeExpr:!0},Et={binop:5,beforeExpr:!0},St={binop:6,beforeExpr:!0},Mt={binop:7,beforeExpr:!0},Tt={binop:8,beforeExpr:!0},Ct={binop:9,prefix:!0,beforeExpr:!0},Lt={binop:10,beforeExpr:!0};for(var Pt in t.tokTypes={bracketL:rt,bracketR:st,braceL:ot,braceR:at,parenL:lt,parenR:ct,comma:ht,semi:ut,colon:dt,dot:pt,question:ft,slash:mt,eq:gt,name:P,eof:R,num:T,regexp:C,string:L},it)t.tokTypes["_"+Pt]=it[Pt];function Rt(t){t=t.split(" ");var e="",n=[];t:for(var i=0;i<t.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==t[i].length){n[r].push(t[i]);continue t}n.push([t[i]])}function s(t){if(1==t.length)return e+="return str === "+JSON.stringify(t[0])+";";e+="switch(str){";for(var n=0;n<t.length;++n)e+="case "+JSON.stringify(t[n])+":";e+="return true}return false;"}if(n.length>3){for(n.sort(function(t,e){return e.length-t.length}),e+="switch(str.length){",i=0;i<n.length;++i){var o=n[i];e+="case "+o[0].length+":",s(o)}e+="}"}else s(t);return new Function("str",e)}var Ot,It=Rt("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Dt=Rt("class enum extends super const export import"),kt=Rt("implements interface let package private protected public static yield"),Nt=Rt("eval arguments"),Bt=Rt("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ft=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,zt="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",Ut=new RegExp("["+zt+"]"),jt=new RegExp("["+zt+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),Ht=/[\n\r\u2028\u2029]/,Vt=/\r\n|[\n\r\u2028\u2029]/g,Gt=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Ut.test(String.fromCharCode(t)))},Wt=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&jt.test(String.fromCharCode(t))))};function qt(){this.line=g,this.column=l-v}function Xt(){g=1,l=v=0,m=!0,Kt()}function Yt(t,e){h=l,n.locations&&(d=new qt),p=t,Kt(),f=e,m=t.beforeExpr}function Qt(){var t,e=n.onComment&&n.locations&&new qt,r=l,s=i.indexOf("*/",l+=2);if(-1===s&&S(l-2,"Unterminated comment"),l=s+2,n.locations)for(Vt.lastIndex=r;(t=Vt.exec(i))&&t.index<l;)++g,v=t.index+t[0].length;n.onComment&&n.onComment(!0,i.slice(r+2,s),r,l,e,n.locations&&new qt)}function Zt(){for(var t=l,e=n.onComment&&n.locations&&new qt,s=i.charCodeAt(l+=2);l<r&&10!==s&&13!==s&&8232!==s&&8233!==s;)s=i.charCodeAt(++l);n.onComment&&n.onComment(!1,i.slice(t+2,l),t,l,e,n.locations&&new qt)}function Kt(){for(;l<r;){var t=i.charCodeAt(l);if(32===t)++l;else if(13===t)10===(e=i.charCodeAt(++l))&&++l,n.locations&&(++g,v=l);else if(10===t||8232===t||8233===t)++l,n.locations&&(++g,v=l);else if(t>8&&t<14)++l;else if(47===t){var e;if(42===(e=i.charCodeAt(l+1)))Qt();else{if(47!==e)break;Zt()}}else if(160===t)++l;else{if(!(t>=5760&&Ft.test(String.fromCharCode(t))))break;++l}}}function Jt(t){if(t?l=c+1:c=l,n.locations&&(u=new qt),t)return te();if(l>=r)return Yt(R);var e=i.charCodeAt(l);if(Gt(e)||92===e)return se();var s=function(t){switch(t){case 46:return function(){var t=i.charCodeAt(l+1);return t>=48&&t<=57?ne(!0):(++l,Yt(pt))}();case 40:return++l,Yt(lt);case 41:return++l,Yt(ct);case 59:return++l,Yt(ut);case 44:return++l,Yt(ht);case 91:return++l,Yt(rt);case 93:return++l,Yt(st);case 123:return++l,Yt(ot);case 125:return++l,Yt(at);case 58:return++l,Yt(dt);case 63:return++l,Yt(ft);case 48:var e=i.charCodeAt(l+1);if(120===e||88===e)return function(){l+=2;var t=ee(16);return null==t&&S(c+2,"Expected hexadecimal number"),Gt(i.charCodeAt(l))&&S(l,"Identifier directly after number"),Yt(T,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ne(!1);case 34:case 39:return function(t){l++;for(var e="";;){l>=r&&S(c,"Unterminated string constant");var s=i.charCodeAt(l);if(s===t)return++l,Yt(L,e);if(92===s){s=i.charCodeAt(++l);var o=/^[0-7]+/.exec(i.slice(l,l+3));for(o&&(o=o[0]);o&&parseInt(o,8)>255;)o=o.slice(0,-1);if("0"===o&&(o=null),++l,o)A&&S(l-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(o,8)),l+=o.length-1;else switch(s){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(ie(2));break;case 117:e+=String.fromCharCode(ie(4));break;case 85:e+=String.fromCharCode(ie(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===i.charCodeAt(l)&&++l;case 10:n.locations&&(v=l,++g);break;default:e+=String.fromCharCode(s)}}else 13!==s&&10!==s&&8232!==s&&8233!==s||S(c,"Unterminated string constant"),e+=String.fromCharCode(s),++l}}(t);case 47:return function(){var t=i.charCodeAt(l+1);return m?(++l,te()):61===t?$t(vt,2):$t(mt,1)}();case 37:case 42:return 61===i.charCodeAt(l+1)?$t(vt,2):$t(Lt,1);case 124:case 38:return function(t){var e=i.charCodeAt(l+1);return e===t?$t(124===t?bt:xt,2):61===e?$t(vt,2):$t(124===t?wt:Et,1)}(t);case 94:return 61===i.charCodeAt(l+1)?$t(vt,2):$t(At,1);case 43:case 45:return function(t){var e=i.charCodeAt(l+1);return e===t?45==e&&62==i.charCodeAt(l+2)&&Ht.test(i.slice(_,l))?(l+=3,Zt(),Kt(),Jt()):$t(yt,2):61===e?$t(vt,2):$t(Ct,1)}(t);case 60:case 62:return function(t){var e=i.charCodeAt(l+1),n=1;return e===t?(n=62===t&&62===i.charCodeAt(l+2)?3:2,61===i.charCodeAt(l+n)?$t(vt,n+1):$t(Tt,n)):33==e&&60==t&&45==i.charCodeAt(l+2)&&45==i.charCodeAt(l+3)?(l+=4,Zt(),Kt(),Jt()):(61===e&&(n=61===i.charCodeAt(l+2)?3:2),$t(Mt,n))}(t);case 61:case 33:return function(t){return 61===i.charCodeAt(l+1)?$t(St,61===i.charCodeAt(l+2)?3:2):$t(61===t?gt:_t,1)}(t);case 126:return $t(_t,1)}return!1}(e);if(!1===s){var o=String.fromCharCode(e);if("\\"===o||Ut.test(o))return se();S(l,"Unexpected character '"+o+"'")}return s}function $t(t,e){var n=i.slice(l,l+e);l+=e,Yt(t,n)}function te(){for(var t,n,s=l;;){l>=r&&S(s,"Unterminated regular expression");var o=i.charAt(l);if(Ht.test(o)&&S(s,"Unterminated regular expression"),t)t=!1;else{if("["===o)n=!0;else if("]"===o&&n)n=!1;else if("/"===o&&!n)break;t="\\"===o}++l}var a=i.slice(s,l);++l;var c=re();c&&!/^[gmsiy]*$/.test(c)&&S(s,"Invalid regexp flag");try{var h=new RegExp(a,c)}catch(e){e instanceof SyntaxError&&S(s,e.message),S(e)}return Yt(C,h)}function ee(t,e){for(var n=l,r=0,s=0,o=null==e?1/0:e;s<o;++s){var a,c=i.charCodeAt(l);if((a=c>=97?c-97+10:c>=65?c-65+10:c>=48&&c<=57?c-48:1/0)>=t)break;++l,r=r*t+a}return l===n||null!=e&&l-n!==e?null:r}function ne(t){var e=l,n=!1,r=48===i.charCodeAt(l);t||null!==ee(10)||S(e,"Invalid number"),46===i.charCodeAt(l)&&(++l,ee(10),n=!0);var s=i.charCodeAt(l);69!==s&&101!==s||(43!==(s=i.charCodeAt(++l))&&45!==s||++l,null===ee(10)&&S(e,"Invalid number"),n=!0),Gt(i.charCodeAt(l))&&S(l,"Identifier directly after number");var o,a=i.slice(e,l);return n?o=parseFloat(a):r&&1!==a.length?/[89]/.test(a)||A?S(e,"Invalid number"):o=parseInt(a,8):o=parseInt(a,10),Yt(T,o)}function ie(t){var e=ee(16,t);return null===e&&S(c,"Bad character escape sequence"),e}function re(){Ot=!1;for(var t,e=!0,n=l;;){var r=i.charCodeAt(l);if(Wt(r))Ot&&(t+=i.charAt(l)),++l;else{if(92!==r)break;Ot||(t=i.slice(n,l)),Ot=!0,117!=i.charCodeAt(++l)&&S(l,"Expecting Unicode escape sequence \\uXXXX"),++l;var s=ie(4),o=String.fromCharCode(s);o||S(l-1,"Invalid Unicode escape"),(e?Gt(s):Wt(s))||S(l-4,"Invalid Unicode escape"),t+=o}e=!1}return Ot?t:i.slice(n,l)}function se(){var t=re(),e=P;return!Ot&&Bt(t)&&(e=it[t]),Yt(e,t)}function oe(){y=c,_=h,b=d,Jt()}function ae(t){if(A=t,l=c,n.locations)for(;l<v;)v=i.lastIndexOf("\n",v-2)+1,--g;Kt(),Jt()}function le(){this.type=null,this.start=c,this.end=null}function ce(){this.start=u,this.end=null,null!==s&&(this.source=s)}function he(){var t=new le;return n.locations&&(t.loc=new ce),n.directSourceFile&&(t.sourceFile=n.directSourceFile),n.ranges&&(t.range=[c,0]),t}function ue(t){var e=new le;return e.start=t.start,n.locations&&(e.loc=new ce,e.loc.start=t.loc.start),n.ranges&&(e.range=[t.range[0],0]),e}function de(t,e){return t.type=e,t.end=_,n.locations&&(t.loc.end=b),n.ranges&&(t.range[1]=_),t}function pe(t){return n.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function fe(t){if(p===t)return oe(),!0}function me(){return!n.strictSemicolons&&(p===R||p===at||Ht.test(i.slice(_,c)))}function ge(){fe(ut)||me()||ye()}function ve(t){p===t?oe():ye()}function ye(){S(c,"Unexpected token")}function _e(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&S(t.start,"Assigning to rvalue"),A&&"Identifier"===t.type&&Nt(t.name)&&S(t.start,"Assigning to "+t.name+" in strict mode")}var be={kind:"loop"},xe={kind:"switch"};function we(){(p===mt||p===vt&&"/="==f)&&Jt(!0);var t=p,e=he();switch(t){case O:case k:oe();var r=t===O;fe(ut)||me()?e.label=null:p!==P?ye():(e.label=Ne(),ge());for(var s=0;s<w.length;++s){var o=w[s];if(null==e.label||o.name===e.label.name){if(null!=o.kind&&(r||"loop"===o.kind))break;if(e.label&&r)break}}return s===w.length&&S(e.start,"Unsyntactic "+t.keyword),de(e,r?"BreakStatement":"ContinueStatement");case N:return oe(),ge(),de(e,"DebuggerStatement");case F:return oe(),w.push(be),e.body=we(),w.pop(),ve(Q),e.test=Ae(),ge(),de(e,"DoWhileStatement");case j:if(oe(),w.push(be),ve(lt),p===ut)return Se(e,null);if(p===Y){var a=he();return oe(),Te(a,!0),de(a,"VariableDeclaration"),1===a.declarations.length&&fe(nt)?Me(e,a):Se(e,a)}return a=Ce(!1,!0),fe(nt)?(_e(a),Me(e,a)):Se(e,a);case H:return oe(),De(e,!0);case V:return oe(),e.test=Ae(),e.consequent=we(),e.alternate=fe(z)?we():null,de(e,"IfStatement");case G:return x||n.allowReturnOutsideFunction||S(c,"'return' outside of function"),oe(),fe(ut)||me()?e.argument=null:(e.argument=Ce(),ge()),de(e,"ReturnStatement");case W:oe(),e.discriminant=Ae(),e.cases=[],ve(ot),w.push(xe);for(var l,h;p!=at;)if(p===I||p===B){var u=p===I;l&&de(l,"SwitchCase"),e.cases.push(l=he()),l.consequent=[],oe(),u?l.test=Ce():(h&&S(y,"Multiple default clauses"),h=!0,l.test=null),ve(dt)}else l||ye(),l.consequent.push(we());return l&&de(l,"SwitchCase"),oe(),w.pop(),de(e,"SwitchStatement");case q:return oe(),Ht.test(i.slice(_,c))&&S(_,"Illegal newline after throw"),e.argument=Ce(),ge(),de(e,"ThrowStatement");case X:if(oe(),e.block=Ee(),e.handler=null,p===D){var d=he();oe(),ve(lt),d.param=Ne(),A&&Nt(d.param.name)&&S(d.param.start,"Binding "+d.param.name+" in strict mode"),ve(ct),d.guard=null,d.body=Ee(),e.handler=de(d,"CatchClause")}return e.guardedHandlers=M,e.finalizer=fe(U)?Ee():null,e.handler||e.finalizer||S(e.start,"Missing catch or finally clause"),de(e,"TryStatement");case Y:return oe(),Te(e),ge(),de(e,"VariableDeclaration");case Q:return oe(),e.test=Ae(),w.push(be),e.body=we(),w.pop(),de(e,"WhileStatement");case Z:return A&&S(c,"'with' in strict mode"),oe(),e.object=Ae(),e.body=we(),de(e,"WithStatement");case ot:return Ee();case ut:return oe(),de(e,"EmptyStatement");default:var m=f,g=Ce();if(t===P&&"Identifier"===g.type&&fe(dt)){for(s=0;s<w.length;++s)w[s].name===m&&S(g.start,"Label '"+m+"' is already declared");return w.push({name:m,kind:p.isLoop?"loop":p===W?"switch":null}),e.body=we(),w.pop(),e.label=g,de(e,"LabeledStatement")}return e.expression=g,ge(),de(e,"ExpressionStatement")}}function Ae(){ve(lt);var t=Ce();return ve(ct),t}function Ee(t){var e,n=he(),i=!0,r=!1;for(n.body=[],ve(ot);!fe(at);){var s=we();n.body.push(s),i&&t&&pe(s)&&(e=r,ae(r=!0)),i=!1}return r&&!e&&ae(!1),de(n,"BlockStatement")}function Se(t,e){return t.init=e,ve(ut),t.test=p===ut?null:Ce(),ve(ut),t.update=p===ct?null:Ce(),ve(ct),t.body=we(),w.pop(),de(t,"ForStatement")}function Me(t,e){return t.left=e,t.right=Ce(),ve(ct),t.body=we(),w.pop(),de(t,"ForInStatement")}function Te(t,e){for(t.declarations=[],t.kind="var";;){var n=he();if(n.id=Ne(),A&&Nt(n.id.name)&&S(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=fe(gt)?Ce(!0,e):null,t.declarations.push(de(n,"VariableDeclarator")),!fe(ht))break}return t}function Ce(t,e){var n=Le(e);if(!t&&p===ht){var i=ue(n);for(i.expressions=[n];fe(ht);)i.expressions.push(Le(e));return de(i,"SequenceExpression")}return n}function Le(t){var e=function(t){var e=function(t){return function t(e,n,i){var r=p.binop;if(null!=r&&(!i||p!==nt)&&r>n){var s=ue(e);s.left=e,s.operator=f;var o=p;return oe(),s.right=t(Pe(),r,i),t(de(s,o===bt||o===xt?"LogicalExpression":"BinaryExpression"),n,i)}return e}(Pe(),-1,t)}(t);if(fe(ft)){var n=ue(e);return n.test=e,n.consequent=Ce(!0),ve(dt),n.alternate=Ce(!0,t),de(n,"ConditionalExpression")}return e}(t);if(p.isAssign){var n=ue(e);return n.operator=f,n.left=e,oe(),n.right=Le(t),_e(e),de(n,"AssignmentExpression")}return e}function Pe(){if(p.prefix){var t=he(),e=p.isUpdate;return t.operator=f,t.prefix=!0,m=!0,oe(),t.argument=Pe(),e?_e(t.argument):A&&"delete"===t.operator&&"Identifier"===t.argument.type&&S(t.start,"Deleting local variable in strict mode"),de(t,e?"UpdateExpression":"UnaryExpression")}for(var n=Re(Oe());p.postfix&&!me();)(t=ue(n)).operator=f,t.prefix=!1,t.argument=n,_e(n),oe(),n=de(t,"UpdateExpression");return n}function Re(t,e){var n;return fe(pt)?((n=ue(t)).object=t,n.property=Ne(!0),n.computed=!1,Re(de(n,"MemberExpression"),e)):fe(rt)?((n=ue(t)).object=t,n.property=Ce(),n.computed=!0,ve(st),Re(de(n,"MemberExpression"),e)):!e&&fe(lt)?((n=ue(t)).callee=t,n.arguments=ke(ct,!1),Re(de(n,"CallExpression"),e)):t}function Oe(){switch(p){case J:var t=he();return oe(),de(t,"ThisExpression");case P:return Ne();case T:case L:case C:return(t=he()).value=f,t.raw=i.slice(c,h),oe(),de(t,"Literal");case $:case tt:case et:return(t=he()).value=p.atomValue,t.raw=p.keyword,oe(),de(t,"Literal");case lt:var e=u,r=c;oe();var s=Ce();return s.start=r,s.end=h,n.locations&&(s.loc.start=e,s.loc.end=d),n.ranges&&(s.range=[r,h]),ve(ct),s;case rt:return t=he(),oe(),t.elements=ke(st,!0,!0),de(t,"ArrayExpression");case ot:return function(){var t=he(),e=!0,i=!1;for(t.properties=[],oe();!fe(at);){if(e)e=!1;else if(ve(ht),n.allowTrailingCommas&&fe(at))break;var r,s={key:Ie()},o=!1;if(fe(dt)?(s.value=Ce(!0),r=s.kind="init"):n.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(o=i=!0,r=s.kind=s.key.name,s.key=Ie(),p!==lt&&ye(),s.value=De(he(),!1)):ye(),"Identifier"===s.key.type&&(A||i))for(var a=0;a<t.properties.length;++a){var l=t.properties[a];if(l.key.name===s.key.name){var c=r==l.kind||o&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);c&&!A&&"init"===r&&"init"===l.kind&&(c=!1),c&&S(s.key.start,"Redefinition of property")}}t.properties.push(s)}return de(t,"ObjectExpression")}();case H:return t=he(),oe(),De(t,!1);case K:return function(){var t=he();return oe(),t.callee=Re(Oe(),!0),t.arguments=fe(lt)?ke(ct,!1):M,de(t,"NewExpression")}();default:ye()}}function Ie(){return p===T||p===L?Oe():Ne(!0)}function De(t,e){p===P?t.id=Ne():e?ye():t.id=null,t.params=[];var n=!0;for(ve(lt);!fe(ct);)n?n=!1:ve(ht),t.params.push(Ne());var i=x,r=w;if(x=!0,w=[],t.body=Ee(!0),x=i,w=r,A||t.body.body.length&&pe(t.body.body[0]))for(var s=t.id?-1:0;s<t.params.length;++s){var o=s<0?t.id:t.params[s];if((kt(o.name)||Nt(o.name))&&S(o.start,"Defining '"+o.name+"' in strict mode"),s>=0)for(var a=0;a<s;++a)o.name===t.params[a].name&&S(o.start,"Argument name clash in strict mode")}return de(t,e?"FunctionDeclaration":"FunctionExpression")}function ke(t,e,i){for(var r=[],s=!0;!fe(t);){if(s)s=!1;else if(ve(ht),e&&n.allowTrailingCommas&&fe(t))break;r.push(i&&p===ht?null:Ce(!0))}return r}function Ne(t){var e=he();return t&&"everywhere"==n.forbidReserved&&(t=!1),p===P?(!t&&(n.forbidReserved&&(3===n.ecmaVersion?It:Dt)(f)||A&&kt(f))&&-1==i.slice(c,h).indexOf("\\")&&S(c,"The keyword '"+f+"' is reserved"),e.name=f):t&&p.keyword?e.name=p.keyword:ye(),m=!1,oe(),de(e,"Identifier")}},"object"==typeof t&&"object"==typeof n?d(t):(r=[t],(o="function"==typeof(s=d)?s.apply(t,r):s)===l||(n.exports=o)),m.version||(m=null));var v={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},_={"-":"__negate","+":"__self"},x=u.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(t){this["__"+t]="#"+t},{__self:function(){return this}});function w(t,e,n){var i=v[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function A(t,e){var n=_[t];if(e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function E(t,e){if(!t)return"";var n=[];function i(t){for(var e=0,i=n.length;e<i;e++){var r=n[e];if(r[0]>=t)break;t+=r[1]}return t}function r(e){return t.substring(i(e.range[0]),i(e.range[1]))}function s(e,r){for(var s=i(e.range[0]),o=i(e.range[1]),a=0,l=n.length-1;l>=0;l--)if(s>n[l][0]){a=l+1;break}n.splice(a,0,[s,r.length-o+s]),t=t.substring(0,s)+r+t.substring(o)}var o,l=(e=e||{}).url||"",u=dt.agent,d=u.versionNumber,p=!1,f=e.sourceMaps,m=e.source||t,y=/\r\n|\n|\r/gm,b=e.offset||0;if(f&&(u.chrome&&d>=30||u.webkit&&d>=537.76||u.firefox&&d>=23||u.node)){if(u.node)b-=2;else if(c&&l&&!c.location.href.indexOf(l)){var x=h.getElementsByTagName("html")[0].innerHTML;b=x.substr(0,x.indexOf(t)+1).match(y).length+1}var w=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return e}((p=b>0&&!(u.chrome&&d>=36||u.safari&&d>=600||u.firefox&&d>=40||u.node))?0:b)+"A"];w.length=(t.match(y)||[]).length+1+(p?b:0),o={version:3,file:l,names:[],mappings:w.join(";AACA"),sourceRoot:"",sources:[l],sourcesContent:[m]}}return function e(n,o){if(n){for(var a in n)if("range"!==a&&"loc"!==a){var l=n[a];if(Array.isArray(l))for(var c=0,h=l.length;c<h;c++)e(l[c],n);else l&&"object"==typeof l&&e(l,n)}switch(n.type){case"UnaryExpression":if(n.operator in _&&"Literal"!==n.argument.type){var u=r(n.argument);s(n,'$__("'+n.operator+'", '+u+")")}break;case"BinaryExpression":if(n.operator in v&&"Literal"!==n.left.type){var d=r(n.left),p=r(n.right),f=function(e,r){return t.substring(i(n.left.range[1]),i(r.range[0]))}(0,n.right),m=n.operator;s(n,"__$__("+d+","+f.replace(new RegExp("\\"+m),'"'+m+'"')+", "+p+")")}break;case"UpdateExpression":case"AssignmentExpression":var g=o&&o.type;if(!("ForStatement"===g||"BinaryExpression"===g&&/^[=!<>]/.test(o.operator)||"MemberExpression"===g&&o.computed))if("UpdateExpression"===n.type){var y=(u=r(n.argument))+" = "+(b="__$__("+u+', "'+n.operator[0]+'", 1)');n.prefix?y="("+y+")":"AssignmentExpression"!==g&&"VariableDeclarator"!==g&&"BinaryExpression"!==g||(r(o.left||o.id)===u&&(y=b),y=u+"; "+y),s(n,y)}else if(/^.=$/.test(n.operator)&&"Literal"!==n.left.type){d=r(n.left),p=r(n.right);var b=d+" = __$__("+d+', "'+n.operator[0]+'", '+p+")";s(n,/^\(.*\)$/.test(r(n))?"("+b+")":b)}break;case"ExportDefaultDeclaration":s({range:[n.start,n.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var x=n.declaration,w=n.specifiers;if(x){var A=x.declarations;A&&(A.forEach(function(t){s(t,"module.exports."+r(t))}),s({range:[n.start,x.start+x.kind.length]},""))}else if(w){var E=w.map(function(t){var e=r(t);return"module.exports."+e+" = "+e+"; "}).join("");E&&s(n,E)}}}}(g(t,{ranges:!0,preserveParens:!0,sourceType:"module"})),o&&(p&&(t=new Array(b+1).join("\n")+t),/^(inline|both)$/.test(f)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+a.btoa(unescape(encodeURIComponent(JSON.stringify(o))))),t+="\n//# sourceURL="+(l||"paperscript")),{url:l,source:m,code:t,map:o}}function S(t,e,n){dt=e;var i,r=e.getView(),s=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new st:null,o=s?s._events:[],a=["onFrame","onResize"].concat(o),l=[],c=[],d="object"==typeof t?t:E(t,n);function p(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(t)||(l.push(i),c.push(e[i]))}t=d.code,p({__$__:w,$__:A,paper:e,tool:s},!0),p(e),t="var module = { exports: {} }; "+t,(v=u.each(a,function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(l.push(e),this.push("module.exports."+e+" = "+e+";"))},[]).join("\n"))&&(t+="\n"+v),t+="\nreturn module.exports;";var f=dt.agent;if(h&&(f.chrome||f.firefox&&f.versionNumber<40)){var m=h.createElement("script"),g=h.head||h.getElementsByTagName("head")[0];f.firefox&&(t="\n"+t),m.appendChild(h.createTextNode("document.__paperscript__ = function("+l+") {"+t+"\n}")),g.appendChild(m),i=h.__paperscript__,delete h.__paperscript__,g.removeChild(m)}else i=Function(l,t);var v,_=(v=i&&i.apply(e,c))||{};return u.each(o,function(t){var e=_[t];e&&(s[t]=e)}),r&&(_.onResize&&r.setOnResize(_.onResize),r.emit("resize",{size:r.size,delta:new y}),_.onFrame&&r.setOnFrame(_.onFrame),r.requestUpdate()),v}function M(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==p.getAttribute(t,"ignore")){var e=p.getAttribute(t,"canvas"),n=h.getElementById(e),i=t.src||t.getAttribute("data-src"),r=p.hasAttribute(t,"async");if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var s=p.get(n.getAttribute("data-paper-scope"))||(new p).setup(n);return n.setAttribute("data-paper-scope",s._id),i?at.request({url:i,async:r,mimeType:"text/plain",onLoad:function(t){S(t,s,i)}}):S(t.innerHTML,s,t.baseURI),t.setAttribute("data-paper-ignore","true"),s}}function T(){u.each(h&&h.getElementsByTagName("script"),M)}return y.inject(x),b.inject(x),q.inject(x),c&&("complete"===h.readyState?setTimeout(T):K.add(c,{load:T})),{compile:E,execute:S,load:function(t){return t?M(t):T()},parse:g,calculateBinary:w,calculateUnary:A}}).call(this);var dt=new(p.inject(u.exports,{Base:u,Numerical:g,Key:nt,DomEvent:K,DomElement:Z,document:h,window:c,Symbol:I,PlacedSymbol:O}));return dt.agent.node&&i(2)(dt),(o="function"==typeof(s=dt)?s.call(n,i,n,t):s)===l||(t.exports=o),dt}).call(this,"object"==typeof self?self:null)},K7Ri:function(t,e,n){var i,r=t.exports&&"undefined"!=typeof global?global:this||window;(r._gsQueue||(r._gsQueue=[])).push(function(){"use strict";var t,e,n;r._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,n){var i=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},r=function(t,e,n){var i,r,s=t.cycle;for(i in s)t[i]="function"==typeof(r=s[i])?r(n,e[n]):r[n%r.length];delete t.cycle},s=function(t,e,i){n.call(this,t,e,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=s.prototype.render},o=1e-10,a=n._internals,l=a.isSelector,c=a.isArray,h=s.prototype=n.to({},.1,{}),u=[];s.version="1.20.3",h.constructor=s,h.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=n.killTweensOf,s.getTweensOf=n.getTweensOf,s.lagSmoothing=n.lagSmoothing,s.ticker=n.ticker,s.render=n.render,h.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),n.prototype.invalidate.call(this)},h.updateTo=function(t,e){var i,r=this.ratio,s=this.vars.immediateRender||t.immediateRender;for(i in e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),t)this.vars[i]=t[i];if(this._initted||s)if(e)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&n._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||s)for(var a,l=1/(1-r),c=this._firstPT;c;)a=c.s+c.c,c.c*=l,c.s=a-c.c,c=c._next;return this},h.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,s,l,c,h,u,d,p,f,m=this._dirty?this.totalDuration():this._totalDuration,g=this._time,v=this._totalTime,y=this._cycle,_=this._duration,b=this._rawPrevTime;if(t>=m-1e-7&&t>=0?(this._totalTime=m,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=_,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,s="onComplete",i=i||this._timeline.autoRemoveChildren),0===_&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0>b||0>=t&&t>=-1e-7||b===o&&"isPause"!==this.data)&&b!==t&&(i=!0,b>o&&(s="onReverseComplete")),this._rawPrevTime=p=!e||t||b===t?t:o)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==v||0===_&&b>0)&&(s="onReverseComplete",r=this._reversed),0>t&&(this._active=!1,0===_&&(this._initted||!this.vars.lazy||i)&&(b>=0&&(i=!0),this._rawPrevTime=p=!e||t||b===t?t:o)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(this._cycle=this._totalTime/(c=_+this._repeatDelay)>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&t>=v&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!=(1&this._cycle)&&(this._time=_-this._time,(f=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(this._yoyoEase=f=!0!==f||this._initted?!0===f?this._ease:f instanceof Ease?f:Ease.map[f]:(f=this.vars.ease)?f instanceof Ease?f:"function"==typeof f?new Ease(f,this.vars.easeParams):Ease.map[f]||n.defaultEase:n.defaultEase),this.ratio=f?1-f.getRatio((_-this._time)/_):0)),this._time>_?this._time=_:this._time<0&&(this._time=0)),this._easeType&&!f?(h=this._time/_,(1===(u=this._easeType)||3===u&&h>=.5)&&(h=1-h),3===u&&(h*=2),1===(d=this._easePower)?h*=h:2===d?h*=h*h:3===d?h*=h*h*h:4===d&&(h*=h*h*h*h),this.ratio=1===u?1-h:2===u?h:this._time/_<.5?h/2:1-h/2):f||(this.ratio=this._ease.getRatio(this._time/_))),g!==this._time||i||y!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=g,this._totalTime=v,this._rawPrevTime=b,this._cycle=y,a.lazyTweens.push(this),void(this._lazy=[t,e]);!this._time||r||f?r&&this._ease._calcEnd&&!f&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/_)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==g&&t>=0&&(this._active=!0),0===v&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,!0,i):s||(s="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===_)&&(e||this._callback("onStart"))),l=this._firstPT;l;)l.f?l.t[l.p](l.c*this.ratio+l.s):l.t[l.p]=l.c*this.ratio+l.s,l=l._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,!0,i),e||(this._totalTime!==v||s)&&this._callback("onUpdate")),this._cycle!==y&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),s&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,!0,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this._callback(s),0===_&&this._rawPrevTime===o&&p!==o&&(this._rawPrevTime=0))}else v!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},s.to=function(t,e,n){return new s(t,e,n)},s.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new s(t,e,n)},s.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new s(t,e,i)},s.staggerTo=s.allTo=function(t,e,o,a,h,d,p){a=a||0;var f,m,g,v,y=0,_=[],b=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),h.apply(p||o.callbackScope||this,d||u)},x=o.cycle,w=o.startAt&&o.startAt.cycle;for(c(t)||("string"==typeof t&&(t=n.selector(t)||t),l(t)&&(t=i(t))),t=t||[],0>a&&((t=i(t)).reverse(),a*=-1),f=t.length-1,g=0;f>=g;g++){for(v in m={},o)m[v]=o[v];if(x&&(r(m,t,g),null!=m.duration&&(e=m.duration,delete m.duration)),w){for(v in w=m.startAt={},o.startAt)w[v]=o.startAt[v];r(m.startAt,t,g)}m.delay=y+(m.delay||0),g===f&&h&&(m.onComplete=b),_[g]=new s(t[g],e,m),y+=a}return _},s.staggerFrom=s.allFrom=function(t,e,n,i,r,o,a){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,s.staggerTo(t,e,n,i,r,o,a)},s.staggerFromTo=s.allFromTo=function(t,e,n,i,r,o,a,l){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,s.staggerTo(t,e,i,r,o,a,l)},s.delayedCall=function(t,e,n,i,r){return new s(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,useFrames:r,overwrite:0})},s.set=function(t,e){return new s(t,0,e)},s.isTweening=function(t){return n.getTweensOf(t,!0).length>0};var d=function(t,e){for(var i=[],r=0,s=t._first;s;)s instanceof n?i[r++]=s:(e&&(i[r++]=s),r=(i=i.concat(d(s,e))).length),s=s._next;return i},p=s.getAllTweens=function(e){return d(t._rootTimeline,e).concat(d(t._rootFramesTimeline,e))};s.killAll=function(t,n,i,r){null==n&&(n=!0),null==i&&(i=!0);var s,o,a,l=p(0!=r),c=l.length,h=n&&i&&r;for(a=0;c>a;a++)o=l[a],(h||o instanceof e||(s=o.target===o.vars.onComplete)&&i||n&&!s)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},s.killChildTweensOf=function(t,e){if(null!=t){var r,o,h,u,d,p=a.tweenLookup;if("string"==typeof t&&(t=n.selector(t)||t),l(t)&&(t=i(t)),c(t))for(u=t.length;--u>-1;)s.killChildTweensOf(t[u],e);else{for(h in r=[],p)for(o=p[h].target.parentNode;o;)o===t&&(r=r.concat(p[h].tweens)),o=o.parentNode;for(d=r.length,u=0;d>u;u++)e&&r[u].totalTime(r[u].totalDuration()),r[u]._enabled(!1,!1)}}};var f=function(t,n,i,r){n=!1!==n,i=!1!==i;for(var s,o,a=p(r=!1!==r),l=n&&i&&r,c=a.length;--c>-1;)o=a[c],(l||o instanceof e||(s=o.target===o.vars.onComplete)&&i||n&&!s)&&o.paused(t)};return s.pauseAll=function(t,e,n){f(!0,t,e,n)},s.resumeAll=function(t,e,n){f(!1,t,e,n)},s.globalTimeScale=function(e){var i=t._rootTimeline,r=n.ticker.time;return arguments.length?(i._startTime=r-(r-i._startTime)*i._timeScale/(e=e||o),(i=t._rootFramesTimeline)._startTime=(r=n.ticker.frame)-(r-i._startTime)*i._timeScale/e,i._timeScale=t._rootTimeline._timeScale=e,e):i._timeScale},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},h.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},s},!0),r._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,n){var i=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n,i,r=this.vars;for(i in r)c(n=r[i])&&-1!==n.join("").indexOf("{self}")&&(r[i]=this._swapSelfInParams(n));c(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},s=1e-10,o=n._internals,a=i._internals={},l=o.isSelector,c=o.isArray,h=o.lazyTweens,u=o.lazyRender,d=r._gsDefine.globals,p=function(t){var e,n={};for(e in t)n[e]=t[e];return n},f=function(t,e,n){var i,r,s=t.cycle;for(i in s)t[i]="function"==typeof(r=s[i])?r(n,e[n]):r[n%r.length];delete t.cycle},m=a.pauseCallback=function(){},g=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},v=i.prototype=new e;return i.version="1.20.3",v.constructor=i,v.kill()._gc=v._forcingPlayhead=v._hasPause=!1,v.to=function(t,e,i,r){return e?this.add(new(i.repeat&&d.TweenMax||n)(t,e,i),r):this.set(t,i,r)},v.from=function(t,e,i,r){return this.add((i.repeat&&d.TweenMax||n).from(t,e,i),r)},v.fromTo=function(t,e,i,r,s){return e?this.add((r.repeat&&d.TweenMax||n).fromTo(t,e,i,r),s):this.set(t,r,s)},v.staggerTo=function(t,e,r,s,o,a,c,h){var u,d,m=new i({onComplete:a,onCompleteParams:c,callbackScope:h,smoothChildTiming:this.smoothChildTiming}),v=r.cycle;for("string"==typeof t&&(t=n.selector(t)||t),l(t=t||[])&&(t=g(t)),0>(s=s||0)&&((t=g(t)).reverse(),s*=-1),d=0;d<t.length;d++)(u=p(r)).startAt&&(u.startAt=p(u.startAt),u.startAt.cycle&&f(u.startAt,t,d)),v&&(f(u,t,d),null!=u.duration&&(e=u.duration,delete u.duration)),m.to(t[d],e,u,d*s);return this.add(m,o)},v.staggerFrom=function(t,e,n,i,r,s,o,a){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(t,e,n,i,r,s,o,a)},v.staggerFromTo=function(t,e,n,i,r,s,o,a,l){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,this.staggerTo(t,e,i,r,s,o,a,l)},v.call=function(t,e,i,r){return this.add(n.delayedCall(0,t,e,i),r)},v.set=function(t,e,i){return i=this._parseTimeOrLabel(i,0,!0),null==e.immediateRender&&(e.immediateRender=i===this._time&&!this._paused),this.add(new n(t,0,e),i)},i.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var r,s,o,a,l=new i(t),c=l._timeline;for(null==e&&(e=!0),c._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=c._time,o=c._first;o;)a=o._next,e&&o instanceof n&&o.target===o.vars.onComplete||(0>(s=o._startTime-o._delay)&&(r=1),l.add(o,s)),o=a;return c.add(l,0),r&&l.totalDuration(),l},v.add=function(r,s,o,a){var l,h,u,d,p,f;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&c(r)){for(o=o||"normal",a=a||0,l=s,h=r.length,u=0;h>u;u++)c(d=r[u])&&(d=new i({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===o?l=d._startTime+d.totalDuration()/d._timeScale:"start"===o&&(d._startTime-=d.delay())),l+=a;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,s);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=n.delayedCall(0,r)}if(e.prototype.add.call(this,r,s),r._time&&r.render((this.rawTime()-r._startTime)*r._timeScale,!1,!1),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=(p=this).rawTime()>r._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},v.remove=function(e){if(e instanceof t){this._remove(e,!1);var n=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:n._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&c(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},v._remove=function(t,n){return e.prototype._remove.call(this,t,n),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},v.insert=v.insertMultiple=function(t,e,n,i){return this.add(t,e||0,n,i)},v.appendMultiple=function(t,e,n,i){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),n,i)},v.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},v.addPause=function(t,e,i,r){var s=n.delayedCall(0,m,i,r||this);return s.vars.onComplete=s.vars.onReverseComplete=e,s.data="isPause",this._hasPause=!0,this.add(s,t)},v.removeLabel=function(t){return delete this._labels[t],this},v.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},v._parseTimeOrLabel=function(e,n,i,r){var s,o;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&c(r)))for(o=r.length;--o>-1;)r[o]instanceof t&&r[o].timeline===this&&this.remove(r[o]);if(s="number"!=typeof e||n?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"==typeof n)return this._parseTimeOrLabel(n,i&&"number"==typeof e&&null==this._labels[n]?e-s:0,i);if(n=n||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=s);else{if(-1===(o=e.indexOf("=")))return null==this._labels[e]?i?this._labels[e]=s+n:n:this._labels[e]+n;n=parseInt(e.charAt(o-1)+"1",10)*Number(e.substr(o+1)),e=o>1?this._parseTimeOrLabel(e.substr(0,o-1),0,i):s}return Number(e)+n},v.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(t,e){return this.play(t,e)},v.gotoAndStop=function(t,e){return this.pause(t,e)},v.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,r,o,a,l,c,d,p=this._time,f=this._dirty?this.totalDuration():this._totalDuration,m=this._startTime,g=this._timeScale,v=this._paused;if(p!==this._time&&(t+=this._time-p),t>=f-1e-7&&t>=0)this._totalTime=this._time=f,this._reversed||this._hasPausedChild()||(r=!0,a="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=t&&t>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===s)&&this._rawPrevTime!==t&&this._first&&(l=!0,this._rawPrevTime>s&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,t=f+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==s&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(a="onReverseComplete",r=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=r=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,0===t&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;t=0,this._initted||(l=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=p)for(i=this._first;i&&i._startTime<=t&&!c;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(c=i),i=i._next;else for(i=this._last;i&&i._startTime>=t&&!c;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(c=i),i=i._prev;c&&(this._time=t=c._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==p&&this._first||n||l||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),(d=this._time)>=p)for(i=this._first;i&&(o=i._next,d===this._time&&(!this._paused||v));)(i._active||i._startTime<=d&&!i._paused&&!i._gc)&&(c===i&&this.pause(),i.render(i._reversed?(i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale:(t-i._startTime)*i._timeScale,e,n)),i=o;else for(i=this._last;i&&(o=i._prev,d===this._time&&(!this._paused||v));){if(i._active||i._startTime<=p&&!i._paused&&!i._gc){if(c===i){for(c=i._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,e,n),c=c._prev;c=null,this.pause()}i.render(i._reversed?(i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale:(t-i._startTime)*i._timeScale,e,n)}i=o}this._onUpdate&&(e||(h.length&&u(),this._callback("onUpdate"))),a&&(this._gc||(m===this._startTime||g!==this._timeScale)&&(0===this._time||f>=this.totalDuration())&&(r&&(h.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},v._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof i&&t._hasPausedChild())return!0;t=t._next}return!1},v.getChildren=function(t,e,i,r){r=r||-9999999999;for(var s=[],o=this._first,a=0;o;)o._startTime<r||(o instanceof n?!1!==e&&(s[a++]=o):(!1!==i&&(s[a++]=o),!1!==t&&(a=(s=s.concat(o.getChildren(!0,e,i))).length))),o=o._next;return s},v.getTweensOf=function(t,e){var i,r,s=this._gc,o=[],a=0;for(s&&this._enabled(!0,!0),r=(i=n.getTweensOf(t)).length;--r>-1;)(i[r].timeline===this||e&&this._contains(i[r]))&&(o[a++]=i[r]);return s&&this._enabled(!1,!0),o},v.recent=function(){return this._recent},v._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},v.shiftChildren=function(t,e,n){n=n||0;for(var i,r=this._first,s=this._labels;r;)r._startTime>=n&&(r._startTime+=t),r=r._next;if(e)for(i in s)s[i]>=n&&(s[i]+=t);return this._uncache(!0)},v._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var n=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),i=n.length,r=!1;--i>-1;)n[i]._kill(t,e)&&(r=!0);return r},v.clear=function(t){var e=this.getChildren(!1,!0,!0),n=e.length;for(this._time=this._totalTime=0;--n>-1;)e[n]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},v._enabled=function(t,n){if(t===this._gc)for(var i=this._first;i;)i._enabled(t,!0),i=i._next;return e.prototype._enabled.call(this,t,n)},v.totalTime=function(e,n,i){this._forcingPlayhead=!0;var r=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},v.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,n,i=0,r=this._last,s=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>s&&this._sortChildren&&!r._paused&&!this._calculatingDuration?(this._calculatingDuration=1,this.add(r,r._startTime-r._delay),this._calculatingDuration=0):s=r._startTime,r._startTime<0&&!r._paused&&(i-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale,this._time-=r._startTime,this._totalTime-=r._startTime,this._rawPrevTime-=r._startTime),this.shiftChildren(-r._startTime,!1,-9999999999),s=0),(n=r._startTime+r._totalDuration/r._timeScale)>i&&(i=n),r=e;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},v.paused=function(e){if(!e)for(var n=this._first,i=this._time;n;)n._startTime===i&&"isPause"===n.data&&(n._rawPrevTime=0),n=n._next;return t.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},v.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},i},!0),r._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,n){var i=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},s=1e-10,o=e._internals,a=o.lazyTweens,l=o.lazyRender,c=r._gsDefine.globals,h=new n(null,null,1,0),u=i.prototype=new t;return u.constructor=i,u.kill()._gc=!1,i.version="1.20.3",u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},u.addCallback=function(t,n,i,r){return this.add(e.delayedCall(0,t,i,r),n)},u.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var n=this.getTweensOf(t,!1),i=n.length,r=this._parseTimeOrLabel(e);--i>-1;)n[i]._startTime===r&&n[i]._enabled(!1,!1);return this},u.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},u.tweenTo=function(t,n){n=n||{};var i,r,s,o={ease:h,useFrames:this.usesFrames(),immediateRender:!1},a=n.repeat&&c.TweenMax||e;for(r in n)o[r]=n[r];return o.time=this._parseTimeOrLabel(t),i=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,s=new a(this,i,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&i===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),n.onStart&&n.onStart.apply(n.onStartScope||n.callbackScope||s,n.onStartParams||[])},s},u.tweenFromTo=function(t,e,n){n=n||{},t=this._parseTimeOrLabel(t),n.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},n.immediateRender=!1!==n.immediateRender;var i=this.tweenTo(e,n);return i.duration(Math.abs(i.vars.time-t)/this._timeScale||.001)},u.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,r,o,c,h,u,d,p,f=this._time,m=this._dirty?this.totalDuration():this._totalDuration,g=this._duration,v=this._totalTime,y=this._startTime,_=this._timeScale,b=this._rawPrevTime,x=this._paused,w=this._cycle;if(f!==this._time&&(t+=this._time-f),t>=m-1e-7&&t>=0)this._locked||(this._totalTime=m,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,c="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=t&&t>=-1e-7||0>b||b===s)&&b!==t&&this._first&&(h=!0,b>s&&(c="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=g,t=g+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==f||0===g&&b!==s&&(b>0||0>t&&b>=0)&&!this._locked)&&(c="onReverseComplete",r=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=r=!0,c="onReverseComplete"):b>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=g||!e||t||this._rawPrevTime===t?t:s,0===t&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;t=0,this._initted||(h=!0)}else if(0===g&&0>b&&(h=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(this._cycle=this._totalTime/(u=g+this._repeatDelay)>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&t>=v&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time),this._time>g?(this._time=g,t=g+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e){if((t=this._time)>=f||this._repeat&&w!==this._cycle)for(i=this._first;i&&i._startTime<=t&&!d;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(d=i),i=i._next;else for(i=this._last;i&&i._startTime>=t&&!d;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(d=i),i=i._prev;d&&d._startTime<g&&(this._time=t=d._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==w&&!this._locked){var A=this._yoyo&&0!=(1&w),E=A===(this._yoyo&&0!=(1&this._cycle)),S=this._totalTime,M=this._cycle,T=this._rawPrevTime,C=this._time;if(this._totalTime=w*g,this._cycle<w?A=!A:this._totalTime+=g,this._time=f,this._rawPrevTime=0===g?b-1e-4:b,this._cycle=w,this._locked=!0,this.render(f=A?0:g,e,0===g),e||this._gc||this.vars.onRepeat&&(this._cycle=M,this._locked=!1,this._callback("onRepeat")),f!==this._time)return;if(E&&(this._cycle=w,this._locked=!0,this.render(f=A?g+1e-4:-1e-4,!0,!1)),this._locked=!1,this._paused&&!x)return;this._time=C,this._totalTime=S,this._cycle=M,this._rawPrevTime=T}if(this._time!==f&&this._first||n||h||d){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==v&&t>0&&(this._active=!0),0===v&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),(p=this._time)>=f)for(i=this._first;i&&(o=i._next,p===this._time&&(!this._paused||x));)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(d===i&&this.pause(),i.render(i._reversed?(i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale:(t-i._startTime)*i._timeScale,e,n)),i=o;else for(i=this._last;i&&(o=i._prev,p===this._time&&(!this._paused||x));){if(i._active||i._startTime<=f&&!i._paused&&!i._gc){if(d===i){for(d=i._prev;d&&d.endTime()>this._time;)d.render(d._reversed?d.totalDuration()-(t-d._startTime)*d._timeScale:(t-d._startTime)*d._timeScale,e,n),d=d._prev;d=null,this.pause()}i.render(i._reversed?(i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale:(t-i._startTime)*i._timeScale,e,n)}i=o}this._onUpdate&&(e||(a.length&&l(),this._callback("onUpdate"))),c&&(this._locked||this._gc||(y===this._startTime||_!==this._timeScale)&&(0===this._time||m>=this.totalDuration())&&(r&&(a.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[c]&&this._callback(c)))}else v!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},u.getActive=function(t,e,n){null==t&&(t=!0),null==e&&(e=!0),null==n&&(n=!1);var i,r,s=[],o=this.getChildren(t,e,n),a=0,l=o.length;for(i=0;l>i;i++)(r=o[i]).isActive()&&(s[a++]=r);return s},u.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,n=this.getLabelsArray(),i=n.length;for(e=0;i>e;e++)if(n[e].time>t)return n[e].name;return null},u.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),n=e.length;--n>-1;)if(e[n].time<t)return e[n].name;return null},u.getLabelsArray=function(){var t,e=[],n=0;for(t in this._labels)e[n++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},u.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},u.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},u.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},u.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},u.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},i},!0),function(){var t=180/Math.PI,e=[],n=[],i=[],s={},o=r._gsDefine.globals,a=function(t,e,n,i){n===i&&(n=i-(i-e)/1e6),t===e&&(e=t+(n-t)/1e6),this.a=t,this.b=e,this.c=n,this.d=i,this.da=i-t,this.ca=n-t,this.ba=e-t},l=function(t,e,n,i){var r={a:t},s={},o={},a={c:i},l=(t+e)/2,c=(e+n)/2,h=(n+i)/2,u=(l+c)/2,d=(c+h)/2,p=(d-u)/8;return r.b=l+(t-l)/4,s.b=u+p,r.c=s.a=(r.b+s.b)/2,s.c=o.a=(u+d)/2,o.b=d-p,a.b=h+(i-h)/4,o.c=a.a=(o.b+a.b)/2,[r,s,o,a]},c=function(t,r,s,o,a){var c,h,u,d,p,f,m,g,v,y,_,b,x,w=t.length-1,A=0,E=t[0].a;for(c=0;w>c;c++)h=(p=t[A]).a,u=p.d,d=t[A+1].d,a?(x=((b=n[c])+(_=e[c]))*r*.25/(o?.5:i[c]||.5),g=u-((f=u-(u-h)*(o?.5*r:0!==_?x/_:0))+(((m=u+(d-u)*(o?.5*r:0!==b?x/b:0))-f)*(3*_/(_+b)+.5)/4||0))):g=u-((f=u-(u-h)*r*.5)+(m=u+(d-u)*r*.5))/2,m+=g,p.c=v=f+=g,p.b=0!==c?E:E=p.a+.6*(p.c-p.a),p.da=u-h,p.ca=v-h,p.ba=E-h,s?(y=l(h,E,v,u),t.splice(A,1,y[0],y[1],y[2],y[3]),A+=4):A++,E=m;(p=t[A]).b=E,p.c=E+.4*(p.d-E),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=E-p.a,s&&(y=l(p.a,E,p.c,p.d),t.splice(A,1,y[0],y[1],y[2],y[3]))},h=function(t,i,r,s){var o,l,c,h,u,d,p=[];if(s)for(l=(t=[s].concat(t)).length;--l>-1;)"string"==typeof(d=t[l][i])&&"="===d.charAt(1)&&(t[l][i]=s[i]+Number(d.charAt(0)+d.substr(2)));if(0>(o=t.length-2))return p[0]=new a(t[0][i],0,0,t[0][i]),p;for(l=0;o>l;l++)p[l]=new a(c=t[l][i],0,0,h=t[l+1][i]),r&&(u=t[l+2][i],e[l]=(e[l]||0)+(h-c)*(h-c),n[l]=(n[l]||0)+(u-h)*(u-h));return p[l]=new a(t[l][i],0,0,t[l+1][i]),p},u=function(t,r,o,a,l,u){var d,p,f,m,g,v,y,_,b={},x=[],w=u||t[0];for(p in l="string"==typeof l?","+l+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==r&&(r=1),t[0])x.push(p);if(t.length>1){for(_=t[t.length-1],y=!0,d=x.length;--d>-1;)if(p=x[d],Math.abs(w[p]-_[p])>.05){y=!1;break}y&&(t=t.concat(),u&&t.unshift(u),t.push(t[1]),u=t[t.length-3])}for(e.length=n.length=i.length=0,d=x.length;--d>-1;)s[p=x[d]]=-1!==l.indexOf(","+p+","),b[p]=h(t,p,s[p],u);for(d=e.length;--d>-1;)e[d]=Math.sqrt(e[d]),n[d]=Math.sqrt(n[d]);if(!a){for(d=x.length;--d>-1;)if(s[p])for(v=(f=b[x[d]]).length-1,m=0;v>m;m++)i[m]=(i[m]||0)+(g=f[m+1].da/n[m]+f[m].da/e[m]||0)*g;for(d=i.length;--d>-1;)i[d]=Math.sqrt(i[d])}for(d=x.length,m=o?4:1;--d>-1;)c(f=b[p=x[d]],r,o,a,s[p]),y&&(f.splice(0,m),f.splice(f.length-m,m));return b},d=function(t,e,n){var i,r,s,o,l,c,h,u,d,p,f={},m="cubic"===(e=e||"soft")?3:2,g="soft"===e,v=[];if(g&&n&&(t=[n].concat(t)),null==t||t.length<m+1)throw"invalid Bezier data";for(u in t[0])v.push(u);for(l=v.length;--l>-1;){for(f[u=v[l]]=o=[],d=0,h=t.length,c=0;h>c;c++)i=null==n?t[c][u]:"string"==typeof(p=t[c][u])&&"="===p.charAt(1)?n[u]+Number(p.charAt(0)+p.substr(2)):Number(p),g&&c>1&&h-1>c&&(o[d++]=(i+o[d-2])/2),o[d++]=i;for(h=d-m+1,d=0,c=0;h>c;c+=m)i=o[c],r=o[c+1],s=o[c+2],o[d++]=p=3===m?new a(i,r,s,2===m?0:o[c+3]):new a(i,(2*r+i)/3,(2*r+s)/3,s);o.length=d}return f},p=function(t,e,n){for(var i,r,s,o,a,l,c,h,u,d,p,f=1/n,m=t.length;--m>-1;)for(o=(d=t[m]).d-(s=d.a),a=d.c-s,l=d.b-s,i=r=0,h=1;n>=h;h++)i=r-(r=((c=f*h)*c*o+3*(u=1-c)*(c*a+u*l))*c),e[p=m*n+h-1]=(e[p]||0)+i*i},f=function(t,e){var n,i,r,s,o=[],a=[],l=0,c=0,h=(e=e>>0||6)-1,u=[],d=[];for(n in t)p(t[n],o,e);for(r=o.length,i=0;r>i;i++)l+=Math.sqrt(o[i]),d[s=i%e]=l,s===h&&(c+=l,u[s=i/e>>0]=d,a[s]=c,l=0,d=[]);return{length:c,lengths:a,segments:u}},m=r._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(t,e,n){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var i,r,s,o,a,l=e.values||[],c={},h=l[0],p=e.autoRotate||n.vars.orientToBezier;for(i in this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",!0===p?0:Number(p)||0]]:null,h)this._props.push(i);for(s=this._props.length;--s>-1;)this._overwriteProps.push(i=this._props[s]),r=this._func[i]="function"==typeof t[i],c[i]=r?t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(t[i]),a||c[i]!==l[0][i]&&(a=c);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):d(l,e.type,c),this._segCount=this._beziers[i].length,this._timeRes){var m=f(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),s=p.length;--s>-1;){for(o=0;3>o;o++)this._func[i=p[s][o]]="function"==typeof t[i]&&t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)];this._initialRotations[s]=(this._func[i=p[s][2]]?this._func[i].call(this._target):this._target[i])||0,this._overwriteProps.push(i)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(e){var n,i,r,s,o,a,l,c,h,u,d=this._segCount,p=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(h=this._lengths,u=this._curSeg,r=this._li,(e*=this._length)>this._l2&&d-1>r){for(c=d-1;c>r&&(this._l2=h[++r])<=e;);this._l1=h[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(e<this._l1&&r>0){for(;r>0&&(this._l1=h[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=h[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(n=r,r=this._si,(e-=this._l1)>this._s2&&r<u.length-1){for(c=u.length-1;c>r&&(this._s2=u[++r])<=e;);this._s1=u[r-1],this._si=r}else if(e<this._s1&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=u[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else a=(e-(n=0>e?0:e>=1?d-1:d*e>>0)*(1/d))*d;for(i=1-a,r=this._props.length;--r>-1;)l=(a*a*(o=this._beziers[s=this._props[r]][n]).da+3*i*(a*o.ca+i*o.ba))*a+o.a,this._mod[s]&&(l=this._mod[s](l,f)),p[s]?f[s](l):f[s]=l;if(this._autoRotate){var g,v,y,_,b,x,w,A=this._autoRotate;for(r=A.length;--r>-1;)s=A[r][2],x=A[r][3]||0,w=!0===A[r][4]?1:t,g=this._beziers[A[r][1]],(o=this._beziers[A[r][0]])&&g&&(v=(o=o[n]).a+(o.b-o.a)*a,v+=((_=o.b+(o.c-o.b)*a)-v)*a,_+=(o.c+(o.d-o.c)*a-_)*a,y=(g=g[n]).a+(g.b-g.a)*a,y+=((b=g.b+(g.c-g.b)*a)-y)*a,b+=(g.c+(g.d-g.c)*a-b)*a,l=m?Math.atan2(b-y,_-v)*w+x:this._initialRotations[r],this._mod[s]&&(l=this._mod[s](l,f)),p[s]?f[s](l):f[s]=l)}}}),g=m.prototype;m.bezierThrough=u,m.cubicToQuadratic=l,m._autoCSS=!0,m.quadraticToCubic=function(t,e,n){return new a(t,(2*e+t)/3,(2*e+n)/3,n)},m._cssRegister=function(){var t=o.CSSPlugin;if(t){var e=t._internals,n=e._parseToProxy,i=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,s,o,a,l){e instanceof Array&&(e={values:e}),l=new m;var c,h,u,d=e.values,p=d.length-1,f=[],g={};if(0>p)return a;for(c=0;p>=c;c++)u=n(t,d[c],o,a,l,p!==c),f[c]=u.end;for(h in e)g[h]=e[h];return g.values=f,(a=new r(t,"bezier",0,0,u.pt,2)).data=u,a.plugin=l,a.setRatio=i,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(c=!0===g.autoRotate?0:Number(g.autoRotate),g.autoRotate=null!=u.end.left?[["left","top","rotation",c,!1]]:null!=u.end.x&&[["x","y","rotation",c,!1]]),g.autoRotate&&(o._transform||o._enableTransforms(!1),u.autoRotate=o._target._gsTransform,u.proxy.rotation=u.autoRotate.rotation||0,o._overwriteProps.push("rotation")),l._onInitTween(u.proxy,g,o._tween),a}})}},g._mod=function(t){for(var e,n=this._overwriteProps,i=n.length;--i>-1;)(e=t[n[i]])&&"function"==typeof e&&(this._mod[n[i]]=e)},g._kill=function(t){var e,n,i=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],n=i.length;--n>-1;)i[n]===e&&i.splice(n,1);if(i=this._autoRotate)for(n=i.length;--n>-1;)t[i[n][2]]&&i.splice(n,1);return this._super._kill.call(this,t)}}(),r._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var n,i,s,o,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},l=r._gsDefine.globals,c={},h=a.prototype=new t("css");h.constructor=a,a.version="1.20.3",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,a.suffixMap={top:h="px",right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h,lineHeight:""};var u,d,p,f,m,g,v,y,_=/(?:\-|\.|\b)(\d|\.|e\-)+/g,b=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,w=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,A=/(?:\d|\-|\+|=|#|\.)*/g,E=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,M=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,C=/([A-Z])/g,L=/-([a-z])/gi,P=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,R=function(t,e){return e.toUpperCase()},O=/(?:Left|Right|Width)/i,I=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,D=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,k=/,(?=[^\)]*(?:\(|$))/gi,N=/[\s,\(]/i,B=Math.PI/180,F=180/Math.PI,z={},U={style:{}},j=r.document||{createElement:function(){return U}},H=function(t,e){return j.createElementNS?j.createElementNS(e||"http://www.w3.org/1999/xhtml",t):j.createElement(t)},V=H("div"),G=H("img"),W=a._internals={_specialProps:c},q=(r.navigator||{}).userAgent||"",X=function(){var t=q.indexOf("Android"),e=H("a");return p=-1!==q.indexOf("Safari")&&-1===q.indexOf("Chrome")&&(-1===t||parseFloat(q.substr(t+8,2))>3),m=p&&parseFloat(q.substr(q.indexOf("Version/")+8,2))<6,f=-1!==q.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(q)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(q))&&(g=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),Y=function(t){return E.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Q=function(t){r.console&&console.log(t)},Z="",K="",J=function(t,e){var n,i,r=(e=e||V).style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),n=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===r[n[i]+t];);return i>=0?(Z="-"+(K=3===i?"ms":n[i]).toLowerCase()+"-",K+t):null},$=j.defaultView?j.defaultView.getComputedStyle:function(){},tt=a.getStyle=function(t,e,n,i,r){var s;return X||"opacity"!==e?(!i&&t.style[e]?s=t.style[e]:(n=n||$(t))?s=n[e]||n.getPropertyValue(e)||n.getPropertyValue(e.replace(C,"-$1").toLowerCase()):t.currentStyle&&(s=t.currentStyle[e]),null==r||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:r):Y(t)},et=W.convertToPixels=function(t,n,i,r,s){if("px"===r||!r&&"lineHeight"!==n)return i;if("auto"===r||!i)return 0;var o,l,c,h=O.test(n),u=t,d=V.style,p=0>i,f=1===i;if(p&&(i=-i),f&&(i*=100),"lineHeight"!==n||r)if("%"===r&&-1!==n.indexOf("border"))o=i/100*(h?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==r&&u.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)d[h?"borderLeftWidth":"borderTopWidth"]=i+r;else{if(-1!==tt(u=t.parentNode||j.body,"display").indexOf("flex")&&(d.position="absolute"),c=e.ticker.frame,(l=u._gsCache)&&h&&l.time===c)return l.width*i/100;d[h?"width":"height"]=i+r}u.appendChild(V),o=parseFloat(V[h?"offsetWidth":"offsetHeight"]),u.removeChild(V),h&&"%"===r&&!1!==a.cacheWidths&&((l=u._gsCache=u._gsCache||{}).time=c,l.width=o/i*100),0!==o||s||(o=et(t,n,i,r,!0))}else l=$(t).lineHeight,t.style.lineHeight=i,o=parseFloat($(t).lineHeight),t.style.lineHeight=l;return f&&(o/=100),p?-o:o},nt=W.calculateOffset=function(t,e,n){if("absolute"!==tt(t,"position",n))return 0;var i="left"===e?"Left":"Top",r=tt(t,"margin"+i,n);return t["offset"+i]-(et(t,e,parseFloat(r),r.replace(A,""))||0)},it=function(t,e){var n,i,r,s={};if(e=e||$(t,null))if(n=e.length)for(;--n>-1;)(-1===(r=e[n]).indexOf("-transform")||Pt===r)&&(s[r.replace(L,R)]=e.getPropertyValue(r));else for(n in e)(-1===n.indexOf("Transform")||Lt===n)&&(s[n]=e[n]);else if(e=t.currentStyle||t.style)for(n in e)"string"==typeof n&&void 0===s[n]&&(s[n.replace(L,R)]=e[n]);return X||(s.opacity=Y(t)),i=Vt(t,e,!1),s.rotation=i.rotation,s.skewX=i.skewX,s.scaleX=i.scaleX,s.scaleY=i.scaleY,s.x=i.x,s.y=i.y,Ot&&(s.z=i.z,s.rotationX=i.rotationX,s.rotationY=i.rotationY,s.scaleZ=i.scaleZ),s.filters&&delete s.filters,s},rt=function(t,e,n,i,r){var s,o,a,l={},c=t.style;for(o in n)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(s=n[o])||r&&r[o])&&-1===o.indexOf("Origin")&&("number"==typeof s||"string"==typeof s)&&(l[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[o]||""===e[o].replace(w,"")?s:0:nt(t,o),void 0!==c[o]&&(a=new _t(c,o,c[o],a)));if(i)for(o in i)"className"!==o&&(l[o]=i[o]);return{difs:l,firstMPT:a}},st={width:["Left","Right"],height:["Top","Bottom"]},ot=["marginLeft","marginRight","marginTop","marginBottom"],at=function(t,e,n){if("svg"===(t.nodeName+"").toLowerCase())return(n||$(t))[e]||0;if(t.getCTM&&Ut(t))return t.getBBox()[e]||0;var i=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=st[e],s=r.length;for(n=n||$(t,null);--s>-1;)i-=parseFloat(tt(t,"padding"+r[s],n,!0))||0,i-=parseFloat(tt(t,"border"+r[s]+"Width",n,!0))||0;return i},lt=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";(null==t||""===t)&&(t="0 0");var n,i=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],s=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];if(i.length>3&&!e){for(i=t.split(", ").join(",").split(","),t=[],n=0;n<i.length;n++)t.push(lt(i[n]));return t.join(",")}return null==s?s="center"===r?"50%":"0":"center"===s&&(s="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),t=r+" "+s+(i.length>2?" "+i[2]:""),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==s.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===s.charAt(1),e.ox=parseFloat(r.replace(w,"")),e.oy=parseFloat(s.replace(w,"")),e.v=t),e||t},ct=function(t,e){return"function"==typeof t&&(t=t(y,v)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ht=function(t,e){return"function"==typeof t&&(t=t(y,v)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ut=function(t,e,n,i){var r,s,o,a,l;return"function"==typeof t&&(t=t(y,v)),null==t?a=e:"number"==typeof t?a=t:(r=360,s=t.split("_"),o=((l="="===t.charAt(1))?parseInt(t.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(-1===t.indexOf("rad")?1:F)-(l?0:e),s.length&&(i&&(i[n]=e+o),-1!==t.indexOf("short")&&(o%=r)!=o%180&&(o=0>o?o+r:o-r),-1!==t.indexOf("_cw")&&0>o?o=(o+9999999999*r)%r-(o/r|0)*r:-1!==t.indexOf("ccw")&&o>0&&(o=(o-9999999999*r)%r-(o/r|0)*r)),a=e+o),1e-6>a&&a>-1e-6&&(a=0),a},dt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pt=function(t,e,n){return 255*(1>6*(t=0>t?t+1:t>1?t-1:t)?e+(n-e)*t*6:.5>t?n:2>3*t?e+(n-e)*(2/3-t)*6:e)+.5|0},ft=a.parseColor=function(t,e){var n,i,r,s,o,a,l,c,h,u,d;if(t)if("number"==typeof t)n=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),dt[t])n=dt[t];else if("#"===t.charAt(0))4===t.length&&(i=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+i+i+r+r+s+s),n=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(n=d=t.match(_),e){if(-1!==t.indexOf("="))return t.match(b)}else o=Number(n[0])%360/360,a=Number(n[1])/100,i=2*(l=Number(n[2])/100)-(r=.5>=l?l*(a+1):l+a-l*a),n.length>3&&(n[3]=Number(n[3])),n[0]=pt(o+1/3,i,r),n[1]=pt(o,i,r),n[2]=pt(o-1/3,i,r);else n=t.match(_)||dt.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),n.length>3&&(n[3]=Number(n[3]))}else n=dt.black;return e&&!d&&(i=n[0]/255,r=n[1]/255,s=n[2]/255,l=((c=Math.max(i,r,s))+(h=Math.min(i,r,s)))/2,c===h?o=a=0:(u=c-h,a=l>.5?u/(2-c-h):u/(c+h),o=c===i?(r-s)/u+(s>r?6:0):c===r?(s-i)/u+2:(i-r)/u+4,o*=60),n[0]=o+.5|0,n[1]=100*a+.5|0,n[2]=100*l+.5|0),n},mt=function(t,e){var n,i,r,s=t.match(gt)||[],o=0,a="";if(!s.length)return t;for(n=0;n<s.length;n++)o+=(r=t.substr(o,t.indexOf(i=s[n],o)-o)).length+i.length,3===(i=ft(i,e)).length&&i.push(1),a+=r+(e?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return a+t.substr(o)},gt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(h in dt)gt+="|"+h+"\\b";gt=new RegExp(gt+")","gi"),a.colorStringFilter=function(t){var e,n=t[0]+" "+t[1];gt.test(n)&&(e=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),t[0]=mt(t[0],e),t[1]=mt(t[1],e)),gt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=a.colorStringFilter);var vt=function(t,e,n,i){if(null==t)return function(t){return t};var r,s=e?(t.match(gt)||[""])[0]:"",o=t.split(s).join("").match(x)||[],a=t.substr(0,t.indexOf(o[0])),l=")"===t.charAt(t.length-1)?")":"",c=-1!==t.indexOf(" ")?" ":",",h=o.length,u=h>0?o[0].replace(_,""):"";return h?r=e?function(t){var e,d,p,f;if("number"==typeof t)t+=u;else if(i&&k.test(t)){for(f=t.replace(k,"|").split("|"),p=0;p<f.length;p++)f[p]=r(f[p]);return f.join(",")}if(e=(t.match(gt)||[s])[0],p=(d=t.split(e).join("").match(x)||[]).length,h>p--)for(;++p<h;)d[p]=n?d[(p-1)/2|0]:o[p];return a+d.join(c)+c+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,s,d;if("number"==typeof t)t+=u;else if(i&&k.test(t)){for(s=t.replace(k,"|").split("|"),d=0;d<s.length;d++)s[d]=r(s[d]);return s.join(",")}if(d=(e=t.match(x)||[]).length,h>d--)for(;++d<h;)e[d]=n?e[(d-1)/2|0]:o[d];return a+e.join(c)+l}:function(t){return t}},yt=function(t){return t=t.split(","),function(e,n,i,r,s,o,a){var l,c=(n+"").split(" ");for(a={},l=0;4>l;l++)a[t[l]]=c[l]=c[l]||c[(l-1)/2>>0];return r.parse(e,a,s,o)}},_t=(W._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,n,i,r,s,o=this.data,a=o.proxy,l=o.firstMPT;l;)e=a[l.v],l.r?e=Math.round(e):1e-6>e&&e>-1e-6&&(e=0),l.t[l.p]=e,l=l._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod(a.rotation,this.t):a.rotation),1===t||0===t)for(l=o.firstMPT,s=1===t?"e":"b";l;){if((n=l.t).type){if(1===n.type){for(r=n.xs0+n.s+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n[s]=r}}else n[s]=n.s+n.xs0;l=l._next}},function(t,e,n,i,r){this.t=t,this.p=e,this.v=n,this.r=r,i&&(i._prev=this,this._next=i)}),bt=(W._parseToProxy=function(t,e,n,i,r,s){var o,a,l,c,h,u=i,d={},p={},f=n._transform,m=z;for(n._transform=null,z=e,i=h=n.parse(t,e,i,r),z=m,s&&(n._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));i&&i!==u;){if(i.type<=1&&(p[a=i.p]=i.s+i.c,d[a]=i.s,s||(c=new _t(i,"s",a,c,i.r),i.c=0),1===i.type))for(o=i.l;--o>0;)p[a=i.p+"_"+(l="xn"+o)]=i.data[l],d[a]=i[l],s||(c=new _t(i,l,a,c,i.rxp[l]));i=i._next}return{proxy:d,end:p,firstMPT:c,pt:h}},W.CSSPropTween=function(t,e,i,r,s,a,l,c,h,u,d){this.t=t,this.p=e,this.s=i,this.c=r,this.n=l||e,t instanceof bt||o.push(this.n),this.r=c,this.type=a||0,h&&(this.pr=h,n=!0),this.b=void 0===u?i:u,this.e=void 0===d?i+r:d,s&&(this._next=s,s._prev=this)}),xt=function(t,e,n,i,r,s){var o=new bt(t,e,n,i-n,r,-1,s);return o.b=n,o.e=o.xs0=i,o},wt=a.parseComplex=function(t,e,n,i,r,s,o,l,c,h){n=n||s||"","function"==typeof i&&(i=i(y,v)),o=new bt(t,e,0,0,o,h?2:1,null,!1,l,n,i),i+="",r&&gt.test(i+n)&&(a.colorStringFilter(i=[n,i]),n=i[0],i=i[1]);var d,p,f,m,g,x,w,A,E,S,M,T,C,L=n.split(", ").join(",").split(" "),P=i.split(", ").join(",").split(" "),R=L.length,O=!1!==u;for((-1!==i.indexOf(",")||-1!==n.indexOf(","))&&(-1!==(i+n).indexOf("rgb")||-1!==(i+n).indexOf("hsl")?(L=L.join(" ").replace(k,", ").split(" "),P=P.join(" ").replace(k,", ").split(" ")):(L=L.join(" ").split(",").join(", ").split(" "),P=P.join(" ").split(",").join(", ").split(" ")),R=L.length),R!==P.length&&(R=(L=(s||"").split(" ")).length),o.plugin=c,o.setRatio=h,gt.lastIndex=0,d=0;R>d;d++)if(m=L[d],g=P[d],(A=parseFloat(m))||0===A)o.appendXtra("",A,ct(g,A),g.replace(b,""),O&&-1!==g.indexOf("px"),!0);else if(r&&gt.test(m))T=")"+((T=g.indexOf(")")+1)?g.substr(T):""),C=-1!==g.indexOf("hsl")&&X,S=g,m=ft(m,C),g=ft(g,C),(E=m.length+g.length>6)&&!X&&0===g[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(P[d]).join("transparent")):(X||(E=!1),C?o.appendXtra(S.substr(0,S.indexOf("hsl"))+(E?"hsla(":"hsl("),m[0],ct(g[0],m[0]),",",!1,!0).appendXtra("",m[1],ct(g[1],m[1]),"%,",!1).appendXtra("",m[2],ct(g[2],m[2]),E?"%,":"%"+T,!1):o.appendXtra(S.substr(0,S.indexOf("rgb"))+(E?"rgba(":"rgb("),m[0],g[0]-m[0],",",!0,!0).appendXtra("",m[1],g[1]-m[1],",",!0).appendXtra("",m[2],g[2]-m[2],E?",":T,!0),E&&o.appendXtra("",m=m.length<4?1:m[3],(g.length<4?1:g[3])-m,T,!1)),gt.lastIndex=0;else if(x=m.match(_)){if(!(w=g.match(b))||w.length!==x.length)return o;for(f=0,p=0;p<x.length;p++)S=m.indexOf(M=x[p],f),o.appendXtra(m.substr(f,S-f),Number(M),ct(w[p],M),"",O&&"px"===m.substr(S+M.length,2),0===p),f=S+M.length;o["xs"+o.l]+=m.substr(f)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+g:g;if(-1!==i.indexOf("=")&&o.data){for(T=o.xs0+o.data.s,d=1;d<o.l;d++)T+=o["xs"+d]+o.data["xn"+d];o.e=T+o["xs"+d]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},At=9;for((h=bt.prototype).l=h.pr=0;--At>0;)h["xn"+At]=0,h["xs"+At]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,n,i,r,s){var o=this,a=o.l;return o["xs"+a]+=s&&(a||o["xs"+a])?" "+t:t||"",n||0===a||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=i||"",a>0?(o.data["xn"+a]=e+n,o.rxp["xn"+a]=r,o["xn"+a]=e,o.plugin||(o.xfirst=new bt(o,"xn"+a,e,n,o.xfirst||o,0,o.n,r,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+n},o.rxp={},o.s=e,o.c=n,o.r=r,o)):(o["xs"+a]+=e+(i||""),o)};var Et=function(t,e){this.p=(e=e||{}).prefix&&J(t)||t,c[t]=c[this.p]=this,this.format=e.formatter||vt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},St=W._registerComplexSpecialProp=function(t,e,n){"object"!=typeof e&&(e={parser:n});var i,r=t.split(","),s=e.defaultValue;for(n=n||[s],i=0;i<r.length;i++)e.prefix=0===i&&e.prefix,e.defaultValue=n[i]||s,new Et(r[i],e)},Mt=W._registerPluginProp=function(t){if(!c[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";St(t,{parser:function(t,n,i,r,s,o,a){var h=l.com.greensock.plugins[e];return h?(h._cssRegister(),c[i].parse(t,n,i,r,s,o,a)):(Q("Error: "+e+" js file not loaded."),s)}})}};(h=Et.prototype).parseComplex=function(t,e,n,i,r,s){var o,a,l,c,h,u,d=this.keyword;if(this.multi&&(k.test(n)||k.test(e)?(a=e.replace(k,"|").split("|"),l=n.replace(k,"|").split("|")):d&&(a=[e],l=[n])),l){for(c=l.length>a.length?l.length:a.length,o=0;c>o;o++)e=a[o]=a[o]||this.dflt,n=l[o]=l[o]||this.dflt,d&&(h=e.indexOf(d))!==(u=n.indexOf(d))&&(-1===u?a[o]=a[o].split(d).join(""):-1===h&&(a[o]+=" "+d));e=a.join(", "),n=l.join(", ")}return wt(t,this.p,e,n,this.clrs,this.dflt,i,this.pr,r,s)},h.parse=function(t,e,n,i,r,o,a){return this.parseComplex(t.style,this.format(tt(t,this.p,s,!1,this.dflt)),this.format(e),r,o)},a.registerSpecialProp=function(t,e,n){St(t,{parser:function(t,i,r,s,o,a,l){var c=new bt(t,r,0,0,o,2,r,!1,n);return c.plugin=a,c.setRatio=e(t,i,s._tween,r),c},priority:n})},a.useSVGTransformAttr=!0;var Tt,Ct="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Lt=J("transform"),Pt=Z+"transform",Rt=J("transformOrigin"),Ot=null!==J("perspective"),It=W.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(!1===a.defaultForce3D||!Ot)&&(a.defaultForce3D||"auto")},Dt=r.SVGElement,kt=function(t,e,n){var i,r=j.createElementNS("http://www.w3.org/2000/svg",t),s=/([a-z])([A-Z])/g;for(i in n)r.setAttributeNS(null,i.replace(s,"$1-$2").toLowerCase(),n[i]);return e.appendChild(r),r},Nt=j.documentElement||{},Bt=function(){var t,e,n,i=g||/Android/i.test(q)&&!r.chrome;return j.createElementNS&&!i&&(t=kt("svg",Nt),n=(e=kt("rect",t,{width:100,height:50,x:100})).getBoundingClientRect().width,e.style[Rt]="50% 50%",e.style[Lt]="scaleX(0.5)",i=n===e.getBoundingClientRect().width&&!(f&&Ot),Nt.removeChild(t)),i}(),Ft=function(t,e,n,i,r,s){var o,l,c,h,u,d,p,f,m,g,v,y,_,b,x=t._gsTransform,w=Ht(t,!0);x&&(_=x.xOrigin,b=x.yOrigin),(!i||(o=i.split(" ")).length<2)&&(0===(p=t.getBBox()).x&&0===p.y&&p.width+p.height===0&&(p={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),o=[(-1!==(e=lt(e).split(" "))[0].indexOf("%")?parseFloat(e[0])/100*p.width:parseFloat(e[0]))+p.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*p.height:parseFloat(e[1]))+p.y]),n.xOrigin=h=parseFloat(o[0]),n.yOrigin=u=parseFloat(o[1]),i&&w!==jt&&(g=w[4],v=w[5],(y=(d=w[0])*(m=w[3])-(p=w[1])*(f=w[2]))&&(c=h*(-p/y)+u*(d/y)-(d*v-p*g)/y,h=n.xOrigin=o[0]=l=h*(m/y)+u*(-f/y)+(f*v-m*g)/y,u=n.yOrigin=o[1]=c)),x&&(s&&(n.xOffset=x.xOffset,n.yOffset=x.yOffset,x=n),r||!1!==r&&!1!==a.defaultSmoothOrigin?(x.xOffset+=(l=h-_)*w[0]+(c=u-b)*w[2]-l,x.yOffset+=l*w[1]+c*w[3]-c):x.xOffset=x.yOffset=0),s||t.setAttribute("data-svg-origin",o.join(" "))},zt=function(t){var e,n=H("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(Nt.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=zt}catch(a){}else this._originalGetBBox&&(e=this._originalGetBBox());return r?i.insertBefore(this,r):i.appendChild(this),Nt.removeChild(n),this.style.cssText=s,e},Ut=function(t){return!(!Dt||!t.getCTM||t.parentNode&&!t.ownerSVGElement||!function(t){try{return t.getBBox()}catch(e){return zt.call(t,!0)}}(t))},jt=[1,0,0,1,0,0],Ht=function(t,e){var n,i,r,s,o,a,l=t._gsTransform||new It,c=t.style;if(Lt?i=tt(t,Pt,null,!0):t.currentStyle&&(i=(i=t.currentStyle.filter.match(I))&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),l.x||0,l.y||0].join(","):""),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,!Lt||!(a=!$(t)||"none"===$(t).display)&&t.parentNode||(a&&(s=c.display,c.display="block"),t.parentNode||(o=1,Nt.appendChild(t)),n=!(i=tt(t,Pt,null,!0))||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,s?c.display=s:a&&Xt(c,"display"),o&&Nt.removeChild(t)),(l.svg||t.getCTM&&Ut(t))&&(n&&-1!==(c[Lt]+"").indexOf("matrix")&&(i=c[Lt],n=0),r=t.getAttribute("transform"),n&&r&&(-1!==r.indexOf("matrix")?(i=r,n=0):-1!==r.indexOf("translate")&&(i="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",n=0))),n)return jt;for(r=(i||"").match(_)||[],At=r.length;--At>-1;)s=Number(r[At]),r[At]=(o=s-(s|=0))?(1e5*o+(0>o?-.5:.5)|0)/1e5+s:s;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Vt=W.getTransform=function(t,n,i,r){if(t._gsTransform&&i&&!r)return t._gsTransform;var s,o,l,c,h,u,d=i&&t._gsTransform||new It,p=d.scaleX<0,f=2e-5,m=1e5,g=Ot&&(parseFloat(tt(t,Rt,n,!1,"0 0 0").split(" ")[2])||d.zOrigin)||0,v=parseFloat(a.defaultTransformPerspective)||0;if(d.svg=!(!t.getCTM||!Ut(t)),d.svg&&(Ft(t,tt(t,Rt,n,!1,"50% 50%")+"",d,t.getAttribute("data-svg-origin")),Tt=a.useSVGTransformAttr||Bt),(s=Ht(t))!==jt){if(16===s.length){var y,_,b,x,w,A=s[0],E=s[1],S=s[2],M=s[3],T=s[4],C=s[5],L=s[6],P=s[7],R=s[8],O=s[9],I=s[10],D=s[12],k=s[13],N=s[14],B=s[11],z=Math.atan2(L,I);d.zOrigin&&(D=R*(N=-d.zOrigin)-s[12],k=O*N-s[13],N=I*N+d.zOrigin-s[14]),d.rotationX=z*F,z&&(y=T*(x=Math.cos(-z))+R*(w=Math.sin(-z)),_=C*x+O*w,b=L*x+I*w,R=T*-w+R*x,O=C*-w+O*x,I=L*-w+I*x,B=P*-w+B*x,T=y,C=_,L=b),z=Math.atan2(-S,I),d.rotationY=z*F,z&&(_=E*(x=Math.cos(-z))-O*(w=Math.sin(-z)),b=S*x-I*w,O=E*w+O*x,I=S*w+I*x,B=M*w+B*x,A=y=A*x-R*w,E=_,S=b),z=Math.atan2(E,A),d.rotation=z*F,z&&(y=A*(x=Math.cos(z))+E*(w=Math.sin(z)),_=T*x+C*w,b=R*x+O*w,E=E*x-A*w,C=C*x-T*w,O=O*x-R*w,A=y,T=_,R=b),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY=180-d.rotationY),z=Math.atan2(T,C),d.scaleX=(Math.sqrt(A*A+E*E+S*S)*m+.5|0)/m,d.scaleY=(Math.sqrt(C*C+L*L)*m+.5|0)/m,d.scaleZ=(Math.sqrt(R*R+O*O+I*I)*m+.5|0)/m,A/=d.scaleX,T/=d.scaleY,E/=d.scaleX,C/=d.scaleY,Math.abs(z)>f?(d.skewX=z*F,T=0,"simple"!==d.skewType&&(d.scaleY*=1/Math.cos(z))):d.skewX=0,d.perspective=B?1/(0>B?-B:B):0,d.x=D,d.y=k,d.z=N,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*A-d.yOrigin*T),d.y-=d.yOrigin-(d.yOrigin*E-d.xOrigin*C))}else if(!Ot||r||!s.length||d.x!==s[4]||d.y!==s[5]||!d.rotationX&&!d.rotationY){var U=s.length>=6,j=U?s[0]:1,H=s[1]||0,V=s[2]||0,G=U?s[3]:1;d.x=s[4]||0,d.y=s[5]||0,l=Math.sqrt(j*j+H*H),c=Math.sqrt(G*G+V*V),h=j||H?Math.atan2(H,j)*F:d.rotation||0,u=V||G?Math.atan2(V,G)*F+h:d.skewX||0,d.scaleX=l,d.scaleY=c,d.rotation=h,d.skewX=u,Ot&&(d.rotationX=d.rotationY=d.z=0,d.perspective=v,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*j+d.yOrigin*V),d.y-=d.yOrigin-(d.xOrigin*H+d.yOrigin*G))}for(o in Math.abs(d.skewX)>90&&Math.abs(d.skewX)<270&&(p?(d.scaleX*=-1,d.skewX+=d.rotation<=0?180:-180,d.rotation+=d.rotation<=0?180:-180):(d.scaleY*=-1,d.skewX+=d.skewX<=0?180:-180)),d.zOrigin=g,d)d[o]<f&&d[o]>-f&&(d[o]=0)}return i&&(t._gsTransform=d,d.svg&&(Tt&&t.style[Lt]?e.delayedCall(.001,function(){Xt(t.style,Lt)}):!Tt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),d},Gt=function(t){var e,n,i=this.data,r=-i.rotation*B,s=r+i.skewX*B,o=1e5,a=(Math.cos(r)*i.scaleX*o|0)/o,l=(Math.sin(r)*i.scaleX*o|0)/o,c=(Math.sin(s)*-i.scaleY*o|0)/o,h=(Math.cos(s)*i.scaleY*o|0)/o,u=this.t.style,d=this.t.currentStyle;if(d){n=l,l=-c,c=-n,e=d.filter,u.filter="";var p,f,m=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==d.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+l+", M21="+c+", M22="+h,b=i.x+m*i.xPercent/100,x=i.y+v*i.yPercent/100;if(null!=i.ox&&(b+=(p=(i.oxp?m*i.ox*.01:i.ox)-m/2)-(p*a+(f=(i.oyp?v*i.oy*.01:i.oy)-v/2)*l),x+=f-(p*c+f*h)),_+=y?", Dx="+((p=m/2)-(p*a+(f=v/2)*l)+b)+", Dy="+(f-(p*c+f*h)+x)+")":", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(D,_):_+" "+e,(0===t||1===t)&&1===a&&0===l&&0===c&&1===h&&(y&&-1===_.indexOf("Dx=0, Dy=0")||E.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!y){var w,S,M=8>g?1:-1;for(p=i.ieOffsetX||0,f=i.ieOffsetY||0,i.ieOffsetX=Math.round((m-((0>a?-a:a)*m+(0>l?-l:l)*v))/2+b),i.ieOffsetY=Math.round((v-((0>h?-h:h)*v+(0>c?-c:c)*m))/2+x),At=0;4>At;At++)n=-1!==(w=d[S=ot[At]]).indexOf("px")?parseFloat(w):et(this.t,S,parseFloat(w),w.replace(A,""))||0,u[S]=(i[S]=Math.round(n-(n!==i[S]?2>At?-i.ieOffsetX:-i.ieOffsetY:2>At?p-i.ieOffsetX:f-i.ieOffsetY)*(0===At||2===At?1:M)))+"px"}}},Wt=W.set3DTransformRatio=W.setTransformRatio=function(t){var e,n,i,r,s,o,a,l,c,h,u,d,p,m,g,v,y,_,b,x,w,A,E,S=this.data,M=this.t.style,T=S.rotation,C=S.rotationX,L=S.rotationY,P=S.scaleX,R=S.scaleY,O=S.scaleZ,I=S.x,D=S.y,k=S.z,N=S.svg,F=S.perspective,z=S.force3D,U=S.skewY,j=S.skewX;if(U&&(j+=U,T+=U),!((1!==t&&0!==t||"auto"!==z||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&z||k||F||L||C||1!==O)||Tt&&N||!Ot)T||j||N?(T*=B,A=j*B,E=1e5,n=Math.cos(T)*P,s=Math.sin(T)*P,i=Math.sin(T-A)*-R,o=Math.cos(T-A)*R,A&&"simple"===S.skewType&&(e=Math.tan(A-U*B),i*=e=Math.sqrt(1+e*e),o*=e,U&&(e=Math.tan(U*B),n*=e=Math.sqrt(1+e*e),s*=e)),N&&(I+=S.xOrigin-(S.xOrigin*n+S.yOrigin*i)+S.xOffset,D+=S.yOrigin-(S.xOrigin*s+S.yOrigin*o)+S.yOffset,Tt&&(S.xPercent||S.yPercent)&&(g=this.t.getBBox(),I+=.01*S.xPercent*g.width,D+=.01*S.yPercent*g.height),(g=1e-6)>I&&I>-g&&(I=0),g>D&&D>-g&&(D=0)),b=(n*E|0)/E+","+(s*E|0)/E+","+(i*E|0)/E+","+(o*E|0)/E+","+I+","+D+")",N&&Tt?this.t.setAttribute("transform","matrix("+b):M[Lt]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix(":"matrix(")+b):M[Lt]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix(":"matrix(")+P+",0,0,"+R+","+I+","+D+")";else{if(f&&((g=1e-4)>P&&P>-g&&(P=O=2e-5),g>R&&R>-g&&(R=O=2e-5),!F||S.z||S.rotationX||S.rotationY||(F=0)),T||j)T*=B,v=n=Math.cos(T),y=s=Math.sin(T),j&&(T-=j*B,v=Math.cos(T),y=Math.sin(T),"simple"===S.skewType&&(e=Math.tan((j-U)*B),v*=e=Math.sqrt(1+e*e),y*=e,S.skewY&&(e=Math.tan(U*B),n*=e=Math.sqrt(1+e*e),s*=e))),i=-y,o=v;else{if(!(L||C||1!==O||F||N))return void(M[Lt]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) translate3d(":"translate3d(")+I+"px,"+D+"px,"+k+"px)"+(1!==P||1!==R?" scale("+P+","+R+")":""));n=o=1,i=s=0}h=1,r=a=l=c=u=d=0,p=F?-1/F:0,m=S.zOrigin,g=1e-6,x=",",w="0",(T=L*B)&&(v=Math.cos(T),l=-(y=Math.sin(T)),u=p*-y,r=n*y,a=s*y,h=v,p*=v,n*=v,s*=v),(T=C*B)&&(e=i*(v=Math.cos(T))+r*(y=Math.sin(T)),_=o*v+a*y,c=h*y,d=p*y,r=i*-y+r*v,a=o*-y+a*v,h*=v,p*=v,i=e,o=_),1!==O&&(r*=O,a*=O,h*=O,p*=O),1!==R&&(i*=R,o*=R,c*=R,d*=R),1!==P&&(n*=P,s*=P,l*=P,u*=P),(m||N)&&(m&&(I+=r*-m,D+=a*-m,k+=h*-m+m),N&&(I+=S.xOrigin-(S.xOrigin*n+S.yOrigin*i)+S.xOffset,D+=S.yOrigin-(S.xOrigin*s+S.yOrigin*o)+S.yOffset),g>I&&I>-g&&(I=w),g>D&&D>-g&&(D=w),g>k&&k>-g&&(k=0)),b=S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix3d(":"matrix3d(",b+=(g>n&&n>-g?w:n)+x+(g>s&&s>-g?w:s)+x+(g>l&&l>-g?w:l),b+=x+(g>u&&u>-g?w:u)+x+(g>i&&i>-g?w:i)+x+(g>o&&o>-g?w:o),C||L||1!==O?(b+=x+(g>c&&c>-g?w:c)+x+(g>d&&d>-g?w:d)+x+(g>r&&r>-g?w:r),b+=x+(g>a&&a>-g?w:a)+x+(g>h&&h>-g?w:h)+x+(g>p&&p>-g?w:p)+x):b+=",0,0,0,0,1,0,",M[Lt]=b+=I+x+D+x+k+x+(F?1+-k/F:1)+")"}};(h=It.prototype).x=h.y=h.z=h.skewX=h.skewY=h.rotation=h.rotationX=h.rotationY=h.zOrigin=h.xPercent=h.yPercent=h.xOffset=h.yOffset=0,h.scaleX=h.scaleY=h.scaleZ=1,St("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,n,i,r,o,l){if(i._lastParsedTransform===l)return r;i._lastParsedTransform=l;var c,h=l.scale&&"function"==typeof l.scale?l.scale:0;"function"==typeof l[n]&&(c=l[n],l[n]=e),h&&(l.scale=h(y,t));var u,d,p,f,m,g,_,b,x,w=t._gsTransform,A=t.style,E=Ct.length,S=l,M={},T="transformOrigin",C=Vt(t,s,!0,S.parseTransform),L=S.transform&&("function"==typeof S.transform?S.transform(y,v):S.transform);if(C.skewType=S.skewType||C.skewType||a.defaultSkewType,i._transform=C,L&&"string"==typeof L&&Lt)(d=V.style)[Lt]=L,d.display="block",d.position="absolute",j.body.appendChild(V),u=Vt(V,null,!1),"simple"===C.skewType&&(u.scaleY*=Math.cos(u.skewX*B)),C.svg&&(g=C.xOrigin,_=C.yOrigin,u.x-=C.xOffset,u.y-=C.yOffset,(S.transformOrigin||S.svgOrigin)&&(L={},Ft(t,lt(S.transformOrigin),L,S.svgOrigin,S.smoothOrigin,!0),g=L.xOrigin,_=L.yOrigin,u.x-=L.xOffset-C.xOffset,u.y-=L.yOffset-C.yOffset),(g||_)&&(b=Ht(V,!0),u.x-=g-(g*b[0]+_*b[2]),u.y-=_-(g*b[1]+_*b[3]))),j.body.removeChild(V),u.perspective||(u.perspective=C.perspective),null!=S.xPercent&&(u.xPercent=ht(S.xPercent,C.xPercent)),null!=S.yPercent&&(u.yPercent=ht(S.yPercent,C.yPercent));else if("object"==typeof S){if(u={scaleX:ht(null!=S.scaleX?S.scaleX:S.scale,C.scaleX),scaleY:ht(null!=S.scaleY?S.scaleY:S.scale,C.scaleY),scaleZ:ht(S.scaleZ,C.scaleZ),x:ht(S.x,C.x),y:ht(S.y,C.y),z:ht(S.z,C.z),xPercent:ht(S.xPercent,C.xPercent),yPercent:ht(S.yPercent,C.yPercent),perspective:ht(S.transformPerspective,C.perspective)},null!=(m=S.directionalRotation))if("object"==typeof m)for(d in m)S[d]=m[d];else S.rotation=m;"string"==typeof S.x&&-1!==S.x.indexOf("%")&&(u.x=0,u.xPercent=ht(S.x,C.xPercent)),"string"==typeof S.y&&-1!==S.y.indexOf("%")&&(u.y=0,u.yPercent=ht(S.y,C.yPercent)),u.rotation=ut("rotation"in S?S.rotation:"shortRotation"in S?S.shortRotation+"_short":"rotationZ"in S?S.rotationZ:C.rotation,C.rotation,"rotation",M),Ot&&(u.rotationX=ut("rotationX"in S?S.rotationX:"shortRotationX"in S?S.shortRotationX+"_short":C.rotationX||0,C.rotationX,"rotationX",M),u.rotationY=ut("rotationY"in S?S.rotationY:"shortRotationY"in S?S.shortRotationY+"_short":C.rotationY||0,C.rotationY,"rotationY",M)),u.skewX=ut(S.skewX,C.skewX),u.skewY=ut(S.skewY,C.skewY)}for(Ot&&null!=S.force3D&&(C.force3D=S.force3D,f=!0),(p=C.force3D||C.z||C.rotationX||C.rotationY||u.z||u.rotationX||u.rotationY||u.perspective)||null==S.scale||(u.scaleZ=1);--E>-1;)((L=u[x=Ct[E]]-C[x])>1e-6||-1e-6>L||null!=S[x]||null!=z[x])&&(f=!0,r=new bt(C,x,C[x],L,r),x in M&&(r.e=M[x]),r.xs0=0,r.plugin=o,i._overwriteProps.push(r.n));return L=S.transformOrigin,C.svg&&(L||S.svgOrigin)&&(g=C.xOffset,_=C.yOffset,Ft(t,lt(L),u,S.svgOrigin,S.smoothOrigin),r=xt(C,"xOrigin",(w?C:u).xOrigin,u.xOrigin,r,T),r=xt(C,"yOrigin",(w?C:u).yOrigin,u.yOrigin,r,T),(g!==C.xOffset||_!==C.yOffset)&&(r=xt(C,"xOffset",w?g:C.xOffset,C.xOffset,r,T),r=xt(C,"yOffset",w?_:C.yOffset,C.yOffset,r,T)),L="0px 0px"),(L||Ot&&p&&C.zOrigin)&&(Lt?(f=!0,x=Rt,L=(L||tt(t,x,s,!1,"50% 50%"))+"",(r=new bt(A,x,0,0,r,-1,T)).b=A[x],r.plugin=o,Ot?(d=C.zOrigin,L=L.split(" "),C.zOrigin=(L.length>2&&(0===d||"0px"!==L[2])?parseFloat(L[2]):d)||0,r.xs0=r.e=L[0]+" "+(L[1]||"50%")+" 0px",(r=new bt(C,"zOrigin",0,0,r,-1,r.n)).b=d,r.xs0=r.e=C.zOrigin):r.xs0=r.e=L):lt(L+"",C)),f&&(i._transformType=C.svg&&Tt||!p&&3!==this._transformType?2:3),c&&(l[n]=c),h&&(l.scale=h),r},prefix:!0}),St("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),St("borderRadius",{defaultValue:"0px",parser:function(t,e,n,r,o,a){e=this.format(e);var l,c,h,u,d,p,f,m,g,v,y,_,b,x,w,A,E=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],S=t.style;for(g=parseFloat(t.offsetWidth),v=parseFloat(t.offsetHeight),l=e.split(" "),c=0;c<E.length;c++)this.p.indexOf("border")&&(E[c]=J(E[c])),-1!==(d=u=tt(t,E[c],s,!1,"0px")).indexOf(" ")&&(u=d.split(" "),d=u[0],u=u[1]),p=h=l[c],f=parseFloat(d),_=d.substr((f+"").length),(b="="===p.charAt(1))?(m=parseInt(p.charAt(0)+"1",10),p=p.substr(2),m*=parseFloat(p),y=p.substr((m+"").length-(0>m?1:0))||""):(m=parseFloat(p),y=p.substr((m+"").length)),""===y&&(y=i[n]||_),y!==_&&(x=et(t,"borderLeft",f,_),w=et(t,"borderTop",f,_),"%"===y?(d=x/g*100+"%",u=w/v*100+"%"):"em"===y?(d=x/(A=et(t,"borderLeft",1,"em"))+"em",u=w/A+"em"):(d=x+"px",u=w+"px"),b&&(p=parseFloat(d)+m+y,h=parseFloat(u)+m+y)),o=wt(S,E[c],d+" "+u,p+" "+h,!1,"0px",o);return o},prefix:!0,formatter:vt("0px 0px 0px 0px",!1,!0)}),St("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,n,i,r,o){return wt(t.style,n,this.format(tt(t,n,s,!1,"0px 0px")),this.format(e),!1,"0px",r)},prefix:!0,formatter:vt("0px 0px",!1,!0)}),St("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,n,i,r,o){var a,l,c,h,u,d,p="background-position",f=s||$(t,null),m=this.format((f?g?f.getPropertyValue(p+"-x")+" "+f.getPropertyValue(p+"-y"):f.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==m.indexOf("%")!=(-1!==v.indexOf("%"))&&v.split(",").length<2&&(d=tt(t,"backgroundImage").replace(P,""))&&"none"!==d){for(a=m.split(" "),l=v.split(" "),G.setAttribute("src",d),c=2;--c>-1;)(h=-1!==(m=a[c]).indexOf("%"))!=(-1!==l[c].indexOf("%"))&&(u=0===c?t.offsetWidth-G.width:t.offsetHeight-G.height,a[c]=h?parseFloat(m)/100*u+"px":parseFloat(m)/u*100+"%");m=a.join(" ")}return this.parseComplex(t.style,m,v,r,o)},formatter:lt}),St("backgroundSize",{defaultValue:"0 0",formatter:function(t){return lt(-1===(t+="").indexOf(" ")?t+" "+t:t)}}),St("perspective",{defaultValue:"0px",prefix:!0}),St("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),St("transformStyle",{prefix:!0}),St("backfaceVisibility",{prefix:!0}),St("userSelect",{prefix:!0}),St("margin",{parser:yt("marginTop,marginRight,marginBottom,marginLeft")}),St("padding",{parser:yt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),St("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,n,i,r,o){var a,l,c;return 9>g?(a="rect("+(l=t.currentStyle).clipTop+(c=8>g?" ":",")+l.clipRight+c+l.clipBottom+c+l.clipLeft+")",e=this.format(e).split(",").join(c)):(a=this.format(tt(t,this.p,s,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,r,o)}}),St("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),St("autoRound,strictUnits",{parser:function(t,e,n,i,r){return r}}),St("border",{defaultValue:"0px solid #000",parser:function(t,e,n,i,r,o){var a=tt(t,"borderTopWidth",s,!1,"0px"),l=this.format(e).split(" "),c=l[0].replace(A,"");return"px"!==c&&(a=parseFloat(a)/et(t,"borderTopWidth",1,c)+c),this.parseComplex(t.style,this.format(a+" "+tt(t,"borderTopStyle",s,!1,"solid")+" "+tt(t,"borderTopColor",s,!1,"#000")),l.join(" "),r,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(gt)||["#000"])[0]}}),St("borderWidth",{parser:yt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),St("float,cssFloat,styleFloat",{parser:function(t,e,n,i,r,s){var o=t.style,a="cssFloat"in o?"cssFloat":"styleFloat";return new bt(o,a,0,0,r,-1,n,!1,0,o[a],e)}});var qt=function(t){var e,n=this.t,i=n.filter||tt(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(n.removeAttribute("filter"),e=!tt(this.data,"filter")):(n.filter=i.replace(M,""),e=!0)),e||(this.xn1&&(n.filter=i=i||"alpha(opacity="+r+")"),-1===i.indexOf("pacity")?0===r&&this.xn1||(n.filter=i+" alpha(opacity="+r+")"):n.filter=i.replace(E,"opacity="+r))};St("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,n,i,r,o){var a=parseFloat(tt(t,"opacity",s,!1,"1")),l=t.style,c="autoAlpha"===n;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),c&&1===a&&"hidden"===tt(t,"visibility",s)&&0!==e&&(a=0),X?r=new bt(l,"opacity",a,e-a,r):((r=new bt(l,"opacity",100*a,100*(e-a),r)).xn1=c?1:0,l.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=t,r.plugin=o,r.setRatio=qt),c&&((r=new bt(l,"visibility",0,0,r,-1,null,!1,0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",i._overwriteProps.push(r.n),i._overwriteProps.push(n)),r}});var Xt=function(t,e){e&&(t.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),t.removeProperty(e.replace(C,"-$1").toLowerCase())):t.removeAttribute(e))},Yt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,n=this.t.style;e;)e.v?n[e.p]=e.v:Xt(n,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};St("className",{parser:function(t,e,i,r,o,a,l){var c,h,u,d,p,f=t.getAttribute("class")||"",m=t.style.cssText;if((o=r._classNamePT=new bt(t,i,0,0,o,2)).setRatio=Yt,o.pr=-11,n=!0,o.b=f,h=it(t,s),u=t._gsClassPT){for(d={},p=u.data;p;)d[p.p]=1,p=p._next;u.setRatio(1)}return t._gsClassPT=o,o.e="="!==e.charAt(1)?e:f.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",o.e),c=rt(t,h,it(t),l,d),t.setAttribute("class",f),o.data=c.firstMPT,t.style.cssText=m,o.xfirst=r.parse(t,c.difs,o,a)}});var Qt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,n,i,r,s,o=this.t.style,a=c.transform.parse;if("all"===this.e)o.cssText="",r=!0;else for(i=(e=this.e.split(" ").join("").split(",")).length;--i>-1;)c[n=e[i]]&&(c[n].parse===a?r=!0:n="transformOrigin"===n?Rt:c[n].p),Xt(o,n);r&&(Xt(o,Lt),(s=this.t._gsTransform)&&(s.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(St("clearProps",{parser:function(t,e,i,r,s){return(s=new bt(t,i,0,0,s,2)).setRatio=Qt,s.e=e,s.pr=-10,s.data=r._tween,n=!0,s}}),h="bezier,throwProps,physicsProps,physics2D".split(","),At=h.length;At--;)Mt(h[At]);(h=a.prototype)._firstPT=h._lastParsedTransform=h._transform=null,h._onInitTween=function(t,e,r,l){if(!t.nodeType)return!1;this._target=v=t,this._tween=r,this._vars=e,y=l,u=e.autoRound,n=!1,i=e.suffixMap||a.suffixMap,s=$(t,""),o=this._overwriteProps;var h,f,g,_,b,x,w,A,E,M=t.style;if(d&&""===M.zIndex&&("auto"===(h=tt(t,"zIndex",s))||""===h)&&this._addLazySet(M,"zIndex",0),"string"==typeof e&&(_=M.cssText,h=it(t,s),M.cssText=_+";"+e,h=rt(t,h,it(t)).difs,!X&&S.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,M.cssText=_),this._firstPT=f=e.className?c.className.parse(t,e.className,"className",this,null,null,e):this.parse(t,e,null),this._transformType){for(E=3===this._transformType,Lt?p&&(d=!0,""===M.zIndex&&("auto"===(w=tt(t,"zIndex",s))||""===w)&&this._addLazySet(M,"zIndex",0),m&&this._addLazySet(M,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(E?"visible":"hidden"))):M.zoom=1,g=f;g&&g._next;)g=g._next;A=new bt(t,"transform",0,0,null,2),this._linkCSSP(A,null,g),A.setRatio=Lt?Wt:Gt,A.data=this._transform||Vt(t,s,!0),A.tween=r,A.pr=-1,o.pop()}if(n){for(;f;){for(x=f._next,g=_;g&&g.pr>f.pr;)g=g._next;(f._prev=g?g._prev:b)?f._prev._next=f:_=f,(f._next=g)?g._prev=f:b=f,f=x}this._firstPT=_}return!0},h.parse=function(t,e,n,r){var o,a,l,h,d,p,f,m,g,_,b=t.style;for(o in e){if("function"==typeof(p=e[o])&&(p=p(y,v)),a=c[o])n=a.parse(t,p,o,this,n,r,e);else{if("--"===o.substr(0,2)){this._tween._propLookup[o]=this._addTween.call(this._tween,t.style,"setProperty",$(t).getPropertyValue(o)+"",p+"",o,!1,o);continue}d=tt(t,o,s)+"",g="string"==typeof p,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||g&&T.test(p)?(g||(p=((p=ft(p)).length>3?"rgba(":"rgb(")+p.join(",")+")"),n=wt(b,o,d,p,!0,"transparent",n,0,r)):g&&N.test(p)?n=wt(b,o,d,p,!0,null,n,0,r):(f=(l=parseFloat(d))||0===l?d.substr((l+"").length):"",(""===d||"auto"===d)&&("width"===o||"height"===o?(l=at(t,o,s),f="px"):"left"===o||"top"===o?(l=nt(t,o,s),f="px"):(l="opacity"!==o?0:1,f="")),(_=g&&"="===p.charAt(1))?(h=parseInt(p.charAt(0)+"1",10),p=p.substr(2),h*=parseFloat(p),m=p.replace(A,"")):(h=parseFloat(p),m=g?p.replace(A,""):""),""===m&&(m=o in i?i[o]:f),p=h||0===h?(_?h+l:h)+m:e[o],f!==m&&(""!==m||"lineHeight"===o)&&(h||0===h)&&l&&(l=et(t,o,l,f),"%"===m?(l/=et(t,o,100,"%")/100,!0!==e.strictUnits&&(d=l+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?l/=et(t,o,1,m):"px"!==m&&(h=et(t,o,h,m),m="px"),_&&(h||0===h)&&(p=h+l+m)),_&&(h+=l),!l&&0!==l||!h&&0!==h?void 0!==b[o]&&(p||p+""!="NaN"&&null!=p)?(n=new bt(b,o,h||l||0,0,n,-1,o,!1,0,d,p)).xs0="none"!==p||"display"!==o&&-1===o.indexOf("Style")?p:d:Q("invalid "+o+" tween value: "+e[o]):(n=new bt(b,o,l,h-l,n,0,o,!1!==u&&("px"===m||"zIndex"===o),0,d,p)).xs0=m)}r&&n&&!n.plugin&&(n.plugin=r)}return n},h.setRatio=function(t){var e,n,i,r=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):1e-6>e&&e>-1e-6&&(e=0),r.type)if(1===r.type)if(2===(i=r.l))r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(e=Math.round(r.s+r.c),r.type){if(1===r.type){for(i=r.l,n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},h._enableTransforms=function(t){this._transform=this._transform||Vt(this._target,s,!0),this._transformType=this._transform.svg&&Tt||!t&&3!==this._transformType?2:3};var Zt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};h._addLazySet=function(t,e,n){var i=this._firstPT=new bt(t,e,0,0,this._firstPT,2);i.e=n,i.setRatio=Zt,i.data=this},h._linkCSSP=function(t,e,n,i){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,i=!0),n?n._next=t:i||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=n),t},h._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},h._kill=function(e){var n,i,r,s=e;if(e.autoAlpha||e.alpha){for(i in s={},e)s[i]=e[i];s.opacity=1,s.autoAlpha&&(s.visibility=1)}for(e.className&&(n=this._classNamePT)&&((r=n.xfirst)&&r._prev?this._linkCSSP(r._prev,n._next,r._prev._prev):r===this._firstPT&&(this._firstPT=n._next),n._next&&this._linkCSSP(n._next,n._next._next,r._prev),this._classNamePT=null),n=this._firstPT;n;)n.plugin&&n.plugin!==i&&n.plugin._kill&&(n.plugin._kill(e),i=n.plugin),n=n._next;return t.prototype._kill.call(this,s)};var Kt=function(t,e,n){var i,r,s,o;if(t.slice)for(r=t.length;--r>-1;)Kt(t[r],e,n);else for(r=(i=t.childNodes).length;--r>-1;)o=(s=i[r]).type,s.style&&(e.push(it(s)),n&&n.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||Kt(s,e,n)};return a.cascadeTo=function(t,n,i){var r,s,o,a,l=e.to(t,n,i),c=[l],h=[],u=[],d=[],p=e._internals.reservedProps;for(Kt(t=l._targets||l.target,h,d),l.render(n,!0,!0),Kt(t,u),l.render(0,!0,!0),l._enabled(!0),r=d.length;--r>-1;)if((s=rt(d[r],h[r],u[r])).firstMPT){for(o in s=s.difs,i)p[o]&&(s[o]=i[o]);for(o in a={},s)a[o]=h[r][o];c.push(e.fromTo(d[r],n,a,s))}return c},t.activate([a]),a},!0),t=r._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,n){return this._tween=n,!0}}),e=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},(n=t.prototype)._onInitAllProps=function(){for(var t,n,i,r=this._tween,s=r.vars.roundProps.join?r.vars.roundProps:r.vars.roundProps.split(","),o=s.length,a={},l=r._propLookup.roundProps;--o>-1;)a[s[o]]=Math.round;for(o=s.length;--o>-1;)for(t=s[o],n=r._firstPT;n;)i=n._next,n.pg?n.t._mod(a):n.n===t&&(2===n.f&&n.t?e(n.t._firstPT):(this._add(n.t,t,n.s,n.c),i&&(i._prev=n._prev),n._prev?n._prev._next=i:r._firstPT===n&&(r._firstPT=i),n._next=n._prev=null,r._propLookup[t]=l)),n=i;return!1},n._add=function(t,e,n,i){this._addTween(t,e,n,n+i,e,Math.round),this._overwriteProps.push(e)},r._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,n,i){var r,s;if("function"!=typeof t.setAttribute)return!1;for(r in e)"function"==typeof(s=e[r])&&(s=s(i,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",s+"",r,!1,r),this._overwriteProps.push(r);return!0}}),r._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,n,i){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,s,o,a,l,c,h=!0===e.useRadians?2*Math.PI:360;for(r in e)"useRadians"!==r&&("function"==typeof(a=e[r])&&(a=a(i,t)),s=(c=(a+"").split("_"))[0],o=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),l=(a=this.finals[r]="string"==typeof s&&"="===s.charAt(1)?o+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0)-o,c.length&&(-1!==(s=c.join("_")).indexOf("short")&&(l%=h)!=l%(h/2)&&(l=0>l?l+h:l-h),-1!==s.indexOf("_cw")&&0>l?l=(l+9999999999*h)%h-(l/h|0)*h:-1!==s.indexOf("ccw")&&l>0&&(l=(l-9999999999*h)%h-(l/h|0)*h)),(l>1e-6||-1e-6>l)&&(this._addTween(t,r,o,o+l,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,r._gsDefine("easing.Back",["easing.Ease"],function(t){var e,n,i,s=r.GreenSockGlobals||r,o=2*Math.PI,a=Math.PI/2,l=s.com.greensock._class,c=function(e,n){var i=l("easing."+e,function(){},!0),r=i.prototype=new t;return r.constructor=i,r.getRatio=n,i},h=t.register||function(){},u=function(t,e,n,i,r){var s=l("easing."+t,{easeOut:new e,easeIn:new n,easeInOut:new i},!0);return h(s,t),s},d=function(t,e,n){this.t=t,this.v=e,n&&(this.next=n,n.prev=this,this.c=n.v-e,this.gap=n.t-t)},p=function(e,n){var i=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=i.prototype=new t;return r.constructor=i,r.getRatio=n,r.config=function(t){return new i(t)},i},f=u("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=l("easing.SlowMo",function(t,e,n){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===n},!0),g=m.prototype=new t;return g.constructor=m,g.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),g.config=m.config=function(t,e,n){return new m(t,e,n)},(g=(e=l("easing.SteppedEase",function(t,e){this._p1=1/(t=t||1),this._p2=t+(e?0:1),this._p3=e?1:0},!0)).prototype=new t).constructor=e,g.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},g.config=e.config=function(t,n){return new e(t,n)},n=l("easing.RoughEase",function(e){for(var n,i,r,s,o,a,l=(e=e||{}).taper||"none",c=[],h=0,u=0|(e.points||20),p=u,f=!1!==e.randomize,m=!0===e.clamp,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)n=f?Math.random():1/u*p,i=g?g.getRatio(n):n,r="none"===l?v:"out"===l?(s=1-n)*s*v:"in"===l?n*n*v:.5>n?(s=2*n)*s*.5*v:(s=2*(1-n))*s*.5*v,f?i+=Math.random()*r-.5*r:p%2?i+=.5*r:i-=.5*r,m&&(i>1?i=1:0>i&&(i=0)),c[h++]={x:n,y:i};for(c.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),p=u;--p>-1;)a=new d((o=c[p]).x,o.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),(g=n.prototype=new t).constructor=n,g.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},g.config=function(t){return new n(t)},n.ease=new n,u("Bounce",c("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),c("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),c("BounceInOut",function(t){var e=.5>t;return t=1/2.75>(t=e?1-2*t:2*t-1)?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",c("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),c("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),c("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),u("Elastic",(i=function(e,n,i){var r=l("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||i)/(1>t?t:1),this._p3=this._p2/o*(Math.asin(1/this._p1)||0),this._p2=o/this._p2},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=n,s.config=function(t,e){return new r(t,e)},r})("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),i("ElasticIn",function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)},.3),i("ElasticInOut",function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),u("Expo",c("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),c("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),c("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",c("SineOut",function(t){return Math.sin(t*a)}),c("SineIn",function(t){return 1-Math.cos(t*a)}),c("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),h(s.SlowMo,"SlowMo","ease,"),h(n,"RoughEase","ease,"),h(e,"SteppedEase","ease,"),f},!0)}),r._gsDefine&&r._gsQueue.pop()(),function(n,r){"use strict";var s={},o=n.document,a=n.GreenSockGlobals=n.GreenSockGlobals||n;if(!a.TweenLite){var l,c,h,u,d,p=function(t){var e,n=t.split("."),i=a;for(e=0;e<n.length;e++)i[n[e]]=i=i[n[e]]||{};return i},f=p("com.greensock"),m=1e-10,g=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},v=function(){},y=function(){var t=Object.prototype.toString,e=t.call([]);return function(n){return null!=n&&(n instanceof Array||"object"==typeof n&&!!n.push&&t.call(n)===e)}}(),_={},b=function(n,o,l,c){this.sc=_[n]?_[n].sc:[],_[n]=this,this.gsClass=null,this.func=l;var h=[];this.check=function(u){for(var d,f,m,g,v=o.length,y=v;--v>-1;)(d=_[o[v]]||new b(o[v],[])).gsClass?(h[v]=d.gsClass,y--):u&&d.sc.push(this);if(0===y&&l){if(m=(f=("com.greensock."+n).split(".")).pop(),g=p(f.join("."))[m]=this.gsClass=l.apply(l,h),c)if(a[m]=s[m]=g,t.exports)if(n===r)for(v in t.exports=s[r]=g,s)g[v]=s[v];else s[r]&&(s[r][m]=g);else void 0===(i=(function(){return g}).apply(e,[]))||(t.exports=i);for(v=0;v<this.sc.length;v++)this.sc[v].check()}},this.check(!0)},x=n._gsDefine=function(t,e,n,i){return new b(t,e,n,i)},w=f._class=function(t,e,n){return e=e||function(){},x(t,[],function(){return e},n),e};x.globals=a;var A=[0,0,1,1],E=w("easing.Ease",function(t,e,n,i){this._func=t,this._type=n||0,this._power=i||0,this._params=e?A.concat(e):A},!0),S=E.map={},M=E.register=function(t,e,n,i){for(var r,s,o,a,l=e.split(","),c=l.length,h=(n||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(s=l[c],r=i?w("easing."+s,null,!0):f.easing[s]||{},o=h.length;--o>-1;)S[s+"."+(a=h[o])]=S[a+s]=r[a]=t.getRatio?t:t[a]||new t};for((h=E.prototype)._calcEnd=!1,h.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,n=this._power,i=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===n?i*=i:2===n?i*=i*i:3===n?i*=i*i*i:4===n&&(i*=i*i*i*i),1===e?1-i:2===e?i:.5>t?i/2:1-i/2},c=(l=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--c>-1;)h=l[c]+",Power"+c,M(new E(null,null,1,c),h,"easeOut",!0),M(new E(null,null,2,c),h,"easeIn"+(0===c?",easeNone":"")),M(new E(null,null,3,c),h,"easeInOut");S.linear=f.easing.Linear.easeIn,S.swing=f.easing.Quad.easeInOut;var T=w("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});(h=T.prototype).addEventListener=function(t,e,n,i,r){r=r||0;var s,o,a=this._listeners[t],l=0;for(this!==u||d||u.wake(),null==a&&(this._listeners[t]=a=[]),o=a.length;--o>-1;)(s=a[o]).c===e&&s.s===n?a.splice(o,1):0===l&&s.pr<r&&(l=o+1);a.splice(l,0,{c:e,s:n,up:i,pr:r})},h.removeEventListener=function(t,e){var n,i=this._listeners[t];if(i)for(n=i.length;--n>-1;)if(i[n].c===e)return void i.splice(n,1)},h.dispatchEvent=function(t){var e,n,i,r=this._listeners[t];if(r)for((e=r.length)>1&&(r=r.slice(0)),n=this._eventTarget;--e>-1;)(i=r[e])&&(i.up?i.c.call(i.s||n,{type:t,target:n}):i.c.call(i.s||n))};var C=n.requestAnimationFrame,L=n.cancelAnimationFrame,P=Date.now||function(){return(new Date).getTime()},R=P();for(c=(l=["ms","moz","webkit","o"]).length;--c>-1&&!C;)C=n[l[c]+"RequestAnimationFrame"],L=n[l[c]+"CancelAnimationFrame"]||n[l[c]+"CancelRequestAnimationFrame"];w("Ticker",function(t,e){var n,i,r,s,a,l=this,c=P(),h=!(!1===e||!C)&&"auto",p=500,f=33,g=function(t){var e,o,h=P()-R;h>p&&(c+=h-f),l.time=((R+=h)-c)/1e3,e=l.time-a,(!n||e>0||!0===t)&&(l.frame++,a+=e+(e>=s?.004:s-e),o=!0),!0!==t&&(r=i(g)),o&&l.dispatchEvent("tick")};T.call(l),l.time=l.frame=0,l.tick=function(){g(!0)},l.lagSmoothing=function(t,e){return arguments.length?(p=t||1/m,void(f=Math.min(e,p,0))):1/m>p},l.sleep=function(){null!=r&&(h&&L?L(r):clearTimeout(r),i=v,r=null,l===u&&(d=!1))},l.wake=function(t){null!==r?l.sleep():t?c+=-R+(R=P()):l.frame>10&&(R=P()-p+5),i=0===n?v:h&&C?C:function(t){return setTimeout(t,1e3*(a-l.time)+1|0)},l===u&&(d=!0),g(2)},l.fps=function(t){return arguments.length?(a=this.time+(s=1/((n=t)||60)),void l.wake()):n},l.useRAF=function(t){return arguments.length?(l.sleep(),h=t,void l.fps(n)):h},l.fps(t),setTimeout(function(){"auto"===h&&l.frame<5&&"hidden"!==o.visibilityState&&l.useRAF(!1)},1500)}),(h=f.Ticker.prototype=new f.events.EventDispatcher).constructor=f.Ticker;var O=w("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,K){d||u.wake();var n=this.vars.useFrames?Z:K;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});u=O.ticker=new f.Ticker,(h=O.prototype)._dirty=h._gc=h._initted=h._paused=!1,h._totalTime=h._time=0,h._rawPrevTime=-1,h._next=h._last=h._onUpdate=h._timeline=h.timeline=null,h._paused=!1;var I=function(){d&&P()-R>2e3&&("hidden"!==o.visibilityState||!u.lagSmoothing())&&u.wake();var t=setTimeout(I,2e3);t.unref&&t.unref()};I(),h.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},h.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},h.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},h.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},h.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},h.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},h.render=function(t,e,n){},h.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},h.isActive=function(){var t,e=this._timeline,n=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<n+this.totalDuration()/this._timeScale-1e-7},h._enabled=function(t,e){return d||u.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},h._kill=function(t,e){return this._enabled(!1,!1)},h.kill=function(t,e){return this._kill(t,e),this},h._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},h._swapSelfInParams=function(t){for(var e=t.length,n=t.concat();--e>-1;)"{self}"===t[e]&&(n[e]=this);return n},h._callback=function(t){var e=this.vars,n=e[t],i=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this;switch(i?i.length:0){case 0:n.call(r);break;case 1:n.call(r,i[0]);break;case 2:n.call(r,i[0],i[1]);break;default:n.apply(r,i)}},h.eventCallback=function(t,e,n,i){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=y(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,r[t+"Scope"]=i),"onUpdate"===t&&(this._onUpdate=e)}return this},h.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},h.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},h.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},h.totalTime=function(t,e,n){if(d||u.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!n&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,r=this._timeline;if(t>i&&!n&&(t=i),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?i-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(B.length&&$(),this.render(t,e,!1),B.length&&$())}return this},h.progress=h.totalProgress=function(t,e){var n=this.duration();return arguments.length?this.totalTime(n*t,e):n?this._time/n:this.ratio},h.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},h.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},h.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,n;for(t=t||m,this._timeline&&this._timeline.smoothChildTiming&&(n=(e=this._pauseTime)||0===e?e:this._timeline.totalTime(),this._startTime=n-(n-this._startTime)*this._timeScale/t),this._timeScale=t,n=this.timeline;n&&n.timeline;)n._dirty=!0,n.totalDuration(),n=n.timeline;return this},h.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},h.paused=function(t){if(!arguments.length)return this._paused;var e,n,i=this._timeline;return t!=this._paused&&i&&(d||t||u.wake(),n=(e=i.rawTime())-this._pauseTime,!t&&i.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==n&&this._initted&&this.duration()&&this.render(e=i.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,e===this._totalTime,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var D=w("core.SimpleTimeline",function(t){O.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});(h=D.prototype=new O).constructor=D,h.kill()._gc=!1,h._first=h._last=h._recent=null,h._sortChildren=!1,h.add=h.insert=function(t,e,n,i){var r,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(s=t._startTime;r&&r._startTime>s;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},h._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},h.render=function(t,e,n){var i,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)i=r._next,(r._active||t>=r._startTime&&!r._paused&&!r._gc)&&r.render(r._reversed?(r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale:(t-r._startTime)*r._timeScale,e,n),r=i},h.rawTime=function(){return d||u.wake(),this._totalTime};var k=w("TweenLite",function(t,e,i){if(O.call(this,e,i),this.render=k.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:k.selector(t)||t;var r,s,o,a=t.jquery||t.length&&t!==n&&t[0]&&(t[0]===n||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?Q[k.defaultOverwrite]:"number"==typeof l?l>>0:Q[l],(a||t instanceof Array||t.push&&y(t))&&"number"!=typeof t[0])for(this._targets=o=g(t),this._propLookup=[],this._siblings=[],r=0;r<o.length;r++)(s=o[r])?"string"!=typeof s?s.length&&s!==n&&s[0]&&(s[0]===n||s[0].nodeType&&s[0].style&&!s.nodeType)?(o.splice(r--,1),this._targets=o=o.concat(g(s))):(this._siblings[r]=tt(s,this,!1),1===l&&this._siblings[r].length>1&&nt(s,this,null,1,this._siblings[r])):"string"==typeof(s=o[r--]=k.selector(s))&&o.splice(r+1,1):o.splice(r--,1);else this._propLookup={},this._siblings=tt(t,this,!1),1===l&&this._siblings.length>1&&nt(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-m,this.render(Math.min(0,-this._delay)))},!0),N=function(t){return t&&t.length&&t!==n&&t[0]&&(t[0]===n||t[0].nodeType&&t[0].style&&!t.nodeType)};(h=k.prototype=new O).constructor=k,h.kill()._gc=!1,h.ratio=0,h._firstPT=h._targets=h._overwrittenProps=h._startAt=null,h._notifyPluginsOfEnabled=h._lazy=!1,k.version="1.20.3",k.defaultEase=h._ease=new E(null,null,1,1),k.defaultOverwrite="auto",k.ticker=u,k.autoSleep=120,k.lagSmoothing=function(t,e){u.lagSmoothing(t,e)},k.selector=n.$||n.jQuery||function(t){var e=n.$||n.jQuery;return e?(k.selector=e,e(t)):void 0===o?t:o.querySelectorAll?o.querySelectorAll(t):o.getElementById("#"===t.charAt(0)?t.substr(1):t)};var B=[],F={},z=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,U=/[\+-]=-?[\.\d]/,j=function(t){for(var e,n=this._firstPT;n;)e=n.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:n.c*t+n.s,n.m?e=n.m(e,this._target||n.t):1e-6>e&&e>-1e-6&&!n.blob&&(e=0),n.f?n.fp?n.t[n.p](n.fp,e):n.t[n.p](e):n.t[n.p]=e,n=n._next},H=function(t,e,n,i){var r,s,o,a,l,c,h,u=[],d=0,p="",f=0;for(u.start=t,u.end=e,t=u[0]=t+"",e=u[1]=e+"",n&&(n(u),t=u[0],e=u[1]),u.length=0,r=t.match(z)||[],s=e.match(z)||[],i&&(i._next=null,i.blob=1,u._firstPT=u._applyPT=i),l=s.length,a=0;l>a;a++)p+=(c=e.substr(d,e.indexOf(h=s[a],d)-d))||!a?c:",",d+=c.length,f?f=(f+1)%5:"rgba("===c.substr(-5)&&(f=1),h===r[a]||r.length<=a?p+=h:(p&&(u.push(p),p=""),o=parseFloat(r[a]),u.push(o),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:o,c:("="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*parseFloat(h.substr(2)):parseFloat(h)-o)||0,f:0,m:f&&4>f?Math.round:0}),d+=h.length;return(p+=e.substr(d))&&u.push(p),u.setRatio=j,U.test(e)&&(u.end=null),u},V=function(t,e,n,i,r,s,o,a,l){"function"==typeof i&&(i=i(l||0,t));var c=typeof t[e],h="function"!==c?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),u="get"!==n?n:h?o?t[h](o):t[h]():t[e],d="string"==typeof i&&"="===i.charAt(1),p={t,p:e,s:u,f:"function"===c,pg:0,n:r||e,m:s?"function"==typeof s?s:Math.round:0,pr:0,c:d?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-u||0};return("number"!=typeof u||"number"!=typeof i&&!d)&&(o||isNaN(u)||!d&&isNaN(i)||"boolean"==typeof u||"boolean"==typeof i?(p.fp=o,p={t:H(u,d?parseFloat(p.s)+p.c:i,a||k.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(p.s=parseFloat(u),d||(p.c=parseFloat(i)-p.s||0))),p.c?((p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p):void 0},G=k._internals={isArray:y,isSelector:N,lazyTweens:B,blobDif:H},W=k._plugins={},q=G.tweenLookup={},X=0,Y=G.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},Q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Z=O._rootFramesTimeline=new D,K=O._rootTimeline=new D,J=30,$=G.lazyRender=function(){var t,e=B.length;for(F={};--e>-1;)(t=B[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);B.length=0};K._startTime=u.time,Z._startTime=u.frame,K._active=Z._active=!0,setTimeout($,1),O._updateRoot=k.render=function(){var t,e,n;if(B.length&&$(),K.render((u.time-K._startTime)*K._timeScale,!1,!1),Z.render((u.frame-Z._startTime)*Z._timeScale,!1,!1),B.length&&$(),u.frame>=J){for(n in J=u.frame+(parseInt(k.autoSleep,10)||120),q){for(t=(e=q[n].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete q[n]}if((!(n=K._first)||n._paused)&&k.autoSleep&&!Z._first&&1===u._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||u.sleep()}}},u.addEventListener("tick",O._updateRoot);var tt=function(t,e,n){var i,r,s=t._gsTweenID;if(q[s||(t._gsTweenID=s="t"+X++)]||(q[s]={target:t,tweens:[]}),e&&((i=q[s].tweens)[r=i.length]=e,n))for(;--r>-1;)i[r]===e&&i.splice(r,1);return q[s].tweens},et=function(t,e,n,i){var r,s,o=t.vars.onOverwrite;return o&&(r=o(t,e,n,i)),(o=k.onOverwrite)&&(s=o(t,e,n,i)),!1!==r&&!1!==s},nt=function(t,e,n,i,r){var s,o,a,l;if(1===i||i>=4){for(l=r.length,s=0;l>s;s++)if((a=r[s])!==e)a._gc||a._kill(null,t,e)&&(o=!0);else if(5===i)break;return o}var c,h=e._startTime+m,u=[],d=0,p=0===e._duration;for(s=r.length;--s>-1;)(a=r[s])===e||a._gc||a._paused||(a._timeline!==e._timeline?(c=c||it(e,0,p),0===it(a,c,p)&&(u[d++]=a)):a._startTime<=h&&a._startTime+a.totalDuration()/a._timeScale>h&&((p||!a._initted)&&h-a._startTime<=2e-10||(u[d++]=a)));for(s=d;--s>-1;)if(a=u[s],2===i&&a._kill(n,t,e)&&(o=!0),2!==i||!a._firstPT&&a._initted){if(2!==i&&!et(a,e))continue;a._enabled(!1,!1)&&(o=!0)}return o},it=function(t,e,n){for(var i=t._timeline,r=i._timeScale,s=t._startTime;i._timeline;){if(s+=i._startTime,r*=i._timeScale,i._paused)return-100;i=i._timeline}return(s/=r)>e?s-e:n&&s===e||!t._initted&&2*m>s-e?m:(s+=t.totalDuration()/t._timeScale/r)>e+m?0:s-e-m};h._init=function(){var t,e,n,i,r,s,o=this.vars,a=this._overwrittenProps,l=this._duration,c=!!o.immediateRender,h=o.ease;if(o.startAt){for(i in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={},o.startAt)r[i]=o.startAt[i];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=c&&!1!==o.lazy,r.startAt=r.delay=null,r.onUpdate=o.onUpdate,r.onUpdateParams=o.onUpdateParams,r.onUpdateScope=o.onUpdateScope||o.callbackScope||this,this._startAt=k.to(this.target,0,r),c)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(o.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(i in 0!==this._time&&(c=!1),n={},o)Y[i]&&"autoCSS"!==i||(n[i]=o[i]);if(n.overwrite=0,n.data="isFromStart",n.lazy=c&&!1!==o.lazy,n.immediateRender=c,this._startAt=k.to(this.target,0,n),c){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=h=h?h instanceof E?h:"function"==typeof h?new E(h,o.easeParams):S[h]||k.defaultEase:k.defaultEase,o.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(s=this._targets.length,t=0;s>t;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(e&&k._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=o.onUpdate,this._initted=!0},h._initProps=function(t,e,i,r,s){var o,a,l,c,h,u;if(null==t)return!1;for(o in F[t._gsTweenID]&&$(),this.vars.css||t.style&&t!==n&&t.nodeType&&W.css&&!1!==this.vars.autoCSS&&function(t,e){var n,i={};for(n in t)Y[n]||n in e&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!W[n]||W[n]&&W[n]._autoCSS)||(i[n]=t[n],delete t[n]);t.css=i}(this.vars,t),this.vars)if(u=this.vars[o],Y[o])u&&(u instanceof Array||u.push&&y(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[o]=u=this._swapSelfInParams(u,this));else if(W[o]&&(c=new W[o])._onInitTween(t,this.vars[o],this,s)){for(this._firstPT=h={_next:this._firstPT,t:c,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:c._priority,m:0},a=c._overwriteProps.length;--a>-1;)e[c._overwriteProps[a]]=this._firstPT;(c._priority||c._onInitAllProps)&&(l=!0),(c._onDisable||c._onEnable)&&(this._notifyPluginsOfEnabled=!0),h._next&&(h._next._prev=h)}else e[o]=V.call(this,t,o,"get",u,o,0,null,this.vars.stringFilter,s);return r&&this._kill(r,t)?this._initProps(t,e,i,r,s):this._overwrite>1&&this._firstPT&&i.length>1&&nt(t,this,e,this._overwrite,i)?(this._kill(e,t),this._initProps(t,e,i,r,s)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(F[t._gsTweenID]=!0),l)},h.render=function(t,e,n){var i,r,s,o,a=this._time,l=this._duration,c=this._rawPrevTime;if(t>=l-1e-7&&t>=0)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(0>c||0>=t&&t>=-1e-7||c===m&&"isPause"!==this.data)&&c!==t&&(n=!0,c>m&&(r="onReverseComplete")),this._rawPrevTime=o=!e||t||c===t?t:m);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&c>0)&&(r="onReverseComplete",i=this._reversed),0>t&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||n)&&(c>=0&&(c!==m||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=o=!e||t||c===t?t:m)),(!this._initted||this._startAt&&this._startAt.progress())&&(n=!0);else if(this._totalTime=this._time=t,this._easeType){var h=t/l,u=this._easeType,d=this._easePower;(1===u||3===u&&h>=.5)&&(h=1-h),3===u&&(h*=2),1===d?h*=h:2===d?h*=h*h:3===d?h*=h*h*h:4===d&&(h*=h*h*h*h),this.ratio=1===u?1-h:2===u?h:.5>t/l?h/2:1-h/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==a||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=c,B.push(this),void(this._lazy=[t,e]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/l):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,!0,n):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>t&&this._startAt&&-1e-4!==t&&this._startAt.render(t,!0,n),e||(this._time!==a||i||n)&&this._callback("onUpdate")),r&&(!this._gc||n)&&(0>t&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,!0,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===l&&this._rawPrevTime===m&&o!==m&&(this._rawPrevTime=0))}},h._kill=function(t,e,n){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:k.selector(e)||e;var i,r,s,o,a,l,c,h,u,d=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline;if((y(e)||N(e))&&"number"!=typeof e[0])for(i=e.length;--i>-1;)this._kill(t,e[i],n)&&(l=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(e===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(c=t||a,h=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),n&&(k.onOverwrite||this.vars.onOverwrite)){for(s in c)a[s]&&(u||(u=[]),u.push(s));if((u||!t)&&!et(this,n,e,u))return!1}for(s in c)(o=a[s])&&(d&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,l=!0),o.pg&&o.t._kill(c)&&(l=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete a[s]),h&&(r[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},h.invalidate=function(){return this._notifyPluginsOfEnabled&&k._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],O.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-m,this.render(Math.min(0,-this._delay))),this},h._enabled=function(t,e){if(d||u.wake(),t&&this._gc){var n,i=this._targets;if(i)for(n=i.length;--n>-1;)this._siblings[n]=tt(i[n],this,!0);else this._siblings=tt(this.target,this,!0)}return O.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&k._onPluginEvent(t?"_onEnable":"_onDisable",this)},k.to=function(t,e,n){return new k(t,e,n)},k.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new k(t,e,n)},k.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new k(t,e,i)},k.delayedCall=function(t,e,n,i,r){return new k(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},k.set=function(t,e){return new k(t,0,e)},k.getTweensOf=function(t,e){if(null==t)return[];var n,i,r,s;if(t="string"!=typeof t?t:k.selector(t)||t,(y(t)||N(t))&&"number"!=typeof t[0]){for(n=t.length,i=[];--n>-1;)i=i.concat(k.getTweensOf(t[n],e));for(n=i.length;--n>-1;)for(s=i[n],r=n;--r>-1;)s===i[r]&&i.splice(n,1)}else if(t._gsTweenID)for(n=(i=tt(t).concat()).length;--n>-1;)(i[n]._gc||e&&!i[n].isActive())&&i.splice(n,1);return i||[]},k.killTweensOf=k.killDelayedCallsTo=function(t,e,n){"object"==typeof e&&(n=e,e=!1);for(var i=k.getTweensOf(t,e),r=i.length;--r>-1;)i[r]._kill(n,t)};var rt=w("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=rt.prototype},!0);if(h=rt.prototype,rt.version="1.19.0",rt.API=2,h._firstPT=null,h._addTween=V,h.setRatio=j,h._kill=function(t){var e,n=this._overwriteProps,i=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=n.length;--e>-1;)null!=t[n[e]]&&n.splice(e,1);for(;i;)null!=t[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},h._mod=h._roundProps=function(t){for(var e,n=this._firstPT;n;)(e=t[this._propName]||null!=n.n&&t[n.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===n.f?n.t._applyPT.m=e:n.m=e),n=n._next},k._onPluginEvent=function(t,e){var n,i,r,s,o,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(o=a._next,i=r;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:s)?a._prev._next=a:r=a,(a._next=i)?i._prev=a:s=a,a=o}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(n=!0),a=a._next;return n},rt.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===rt.API&&(W[(new t[e])._propName]=t[e]);return!0},x.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,n=t.propName,i=t.priority||0,r=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=w("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){rt.call(this,n,i),this._overwriteProps=r||[]},!0===t.global),a=o.prototype=new rt(n);for(e in a.constructor=o,o.API=t.API,s)"function"==typeof t[e]&&(a[s[e]]=t[e]);return o.version=t.version,rt.activate([o]),o},l=n._gsQueue){for(c=0;c<l.length;c++)l[c]();for(h in _)_[h].func||n.console.log("GSAP encountered missing dependency: "+h)}d=!1}}(t.exports&&"undefined"!=typeof global?global:this||window,"TweenMax")},VWjb:function(t,e,n){"use strict";var i=n("2goO");t.exports=function(t){var e={last_year:0,longest_streak:-1,longest_streak_range:[],current_streak:0,current_streak_range:[],weeks:[],days:[],last_contributed:null},n=[],r=function(){e.current_streak>e.longest_streak&&(e.longest_streak=e.current_streak,e.longest_streak_range[0]=e.current_streak_range[0],e.longest_streak_range[1]=e.current_streak_range[1])};return t.split("\n").slice(2).map(function(t){return t.trim()}).forEach(function(t){if(t.startsWith("<g transform"))return n.length&&e.weeks.push(n)&&(n=[]);var s=t.match(/fill="(#[a-z0-9]+)"/),o=t.match(/data-date="([0-9\-]+)"/),a=t.match(/data-count="([0-9]+)"/);if(o=o&&o[1],a=a&&+a[1],s=s&&s[1]){var l={fill:s,date:new Date(o),count:a,level:i.indexOf(s)};0===e.current_streak&&(e.current_streak_range[0]=l.date),l.count?(++e.current_streak,e.last_year+=l.count,e.last_contributed=l.date,e.current_streak_range[1]=l.date):(r(),e.current_streak=0),n.push(l),e.days.push(l)}}),r(),e}},Vz4O:function(t,e,n){"use strict";function i(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}i.proto=function(){return RegExp.escape=i,i},t.exports=i},aDsv:function(t,e,n){var i;!function(){"use strict";var r=.5*(Math.sqrt(3)-1),s=(3-Math.sqrt(3))/6,o=1/6,a=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20;function c(t){var e;e="function"==typeof t?t:t?function(){var t,e=0,n=0,i=0,r=1,s=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)});e=s(" "),n=s(" "),i=s(" ");for(var o=0;o<arguments.length;o++)(e-=s(arguments[o]))<0&&(e+=1),(n-=s(arguments[o]))<0&&(n+=1),(i-=s(arguments[o]))<0&&(i+=1);return s=null,function(){var t=2091639*e+2.3283064365386963e-10*r;return e=n,n=i,i=t-(r=0|t)}}(t):Math.random,this.p=h(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function h(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var i=e+~~(t()*(256-e)),r=n[e];n[e]=n[i],n[i]=r}return n}c.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var n,i,o=this.permMod12,a=this.perm,l=this.grad3,c=0,h=0,u=0,d=(t+e)*r,p=Math.floor(t+d),f=Math.floor(e+d),m=(p+f)*s,g=t-(p-m),v=e-(f-m);g>v?(n=1,i=0):(n=0,i=1);var y=g-n+s,_=v-i+s,b=g-1+2*s,x=v-1+2*s,w=255&p,A=255&f,E=.5-g*g-v*v;if(E>=0){var S=3*o[w+a[A]];c=(E*=E)*E*(l[S]*g+l[S+1]*v)}var M=.5-y*y-_*_;if(M>=0){var T=3*o[w+n+a[A+i]];h=(M*=M)*M*(l[T]*y+l[T+1]*_)}var C=.5-b*b-x*x;if(C>=0){var L=3*o[w+1+a[A+1]];u=(C*=C)*C*(l[L]*b+l[L+1]*x)}return 70*(c+h+u)},noise3D:function(t,e,n){var i,r,s,a,l,c,h,u,d,p,f=this.permMod12,m=this.perm,g=this.grad3,v=(t+e+n)*(1/3),y=Math.floor(t+v),_=Math.floor(e+v),b=Math.floor(n+v),x=(y+_+b)*o,w=t-(y-x),A=e-(_-x),E=n-(b-x);w>=A?A>=E?(l=1,c=0,h=0,u=1,d=1,p=0):w>=E?(l=1,c=0,h=0,u=1,d=0,p=1):(l=0,c=0,h=1,u=1,d=0,p=1):A<E?(l=0,c=0,h=1,u=0,d=1,p=1):w<E?(l=0,c=1,h=0,u=0,d=1,p=1):(l=0,c=1,h=0,u=1,d=1,p=0);var S=w-l+o,M=A-c+o,T=E-h+o,C=w-u+2*o,L=A-d+2*o,P=E-p+2*o,R=w-1+.5,O=A-1+.5,I=E-1+.5,D=255&y,k=255&_,N=255&b,B=.6-w*w-A*A-E*E;if(B<0)i=0;else{var F=3*f[D+m[k+m[N]]];i=(B*=B)*B*(g[F]*w+g[F+1]*A+g[F+2]*E)}var z=.6-S*S-M*M-T*T;if(z<0)r=0;else{var U=3*f[D+l+m[k+c+m[N+h]]];r=(z*=z)*z*(g[U]*S+g[U+1]*M+g[U+2]*T)}var j=.6-C*C-L*L-P*P;if(j<0)s=0;else{var H=3*f[D+u+m[k+d+m[N+p]]];s=(j*=j)*j*(g[H]*C+g[H+1]*L+g[H+2]*P)}var V=.6-R*R-O*O-I*I;if(V<0)a=0;else{var G=3*f[D+1+m[k+1+m[N+1]]];a=(V*=V)*V*(g[G]*R+g[G+1]*O+g[G+2]*I)}return 32*(i+r+s+a)},noise4D:function(t,e,n,i){var r,s,o,c,h,u,d,p,f,m,g,v,y,_,b,x,w,A=this.perm,E=this.grad4,S=(t+e+n+i)*a,M=Math.floor(t+S),T=Math.floor(e+S),C=Math.floor(n+S),L=Math.floor(i+S),P=(M+T+C+L)*l,R=t-(M-P),O=e-(T-P),I=n-(C-P),D=i-(L-P),k=0,N=0,B=0,F=0;R>O?k++:N++,R>I?k++:B++,R>D?k++:F++,O>I?N++:B++,O>D?N++:F++,I>D?B++:F++;var z=R-(u=k>=3?1:0)+l,U=O-(d=N>=3?1:0)+l,j=I-(p=B>=3?1:0)+l,H=D-(f=F>=3?1:0)+l,V=R-(m=k>=2?1:0)+2*l,G=O-(g=N>=2?1:0)+2*l,W=I-(v=B>=2?1:0)+2*l,q=D-(y=F>=2?1:0)+2*l,X=R-(_=k>=1?1:0)+3*l,Y=O-(b=N>=1?1:0)+3*l,Q=I-(x=B>=1?1:0)+3*l,Z=D-(w=F>=1?1:0)+3*l,K=R-1+4*l,J=O-1+4*l,$=I-1+4*l,tt=D-1+4*l,et=255&M,nt=255&T,it=255&C,rt=255&L,st=.6-R*R-O*O-I*I-D*D;if(st<0)r=0;else{var ot=A[et+A[nt+A[it+A[rt]]]]%32*4;r=(st*=st)*st*(E[ot]*R+E[ot+1]*O+E[ot+2]*I+E[ot+3]*D)}var at=.6-z*z-U*U-j*j-H*H;if(at<0)s=0;else{var lt=A[et+u+A[nt+d+A[it+p+A[rt+f]]]]%32*4;s=(at*=at)*at*(E[lt]*z+E[lt+1]*U+E[lt+2]*j+E[lt+3]*H)}var ct=.6-V*V-G*G-W*W-q*q;if(ct<0)o=0;else{var ht=A[et+m+A[nt+g+A[it+v+A[rt+y]]]]%32*4;o=(ct*=ct)*ct*(E[ht]*V+E[ht+1]*G+E[ht+2]*W+E[ht+3]*q)}var ut=.6-X*X-Y*Y-Q*Q-Z*Z;if(ut<0)c=0;else{var dt=A[et+_+A[nt+b+A[it+x+A[rt+w]]]]%32*4;c=(ut*=ut)*ut*(E[dt]*X+E[dt+1]*Y+E[dt+2]*Q+E[dt+3]*Z)}var pt=.6-K*K-J*J-$*$-tt*tt;if(pt<0)h=0;else{var ft=A[et+1+A[nt+1+A[it+1+A[rt+1]]]]%32*4;h=(pt*=pt)*pt*(E[ft]*K+E[ft+1]*J+E[ft+2]*$+E[ft+3]*tt)}return 27*(r+s+o+c+h)}},c._buildPermutationTable=h,void 0!==(i=(function(){return c}).call(e,n,e,t))&&(t.exports=i),e.SimplexNoise=c,t.exports=c}()},mgug:function(t,e){t.exports.en=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.exports.en.abbr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t.exports.en.short=["Su","Mo","Tu","We","Th","Fr","Sa"],t.exports.fr=["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],t.exports.fr.abbr=["dim","lun","mar","mer","jeu","ven","sam"],t.exports.fr.short=["di","lu","ma","me","je","ve","sa"],t.exports.es=["domingo","lunes","martes","miercoles","jueves","viernes","sabado"],t.exports.es.abbr=["dom","lun","mar","mir","jue","vie","sab"],t.exports.es.short=["do","lu","ma","mi","ju","vi","sa"],t.exports.it=["Domenica","Lunedi","Martedi","Mercoledi","Giovedi","Venerdi","Sabato"],t.exports.it.abbr=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],t.exports.it.short=["D","L","Ma","Me","G","V","S"],t.exports=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.exports.abbr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t.exports.short=["Su","Mo","Tu","We","Th","Fr","Sa"]},nPAm:function(t,e,n){"use strict";var i=n("5ZIp"),r=n("mgug"),s=n("/n4a"),o=n("pkAF").Parser,a={YYYY:function(t,e){return e?t.getUTCFullYear():t.getFullYear()},YY:function(t,e){return a.YYYY(t,e)%100},MMMM:function(t,e){return e?i[t.getUTCMonth()]:i[t.getMonth()]},MMM:function(t,e){return e?i.abbr[t.getUTCMonth()]:i.abbr[t.getMonth()]},MM:function(t,e){return s(e?t.getUTCMonth()+1:t.getMonth()+1)},M:function(t,e){return e?t.getUTCMonth()+1:t.getMonth()+1},dddd:function(t,e){return r[a.d(t,e)]},ddd:function(t,e){return r.abbr[a.d(t,e)]},dd:function(t,e){return r.short[a.d(t,e)]},d:function(t,e){return e?t.getUTCDay():t.getDay()},DD:function(t,e){return s(a.D(t,e))},D:function(t,e){return e?t.getUTCDate():t.getDate()},A:function(t,e){return a.a(t,e).toUpperCase()},a:function(t,e){return a.H(t,e)>=12?"pm":"am"},hh:function(t,e){return s(a.h(t,e))},h:function(t,e){return a.H(t,e)%12||12},HH:function(t,e){return s(a.H(t,e))},H:function(t,e){return e?t.getUTCHours():t.getHours()},mm:function(t,e){return s(a.m(t,e))},m:function(t,e){return e?t.getUTCMinutes():t.getMinutes()},ss:function(t,e){return s(a.s(t,e))},s:function(t,e){return e?t.getUTCSeconds():t.getSeconds()},S:function(t,e){return Math.round(a.s(t,e)/60*10)},SS:function(t,e){return s(a.s(t,e)/60*100)},SSS:function(t,e){return s(a.s(t,e)/60*1e3,3)},Z:function(t){var e=-t.getTimezoneOffset();return(e>=0?"+":"-")+s(parseInt(e/60))+":"+s(e%60)},ZZ:function(t){var e=-t.getTimezoneOffset();return(e>=0?"+":"-")+s(parseInt(e/60))+s(e%60)}},l=new o(a);t.exports=function(t,e){return l.run(e,[t,t._useUTC])}},pkAF:function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n("Vz4O"),s=function(){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.obj=e||{},this.re=new RegExp("^("+Object.keys(e).map(r).join("|")+")")}return i(t,[{key:"run",value:function(t,e){var n="";e=e||[];do{var i=t.match(this.re),r=i&&i[1],s=r||t.charAt(0);if(r){var o=this.obj[r];"function"==typeof o&&(o=o.apply(this,e)),n+=o}else n+=s;t=t.substring(s.length)}while(t);return n}}]),t}();function o(t,e,n){return new s(e).run(t,n)}o.Parser=s,t.exports=o},rD7L:function(t,e,n){"use strict";var i=n("A2q2"),r=n("CKw4");function s(t,e){return"string"==typeof t?"<"===t.charAt(0)?(t=document.createElement(t.slice(1,-1)),i(e||{},function(e,n){switch(n){case"text":return void(t.textContent=e);case"html":return void(t.innerHTML=e)}t.setAttribute(n,e)}),t):(e=e||document).querySelector(t):t}s.$$=function(t,e){return"string"==typeof t?(e=e||document,r(e.querySelectorAll(t))):[t]},t.exports=s},sEhn:function(t,n,i){var r;t.exports=function t(e,n,i){function s(a,l){if(!n[a]){if(!e[a]){if(!l&&"function"==typeof r&&r)return r(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){return s(e[a][1][t]||t)},h,h.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof r&&r,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(t,e,n){var i=Object.prototype.toString;e.exports=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===i.call(t.buffer)||Array.isArray(t)}},{}],2:[function(t,e,n){e.exports=function(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}},{}],3:[function(t,e,n){"use strict";n.byteLength=function(t){return 3*t.length/4-c(t)},n.toByteArray=function(t){var e,n,i,o,a,l=t.length;o=c(t),a=new s(3*l/4-o),n=o>0?l-4:l;var h=0;for(e=0;e<n;e+=4)i=r[t.charCodeAt(e)]<<18|r[t.charCodeAt(e+1)]<<12|r[t.charCodeAt(e+2)]<<6|r[t.charCodeAt(e+3)],a[h++]=i>>16&255,a[h++]=i>>8&255,a[h++]=255&i;return 2===o?(i=r[t.charCodeAt(e)]<<2|r[t.charCodeAt(e+1)]>>4,a[h++]=255&i):1===o&&(i=r[t.charCodeAt(e)]<<10|r[t.charCodeAt(e+1)]<<4|r[t.charCodeAt(e+2)]>>2,a[h++]=i>>8&255,a[h++]=255&i),a},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,s="",o=[],a=0,l=n-r;a<l;a+=16383)o.push(h(t,a,a+16383>l?l:a+16383));return 1===r?(s+=i[(e=t[n-1])>>2],s+=i[e<<4&63],s+="=="):2===r&&(s+=i[(e=(t[n-2]<<8)+t[n-1])>>10],s+=i[e>>4&63],s+=i[e<<2&63],s+="="),o.push(s),o.join("")};for(var i=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)i[a]=o[a],r[o.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function h(t,e,n){for(var r,s=[],o=e;o<n;o+=3)s.push(i[(r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]))>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],4:[function(t,e,n){"use strict";e.exports={createLink:function(t,e){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");for(var r in i.href=t,i.rel="stylesheet",e)e.hasOwnProperty(r)&&i.setAttribute("data-"+r,e[r]);n.appendChild(i)},createStyle:function(t,e){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");for(var r in i.type="text/css",e)e.hasOwnProperty(r)&&i.setAttribute("data-"+r,e[r]);i.sheet?(i.innerHTML=t,i.sheet.cssText=t,n.appendChild(i)):i.styleSheet?(n.appendChild(i),i.styleSheet.cssText=t):(i.appendChild(document.createTextNode(t)),n.appendChild(i))}}},{}],5:[function(t,e,n){var i=t("buffer").Buffer;e.exports=function(t,e){if(i.isBuffer(t)&&i.isBuffer(e)){if("function"==typeof t.equals)return t.equals(e);if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}},{buffer:6}],6:[function(t,n,i){(function(n){"use strict";var r=t("base64-js"),s=t("ieee754"),o=t("isarray");function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return h(this,t,e,n)}function h(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=p(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(e,n),r=(t=l(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|f(e.length);return 0===(t=l(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?l(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(u(e),t=l(t,e<0?0:0|f(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|f(e.length);t=l(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function m(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(i)return j(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return L(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return M(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function v(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function y(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:_(t,e,n,i,r);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,i,r){var s,o=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,a/=2,l/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){var h=-1;for(s=n;s<a;s++)if(c(t,s)===c(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===l)return h*o}else-1!==h&&(s-=s-h),h=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){for(var u=!0,d=0;d<l;d++)if(c(t,s+d)!==c(e,d)){u=!1;break}if(u)return s}return-1}function b(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function x(t,e,n,i){return V(j(e,t.length-n),t,n,i)}function w(t,e,n,i){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function A(t,e,n,i){return w(t,e,n,i)}function E(t,e,n,i){return V(H(e),t,n,i)}function S(t,e,n,i){return V(function(t,e){for(var n,i,r=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r.push(n%256),r.push(i);return r}(e,t.length-n),t,n,i)}function M(t,e,n){return r.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var s,o,a,l,c=t[r],h=null,u=c>239?4:c>223?3:c>191?2:1;if(r+u<=n)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(s=t[r+1]))&&(l=(31&c)<<6|63&s)>127&&(h=l);break;case 3:o=t[r+2],128==(192&(s=t[r+1]))&&128==(192&o)&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:o=t[r+2],a=t[r+3],128==(192&(s=t[r+1]))&&128==(192&o)&&128==(192&a)&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(i.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),i.push(h),r+=u}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=C));return n}(i)}i.Buffer=c,i.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},i.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),i.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return h(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,i){return u(e),e<=0?l(null,e):void 0!==n?"string"==typeof i?l(null,e).fill(n,i):l(null,e).fill(n):l(null,e)}(0,t,e,n)},c.allocUnsafe=function(t){return d(null,t)},c.allocUnsafeSlow=function(t){return d(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=c.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,i,r){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),l=this.slice(i,r),h=t.slice(e,n),u=0;u<a;++u)if(l[u]!==h[u]){s=l[u],o=h[u];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},c.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function L(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function P(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function R(t,e,n){var i,r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var s="",o=e;o<n;++o)s+=(i=t[o])<16?"0"+i.toString(16):i.toString(16);return s}function O(t,e,n){for(var i=t.slice(e,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,i,r,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function k(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-n,2);r<s;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function N(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-n,4);r<s;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function B(t,e,n,i,r,s){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,i,r){return r||B(t,0,n,4),s.write(t,e,n,i,23,4),n+4}function z(t,e,n,i,r){return r||B(t,0,n,8),s.write(t,e,n,i,52,8),n+8}c.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var r=e-t;n=new c(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},c.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var i=e,r=1,s=this[t+--i];i>0&&(r*=256);)s+=this[t+--i]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),s.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),s.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),s.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),s.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||D(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||D(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return z(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return z(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,s=i-n;if(this===t&&n<e&&e<i)for(r=s-1;r>=0;--r)t[r+e]=this[r+n];else if(s<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},c.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var o=c.isBuffer(t)?t:j(new c(t,i).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function j(t,e){var n;e=e||1/0;for(var i=t.length,r=null,s=[],o=0;o<i;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function H(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":3,ieee754:16,isarray:21}],7:[function(t,n,i){!function(){if("undefined"!=typeof window)try{var t=new window.CustomEvent("test",{cancelable:!0});if(t.preventDefault(),!0!==t.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var n=function(e,n){var i,r;return n=n||{bubbles:!1,cancelable:!1,detail:void 0},(i=document.createEvent("CustomEvent")).initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r=i.preventDefault,i.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},i};n.prototype=window.Event.prototype,window.CustomEvent=n}}()},{}],8:[function(t,n,i){function r(){var t;try{t=i.storage.debug}catch(e){}return t}(i=n.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" "),!e)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,r=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(r=i))}),t.splice(r,0,n),t},i.save=function(t){try{null==t?i.storage.removeItem("debug"):i.storage.debug=t}catch(e){}},i.load=r,i.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(t){return JSON.stringify(t)},i.enable(r())},{"./debug":9}],9:[function(t,e,n){(n=e.exports=function(t){function e(){}function r(){var t=r;null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=n.colors[i++%n.colors.length]);var e=Array.prototype.slice.call(arguments);e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&(e=["%o"].concat(e));var s=0;e[0]=e[0].replace(/%([a-z%])/g,function(i,r){if("%%"===i)return i;s++;var o=n.formatters[r];return"function"==typeof o&&(i=o.call(t,e[s]),e.splice(s,1),s--),i}),"function"==typeof n.formatArgs&&(e=n.formatArgs.apply(t,e)),(r.log||n.log||console.log.bind(console)).apply(t,e)}e.enabled=!1,r.enabled=!0;var s=n.enabled(t)?r:e;return s.namespace=t,s}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),i=e.length,r=0;r<i;r++)e[r]&&("-"===(t=e[r].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,i;for(e=0,i=n.skips.length;e<i;e++)if(n.skips[e].test(t))return!1;for(e=0,i=n.names.length;e<i;e++)if(n.names[e].test(t))return!0;return!1},n.names=[],n.skips=[],n.formatters={};var i=0},{}],10:[function(t,e,n){"use strict";var i=t("is-obj"),r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}function a(t,e,n){var s=e[n];if(null!=s){if(r.call(t,n)&&null==t[n])throw new TypeError("Cannot convert undefined or null to object ("+n+")");t[n]=r.call(t,n)&&i(s)?l(Object(t[n]),e[n]):s}}function l(t,e){if(t===e)return t;for(var n in e=Object(e))r.call(e,n)&&a(t,e,n);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)s.call(e,i[o])&&a(t,e,i[o]);return t}e.exports=function(t){t=o(t);for(var e=1;e<arguments.length;e++)l(t,arguments[e]);return t}},{"is-obj":20}],11:[function(t,n,i){!function(t,n,i,r){"use strict";function s(t,e){for(var n=0,i=t.length;n<i;n++)m(t[n],e)}function o(t){return function(e){nt(e)&&(m(e,t),s(e.querySelectorAll(z),t))}}function a(t){var e=st.call(t,"is"),n=t.nodeName.toUpperCase(),i=j.call(B,e?D+e.toUpperCase():I+n);return e&&-1<i&&!l(n,e)?-1:i}function l(t,e){return-1<z.indexOf(t+'[is="'+e+'"]')}function c(t){var e=t.currentTarget,n=t.attrChange,i=t.attrName,r=t.target;mt&&(!r||r===e)&&e.attributeChangedCallback&&"style"!==i&&t.prevValue!==t.newValue&&e.attributeChangedCallback(i,n===t[T]?null:t.prevValue,n===t[L]?null:t.newValue)}function h(t){var e=o(t);return function(t){g.push(e,t.target)}}function u(t){ft&&(ft=!1,t.currentTarget.removeEventListener(R,u)),s((t.target||n).querySelectorAll(z),t.detail===S?S:E),et&&function(){for(var t,e=0,n=it.length;e<n;e++)U.contains(t=it[e])||(n--,it.splice(e--,1),m(t,S))}()}function d(t,e){var n=this;ot.call(n,t,e),v.call(n,{target:n})}function p(t,e){J(t,e),b?b.observe(t,ct):(pt&&(t.setAttribute=d,t[A]=_(t),t.addEventListener(O,v)),t.addEventListener(P,c)),t.createdCallback&&mt&&(t.created=!0,t.createdCallback(),t.created=!1)}function f(t){throw new Error("A "+t+" type is already registered")}function m(t,e){var n,i=a(t);-1<i&&(x(t,F[i]),i=0,e!==E||t[E]?e===S&&!t[S]&&(t[E]=!1,t[S]=!0,i=1):(t[S]=!1,t[E]=!0,i=1,et&&j.call(it,t)<0&&it.push(t)),i&&(n=t[e+"Callback"])&&n.call(t))}if(!(r in n)){var g,v,y,_,b,x,w,A="__"+r+(1e5*Math.random()>>0),E="attached",S="detached",M="extends",T="ADDITION",C="MODIFICATION",L="REMOVAL",P="DOMAttrModified",R="DOMContentLoaded",O="DOMSubtreeModified",I="<",D="=",k=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,N=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],B=[],F=[],z="",U=n.documentElement,j=B.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},H=i.prototype,V=H.hasOwnProperty,G=H.isPrototypeOf,W=i.defineProperty,q=i.getOwnPropertyDescriptor,X=i.getOwnPropertyNames,Y=i.getPrototypeOf,Q=i.setPrototypeOf,Z=!!i.__proto__,K=i.create||function t(e){return e?(t.prototype=e,new t):this},J=Q||(Z?function(t,e){return t.__proto__=e,t}:X&&q?function(){function t(t,e){for(var n,i=X(e),r=0,s=i.length;r<s;r++)V.call(t,n=i[r])||W(t,n,q(e,n))}return function(e,n){do{t(e,n)}while((n=Y(n))&&!G.call(n,e));return e}}():function(t,e){for(var n in e)t[n]=e[n];return t}),$=t.MutationObserver||t.WebKitMutationObserver,tt=(t.HTMLElement||t.Element||t.Node).prototype,et=!G.call(tt,U),nt=et?function(t){return 1===t.nodeType}:function(t){return G.call(tt,t)},it=et&&[],rt=tt.cloneNode,st=tt.getAttribute,ot=tt.setAttribute,at=tt.removeAttribute,lt=n.createElement,ct=$&&{attributes:!0,characterData:!0,attributeOldValue:!0},ht=$||function(t){pt=!1,U.removeEventListener(P,ht)},ut=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,10)},dt=!1,pt=!0,ft=!0,mt=!0;Q||Z?(x=function(t,e){G.call(e,t)||p(t,e)},w=p):w=x=function(t,e){t[A]||(t[A]=i(!0),p(t,e))},et?(pt=!1,function(){var t=q(tt,"addEventListener"),n=t.value,i=function(t){var e=new CustomEvent(P,{bubbles:!0});e.attrName=t,e.prevValue=st.call(this,t),e.newValue=null,e[L]=e.attrChange=2,at.call(this,t),this.dispatchEvent(e)},r=function(t,n){var i=this.hasAttribute(t),r=i&&st.call(this,t);e=new CustomEvent(P,{bubbles:!0}),ot.call(this,t,n),e.attrName=t,e.prevValue=i?r:null,e.newValue=n,i?e[C]=e.attrChange=1:e[T]=e.attrChange=0,this.dispatchEvent(e)},s=function(t){var e,n=t.currentTarget,i=n[A],r=t.propertyName;i.hasOwnProperty(r)&&(i=i[r],(e=new CustomEvent(P,{bubbles:!0})).attrName=i.name,e.prevValue=i.value||null,e.newValue=i.value=n[r]||null,null==e.prevValue?e[T]=e.attrChange=0:e[C]=e.attrChange=1,n.dispatchEvent(e))};t.value=function(t,e,o){t===P&&this.attributeChangedCallback&&this.setAttribute!==r&&(this[A]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=i,n.call(this,"propertychange",s)),n.call(this,t,e,o)},W(tt,"addEventListener",t)}()):$||(U.addEventListener(P,ht),U.setAttribute(A,1),U.removeAttribute(A),pt&&(v=function(t){var e,n,i,r=this;if(r===t.target){for(i in e=r[A],r[A]=n=_(r),n){if(!(i in e))return y(0,r,i,e[i],n[i],T);if(n[i]!==e[i])return y(1,r,i,e[i],n[i],C)}for(i in e)if(!(i in n))return y(2,r,i,e[i],n[i],L)}},y=function(t,e,n,i,r,s){var o={attrChange:t,currentTarget:e,attrName:n,prevValue:i,newValue:r};o[s]=t,c(o)},_=function(t){for(var e,n,i={},r=t.attributes,s=0,o=r.length;s<o;s++)"setAttribute"!==(n=(e=r[s]).name)&&(i[n]=e.value);return i})),n[r]=function(t,e){if(i=t.toUpperCase(),dt||(dt=!0,$?(b=function(t,e){function n(t,e){for(var n=0,i=t.length;n<i;e(t[n++]));}return new $(function(i){for(var r,s,o,a=0,l=i.length;a<l;a++)"childList"===(r=i[a]).type?(n(r.addedNodes,t),n(r.removedNodes,e)):(s=r.target,mt&&s.attributeChangedCallback&&"style"!==r.attributeName&&(o=st.call(s,r.attributeName))!==r.oldValue&&s.attributeChangedCallback(r.attributeName,r.oldValue,o))})}(o(E),o(S))).observe(n,{childList:!0,subtree:!0}):(g=[],ut(function t(){for(;g.length;)g.shift().call(null,g.shift());ut(t)}),n.addEventListener("DOMNodeInserted",h(E)),n.addEventListener("DOMNodeRemoved",h(S))),n.addEventListener(R,u),n.addEventListener("readystatechange",u),n.createElement=function(t,e){var i=lt.apply(n,arguments),r=""+t,s=j.call(B,(e?D:I)+(e||r).toUpperCase()),o=-1<s;return e&&(i.setAttribute("is",e=e.toLowerCase()),o&&(o=l(r.toUpperCase(),e))),mt=!n.createElement.innerHTMLHelper,o&&w(i,F[s]),i},tt.cloneNode=function(t){var e=rt.call(this,!!t),n=a(e);return-1<n&&w(e,F[n]),t&&function(t){for(var e,n=0,i=t.length;n<i;n++)w(e=t[n],F[a(e)])}(e.querySelectorAll(z)),e}),-2<j.call(B,D+i)+j.call(B,I+i)&&f(t),!k.test(i)||-1<j.call(N,i))throw new Error("The type "+t+" is invalid");var i,r,c=function(){return p?n.createElement(m,i):n.createElement(m)},d=e||H,p=V.call(d,M),m=p?e[M].toUpperCase():i;return p&&-1<j.call(B,I+m)&&f(m),r=B.push((p?D:I)+i)-1,z=z.concat(z.length?",":"",p?m+'[is="'+t.toLowerCase()+'"]':m),c.prototype=F[r]=V.call(d,"prototype")?d.prototype:K(tt),s(n.querySelectorAll(z),E),c}}}(window,document,Object,"registerElement")},{}],12:[function(t,e,n){e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],13:[function(t,e,n){var i=t("dtype");e.exports=function(t,e,n){if(!t)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(t)&&Array.isArray(t[0])){var r=t[0].length,s=t.length*r;e&&"string"!=typeof e||(e=new(i(e||"float32"))(s+n));var o=e.length-n;if(s!==o)throw new Error("source length "+s+" ("+r+"x"+t.length+") does not match destination length "+o);for(var a=0,l=n;a<t.length;a++)for(var c=0;c<r;c++)e[l++]=t[a][c]}else if(e&&"string"!=typeof e)e.set(t,n);else{var h=i(e||"float32");0===n?e=new h(t):(e=new h(t.length+n)).set(t,n)}return e}},{dtype:12}],14:[function(t,e,n){var i=t("is-function");e.exports=function(t,e,n){if(!i(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===r.call(t)?function(t,e,n){for(var i=0,r=t.length;i<r;i++)s.call(t,i)&&e.call(n,t[i],i,t)}(t,e,n):"string"==typeof t?function(t,e,n){for(var i=0,r=t.length;i<r;i++)e.call(n,t.charAt(i),i,t)}(t,e,n):function(t,e,n){for(var i in t)s.call(t,i)&&e.call(n,t[i],i,t)}(t,e,n)};var r=Object.prototype.toString,s=Object.prototype.hasOwnProperty},{"is-function":19}],15:[function(t,e,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(t,e,n){n.read=function(t,e,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,c=l>>1,h=-7,u=n?r-1:0,d=n?-1:1,p=t[e+u];for(u+=d,s=p&(1<<-h)-1,p>>=-h,h+=a;h>0;s=256*s+t[e+u],u+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+t[e+u],u+=d,h-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=c}return(p?-1:1)*o*Math.pow(2,s-i)},n.write=function(t,e,n,i,r,s){var o,a,l,c=8*s-r-1,h=(1<<c)-1,u=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(e*l-1)*Math.pow(2,r),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;t[n+p]=255&a,p+=f,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;t[n+p]=255&o,p+=f,o/=256,c-=8);t[n+p-f]|=128*m}},{}],17:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],18:[function(t,e,n){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(i(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],19:[function(t,e,n){e.exports=function(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var i=Object.prototype.toString},{}],20:[function(t,e,n){"use strict";e.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},{}],21:[function(t,e,n){var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],22:[function(t,e,n){var i=t("word-wrapper"),r=t("xtend"),s=t("as-number"),o=["x","e","a","o","n","s","r","c","u","m","v","w","z"],a=["m","w"],l=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],c="\t".charCodeAt(0),h=" ".charCodeAt(0);function u(t){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(t)}function d(t){return new Function(["return function "+t+"() {","  return this._"+t,"}"].join("\n"))()}function p(t,e){if(!t.chars||0===t.chars.length)return null;var n=m(t.chars,e);return n>=0?t.chars[n]:null}function f(t,e,n){if(!t.kernings||0===t.kernings.length)return 0;for(var i=t.kernings,r=0;r<i.length;r++){var s=i[r];if(s.first===e&&s.second===n)return s.amount}return 0}function m(t,e,n){for(var i=n=n||0;i<t.length;i++)if(t[i].id===e)return i;return-1}e.exports=function(t){return new u(t)},u.prototype.update=function(t){if(t=r({measure:this._measure},t),this._opt=t,this._opt.tabSize=s(this._opt.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var e=this.glyphs,n=t.text||"",a=t.font;this._setupSpaceGlyphs(a);var c=i.lines(n,t),h=t.width||0;e.length=0;var u=c.reduce(function(t,e){return Math.max(t,e.width,h)},0),d=0,p=0,g=s(t.lineHeight,a.common.lineHeight),v=a.common.base,y=g-v,_=t.letterSpacing||0,b=g*c.length-y,x=function(t){return"center"===t?1:"right"===t?2:0}(this._opt.align);p-=b,this._width=u,this._height=b,this._descender=g-v,this._baseline=v,this._xHeight=function(t){for(var e=0;e<o.length;e++){var n=o[e].charCodeAt(0),i=m(t.chars,n);if(i>=0)return t.chars[i].height}return 0}(a),this._capHeight=function(t){for(var e=0;e<l.length;e++){var n=l[e].charCodeAt(0),i=m(t.chars,n);if(i>=0)return t.chars[i].height}return 0}(a),this._lineHeight=g,this._ascender=g-y-this._xHeight;var w=this;c.forEach(function(t,i){for(var r,s=t.end,o=t.width,l=t.start;l<s;l++){var c=n.charCodeAt(l),h=w.getGlyph(a,c);if(h){r&&(d+=f(a,r.id,h.id));var m=d;1===x?m+=(u-o)/2:2===x&&(m+=u-o),e.push({position:[m,p],data:h,index:l,line:i}),d+=h.xadvance+_,r=h}}p+=g,d=0}),this._linesTotal=c.length},u.prototype._setupSpaceGlyphs=function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var e=p(t,h)||function(t){for(var e=0;e<a.length;e++){var n=a[e].charCodeAt(0),i=m(t.chars,n);if(i>=0)return t.chars[i]}return 0}(t)||t.chars[0],n=this._opt.tabSize*e.xadvance;this._fallbackSpaceGlyph=e,this._fallbackTabGlyph=r(e,{x:0,y:0,xadvance:n,id:c,xoffset:0,yoffset:0,width:0,height:0})}},u.prototype.getGlyph=function(t,e){return p(t,e)||(e===c?this._fallbackTabGlyph:e===h?this._fallbackSpaceGlyph:null)},u.prototype.computeMetrics=function(t,e,n,i){var r,s=this._opt.letterSpacing||0,o=this._opt.font,a=0,l=0,c=0;if(!o.chars||0===o.chars.length)return{start:e,end:e,width:0};n=Math.min(t.length,n);for(var h=e;h<n;h++){var u,d=t.charCodeAt(h);if(u=this.getGlyph(o,d)){var p=(a+=r?f(o,r.id,u.id):0)+u.xadvance+s,m=a+u.width;if(m>=i||p>=i)break;a=p,l=m,r=u}c++}return r&&(l+=r.xoffset),{start:e,end:e+c,width:l}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(t){Object.defineProperty(u.prototype,t,{get:d(t),configurable:!0})})},{"as-number":2,"word-wrapper":47,xtend:50}],23:[function(t,n,i){(function(i){var r=t("xhr"),s=function(){},o=t("parse-bmfont-ascii"),a=t("parse-bmfont-xml"),l=t("parse-bmfont-binary"),c=t("./lib/is-binary"),h=t("xtend"),u=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;n.exports=function(t,n){n="function"==typeof n?n:s,"string"==typeof t?t={uri:t}:t||(t={}),t.binary&&(t=function(t){if(u)return h(t,{responseType:"arraybuffer"});if(void 0===self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var e=new self.XMLHttpRequest;return e.overrideMimeType("text/plain; charset=x-user-defined"),h({xhr:e},t)}(t)),r(t,function(r,h,u){if(r)return n(r);if(!/^2/.test(h.statusCode))return n(new Error("http status code: "+h.statusCode));if(!u)return n(new Error("no body result"));var d,p=!1;if("[object ArrayBuffer]"===Object.prototype.toString.call(u)){var f=new Uint8Array(u);u=new i(f,"binary")}c(u)&&(p=!0,"string"==typeof u&&(u=new i(u,"binary"))),p||(i.isBuffer(u)&&(u=u.toString(t.encoding)),u=u.trim());try{var m=h.headers["content-type"];d=p?l(u):/json/.test(m)||"{"===u.charAt(0)?JSON.parse(u):/xml/.test(m)||"<"===u.charAt(0)?a(u):o(u)}catch(e){n(new Error("error parsing font "+e.message)),n=s}n(null,d)})}}).call(this,t("buffer").Buffer)},{"./lib/is-binary":24,buffer:6,"parse-bmfont-ascii":26,"parse-bmfont-binary":27,"parse-bmfont-xml":28,xhr:48,xtend:50}],24:[function(t,e,n){(function(n){var i=t("buffer-equal"),r=new n([66,77,70,3]);e.exports=function(t){return"string"==typeof t?"BMF"===t.substring(0,3):t.length>4&&i(t.slice(0,4),r)}}).call(this,t("buffer").Buffer)},{buffer:6,"buffer-equal":5}],25:[function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var n,a,l=o(t),c=1;c<arguments.length;c++){for(var h in n=Object(arguments[c]))r.call(n,h)&&(l[h]=n[h]);if(i){a=i(n);for(var u=0;u<a.length;u++)s.call(n,a[u])&&(l[a[u]]=n[a[u]])}}return l}},{}],26:[function(t,e,n){function i(t,e){if(!(t=t.replace(/\t+/g," ").trim()))return null;var n=t.indexOf(" ");if(-1===n)throw new Error("no named row at line "+e);var i=t.substring(0,n);t=(t=(t=(t=t.substring(n+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map(function(t){return t.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var s=[],o=0;o<t.length;o++){var a=t[o];0===o?s.push({key:a[0],data:""}):o===t.length-1?s[s.length-1].data=r(a[0]):(s[s.length-1].data=r(a[0]),s.push({key:a[1],data:""}))}var l={key:i,data:{}};return s.forEach(function(t){l.data[t.key]=t.data}),l}function r(t){return t&&0!==t.length?0===t.indexOf('"')||0===t.indexOf("'")?t.substring(1,t.length-1):-1!==t.indexOf(",")?function(t){return t.split(",").map(function(t){return parseInt(t,10)})}(t):parseInt(t,10):""}e.exports=function(t){if(!t)throw new Error("no data provided");var e={pages:[],chars:[],kernings:[]},n=(t=t.toString().trim()).split(/\r\n?|\n/g);if(0===n.length)throw new Error("no data in BMFont file");for(var r=0;r<n.length;r++){var s=i(n[r],r);if(s)if("page"===s.key){if("number"!=typeof s.data.id)throw new Error("malformed file at line "+r+" -- needs page id=N");if("string"!=typeof s.data.file)throw new Error("malformed file at line "+r+' -- needs page file="path"');e.pages[s.data.id]=s.data.file}else"chars"===s.key||"kernings"===s.key||("char"===s.key?e.chars.push(s.data):"kerning"===s.key?e.kernings.push(s.data):e[s.key]=s.data)}return e}},{}],27:[function(t,e,n){var i=[66,77,70];function r(t,e,n){if(n>e.length-1)return 0;var i=e.readUInt8(n++),r=e.readInt32LE(n);switch(n+=4,i){case 1:t.info=function(t,e){var n={};n.size=t.readInt16LE(e);var i=t.readUInt8(e+2);return n.smooth=i>>7&1,n.unicode=i>>6&1,n.italic=i>>5&1,n.bold=i>>4&1,i>>3&1&&(n.fixedHeight=1),n.charset=t.readUInt8(e+3)||"",n.stretchH=t.readUInt16LE(e+4),n.aa=t.readUInt8(e+6),n.padding=[t.readInt8(e+7),t.readInt8(e+8),t.readInt8(e+9),t.readInt8(e+10)],n.spacing=[t.readInt8(e+11),t.readInt8(e+12)],n.outline=t.readUInt8(e+13),n.face=function(t,n){return s(t,e+14).toString("utf8")}(t),n}(e,n);break;case 2:t.common=function(t,e){var n={};return n.lineHeight=t.readUInt16LE(e),n.base=t.readUInt16LE(e+2),n.scaleW=t.readUInt16LE(e+4),n.scaleH=t.readUInt16LE(e+6),n.pages=t.readUInt16LE(e+8),t.readUInt8(e+10),n.packed=0,n.alphaChnl=t.readUInt8(e+11),n.redChnl=t.readUInt8(e+12),n.greenChnl=t.readUInt8(e+13),n.blueChnl=t.readUInt8(e+14),n}(e,n);break;case 3:t.pages=function(t,e,n){for(var i=[],r=s(t,e),o=r.length+1,a=n/o,l=0;l<a;l++)i[l]=t.slice(e,e+r.length).toString("utf8"),e+=o;return i}(e,n,r);break;case 4:t.chars=function(t,e,n){for(var i=[],r=n/20,s=0;s<r;s++){var o={},a=20*s;o.id=t.readUInt32LE(e+0+a),o.x=t.readUInt16LE(e+4+a),o.y=t.readUInt16LE(e+6+a),o.width=t.readUInt16LE(e+8+a),o.height=t.readUInt16LE(e+10+a),o.xoffset=t.readInt16LE(e+12+a),o.yoffset=t.readInt16LE(e+14+a),o.xadvance=t.readInt16LE(e+16+a),o.page=t.readUInt8(e+18+a),o.chnl=t.readUInt8(e+19+a),i[s]=o}return i}(e,n,r);break;case 5:t.kernings=function(t,e,n){for(var i=[],r=n/10,s=0;s<r;s++){var o={},a=10*s;o.first=t.readUInt32LE(e+0+a),o.second=t.readUInt32LE(e+4+a),o.amount=t.readInt16LE(e+8+a),i[s]=o}return i}(e,n,r)}return 5+r}function s(t,e){for(var n=e;n<t.length&&0!==t[n];n++);return t.slice(e,n)}e.exports=function(t){if(t.length<6)throw new Error("invalid buffer length for BMFont");if(!i.every(function(e,n){return t.readUInt8(n)===e}))throw new Error("BMFont missing BMF byte header");var e=3;if(t.readUInt8(e++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var n={kernings:[],chars:[]},s=0;s<5;s++)e+=r(n,t,e);return n}},{}],28:[function(t,e,n){var i=t("./parse-attribs"),r=t("xml-parse-from-string"),s={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function o(t){return function(t){for(var e=[],n=0;n<t.attributes.length;n++)e.push(t.attributes[n]);return e}(t).reduce(function(t,e){var n;return t[s[(n=e.nodeName).toLowerCase()]||n]=e.nodeValue,t},{})}e.exports=function(t){t=t.toString();var e=r(t),n={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(t){var r=e.getElementsByTagName(t)[0];r&&(n[t]=i(o(r)))});var s=e.getElementsByTagName("pages")[0];if(!s)throw new Error("malformed file -- no <pages> element");for(var a=s.getElementsByTagName("page"),l=0;l<a.length;l++){var c=a[l],h=parseInt(c.getAttribute("id"),10),u=c.getAttribute("file");if(isNaN(h))throw new Error('malformed file -- page "id" attribute is NaN');if(!u)throw new Error('malformed file -- needs page "file" attribute');n.pages[parseInt(h,10)]=u}return["chars","kernings"].forEach(function(t){var r=e.getElementsByTagName(t)[0];if(r)for(var s=t.substring(0,t.length-1),a=r.getElementsByTagName(s),l=0;l<a.length;l++)n[t].push(i(o(a[l])))}),n}},{"./parse-attribs":29,"xml-parse-from-string":49}],29:[function(t,e,n){e.exports=function(t){for(var e in"chasrset"in t&&(t.charset=t.chasrset,delete t.chasrset),t)"face"!==e&&"charset"!==e&&(t[e]="padding"===e||"spacing"===e?t[e].split(",").map(function(t){return parseInt(t,10)}):parseInt(t[e],10));return t}},{}],30:[function(t,e,n){var i=t("trim"),r=t("for-each");e.exports=function(t){if(!t)return{};var e={};return r(i(t).split("\n"),function(t){var n=t.indexOf(":"),r=i(t.slice(0,n)).toLowerCase(),s=i(t.slice(n+1));void 0===e[r]?e[r]=s:"[object Array]"===Object.prototype.toString.call(e[r])?e[r].push(s):e[r]=[e[r],s]}),e}},{"for-each":14,trim:45}],31:[function(t,e,n){(function(t){var n=t.performance||{},i=function(){for(var t=["now","webkitNow","msNow","mozNow","oNow"];t.length;){var e=t.shift();if(e in n)return n[e].bind(n)}var i=Date.now||function(){return(new Date).getTime()},r=(n.timing||{}).navigationStart||i();return function(){return i()-r}}();i.performanceNow=n.now,i.noConflict=function(){n.now=i.performanceNow},i.conflict=function(){n.now=i},i.conflict(),e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(t,n,i){var r,s,o=n.exports={};function a(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{s="function"==typeof clearTimeout?clearTimeout:l}catch(e){s=l}}();var h,u=[],d=!1,p=-1;function f(){d&&h&&(d=!1,h.length?u=h.concat(u):p=-1,u.length&&m())}function m(){if(!d){var t=c(f);d=!0;for(var n=u.length;n;){for(h=u,u=[];++p<n;)h&&h[p].run();p=-1,n=u.length}h=null,d=!1,function(t){if(s===clearTimeout)return clearTimeout(t);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new g(t,e)),1!==u.length||d||c(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],33:[function(t,n,i){!function(t){var i=setTimeout,r="function"==typeof setImmediate&&setImmediate||function(t){i(t,1)};function s(t,e){return function(){t.apply(e,arguments)}}var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],p(t,s(c,this),s(h,this))}function l(t){var n=this;null!==this._state?r(function(){var i=n._state?t.onFulfilled:t.onRejected;if(null!==i){var r;try{r=i(n._value)}catch(e){return void t.reject(e)}t.resolve(r)}else(n._state?t.resolve:t.reject)(n._value)}):this._deferreds.push(t)}function c(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void p(s(n,t),s(c,this),s(h,this))}this._state=!0,this._value=t,u.call(this)}catch(e){h.call(this,e)}}function h(t){this._state=!1,this._value=t,u.call(this)}function u(){for(var t=0,e=this._deferreds.length;t<e;t++)l.call(this,this._deferreds[t]);this._deferreds=null}function d(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function p(t,e,n){var i=!1;try{t(function(t){i||(i=!0,e(t))},function(t){i||(i=!0,n(t))})}catch(r){if(i)return;i=!0,n(r)}}a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=this;return new a(function(i,r){l.call(n,new d(t,e,i,r))})},a.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&o(arguments[0])?arguments[0]:arguments);return new a(function(e,n){if(0===t.length)return e([]);var i=t.length;function r(s,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,function(t){r(s,t)},n)}t[s]=o,0==--i&&e(t)}catch(l){n(l)}}for(var s=0;s<t.length;s++)r(s,t[s])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){for(var i=0,r=t.length;i<r;i++)t[i].then(e,n)})},a._setImmediateFn=function(t){r=t},void 0!==n&&n.exports?n.exports=a:t.Promise||(t.Promise=a)}(this)},{}],34:[function(t,e,n){var i=t("dtype"),r=t("an-array"),s=t("is-buffer"),o=[0,2,3],a=[2,1,3];e.exports=function(t,e){t&&(r(t)||s(t))||(e=t||{},t=null);for(var n=(e="number"==typeof e?{count:e}:e||{}).start||0,l=!1!==e.clockwise?o:a,c=l[0],h=l[1],u=l[2],d=6*("number"==typeof e.count?e.count:1),p=t||new(i("string"==typeof e.type?e.type:"uint16"))(d),f=0,m=0;f<d;f+=6,m+=4){var g=f+n;p[g+0]=m+0,p[g+1]=m+1,p[g+2]=m+2,p[g+3]=m+c,p[g+4]=m+h,p[g+5]=m+u}return p}},{"an-array":1,dtype:12,"is-buffer":18}],35:[function(t,n,i){"use strict";var r={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},s={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},o=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],a={CSS:{},springs:{}};function l(t,e,n){return Math.min(Math.max(t,e),n)}function c(t,e){return t.indexOf(e)>-1}function h(t,e){return t.apply(null,e)}var u=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,d=/^rgb/,p=/^hsl/,f={arr:function(t){return Array.isArray(t)},obj:function(t){return c(Object.prototype.toString.call(t),"Object")},pth:function(t){return f.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||f.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},hex:function(t){return u.test(t)},rgb:function(t){return d.test(t)},hsl:function(t){return p.test(t)},col:function(t){return f.hex(t)||f.rgb(t)||f.hsl(t)},key:function(t){return!r.hasOwnProperty(t)&&!s.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}},m=/\(([^)]+)\)/;function g(t){var e=m.exec(t);return e?e[1].split(",").map(function(t){return parseFloat(t)}):[]}function v(t,e){var n=g(t),i=l(f.und(n[0])?1:n[0],.1,100),r=l(f.und(n[1])?100:n[1],.1,100),s=l(f.und(n[2])?10:n[2],.1,100),o=l(f.und(n[3])?0:n[3],.1,100),c=Math.sqrt(r/i),h=s/(2*Math.sqrt(r*i)),u=h<1?c*Math.sqrt(1-h*h):0,d=1,p=h<1?(h*c-o)/u:-o+c;function m(t){var n=e?e*t/1e3:t;return n=h<1?Math.exp(-n*h*c)*(d*Math.cos(u*n)+p*Math.sin(u*n)):(d+p*n)*Math.exp(-n*c),0===t||1===t?t:1-n}return e?m:function(){var e=a.springs[t];if(e)return e;for(var n=0,i=0;;)if(1===m(n+=1/6)){if(++i>=16)break}else i=0;var r=n*(1/6)*1e3;return a.springs[t]=r,r}}function y(t,e){void 0===t&&(t=1),void 0===e&&(e=.5);var n=l(t,1,10),i=l(e,.1,2);return function(t){return 0===t||1===t?t:-n*Math.pow(2,10*(t-1))*Math.sin((t-1-i/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/i)}}function _(t){return void 0===t&&(t=10),function(e){return Math.round(e*t)*(1/t)}}var b=function(){function t(t,e){return 1-3*e+3*t}function e(t,e){return 3*e-6*t}function n(t){return 3*t}function i(i,r,s){return((t(r,s)*i+e(r,s))*i+n(r))*i}function r(i,r,s){return 3*t(r,s)*i*i+2*e(r,s)*i+n(r)}return function(t,e,n,s){if(0<=t&&t<=1&&0<=n&&n<=1){var o=new Float32Array(11);if(t!==e||n!==s)for(var a=0;a<11;++a)o[a]=i(.1*a,t,n);return function(a){return t===e&&n===s?a:0===a||1===a?a:i(function(e){for(var s=0,a=1;10!==a&&o[a]<=e;++a)s+=.1;var l=s+(e-o[--a])/(o[a+1]-o[a])*.1,c=r(l,t,n);return c>=.001?function(t,e,n,s){for(var o=0;o<4;++o){var a=r(e,n,s);if(0===a)return e;e-=(i(e,n,s)-t)/a}return e}(e,l,t,n):0===c?l:function(t,e,n,r,s){var o,a,l=0;do{(o=i(a=e+(n-e)/2,r,s)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++l<10);return a}(e,s,s+.1,t,n)}(a),e,s)}}}}(),x=function(){var t=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],e={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],y],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(t,e){return function(n){return 1-y(t,e)(1-n)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(t,e){return function(n){return n<.5?y(t,e)(2*n)/2:1-y(t,e)(-2*n+2)/2}}]},n={linear:[.25,.25,.75,.75]};for(var i in e)for(var r=0,s=e[i].length;r<s;r++)n["ease"+i+t[r]]=e[i][r];return n}();function w(t,e){if(f.fnc(t))return t;var n=t.split("(")[0],i=x[n],r=g(t);switch(n){case"spring":return v(t,e);case"cubicBezier":return h(b,r);case"steps":return h(_,r);default:return f.fnc(i)?h(i,r):h(b,i)}}function A(t){try{return document.querySelectorAll(t)}catch(e){return}}var E=[];function S(t,e){for(var n=E,i=t.length,r=arguments.length>=2?arguments[1]:void 0,s=0;s<i;s++)if(s in t){var o=t[s];e.call(r,o,s,t)&&n.push(o)}return(E=t).length=0,n}var M=[];function T(t){if(!t.length)return t;var e=M,n=t.pop();do{if(n.constructor===Array)for(var i=0;i<n.length;i++)t.push(n[i]);else e.push(n)}while(t.length&&void 0!==(n=t.pop()));return e.reverse(),M=t,E.length=0,e}function C(t){return f.arr(t)?t:(f.str(t)&&(t=A(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function L(t,e){return t.some(function(t){return t===e})}function P(t){var e={};for(var n in t)e[n]=t[n];return e}function R(t,e){var n=P(t);for(var i in t)n[i]=e.hasOwnProperty(i)?e[i]:t[i];return n}function O(t,e){var n=P(t);for(var i in e)n[i]=f.und(t[i])?e[i]:t[i];return n}var I=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g,D=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,k=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,N=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,B=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g,F=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function z(t){var e=F.exec(t);if(e)return e[2]}function U(t,e){return f.fnc(t)?t(e.target,e.id,e.total):t}function j(t,e){return t.getAttribute(e)}function H(t,e,n){if(L([n,"deg","rad","turn"],z(e)))return e;var i=a.CSS[e+n];if(!f.und(i))return i;var r=document.createElement(t.tagName),s=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;s.appendChild(r),r.style.position="absolute",r.style.width=100+n;var o=100/r.offsetWidth;s.removeChild(r);var l=o*parseFloat(e);return a.CSS[e+n]=l,l}function V(t,e,n){if(e in t.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=t.style[e]||getComputedStyle(t).getPropertyValue(i)||"0";return n?H(t,r,n):r}}function G(t,e){return f.dom(t)&&!f.inp(t)&&(j(t,e)||f.svg(t)&&t[e])?"attribute":f.dom(t)&&L(o,e)?"transform":f.dom(t)&&"transform"!==e&&V(t,e)?"css":null!=t[e]?"object":void 0}var W=/(\w+)\(([^)]*)\)/g;function q(t){if(f.dom(t)){for(var e,n=t.style.transform||"",i=new Map;e=W.exec(n);)i.set(e[1],e[2]);return i}}function X(t,e,n,i){switch(G(t,e)){case"transform":return function(t,e,n,i){var r=c(e,"scale")?1:0+function(t){return c(t,"translate")||"perspective"===t?"px":c(t,"rotate")||c(t,"skew")?"deg":void 0}(e),s=q(t).get(e)||r;return n&&(n.transforms.list.set(e,s),n.transforms.last=e),i?H(t,s,i):s}(t,e,i,n);case"css":return V(t,e,n);case"attribute":return j(t,e);default:return t[e]||0}}var Y=/^(\*=|\+=|-=)/;function Q(t,e){var n=Y.exec(t);if(!n)return t;var i=z(t)||0,r=parseFloat(e),s=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return r+s+i;case"-":return r-s+i;case"*":return r*s+i}}var Z=/\s/g;function K(t,e){if(f.col(t))return function(t){return f.rgb(t)?(n=I.exec(e=t))?"rgba("+n[1]+",1)":e:f.hex(t)?function(e){var n=t.replace(D,function(t,e,n,i){return e+e+n+n+i+i}),i=k.exec(n);return"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+",1)"}():f.hsl(t)?function(t){var e,n,i,r=N.exec(t)||B.exec(t),s=parseInt(r[1],10)/360,o=parseInt(r[2],10)/100,a=parseInt(r[3],10)/100,l=r[4]||1;function c(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(0==o)e=n=i=a;else{var h=a<.5?a*(1+o):a+o-a*o,u=2*a-h;e=c(u,h,s+1/3),n=c(u,h,s),i=c(u,h,s-1/3)}return"rgba("+255*e+","+255*n+","+255*i+","+l+")"}(t):void 0;var e,n}(t);var n=z(t),i=n?t.substr(0,t.length-n.length):t;return e&&!Z.test(t)?i+e:i}function J(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $(t){for(var e,n=t.points,i=0,r=0;r<n.numberOfItems;r++){var s=n.getItem(r);r>0&&(i+=J(e,s)),e=s}return i}function tt(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*j(t,"r")}(t);case"rect":return function(t){return 2*j(t,"width")+2*j(t,"height")}(t);case"line":return function(t){return J({x:j(t,"x1"),y:j(t,"y1")},{x:j(t,"x2"),y:j(t,"y2")})}(t);case"polyline":return $(t);case"polygon":return function(t){var e=t.points;return $(t)+J(e.getItem(e.numberOfItems-1),e.getItem(0))}(t)}}function et(t,e){var n=e||{},i=n.el||function(e){for(var n=t.parentNode;f.svg(n)&&f.svg((n=n.parentNode).parentNode););return n}(),r=i.getBoundingClientRect(),s=j(i,"viewBox"),o=r.width,a=r.height,l=n.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:a/l[3]}}function nt(t,e){function n(n){return void 0===n&&(n=0),t.el.getPointAtLength(e+n>=1?e+n:0)}var i=et(t.el,t.svg),r=n(),s=n(-1),o=n(1);switch(t.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return 180*Math.atan2(o.y-s.y,o.x-s.x)/Math.PI}}var it=/-?\d*\.?\d+/g;function rt(t,e){var n=K(f.pth(t)?t.totalLength:t,e)+"";return{original:n,numbers:n.match(it)?n.match(it).map(Number):[0],strings:f.str(t)||e?n.split(it):[]}}function st(t){return S(t?T(f.arr(t)?t.map(C):C(t)):[],function(t,e,n){return n.indexOf(t)===e})}function ot(t){var e=st(t);return e.map(function(t,n){return{target:t,id:n,total:e.length,transforms:{list:q(t)}}})}var at=/^spring/;function lt(t,e){var n=P(e);if(at.test(n.easing)&&(n.duration=v(n.easing)),f.arr(t)){var i=t.length;2!==i||f.obj(t[0])?f.fnc(e.duration)||(n.duration=e.duration/i):t={value:t}}var r=f.arr(t)?t:[t];return r.map(function(t,n){var i=f.obj(t)&&!f.pth(t)?t:{value:t};return f.und(i.delay)&&(i.delay=n?0:e.delay),f.und(i.endDelay)&&(i.endDelay=n===r.length-1?e.endDelay:0),i}).map(function(t){return O(t,n)})}var ct={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,i,r){if(i.list.set(e,n),e===i.last||r){var s="";i.list.forEach(function(t,e){s+=e+"("+t+") "}),t.style.transform=s}}};function ht(t,e){for(var n=ot(t),i=0,r=n.length;i<r;i++){var s=n[i];for(var o in e){var a=U(e[o],s),l=s.target,c=z(a),h=X(l,o,c,s),u=Q(K(a,c||z(h)),h),d=G(l,o);ct[d](l,o,u,s.transforms,!0)}}}function ut(t,e){var n=t.length,i=function(t){return t.timelineOffset?t.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,t.map(function(t){return i(t)+t.duration})):e.duration,r.delay=n?Math.min.apply(Math,t.map(function(t){return i(t)+t.delay})):e.delay,r.endDelay=n?r.duration-Math.max.apply(Math,t.map(function(t){return i(t)+t.duration-t.endDelay})):e.endDelay,r}var dt,pt=0,ft=[],mt=[],gt=function(){function t(){dt=requestAnimationFrame(e)}function e(e){var n=ft.length;if(n){for(var i=0;i<n;){var r=ft[i];if(r.paused){var s=ft.indexOf(r);s>-1&&(ft.splice(s,1),n=ft.length)}else r.tick(e);i++}t()}else dt=cancelAnimationFrame(dt)}return t}();function vt(t){void 0===t&&(t={});var e,n=0,i=0,o=0,a=0,c=null;function h(){return window.Promise&&new Promise(function(t){return c=t})}var u=h(),d=function(t){var e=R(r,t),n=R(s,t),i=function(t,e){var n=[],i=e.keyframes;for(var r in i&&(e=O(function(t){for(var e=S(T(t.map(function(t){return Object.keys(t)})),function(t){return f.key(t)}).reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[]),n={},i=function(i){var r=e[i];n[r]=t.map(function(t){var e={};for(var n in t)f.key(n)?n==r&&(e.value=t[n]):e[n]=t[n];return e})},r=0;r<e.length;r++)i(r);return n}(i),e)),e)f.key(r)&&n.push({name:r,tweens:lt(e[r],t)});return n}(n,t),o=ot(t.targets),a=function(t,e){return S(T(t.map(function(t){return e.map(function(e){return function(t,e){var n=G(t.target,e.name);if(n){var i=function(t,e){var n;return t.tweens.map(function(i){var r=function(t,e){var n={};for(var i in t){var r=U(t[i],e);f.arr(r)&&1===(r=r.map(function(t){return U(t,e)})).length&&(r=r[0]),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,e),s=r.value,o=f.arr(s)?s[1]:s,a=z(o),l=X(e.target,t.name,a,e),c=n?n.to.original:l,h=f.arr(s)?s[0]:c,u=z(h)||z(l),d=a||u;return f.und(o)&&(o=c),r.from=rt(h,d),r.to=rt(Q(o,h),d),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=w(r.easing,r.duration),r.isPath=f.pth(s),r.isColor=f.col(r.from.original),r.isColor&&(r.round=1),n=r,r})}(e,t),r=i[i.length-1];return{type:n,property:e.name,animatable:t,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}(t,e)})})),function(t){return!f.und(t)})}(o,i),l=ut(a,n),c=pt;return pt++,O(e,{id:c,children:[],animatables:o,animations:a,duration:l.duration,delay:l.delay,endDelay:l.endDelay})}(t);function p(){d.reversed=!d.reversed;for(var t=0,n=e.length;t<n;t++)e[t].reversed=d.reversed}function m(t){return d.reversed?d.duration-t:t}function g(){n=0,i=m(d.currentTime)*(1/vt.speed)}function v(t,e){e&&e.seek(t-e.timelineOffset)}function y(t){for(var e=0,n=d.animations,i=n.length;e<i;){var r=n[e],s=r.animatable,o=r.tweens,a=o.length-1,c=o[a];a&&(c=S(o,function(e){return t<e.end})[0]||c);for(var h=l(t-c.start-c.delay,0,c.duration)/c.duration,u=isNaN(h)?1:c.easing(h),p=c.to.strings,f=c.round,m=[],g=c.to.numbers.length,v=void 0,y=0;y<g;y++){var _=void 0,b=c.to.numbers[y],x=c.from.numbers[y]||0;_=c.isPath?nt(c.value,u*b):x+u*(b-x),f&&(c.isColor&&y>2||(_=Math.round(_*f)/f)),m.push(_)}var w=p.length;if(w){v=p[0];for(var A=0;A<w;A++){var E=p[A+1],M=m[A];isNaN(M)||(v+=E?M+E:M+" ")}}else v=m[0];ct[r.type](s.target,r.property,v,s.transforms),r.currentValue=v,e++}}function _(t){d[t]&&!d.passThrough&&d[t](d)}function b(t){var r=d.duration,s=d.delay,f=r-d.endDelay,g=m(t);d.progress=l(g/r*100,0,100),d.reversePlayback=g<d.currentTime,e&&function(t){if(d.reversePlayback)for(var n=a;n--;)v(t,e[n]);else for(var i=0;i<a;i++)v(t,e[i])}(g),!d.began&&d.currentTime>0&&(d.began=!0,_("begin"),_("loopBegin")),g<=s&&0!==d.currentTime&&y(0),(g>=f&&d.currentTime!==r||!r)&&y(r),g>s&&g<f?(d.changeBegan||(d.changeBegan=!0,d.changeCompleted=!1,_("changeBegin")),_("change"),y(g)):d.changeBegan&&(d.changeCompleted=!0,d.changeBegan=!1,_("changeComplete")),d.currentTime=l(g,0,r),d.began&&_("update"),t>=r&&(i=0,d.remaining&&!0!==d.remaining&&d.remaining--,d.remaining?(n=o,_("loopComplete"),_("loopBegin"),"alternate"===d.direction&&p()):(d.paused=!0,d.completed||(d.completed=!0,_("loopComplete"),_("complete"),"Promise"in window&&(c(),u=h()))))}return d.reset=function(){var t=d.direction;d.passThrough=!1,d.currentTime=0,d.progress=0,d.paused=!0,d.began=!1,d.changeBegan=!1,d.completed=!1,d.changeCompleted=!1,d.reversePlayback=!1,d.reversed="reverse"===t,d.remaining=d.loop;for(var n=a=(e=d.children).length;n--;)d.children[n].reset();(d.reversed&&!0!==d.loop||"alternate"===t&&1===d.loop)&&d.remaining++,y(0)},d.set=function(t,e){return ht(t,e),d},d.tick=function(t){o=t,n||(n=o),b((o+(i-n))*vt.speed)},d.seek=function(t){b(m(t))},d.pause=function(){d.paused=!0,g()},d.play=function(){d.paused&&(d.paused=!1,ft.push(d),g(),dt||gt())},d.reverse=function(){p(),g()},d.restart=function(){d.reset(),d.play()},d.finished=u,d.reset(),d.autoplay&&d.play(),d}function yt(t,e){for(var n=e.length;n--;)L(t,e[n].animatable.target)&&e.splice(n,1)}document.addEventListener("visibilitychange",function(){if(document.hidden){for(var t=0,e=ft.length;t<e;t++)activeInstance[t].pause();mt=ft.slice(0),ft=[]}else for(var n=0,i=mt.length;n<i;n++)mt[n].play()}),vt.version="3.0.0",vt.speed=1,vt.running=ft,vt.remove=function(t){for(var e=st(t),n=ft.length;n--;){var i=ft[n],r=i.animations,s=i.children;yt(e,r);for(var o=s.length;o--;){var a=s[o],l=a.animations;yt(e,l),l.length||a.children.length||s.splice(o,1)}r.length||s.length||i.pause()}},vt.get=X,vt.set=ht,vt.convertPx=H,vt.path=function(t,e){var n=f.str(t)?A(t)[0]:t,i=e||100;return function(t){return{property:t,el:n,svg:et(n),totalLength:tt(n)*(i/100)}}},vt.setDashoffset=function(t){var e=tt(t);return t.setAttribute("stroke-dasharray",e),e},vt.stagger=function(t,e){void 0===e&&(e={});var n=e.direction||"normal",i=e.easing?w(e.easing):null,r=e.grid,s=e.axis,o=e.from||0,a="first"===o,l="center"===o,c="last"===o,h=f.arr(t),u=h?parseFloat(t[0]):parseFloat(t),d=h?parseFloat(t[1]):0,p=z(h?t[1]:t)||0,m=e.start||0+(h?u:0),g=[],v=0;return function(t,e,f){if(a&&(o=0),l&&(o=(f-1)/2),c&&(o=f-1),!g.length){for(var y=0;y<f;y++){if(r){var _=l?(r[0]-1)/2:o%r[0],b=l?(r[1]-1)/2:Math.floor(o/r[0]),x=_-y%r[0],w=b-Math.floor(y/r[0]),A=Math.sqrt(x*x+w*w);"x"===s&&(A=-x),"y"===s&&(A=-w),g.push(A)}else g.push(Math.abs(o-y));v=Math.max.apply(Math,g)}i&&(g=g.map(function(t){return i(t/v)*v})),"reverse"===n&&(g=g.map(function(t){return s?t<0?-1*t:-t:Math.abs(v-t)}))}return m+(h?(d-u)/v:u)*(Math.round(100*g[e])/100)+p}},vt.timeline=function(t){void 0===t&&(t={});var e=vt(t);return e.duration=0,e.add=function(n,i){var r=ft.indexOf(e),o=e.children;function a(t){t.passThrough=!0}r>-1&&ft.splice(r,1);for(var l=0;l<o.length;l++)a(o[l]);var c=O(n,R(s,t));c.targets=c.targets||t.targets;var h=e.duration;c.autoplay=!1,c.direction=e.direction,c.timelineOffset=f.und(i)?h:Q(i,h),a(e),e.seek(c.timelineOffset);var u=vt(c);a(u),o.push(u);var d=ut(o,t);return e.delay=d.delay,e.endDelay=d.endDelay,e.duration=d.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e},vt.easing=w,vt.penner=x,vt.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},n.exports=vt},{}],36:[function(t,n,i){!function(t,r){!function(t){"use strict";function n(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),Object.assign(n.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});var i,r,s,o,a,l,c,h,u,d,p,f,m="103dev",g=0,v=1,y=2,_=1,b=2,x=0,w=1,A=2,E=0,S=1,M=2,T=0,C=1,L=2,P=3,R=4,O=5,I=100,D=101,k=102,N=103,B=104,F=200,z=201,U=202,j=203,H=204,V=205,G=206,W=207,q=208,X=209,Y=210,Q=0,Z=1,K=2,J=3,$=4,tt=5,et=6,nt=7,it=0,rt=1,st=2,ot=0,at=1,lt=2,ct=3,ht=4,ut=5,dt=301,pt=302,ft=303,mt=304,gt=305,vt=306,yt=307,_t=1e3,bt=1001,xt=1002,wt=1003,At=1004,Et=1005,St=1006,Mt=1007,Tt=1008,Ct=1009,Lt=1010,Pt=1011,Rt=1012,Ot=1013,It=1014,Dt=1015,kt=1016,Nt=1017,Bt=1018,Ft=1019,zt=1020,Ut=1021,jt=1022,Ht=1023,Vt=1024,Gt=1025,Wt=Ht,qt=1026,Xt=1027,Yt=1028,Qt=33776,Zt=33777,Kt=33778,Jt=33779,$t=35840,te=35841,ee=35842,ne=35843,ie=36196,re=37808,se=37809,oe=37810,ae=37811,le=37812,ce=37813,he=37814,ue=37815,de=37816,pe=37817,fe=37818,me=37819,ge=37820,ve=37821,ye=2201,_e=2400,be=0,xe=1,we=2,Ae=3e3,Ee=3001,Se=3007,Me=3002,Te=3004,Ce=3005,Le=3006,Pe=3200,Re=3201,Oe=0,Ie=1,De={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&i|128]+t[i>>8&255]+"-"+t[i>>16&255]+t[i>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*De.DEG2RAD},radToDeg:function(t){return t*De.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function ke(t,e){this.x=t||0,this.y=e||0}function Ne(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Be(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function Fe(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function ze(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(ke.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(ke.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(i=new ke,r=new ke,function(t,e){return i.set(t,t),r.set(e,e),this.clamp(i,r)}),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}}),Object.assign(Ne.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,s,o,a,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ne).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:(d=new Fe,function(t){var e=this.elements,n=t.elements,i=1/d.setFromMatrixColumn(t,0).length(),r=1/d.setFromMatrixColumn(t,1).length(),s=1/d.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){var u=s*c,d=s*h,p=o*c,f=o*h;e[0]=a*c,e[4]=-a*h,e[8]=l,e[1]=d+p*l,e[5]=u-f*l,e[9]=-o*a,e[2]=f-u*l,e[6]=p+d*l,e[10]=s*a}else if("YXZ"===t.order){var m=a*h,g=l*c;e[0]=(v=a*c)+(y=l*h)*o,e[4]=g*o-m,e[8]=s*l,e[1]=s*h,e[5]=s*c,e[9]=-o,e[2]=m*o-g,e[6]=y+v*o,e[10]=s*a}else if("ZXY"===t.order){var v,y;m=a*h,g=l*c,e[0]=(v=a*c)-(y=l*h)*o,e[4]=-s*h,e[8]=g+m*o,e[1]=m+g*o,e[5]=s*c,e[9]=y-v*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order)u=s*c,d=s*h,p=o*c,f=o*h,e[0]=a*c,e[4]=p*l-d,e[8]=u*l+f,e[1]=a*h,e[5]=f*l+u,e[9]=d*l-p,e[2]=-l,e[6]=o*a,e[10]=s*a;else if("YZX"===t.order){var _=s*a,b=s*l,x=o*a,w=o*l;e[0]=a*c,e[4]=w-_*h,e[8]=x*h+b,e[1]=h,e[5]=s*c,e[9]=-o*c,e[2]=-l*c,e[6]=b*h+x,e[10]=_-w*h}else"XZY"===t.order&&(_=s*a,b=s*l,x=o*a,w=o*l,e[0]=a*c,e[4]=-h,e[8]=l*c,e[1]=_*h+w,e[5]=s*c,e[9]=b*h-x,e[2]=x*h-b,e[6]=o*c,e[10]=w*h+_);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:(h=new Fe(0,0,0),u=new Fe(1,1,1),function(t){return this.compose(h,t,u)}),lookAt:(a=new Fe,l=new Fe,c=new Fe,function(t,e,n){var i=this.elements;return c.subVectors(t,e),0===c.lengthSq()&&(c.z=1),c.normalize(),a.crossVectors(n,c),0===a.lengthSq()&&(1===Math.abs(n.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),a.crossVectors(n,c)),a.normalize(),l.crossVectors(c,a),i[0]=a.x,i[4]=l.x,i[8]=c.x,i[1]=a.y,i[5]=l.y,i[9]=c.y,i[2]=a.z,i[6]=l.z,i[10]=c.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],x=i[0],w=i[4],A=i[8],E=i[12],S=i[1],M=i[5],T=i[9],C=i[13],L=i[2],P=i[6],R=i[10],O=i[14],I=i[3],D=i[7],k=i[11],N=i[15];return r[0]=s*x+o*S+a*L+l*I,r[4]=s*w+o*M+a*P+l*D,r[8]=s*A+o*T+a*R+l*k,r[12]=s*E+o*C+a*O+l*N,r[1]=c*x+h*S+u*L+d*I,r[5]=c*w+h*M+u*P+d*D,r[9]=c*A+h*T+u*R+d*k,r[13]=c*E+h*C+u*O+d*N,r[2]=p*x+f*S+m*L+g*I,r[6]=p*w+f*M+m*P+g*D,r[10]=p*A+f*T+m*R+g*k,r[14]=p*E+f*C+m*O+g*N,r[3]=v*x+y*S+_*L+b*I,r[7]=v*w+y*M+_*P+b*D,r[11]=v*A+y*T+_*R+b*k,r[15]=v*E+y*C+_*O+b*N,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new Fe;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*a*h-i*l*h-r*o*u+n*l*u+i*o*d-n*a*d)+t[7]*(+e*a*d-e*l*u+r*s*u-i*s*d+i*l*c-r*a*c)+t[11]*(+e*l*h-e*o*d-r*s*h+n*s*d+r*o*c-n*l*c)+t[15]*(-i*o*c-e*a*h+e*o*u+i*s*h-n*s*u+n*a*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],_=i[15],b=p*y*u-v*f*u+v*h*m-c*y*m-p*h*_+c*f*_,x=g*f*u-d*y*u-g*h*m+l*y*m+d*h*_-l*f*_,w=d*v*u-g*p*u+g*c*m-l*v*m-d*c*_+l*p*_,A=g*p*h-d*v*h-g*c*f+l*v*f+d*c*y-l*p*y,E=r*b+s*x+o*w+a*A;if(0===E){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var M=1/E;return n[0]=b*M,n[1]=(v*f*a-p*y*a-v*o*m+s*y*m+p*o*_-s*f*_)*M,n[2]=(c*y*a-v*h*a+v*o*u-s*y*u-c*o*_+s*h*_)*M,n[3]=(p*h*a-c*f*a-p*o*u+s*f*u+c*o*m-s*h*m)*M,n[4]=x*M,n[5]=(d*y*a-g*f*a+g*o*m-r*y*m-d*o*_+r*f*_)*M,n[6]=(g*h*a-l*y*a-g*o*u+r*y*u+l*o*_-r*h*_)*M,n[7]=(l*f*a-d*h*a+d*o*u-r*f*u-l*o*m+r*h*m)*M,n[8]=w*M,n[9]=(g*p*a-d*v*a-g*s*m+r*v*m+d*s*_-r*p*_)*M,n[10]=(l*v*a-g*c*a+g*s*u-r*v*u-l*s*_+r*c*_)*M,n[11]=(d*c*a-l*p*a-d*s*u+r*p*u+l*s*m-r*c*m)*M,n[12]=A*M,n[13]=(d*v*o-g*p*o+g*s*f-r*v*f-d*s*y+r*p*y)*M,n[14]=(g*c*o-l*v*o-g*s*h+r*v*h+l*s*y-r*c*y)*M,n[15]=(l*p*o-d*c*o+d*s*h-r*p*h-l*s*f+r*c*f)*M,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,c=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+n,c*a-i*s,0,l*a-i*o,c*a+i*s,r*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,c=s+s,h=o+o,u=r*l,d=r*c,p=r*h,f=s*c,m=s*h,g=o*h,v=a*l,y=a*c,_=a*h,b=n.x,x=n.y,w=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+_)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-_)*x,i[5]=(1-(u+g))*x,i[6]=(m+v)*x,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(u+f))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:(s=new Fe,o=new Ne,function(t,e,n){var i=this.elements,r=s.set(i[0],i[1],i[2]).length(),a=s.set(i[4],i[5],i[6]).length(),l=s.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],o.copy(this);var c=1/r,h=1/a,u=1/l;return o.elements[0]*=c,o.elements[1]*=c,o.elements[2]*=c,o.elements[4]*=h,o.elements[5]*=h,o.elements[6]*=h,o.elements[8]*=u,o.elements[9]*=u,o.elements[10]*=u,e.setFromRotationMatrix(o),n.x=r,n.y=a,n.z=l,this}),makePerspective:function(t,e,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*r/(n-i),l=(e+t)/(e-t),c=(n+i)/(n-i),h=-(s+r)/(s-r),u=-2*s*r/(s-r);return o[0]=2*r/(e-t),o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=a,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=u,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,s){var o=this.elements,a=1/(e-t),l=1/(n-i),c=1/(s-r),h=(e+t)*a,u=(n+i)*l,d=(s+r)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(Be,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,s,o){var a=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3],u=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(h!==f||a!==u||l!==d||c!==p){var m=1-o,g=a*u+l*d+c*p+h*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,g*v);m=Math.sin(m*b)/_,o=Math.sin(o*b)/_}var x=o*v;if(a=a*m+u*x,l=l*m+d*x,c=c*m+p*x,h=h*m+f*x,m===1-o){var w=1/Math.sqrt(a*a+l*l+c*c+h*h);a*=w,l*=w,c*=w,h*=w}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=h}}),Object.defineProperties(Be.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(Be.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,s=t.order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),h=o(r/2),u=a(n/2),d=a(i/2),p=a(r/2);return"XYZ"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p):"YXZ"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p):"ZXY"===s?(this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p):"ZYX"===s?(this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p):"YZX"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p):"XZY"===s&&(this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],h=n[6],u=n[10],d=i+a+u;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(h-l)*e,this._y=(s-c)*e,this._z=(o-r)*e):i>a&&i>u?(e=2*Math.sqrt(1+i-a-u),this._w=(h-l)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(s+c)/e):a>u?(e=2*Math.sqrt(1+a-i-u),this._w=(s-c)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(l+h)/e):(e=2*Math.sqrt(1+u-i-a),this._w=(o-r)/e,this._x=(s+c)/e,this._y=(l+h)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new Fe;return function(n,i){return void 0===e&&(e=new Fe),(t=n.dot(i)+1)<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),angleTo:function(t){return 2*Math.acos(Math.abs(De.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,s=this._w,o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;var a=1-o*o;if(a<=Number.EPSILON){var l=1-e;return this._w=l*s+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize()}var c=Math.sqrt(a),h=Math.atan2(c,o),u=Math.sin((1-e)*h)/c,d=Math.sin(e*h)/c;return this._w=s*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(Fe.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(p=new Be,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(p.setFromEuler(t))}),applyAxisAngle:function(){var t=new Be;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,c=a*n+o*e-r*i,h=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+c*-o-h*-s,this.y=c*a+u*-s+h*-r-l*-o,this.z=h*a+u*-o+l*-s-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(){var t=new Ne;return function(e){return this.applyMatrix4(t.getInverse(e.projectionMatrix)).applyMatrix4(e.matrixWorld)}}(),transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new Fe,e=new Fe;return function(n,i){return t.set(n,n,n),e.set(i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new Fe;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new Fe;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(De.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(ze.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,s,o,a,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new Fe;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],_=i[7],b=i[2],x=i[5],w=i[8];return r[0]=s*f+o*v+a*b,r[3]=s*m+o*y+a*x,r[6]=s*g+o*_+a*w,r[1]=l*f+c*v+h*b,r[4]=l*m+c*y+h*x,r[7]=l*g+c*_+h*w,r[2]=u*f+d*v+p*b,r[5]=u*m+d*y+p*x,r[8]=u*g+d*_+p*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*s*c-e*o*l-n*r*c+n*o*a+i*r*l-i*s*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],h=n[6],u=n[7],d=n[8],p=d*l-c*u,f=c*h-d*a,m=u*a-l*h,g=r*p+s*f+o*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return i[0]=p*y,i[1]=(o*u-d*s)*y,i[2]=(c*s-o*l)*y,i[3]=f*y,i[4]=(d*r-o*h)*y,i[5]=(o*a-c*r)*y,i[6]=m*y,i[7]=(s*h-u*r)*y,i[8]=(l*r-s*a)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,s,o){var a=Math.cos(r),l=Math.sin(r);this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],s=i[3],o=i[6],a=i[1],l=i[4],c=i[7];return i[0]=e*r+n*a,i[3]=e*s+n*l,i[6]=e*o+n*c,i[1]=-n*r+e*a,i[4]=-n*s+e*l,i[7]=-n*o+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Ue,je,He,Ve,Ge,We={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===f&&(f=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),f.width=t.width,f.height=t.height;var n=f.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=f}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},qe=0;function Xe(t,e,n,i,r,s,o,a,l,c){Object.defineProperty(this,"id",{value:qe++}),this.uuid=De.generateUUID(),this.name="",this.image=void 0!==t?t:Xe.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:Xe.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:bt,this.wrapT=void 0!==i?i:bt,this.magFilter=void 0!==r?r:St,this.minFilter=void 0!==s?s:Tt,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:Ht,this.type=void 0!==a?a:Ct,this.offset=new ke(0,0),this.repeat=new ke(1,1),this.center=new ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ze,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Ae,this.version=0,this.onUpdate=null}function Ye(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function Qe(t,e,n){this.width=t,this.height=e,this.scissor=new Ye(0,0,t,e),this.scissorTest=!1,this.viewport=new Ye(0,0,t,e),this.texture=new Xe(void 0,void 0,(n=n||{}).wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:St,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Ze(t,e,n){Qe.call(this,t,e,n),this.samples=4}function Ke(t,e,n){Qe.call(this,t,e,n)}function Je(t,e,n,i,r,s,o,a,l,c,h,u){Xe.call(this,null,s,o,a,l,c,i,r,h,u),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:wt,this.minFilter=void 0!==c?c:wt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function $e(t,e){this.min=void 0!==t?t:new Fe(1/0,1/0,1/0),this.max=void 0!==e?e:new Fe(-1/0,-1/0,-1/0)}function tn(t,e){this.center=void 0!==t?t:new Fe,this.radius=void 0!==e?e:0}function en(t,e){this.normal=void 0!==t?t:new Fe(1,0,0),this.constant=void 0!==e?e:0}function nn(t,e,n,i,r,s){this.planes=[void 0!==t?t:new en,void 0!==e?e:new en,void 0!==n?n:new en,void 0!==i?i:new en,void 0!==r?r:new en,void 0!==s?s:new en]}Xe.DEFAULT_IMAGE=void 0,Xe.DEFAULT_MAPPING=300,Xe.prototype=Object.assign(Object.create(n.prototype),{constructor:Xe,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=De.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var s=0,o=i.length;s<o;s++)r.push(We.getDataURL(i[s]))}else r=We.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case _t:t.x=t.x-Math.floor(t.x);break;case bt:t.x=t.x<0?0:1;break;case xt:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case _t:t.y=t.y-Math.floor(t.y);break;case bt:t.y=t.y<0?0:1;break;case xt:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Xe.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ye.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],u=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-d)<.01&&Math.abs(u-p)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+d)<.1&&Math.abs(u+p)<.1&&Math.abs(o+h+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(h+1)/2,v=(f+1)/2,y=(a+c)/4,_=(l+d)/4,b=(u+p)/4;return m>g&&m>v?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=_/n):g>v?g<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(g)),r=b/i):v<.01?(n=.707106781,i=.707106781,r=0):(n=_/(r=Math.sqrt(v)),i=b/r),this.set(n,i,r,e),this}var x=Math.sqrt((p-u)*(p-u)+(l-d)*(l-d)+(c-a)*(c-a));return Math.abs(x)<.001&&(x=1),this.x=(p-u)/x,this.y=(l-d)/x,this.z=(c-a)/x,this.w=Math.acos((o+h+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new Ye,e=new Ye),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Qe.prototype=Object.assign(Object.create(n.prototype),{constructor:Qe,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ze.prototype=Object.assign(Object.create(Qe.prototype),{constructor:Ze,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Qe.prototype.copy.call(this,t),this.samples=t.samples,this}}),(Ke.prototype=Object.create(Qe.prototype)).constructor=Ke,Ke.prototype.isWebGLRenderTargetCube=!0,(Je.prototype=Object.create(Xe.prototype)).constructor=Je,Je.prototype.isDataTexture=!0,Object.assign($e.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0,a=0,l=t.length;a<l;a+=3){var c=t[a],h=t[a+1],u=t[a+2];c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0,a=0,l=t.count;a<l;a++){var c=t.getX(a),h=t.getY(a),u=t.getZ(a);c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new Fe;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Fe),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Fe),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,n,i=new Fe;function r(r){var s=r.geometry;if(void 0!==s)if(s.isGeometry){var o=s.vertices;for(e=0,n=o.length;e<n;e++)i.copy(o[e]),i.applyMatrix4(r.matrixWorld),t.expandByPoint(i)}else if(s.isBufferGeometry){var a=s.attributes.position;if(void 0!==a)for(e=0,n=a.count;e<n;e++)i.fromBufferAttribute(a,e).applyMatrix4(r.matrixWorld),t.expandByPoint(i)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(r),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Fe),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(je=new Fe,function(t){return this.clampPoint(t.center,je),je.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(){var t=new Fe,e=new Fe,n=new Fe,i=new Fe,r=new Fe,s=new Fe,o=new Fe,a=new Fe,l=new Fe,c=new Fe;function h(i){var r,s;for(r=0,s=i.length-3;r<=s;r+=3){o.fromArray(i,r);var a=l.x*Math.abs(o.x)+l.y*Math.abs(o.y)+l.z*Math.abs(o.z),c=t.dot(o),h=e.dot(o),u=n.dot(o);if(Math.max(-Math.max(c,h,u),Math.min(c,h,u))>a)return!1}return!0}return function(o){if(this.isEmpty())return!1;this.getCenter(a),l.subVectors(this.max,a),t.subVectors(o.a,a),e.subVectors(o.b,a),n.subVectors(o.c,a),i.subVectors(e,t),r.subVectors(n,e),s.subVectors(t,n);var u=[0,-i.z,i.y,0,-r.z,r.y,0,-s.z,s.y,i.z,0,-i.x,r.z,0,-r.x,s.z,0,-s.x,-i.y,i.x,0,-r.y,r.x,0,-s.y,s.x,0];return!!h(u)&&!!h(u=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(i,r),h(u=[c.x,c.y,c.z]))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Fe),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new Fe;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new Fe;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new tn),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(Ue=[new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe],function(t){return this.isEmpty()?this:(Ue[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ue[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ue[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ue[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ue[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ue[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ue[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ue[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ue),this)}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(tn.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(He=new $e,function(t,e){var n=this.center;void 0!==e?n.copy(e):He.setFromPoints(t).getCenter(n);for(var i=0,r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Fe),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new $e),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(en.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new Fe,e=new Fe;return function(n,i,r){var s=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(s,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Fe),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new Fe;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Fe);var i=e.delta(t),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?n.copy(e.start):void 0;var s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?void 0:n.copy(i).multiplyScalar(s).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Fe),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new Fe,e=new ze;return function(n,i){var r=i||e.getNormalMatrix(n),s=this.coplanarPoint(t).applyMatrix4(n),o=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(o),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(nn.prototype,{set:function(t,e,n,i,r,s){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(o-i,h-a,f-u,y-m).normalize(),e[1].setComponents(o+i,h+a,f+u,y+m).normalize(),e[2].setComponents(o+r,h+l,f+d,y+g).normalize(),e[3].setComponents(o-r,h-l,f-d,y-g).normalize(),e[4].setComponents(o-s,h-c,f-p,y-v).normalize(),e[5].setComponents(o+s,h+c,f+p,y+v).normalize(),this},intersectsObject:(Ge=new tn,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ge.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ge)}),intersectsSprite:function(){var t=new tn;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0},intersectsBox:(Ve=new Fe,function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(Ve.x=i.normal.x>0?t.max.x:t.min.x,Ve.y=i.normal.y>0?t.max.y:t.min.y,Ve.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Ve)<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var rn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};function sn(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];e[n][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?r.clone():Array.isArray(r)?r.slice():r}return e}function on(t){for(var e={},n=0;n<t.length;n++){var i=sn(t[n]);for(var r in i)e[r]=i[r]}return e}var an,ln,cn,hn={clone:sn,merge:on},un={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dn(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}Object.assign(dn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){if(e=De.euclideanModulo(e,1),n=De.clamp(n,0,1),i=De.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,s=2*i-r;this.r=t(s,r,e+1/3),this.g=t(s,r,e),this.b=t(s,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[2];switch(n[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var s=parseFloat(i[1])/360,o=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(s,o,a)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l,c=(l=n[1]).length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0&&(void 0!==(l=un[t])?this.setHex(l):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,s=this.b,o=Math.max(i,r,s),a=Math.min(i,r,s),l=(a+o)/2;if(a===o)e=0,n=0;else{var c=o-a;switch(n=l<=.5?c/(o+a):c/(2-o-a),o){case i:e=(r-s)/c+(r<s?6:0);break;case r:e=(s-i)/c+2;break;case s:e=(i-r)/c+4}e/=6}return t.h=e,t.s=n,t.l=l,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(cn={},function(t,e,n){return this.getHSL(cn),cn.h+=t,cn.s+=e,cn.l+=n,this.setHSL(cn.h,cn.s,cn.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:(an={h:0,s:0,l:0},ln={h:0,s:0,l:0},function(t,e){this.getHSL(an),t.getHSL(ln);var n=De.lerp(an.h,ln.h,e),i=De.lerp(an.s,ln.s,e),r=De.lerp(an.l,ln.l,e);return this.setHSL(n,i,r),this}),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var pn,fn={common:{diffuse:{value:new dn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ze},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new dn(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new dn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new ze}},sprite:{diffuse:{value:new dn(15658734)},opacity:{value:1},center:{value:new ke(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new ze}}},mn={basic:{uniforms:on([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.fog]),vertexShader:rn.meshbasic_vert,fragmentShader:rn.meshbasic_frag},lambert:{uniforms:on([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.fog,fn.lights,{emissive:{value:new dn(0)}}]),vertexShader:rn.meshlambert_vert,fragmentShader:rn.meshlambert_frag},phong:{uniforms:on([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.gradientmap,fn.fog,fn.lights,{emissive:{value:new dn(0)},specular:{value:new dn(1118481)},shininess:{value:30}}]),vertexShader:rn.meshphong_vert,fragmentShader:rn.meshphong_frag},standard:{uniforms:on([fn.common,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.roughnessmap,fn.metalnessmap,fn.fog,fn.lights,{emissive:{value:new dn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag},matcap:{uniforms:on([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,{matcap:{value:null}}]),vertexShader:rn.meshmatcap_vert,fragmentShader:rn.meshmatcap_frag},points:{uniforms:on([fn.points,fn.fog]),vertexShader:rn.points_vert,fragmentShader:rn.points_frag},dashed:{uniforms:on([fn.common,fn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rn.linedashed_vert,fragmentShader:rn.linedashed_frag},depth:{uniforms:on([fn.common,fn.displacementmap]),vertexShader:rn.depth_vert,fragmentShader:rn.depth_frag},normal:{uniforms:on([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,{opacity:{value:1}}]),vertexShader:rn.normal_vert,fragmentShader:rn.normal_frag},sprite:{uniforms:on([fn.sprite,fn.fog]),vertexShader:rn.sprite_vert,fragmentShader:rn.sprite_frag},background:{uniforms:{uvTransform:{value:new ze},t2D:{value:null}},vertexShader:rn.background_vert,fragmentShader:rn.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rn.cube_vert,fragmentShader:rn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rn.equirect_vert,fragmentShader:rn.equirect_frag},distanceRGBA:{uniforms:on([fn.common,fn.displacementmap,{referencePosition:{value:new Fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rn.distanceRGBA_vert,fragmentShader:rn.distanceRGBA_frag},shadow:{uniforms:on([fn.lights,fn.fog,{color:{value:new dn(0)},opacity:{value:1}}]),vertexShader:rn.shadow_vert,fragmentShader:rn.shadow_frag}};function gn(){var t=null,e=!1,n=null;function i(r,s){!1!==e&&(n(r,s),t.requestAnimationFrame(i))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(i),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function vn(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);i&&(t.deleteBuffer(i.buffer),e.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);void 0===r?e.set(n,function(e,n){var i=e.array,r=e.dynamic?35048:35044,s=t.createBuffer();t.bindBuffer(n,s),t.bufferData(n,i,r),e.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:s,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(n,i)):r.version<n.version&&(function(e,n,i){var s=n.array,o=n.updateRange;t.bindBuffer(i,r.buffer),!1===n.dynamic?t.bufferData(i,s,35044):-1===o.count?t.bufferSubData(i,0,s):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(0,n,i),r.version=n.version)}}}function yn(t,e,n,i,r,s){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new Fe,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new dn,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==s?s:0}function _n(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||_n.DefaultOrder}function bn(){this.mask=1}mn.physical={uniforms:on([mn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag},Object.assign(yn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),_n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],_n.DefaultOrder="XYZ",Object.defineProperties(_n.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(_n.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=De.clamp,r=t.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],p=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s))):"ZYX"===e?(this._y=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,p))):"XZY"===e?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new Ne;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(pn=new Be,function(t){return pn.setFromEuler(this),this.setFromQuaternion(pn,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Fe(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(bn.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var xn,wn,An,En,Sn=0;function Mn(){Object.defineProperty(this,"id",{value:Sn++}),this.uuid=De.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mn.DefaultUp.clone();var t=new Fe,e=new _n,n=new Be,i=new Fe(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ne},normalMatrix:{value:new ze}}),this.matrix=new Ne,this.matrixWorld=new Ne,this.matrixAutoUpdate=Mn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new bn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Mn.DefaultUp=new Fe(0,1,0),Mn.DefaultMatrixAutoUpdate=!0,Mn.prototype=Object.assign(Object.create(n.prototype),{constructor:Mn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(En=new Be,function(t,e){return En.setFromAxisAngle(t,e),this.quaternion.multiply(En),this}),rotateOnWorldAxis:function(){var t=new Be;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new Fe(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new Fe(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new Fe(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new Fe;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new Fe(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new Fe(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new Fe(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(An=new Ne,function(t){return t.applyMatrix4(An.getInverse(this.matrixWorld))}),lookAt:function(){var t=new Be,e=new Ne,n=new Fe,i=new Fe;return function(r,s,o){r.isVector3?n.copy(r):n.set(r,s,o);var a=this.parent;this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(i,n,this.up):e.lookAt(n,i,this.up),this.quaternion.setFromRotationMatrix(e),a&&(e.extractRotation(a.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Fe),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(xn=new Fe,wn=new Fe,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Be),this.updateMatrixWorld(!0),this.matrixWorld.decompose(xn,t,wn),t}),getWorldScale:function(){var t=new Fe,e=new Be;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Fe),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Fe),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,s=i.length;r<s;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==be&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var o=s.shapes;if(Array.isArray(o))for(var a=0,l=o.length;a<l;a++)r(t.shapes,o[a]);else r(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(a=0,l=this.material.length;a<l;a++)c.push(r(t.materials,this.material[a]));i.material=c}else i.material=r(t.materials,this.material);if(this.children.length>0)for(i.children=[],a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(t).object);if(e){var h=f(t.geometries),u=f(t.materials),d=f(t.textures),p=f(t.images);o=f(t.shapes),h.length>0&&(n.geometries=h),u.length>0&&(n.materials=u),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=i,n;function f(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}});var Tn,Cn,Ln=0;function Pn(){Object.defineProperty(this,"id",{value:Ln+=2}),this.uuid=De.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Rn(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function On(t,e,n){Rn.call(this,new Int8Array(t),e,n)}function In(t,e,n){Rn.call(this,new Uint8Array(t),e,n)}function Dn(t,e,n){Rn.call(this,new Uint8ClampedArray(t),e,n)}function kn(t,e,n){Rn.call(this,new Int16Array(t),e,n)}function Nn(t,e,n){Rn.call(this,new Uint16Array(t),e,n)}function Bn(t,e,n){Rn.call(this,new Int32Array(t),e,n)}function Fn(t,e,n){Rn.call(this,new Uint32Array(t),e,n)}function zn(t,e,n){Rn.call(this,new Float32Array(t),e,n)}function Un(t,e,n){Rn.call(this,new Float64Array(t),e,n)}function jn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Hn(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}Pn.prototype=Object.assign(Object.create(n.prototype),{constructor:Pn,isGeometry:!0,applyMatrix:function(t){for(var e=(new ze).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new Ne;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Ne;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Ne;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Ne;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new Ne;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:(Cn=new Mn,function(t){Cn.lookAt(t),Cn.updateMatrix(),this.applyMatrix(Cn.matrix)}),fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,i=t.attributes,r=i.position.array,s=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,a=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=0,h=0;c<r.length;c+=3,h+=2)e.vertices.push((new Fe).fromArray(r,c)),void 0!==o&&e.colors.push((new dn).fromArray(o,c));function u(t,n,i,r){var c=void 0===o?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()],h=new yn(t,n,i,void 0===s?[]:[(new Fe).fromArray(s,3*t),(new Fe).fromArray(s,3*n),(new Fe).fromArray(s,3*i)],c,r);e.faces.push(h),void 0!==a&&e.faceVertexUvs[0].push([(new ke).fromArray(a,2*t),(new ke).fromArray(a,2*n),(new ke).fromArray(a,2*i)]),void 0!==l&&e.faceVertexUvs[1].push([(new ke).fromArray(l,2*t),(new ke).fromArray(l,2*n),(new ke).fromArray(l,2*i)])}var d=t.groups;if(d.length>0)for(c=0;c<d.length;c++)for(var p=d[c],f=p.start,m=(h=f,f+p.count);h<m;h+=3)void 0!==n?u(n[h],n[h+1],n[h+2],p.materialIndex):u(h,h+1,h+2,p.materialIndex);else if(void 0!==n)for(c=0;c<n.length;c+=3)u(n[c],n[c+1],n[c+2]);else for(c=0;c<r.length/3;c+=3)u(c,c+1,c+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:(Tn=new Fe,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Tn).negate(),this.translate(Tn.x,Tn.y,Tn.z),this}),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new Ne;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new Fe,e=new Fe,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],s=this.vertices[r.a],o=this.vertices[r.b];t.subVectors(this.vertices[r.c],o),e.subVectors(s,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,s,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)o[e]=new Fe;if(t){var a,l,c=new Fe,h=new Fe;for(i=0,r=this.faces.length;i<r;i++)a=this.vertices[(s=this.faces[i]).a],c.subVectors(this.vertices[s.c],l=this.vertices[s.b]),h.subVectors(a,l),c.cross(h),o[s.a].add(c),o[s.b].add(c),o[s.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(s=this.faces[i]).a].add(s.normal),o[s.b].add(s.normal),o[s.c].add(s.normal);for(e=0,n=this.vertices.length;e<n;e++)o[e].normalize();for(i=0,r=this.faces.length;i<r;i++){var u=(s=this.faces[i]).vertexNormals;3===u.length?(u[0].copy(o[s.a]),u[1].copy(o[s.b]),u[2].copy(o[s.c])):(u[0]=o[s.a].clone(),u[1]=o[s.b].clone(),u[2]=o[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i=(n=this.faces[t]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var s=new Pn;for(s.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,a=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new Fe,c={a:new Fe,b:new Fe,c:new Fe},o.push(l),a.push(c)}var l,c,h=this.morphNormals[t];for(s.vertices=this.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)c=h.vertexNormals[n],(l=h.faceNormals[n]).copy((r=this.faces[n]).normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $e),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new tn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,s=this.vertices,o=t.vertices,a=this.faces,l=t.faces,c=this.faceVertexUvs[0],h=t.faceVertexUvs[0],u=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new ze).getNormalMatrix(e));for(var p=0,f=o.length;p<f;p++){var m=o[p].clone();void 0!==e&&m.applyMatrix4(e),s.push(m)}for(p=0,f=d.length;p<f;p++)u.push(d[p].clone());for(p=0,f=l.length;p<f;p++){var g,v,y=l[p],_=y.vertexNormals,b=y.vertexColors;(g=new yn(y.a+r,y.b+r,y.c+r)).normal.copy(y.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var x=0,w=_.length;x<w;x++)v=_[x].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),g.vertexNormals.push(v);for(g.color.copy(y.color),x=0,w=b.length;x<w;x++)g.vertexColors.push(b[x].clone());g.materialIndex=y.materialIndex+n,a.push(g)}for(p=0,f=h.length;p<f;p++){var A=h[p],E=[];if(void 0!==A){for(x=0,w=A.length;x<w;x++)E.push(A[x].clone());c.push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,i,r,s,o,a,l={},c=[],h=[],u=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],void 0===l[e=Math.round(t.x*u)+"_"+Math.round(t.y*u)+"_"+Math.round(t.z*u)]?(l[e]=n,c.push(this.vertices[n]),h[n]=c.length-1):h[n]=h[l[e]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=h[r.a],r.b=h[r.b],r.c=h[r.c],s=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(s[p]===s[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),o=0,a=this.faceVertexUvs.length;o<a;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new Fe(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var i,r,s=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(s&&s.length===e&&(i=[]),o&&o.length===e&&(r=[]),n=0;n<e;n++){var a=t[n]._id;i&&i.push(s[a]),r&&r.push(o[a])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var s=this.vertices[r];i.push(s.x,s.y,s.z)}var o=[],a=[],l={},c=[],h={},u=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,g=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,_=0;if(_=A(_,0,0),_=A(_,1,!0),_=A(_,2,!1),_=A(_,3,f),_=A(_,4,m),_=A(_,5,g),_=A(_,6,v),_=A(_,7,y),o.push(_),o.push(p.a,p.b,p.c),o.push(p.materialIndex),f){var b=this.faceVertexUvs[0][r];o.push(M(b[0]),M(b[1]),M(b[2]))}if(m&&o.push(E(p.normal)),g){var x=p.vertexNormals;o.push(E(x[0]),E(x[1]),E(x[2]))}if(v&&o.push(S(p.color)),y){var w=p.vertexColors;o.push(S(w[0]),S(w[1]),S(w[2]))}}function A(t,e,n){return n?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=a.length/3,a.push(t.x,t.y,t.z),l[e])}function S(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==h[e]?h[e]:(h[e]=c.length,c.push(t.getHex()),h[e])}function M(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]?d[e]:(d[e]=u.length/2,u.push(t.x,t.y),d[e])}return t.data={},t.data.vertices=i,t.data.normals=a,c.length>0&&(t.data.colors=c),u.length>0&&(t.data.uvs=[u]),t.data.faces=o,t},clone:function(){return(new Pn).copy(this)},copy:function(t){var e,n,i,r,s,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var a=t.vertices;for(e=0,n=a.length;e<n;e++)this.vertices.push(a[e].clone());var l=t.colors;for(e=0,n=l.length;e<n;e++)this.colors.push(l[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var h=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=h.length;i<r;i++){var u=h[i],d=[];for(s=0,o=u.length;s<o;s++)d.push(u[s].clone());this.faceVertexUvs[e].push(d)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var f={};if(f.name=p[e].name,void 0!==p[e].vertices)for(f.vertices=[],i=0,r=p[e].vertices.length;i<r;i++)f.vertices.push(p[e].vertices[i].clone());if(void 0!==p[e].normals)for(f.normals=[],i=0,r=p[e].normals.length;i<r;i++)f.normals.push(p[e].normals[i].clone());this.morphTargets.push(f)}var m=t.morphNormals;for(e=0,n=m.length;e<n;e++){var g={};if(void 0!==m[e].vertexNormals)for(g.vertexNormals=[],i=0,r=m[e].vertexNormals.length;i<r;i++){var v=m[e].vertexNormals[i],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),g.vertexNormals.push(y)}if(void 0!==m[e].faceNormals)for(g.faceNormals=[],i=0,r=m[e].faceNormals.length;i<r;i++)g.faceNormals.push(m[e].faceNormals[i].clone());this.morphNormals.push(g)}var _=t.skinWeights;for(e=0,n=_.length;e<n;e++)this.skinWeights.push(_[e].clone());var b=t.skinIndices;for(e=0,n=b.length;e<n;e++)this.skinIndices.push(b[e].clone());var x=t.lineDistances;for(e=0,n=x.length;e<n;e++)this.lineDistances.push(x[e]);var w=t.boundingBox;null!==w&&(this.boundingBox=w.clone());var A=t.boundingSphere;return null!==A&&(this.boundingSphere=A.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Rn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Rn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new dn),e[n++]=s.r,e[n++]=s.g,e[n++]=s.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new ke),e[n++]=s.x,e[n++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new Fe),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Ye),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z,e[n++]=s.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(On.prototype=Object.create(Rn.prototype)).constructor=On,(In.prototype=Object.create(Rn.prototype)).constructor=In,(Dn.prototype=Object.create(Rn.prototype)).constructor=Dn,(kn.prototype=Object.create(Rn.prototype)).constructor=kn,(Nn.prototype=Object.create(Rn.prototype)).constructor=Nn,(Bn.prototype=Object.create(Rn.prototype)).constructor=Bn,(Fn.prototype=Object.create(Rn.prototype)).constructor=Fn,(zn.prototype=Object.create(Rn.prototype)).constructor=zn,(Un.prototype=Object.create(Rn.prototype)).constructor=Un,Object.assign(jn.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,s=0;s<r.length;s++){var o=r[s];o.materialIndex!==i&&(i=o.materialIndex,void 0!==e&&(e.count=3*s-e.start,n.push(e)),e={start:3*s,materialIndex:i})}void 0!==e&&(e.count=3*s-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,s=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=t.morphTargets,l=a.length;if(l>0){e=[];for(var c=0;c<l;c++)e[c]={name:a[c].name,data:[]};this.morphTargets.position=e}var h,u=t.morphNormals,d=u.length;if(d>0){for(h=[],c=0;c<d;c++)h[c]={name:u[c].name,data:[]};this.morphTargets.normal=h}var p=t.skinIndices,f=t.skinWeights,m=p.length===i.length,g=f.length===i.length;for(i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),c=0;c<n.length;c++){var v=n[c];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=v.normal;this.normals.push(_,_,_)}var b,x=v.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=v.color;this.colors.push(w,w,w)}!0===s&&(void 0!==(b=r[0][c])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new ke,new ke,new ke))),!0===o&&(void 0!==(b=r[1][c])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new ke,new ke,new ke)));for(var A=0;A<l;A++){var E=a[A].vertices;e[A].data.push(E[v.a],E[v.b],E[v.c])}for(A=0;A<d;A++){var S=u[A].vertexNormals[c];h[A].data.push(S.a,S.b,S.c)}m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Vn=1;function Gn(){Object.defineProperty(this,"id",{value:Vn+=2}),this.uuid=De.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Wn(t,e,n,i,r,s){Pn.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s},this.fromBufferGeometry(new qn(t,e,n,i,r,s)),this.mergeVertices()}function qn(t,e,n,i,r,s){Gn.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};var o=this;t=t||1,e=e||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,s=Math.floor(s)||1;var a=[],l=[],c=[],h=[],u=0,d=0;function p(t,e,n,i,r,s,p,f,m,g,v){var y,_,b=s/m,x=p/g,w=s/2,A=p/2,E=f/2,S=m+1,M=g+1,T=0,C=0,L=new Fe;for(_=0;_<M;_++){var P=_*x-A;for(y=0;y<S;y++)L[t]=(y*b-w)*i,L[e]=P*r,L[n]=E,l.push(L.x,L.y,L.z),L[t]=0,L[e]=0,L[n]=f>0?1:-1,c.push(L.x,L.y,L.z),h.push(y/m),h.push(1-_/g),T+=1}for(_=0;_<g;_++)for(y=0;y<m;y++){var R=u+y+S*(_+1),O=u+(y+1)+S*(_+1),I=u+(y+1)+S*_;a.push(u+y+S*_,R,I),a.push(R,O,I),C+=6}o.addGroup(d,C,v),d+=C,u+=T}p("z","y","x",-1,-1,n,e,t,s,r,0),p("z","y","x",1,-1,n,e,-t,s,r,1),p("x","z","y",1,1,t,n,e,i,s,2),p("x","z","y",1,-1,t,n,-e,i,s,3),p("x","y","z",1,-1,t,e,n,i,r,4),p("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.addAttribute("position",new zn(l,3)),this.addAttribute("normal",new zn(c,3)),this.addAttribute("uv",new zn(h,2))}function Xn(t,e,n,i){Pn.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Yn(t,e,n,i)),this.mergeVertices()}function Yn(t,e,n,i){Gn.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r,s,o=(t=t||1)/2,a=(e=e||1)/2,l=Math.floor(n)||1,c=Math.floor(i)||1,h=l+1,u=c+1,d=t/l,p=e/c,f=[],m=[],g=[],v=[];for(s=0;s<u;s++){var y=s*p-a;for(r=0;r<h;r++)m.push(r*d-o,-y,0),g.push(0,0,1),v.push(r/l),v.push(1-s/c)}for(s=0;s<c;s++)for(r=0;r<l;r++){var _=r+h*(s+1),b=r+1+h*(s+1),x=r+1+h*s;f.push(r+h*s,_,x),f.push(_,b,x)}this.setIndex(f),this.addAttribute("position",new zn(m,3)),this.addAttribute("normal",new zn(g,3)),this.addAttribute("uv",new zn(v,2))}Gn.prototype=Object.assign(Object.create(n.prototype),{constructor:Gn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=Array.isArray(t)?new(Hn(t)>65535?Fn:Nn)(t,1):t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new Rn(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new ze).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.tangent;return void 0!==i&&((new ze).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new Ne;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Ne;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Ne;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Ne;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new Ne;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new Mn;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new Fe;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new zn(3*e.vertices.length,3),i=new zn(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new zn(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new zn(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new jn).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Rn(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Rn(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new Rn(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Rn(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var s=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Rn(s,2).copyVector2sArray(t.uvs2))}for(var o in this.groups=t.groups,t.morphTargets){for(var a=[],l=t.morphTargets[o],c=0,h=l.length;c<h;c++){var u=l[c],d=new zn(3*u.data.length,3);d.name=u.name,a.push(d.copyVector3sArray(u.data))}this.morphAttributes[o]=a}if(t.skinIndices.length>0){var p=new zn(4*t.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new zn(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){var t=new $e;return function(){null===this.boundingBox&&(this.boundingBox=new $e);var e=this.attributes.position,n=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),n)for(var i=0,r=n.length;i<r;i++)t.setFromBufferAttribute(n[i]),this.boundingBox.expandByPoint(t.min),this.boundingBox.expandByPoint(t.max)}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new $e,e=new $e,n=new Fe;return function(){null===this.boundingSphere&&(this.boundingSphere=new tn);var i=this.attributes.position,r=this.morphAttributes.position;if(i){var s=this.boundingSphere.center;if(t.setFromBufferAttribute(i),r)for(var o=0,a=r.length;o<a;o++)e.setFromBufferAttribute(c=r[o]),t.expandByPoint(e.min),t.expandByPoint(e.max);t.getCenter(s);var l=0;for(o=0,a=i.count;o<a;o++)n.fromBufferAttribute(i,o),l=Math.max(l,s.distanceToSquared(n));if(r)for(o=0,a=r.length;o<a;o++)for(var c,h=0,u=(c=r[o]).count;h<u;h++)n.fromBufferAttribute(c,o),l=Math.max(l,s.distanceToSquared(n));this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Rn(new Float32Array(n.length),3));else for(var i=e.normal.array,r=0,s=i.length;r<s;r++)i[r]=0;var o,a,l,c=e.normal.array,h=new Fe,u=new Fe,d=new Fe,p=new Fe,f=new Fe;if(t){var m=t.array;for(r=0,s=t.count;r<s;r+=3)a=3*m[r+1],l=3*m[r+2],h.fromArray(n,o=3*m[r+0]),u.fromArray(n,a),d.fromArray(n,l),p.subVectors(d,u),f.subVectors(h,u),p.cross(f),c[o]+=p.x,c[o+1]+=p.y,c[o+2]+=p.z,c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z}else for(r=0,s=n.length;r<s;r+=9)h.fromArray(n,r),u.fromArray(n,r+3),d.fromArray(n,r+6),p.subVectors(d,u),f.subVectors(h,u),p.cross(f),c[r]=p.x,c[r+1]=p.y,c[r+2]=p.z,c[r+3]=p.x,c[r+4]=p.y,c[r+5]=p.z,c[r+6]=p.x,c[r+7]=p.y,c[r+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,s=t.attributes[i],o=s.array,a=0,l=s.itemSize*e;a<o.length;a++,l++)r[l]=o[a];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new Fe;return function(){for(var e=this.attributes.normal,n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=new n.constructor(e.length*i),s=0,o=0,a=0,l=e.length;a<l;a++){s=e[a]*i;for(var c=0;c<i;c++)r[o++]=n[s++]}return new Rn(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Gn,n=this.index.array,i=this.attributes;for(var r in i){var s=t(i[r],n);e.addAttribute(r,s)}var o=this.morphAttributes;for(r in o){for(var a=[],l=o[r],c=0,h=l.length;c<h;c++)s=t(l[c],n),a.push(s);e.morphAttributes[r]=a}for(var u=this.groups,d=(c=0,u.length);c<d;c++){var p=u[c];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var s={itemSize:(d=r[n]).itemSize,type:d.array.constructor.name,array:Array.prototype.slice.call(d.array),normalized:d.normalized};""!==d.name&&(s.name=d.name),t.data.attributes[n]=s}var o={},a=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],c=[],h=0,u=l.length;h<u;h++){var d;s={itemSize:(d=l[h]).itemSize,type:d.array.constructor.name,array:Array.prototype.slice.call(d.array),normalized:d.normalized},""!==d.name&&(s.name=d.name),c.push(s)}c.length>0&&(o[n]=c,a=!0)}a&&(t.data.morphAttributes=o);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(t.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),t},clone:function(){return(new Gn).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var s=t.attributes;for(e in s)this.addAttribute(e,s[e].clone());var o=t.morphAttributes;for(e in o){var a=[],l=o[e];for(n=0,i=l.length;n<i;n++)a.push(l[n].clone());this.morphAttributes[e]=a}var c=t.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var u=t.boundingBox;null!==u&&(this.boundingBox=u.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(Wn.prototype=Object.create(Pn.prototype)).constructor=Wn,(qn.prototype=Object.create(Gn.prototype)).constructor=qn,(Xn.prototype=Object.create(Pn.prototype)).constructor=Xn,(Yn.prototype=Object.create(Gn.prototype)).constructor=Yn;var Qn=0;function Zn(){Object.defineProperty(this,"id",{value:Qn++}),this.uuid=De.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=C,this.side=x,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=E,this.opacity=1,this.transparent=!1,this.blendSrc=H,this.blendDst=V,this.blendEquation=I,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=J,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}Zn.prototype=Object.assign(Object.create(n.prototype),{constructor:Zn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==C&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==x&&(n.side=this.side),this.vertexColors!==E&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var r=i(t.textures),s=i(t.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Kn,Jn,$n,ti,ei,ni,ii,ri,si,oi,ai,li,ci="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",hi="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function ui(t){Zn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=ci,this.fragmentShader=hi,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function di(t,e){this.origin=void 0!==t?t:new Fe,this.direction=void 0!==e?e:new Fe}function pi(t,e,n){this.a=void 0!==t?t:new Fe,this.b=void 0!==e?e:new Fe,this.c=void 0!==n?n:new Fe}function fi(t){Zn.call(this),this.type="MeshBasicMaterial",this.color=new dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=it,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function mi(t,e){Mn.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Gn,this.material=void 0!==e?e:new fi({color:16777215*Math.random()}),this.drawMode=be,this.updateMorphTargets()}function gi(t,e,n,i){var r,s,o=new dn(0),a=0,l=null,c=0;function h(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),h(o,a=void 0!==e?e:1)},getClearAlpha:function(){return a},setClearAlpha:function(t){h(o,a=t)},render:function(e,i,u,d){var p=i.background,f=t.vr,m=f.getSession&&f.getSession();if(m&&"additive"===m.environmentBlendMode&&(p=null),null===p?(h(o,a),l=null,c=0):p&&p.isColor&&(h(p,1),d=!0,l=null,c=0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===s&&((s=new mi(new qn(1,1,1),new ui({type:"BackgroundCubeMaterial",uniforms:sn(mn.cube.uniforms),vertexShader:mn.cube.vertexShader,fragmentShader:mn.cube.fragmentShader,side:w,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(s));var g=p.isWebGLRenderTargetCube?p.texture:p;s.material.uniforms.tCube.value=g,s.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,l===p&&c===g.version||(s.material.needsUpdate=!0,l=p,c=g.version),e.unshift(s,s.geometry,s.material,0,0,null)}else p&&p.isTexture&&(void 0===r&&((r=new mi(new Yn(2,2),new ui({type:"BackgroundMaterial",uniforms:sn(mn.background.uniforms),vertexShader:mn.background.vertexShader,fragmentShader:mn.background.fragmentShader,side:x,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),r.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version||(r.material.needsUpdate=!0,l=p,c=p.version),e.unshift(r,r.geometry,r.material,0,0,null))}}}function vi(t,e,n,i){var r;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r)},this.renderInstances=function(s,o,a){var l;if(i.isWebGL2)l=t;else if(null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[i.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,o,a,s.maxInstancedCount),n.update(a,r,s.maxInstancedCount)}}function yi(t,e,n){var i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var s="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),u=t.getParameter(3379),d=t.getParameter(34076),p=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=h>0,y=s||!!e.get("OES_texture_float");return{isWebGL2:s,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:s?t.getParameter(36183):0}}function _i(){var t=this,e=null,n=0,i=!1,r=!1,s=new en,o=new ze,a={value:null,needsUpdate:!1};function l(){a.value!==e&&(a.value=e,a.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function c(e,n,i,r){var l=null!==e?e.length:0,c=null;if(0!==l){if(c=a.value,!0!==r||null===c){var h=i+4*l,u=n.matrixWorldInverse;o.getNormalMatrix(u),(null===c||c.length<h)&&(c=new Float32Array(h));for(var d=0,p=i;d!==l;++d,p+=4)s.copy(e[d]).applyMatrix4(u,o),s.normal.toArray(c,p),c[p+3]=s.constant}a.value=c,a.needsUpdate=!0}return t.numPlanes=l,c}this.uniform=a,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,s){var o=0!==t.length||r||0!==n||i;return i=r,e=c(t,s,0),n=t.length,o},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(t,s,o,h,u,d){if(!i||null===t||0===t.length||r&&!o)r?c(null):l();else{var p=r?0:n,f=4*p,m=u.clippingState||null;a.value=m,m=c(t,h,f,d);for(var g=0;g!==f;++g)m[g]=e[g];u.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=p}}}function bi(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function xi(t,e,n){var i={},r={};function s(t){var o=t.target,a=i[o.id];for(var l in null!==a.index&&e.remove(a.index),a.attributes)e.remove(a.attributes[l]);o.removeEventListener("dispose",s),delete i[o.id];var c=r[a.id];c&&(e.remove(c),delete r[a.id]),n.memory.geometries--}return{get:function(t,e){var r=i[e.id];return r||(e.addEventListener("dispose",s),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Gn).setFromObject(t)),r=e._bufferGeometry),i[e.id]=r,n.memory.geometries++,r)},update:function(t){var n=t.index,i=t.attributes;for(var r in null!==n&&e.update(n,34963),i)e.update(i[r],34962);var s=t.morphAttributes;for(var r in s)for(var o=s[r],a=0,l=o.length;a<l;a++)e.update(o[a],34962)},getWireframeAttribute:function(t){var n=r[t.id];if(n)return n;var i,s=[],o=t.index,a=t.attributes;if(null!==o)for(var l=0,c=(i=o.array).length;l<c;l+=3)s.push(h=i[l+0],u=i[l+1],u,d=i[l+2],d,h);else for(l=0,c=(i=a.position.array).length/3-1;l<c;l+=3){var h,u,d;s.push(h=l+0,u=l+1,u,d=l+2,d,h)}return n=new(Hn(s)>65535?Fn:Nn)(s,1),e.update(n,34963),r[t.id]=n,n}}}function wi(t,e,n,i){var r,s,o;this.setMode=function(t){r=t},this.setIndex=function(t){s=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,s,e*o),n.update(i,r)},this.renderInstances=function(a,l,c){var h;if(i.isWebGL2)h=t;else if(null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[i.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,c,s,l*o,a.maxInstancedCount),n.update(c,r,a.maxInstancedCount)}}function Ai(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(i=i||1,e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 5:case 6:e.triangles+=i*(t-2);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ei(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Si(t){var e={},n=new Float32Array(8);return{update:function(i,r,s,o){var a=i.morphTargetInfluences,l=a.length,c=e[r.id];if(void 0===c){c=[];for(var h=0;h<l;h++)c[h]=[h,0];e[r.id]=c}var u=s.morphTargets&&r.morphAttributes.position,d=s.morphNormals&&r.morphAttributes.normal;for(h=0;h<l;h++)0!==(p=c[h])[1]&&(u&&r.removeAttribute("morphTarget"+h),d&&r.removeAttribute("morphNormal"+h));for(h=0;h<l;h++)(p=c[h])[0]=h,p[1]=a[h];for(c.sort(Ei),h=0;h<8;h++){var p;if(p=c[h]){var f=p[0],m=p[1];if(m){u&&r.addAttribute("morphTarget"+h,u[f]),d&&r.addAttribute("morphNormal"+h,d[f]),n[h]=m;continue}}n[h]=0}o.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function Mi(t,e){var n={};return{update:function(i){var r=e.render.frame,s=i.geometry,o=t.get(i,s);return n[o.id]!==r&&(s.isGeometry&&o.updateFromObject(i),t.update(o),n[o.id]=r),o},dispose:function(){n={}}}}function Ti(t,e,n,i,r,s,o,a,l,c){Xe.call(this,t=void 0!==t?t:[],e=void 0!==e?e:dt,n,i,r,s,o=void 0!==o?o:jt,a,l,c),this.flipY=!1}function Ci(t,e,n,i){Xe.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=wt,this.minFilter=wt,this.wrapR=bt,this.generateMipmaps=!1,this.flipY=!1}function Li(t,e,n,i){Xe.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=wt,this.minFilter=wt,this.wrapR=bt,this.generateMipmaps=!1,this.flipY=!1}(ui.prototype=Object.create(Zn.prototype)).constructor=ui,ui.prototype.isShaderMaterial=!0,ui.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=sn(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},ui.prototype.toJSON=function(t){var e=Zn.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n].value;e.uniforms[n]=i&&i.isTexture?{type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?{type:"c",value:i.getHex()}:i&&i.isVector2?{type:"v2",value:i.toArray()}:i&&i.isVector3?{type:"v3",value:i.toArray()}:i&&i.isVector4?{type:"v4",value:i.toArray()}:i&&i.isMatrix3?{type:"m3",value:i.toArray()}:i&&i.isMatrix4?{type:"m4",value:i.toArray()}:{value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(var s in this.extensions)!0===this.extensions[s]&&(r[s]=!0);return Object.keys(r).length>0&&(e.extensions=r),e},Object.assign(di.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Fe),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new Fe;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Fe),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new Fe;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:(Jn=new Fe,$n=new Fe,ti=new Fe,function(t,e,n,i){Jn.copy(t).add(e).multiplyScalar(.5),$n.copy(e).sub(t).normalize(),ti.copy(this.origin).sub(Jn);var r,s,o,a,l=.5*t.distanceTo(e),c=-this.direction.dot($n),h=ti.dot(this.direction),u=-ti.dot($n),d=ti.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(s=c*h-u,a=l*p,(r=c*u-h)>=0)if(s>=-a)if(s<=a){var f=1/p;o=(r*=f)*(r+c*(s*=f)+2*h)+s*(c*r+s+2*u)+d}else s=l,o=-(r=Math.max(0,-(c*s+h)))*r+s*(s+2*u)+d;else s=-l,o=-(r=Math.max(0,-(c*s+h)))*r+s*(s+2*u)+d;else s<=-a?o=-(r=Math.max(0,-(-c*l+h)))*r+(s=r>0?-l:Math.min(Math.max(-l,-u),l))*(s+2*u)+d:s<=a?(r=0,o=(s=Math.min(Math.max(-l,-u),l))*(s+2*u)+d):o=-(r=Math.max(0,-(c*l+h)))*r+(s=r>0?l:Math.min(Math.max(-l,-u),l))*(s+2*u)+d;else s=c>0?-l:l,o=-(r=Math.max(0,-(c*s+h)))*r+s*(s+2*u)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy($n).multiplyScalar(s).add(Jn),o}),intersectSphere:function(){var t=new Fe;return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,s=e.radius*e.radius;if(r>s)return null;var o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,n)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,s,o,a,l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,s=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,s=(t.min.y-u.y)*c),n>s||r>i?null:((r>n||n!=n)&&(n=r),(s<i||i!=i)&&(i=s),h>=0?(o=(t.min.z-u.z)*h,a=(t.max.z-u.z)*h):(o=(t.max.z-u.z)*h,a=(t.min.z-u.z)*h),n>a||o>i?null:((o>n||n!=n)&&(n=o),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:(Kn=new Fe,function(t){return null!==this.intersectBox(t,Kn)}),intersectTriangle:function(){var t=new Fe,e=new Fe,n=new Fe,i=new Fe;return function(r,s,o,a,l){e.subVectors(s,r),n.subVectors(o,r),i.crossVectors(e,n);var c,h=this.direction.dot(i);if(h>0){if(a)return null;c=1}else{if(!(h<0))return null;c=-1,h=-h}t.subVectors(this.origin,r);var u=c*this.direction.dot(n.crossVectors(t,n));if(u<0)return null;var d=c*this.direction.dot(e.cross(t));if(d<0)return null;if(u+d>h)return null;var p=-c*t.dot(i);return p<0?null:this.at(p/h,l)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(pi,{getNormal:(ni=new Fe,function(t,e,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Fe),i.subVectors(n,e),ni.subVectors(t,e),i.cross(ni);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}),getBarycoord:function(){var t=new Fe,e=new Fe,n=new Fe;return function(i,r,s,o,a){t.subVectors(o,r),e.subVectors(s,r),n.subVectors(i,r);var l=t.dot(t),c=t.dot(e),h=t.dot(n),u=e.dot(e),d=e.dot(n),p=l*u-c*c;if(void 0===a&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),a=new Fe),0===p)return a.set(-2,-1,-1);var f=1/p,m=(u*h-c*d)*f,g=(l*d-c*h)*f;return a.set(1-m-g,g,m)}}(),containsPoint:function(){var t=new Fe;return function(e,n,i,r){return pi.getBarycoord(e,n,i,r,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:(ei=new Fe,function(t,e,n,i,r,s,o,a){return this.getBarycoord(t,e,n,i,ei),a.set(0,0),a.addScaledVector(r,ei.x),a.addScaledVector(s,ei.y),a.addScaledVector(o,ei.z),a})}),Object.assign(pi.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new Fe,e=new Fe;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Fe),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return pi.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Fe),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return pi.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return pi.containsPoint(t,this.a,this.b,this.c)},getUV:function(t,e,n,i,r){return pi.getUV(t,this.a,this.b,this.c,e,n,i,r)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:(ii=new Fe,ri=new Fe,si=new Fe,oi=new Fe,ai=new Fe,li=new Fe,function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Fe);var n,i,r=this.a,s=this.b,o=this.c;ii.subVectors(s,r),ri.subVectors(o,r),oi.subVectors(t,r);var a=ii.dot(oi),l=ri.dot(oi);if(a<=0&&l<=0)return e.copy(r);ai.subVectors(t,s);var c=ii.dot(ai),h=ri.dot(ai);if(c>=0&&h<=c)return e.copy(s);var u=a*h-c*l;if(u<=0&&a>=0&&c<=0)return n=a/(a-c),e.copy(r).addScaledVector(ii,n);li.subVectors(t,o);var d=ii.dot(li),p=ri.dot(li);if(p>=0&&d<=p)return e.copy(o);var f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return i=l/(l-p),e.copy(r).addScaledVector(ri,i);var m=c*p-d*h;if(m<=0&&h-c>=0&&d-p>=0)return si.subVectors(o,s),i=(h-c)/(h-c+(d-p)),e.copy(s).addScaledVector(si,i);var g=1/(m+f+u);return n=f*g,i=u*g,e.copy(r).addScaledVector(ii,n).addScaledVector(ri,i)}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),(fi.prototype=Object.create(Zn.prototype)).constructor=fi,fi.prototype.isMeshBasicMaterial=!0,fi.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},mi.prototype=Object.assign(Object.create(Mn.prototype),{constructor:mi,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Mn.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,s=Object.keys(r);if(s.length>0){var o=r[s[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var a=i.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var t=new Ne,e=new di,n=new tn,i=new Fe,r=new Fe,s=new Fe,o=new Fe,a=new Fe,l=new Fe,c=new Fe,h=new Fe,u=new Fe,d=new ke,p=new ke,f=new ke,m=new Fe,g=new Fe;function v(t,e,n,i,r,s,o,a){if(null===(e.side===w?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,e.side!==A,a)))return null;g.copy(a),g.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(g);return l<n.near||l>n.far?null:{distance:l,point:g.clone(),object:t}}function y(t,e,n,g,y,_,b,x,w,A){i.fromBufferAttribute(y,x),r.fromBufferAttribute(y,w),s.fromBufferAttribute(y,A);var E=t.morphTargetInfluences;if(e.morphTargets&&_&&E){c.set(0,0,0),h.set(0,0,0),u.set(0,0,0);for(var S=0,M=_.length;S<M;S++){var T=E[S],C=_[S];0!==T&&(o.fromBufferAttribute(C,x),a.fromBufferAttribute(C,w),l.fromBufferAttribute(C,A),c.addScaledVector(o.sub(i),T),h.addScaledVector(a.sub(r),T),u.addScaledVector(l.sub(s),T))}i.add(c),r.add(h),s.add(u)}var L=v(t,e,n,g,i,r,s,m);if(L){b&&(d.fromBufferAttribute(b,x),p.fromBufferAttribute(b,w),f.fromBufferAttribute(b,A),L.uv=pi.getUV(m,i,r,s,d,p,f,new ke));var P=new yn(x,w,A);pi.getNormal(i,r,s,P.normal),L.face=P}return L}return function(i,r){var s,o=this.geometry,a=this.material,l=this.matrixWorld;if(void 0!==a&&(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(l),!1!==i.ray.intersectsSphere(n)&&(t.getInverse(l),e.copy(i.ray).applyMatrix4(t),null===o.boundingBox||!1!==e.intersectsBox(o.boundingBox))))if(o.isBufferGeometry){var c,h,u,g,_,b,x,w,A,E=o.index,S=o.attributes.position,M=o.morphAttributes.position,T=o.attributes.uv,C=o.groups,L=o.drawRange;if(null!==E)if(Array.isArray(a))for(g=0,b=C.length;g<b;g++)for(A=a[(w=C[g]).materialIndex],_=Math.max(w.start,L.start),x=Math.min(w.start+w.count,L.start+L.count);_<x;_+=3)c=E.getX(_),h=E.getX(_+1),u=E.getX(_+2),(s=y(this,A,i,e,S,M,T,c,h,u))&&(s.faceIndex=Math.floor(_/3),s.face.materialIndex=w.materialIndex,r.push(s));else for(g=Math.max(0,L.start),b=Math.min(E.count,L.start+L.count);g<b;g+=3)c=E.getX(g),h=E.getX(g+1),u=E.getX(g+2),(s=y(this,a,i,e,S,M,T,c,h,u))&&(s.faceIndex=Math.floor(g/3),r.push(s));else if(void 0!==S)if(Array.isArray(a))for(g=0,b=C.length;g<b;g++)for(A=a[(w=C[g]).materialIndex],_=Math.max(w.start,L.start),x=Math.min(w.start+w.count,L.start+L.count);_<x;_+=3)(s=y(this,A,i,e,S,M,T,c=_,h=_+1,u=_+2))&&(s.faceIndex=Math.floor(_/3),s.face.materialIndex=w.materialIndex,r.push(s));else for(g=Math.max(0,L.start),b=Math.min(S.count,L.start+L.count);g<b;g+=3)(s=y(this,a,i,e,S,M,T,c=g,h=g+1,u=g+2))&&(s.faceIndex=Math.floor(g/3),r.push(s))}else if(o.isGeometry){var P,R,O,I,D=Array.isArray(a),k=o.vertices,N=o.faces,B=o.faceVertexUvs[0];B.length>0&&(I=B);for(var F=0,z=N.length;F<z;F++){var U=N[F],j=D?a[U.materialIndex]:a;if(void 0!==j&&(s=v(this,j,i,e,P=k[U.a],R=k[U.b],O=k[U.c],m))){if(I&&I[F]){var H=I[F];d.copy(H[0]),p.copy(H[1]),f.copy(H[2]),s.uv=pi.getUV(m,P,R,O,d,p,f,new ke)}s.face=U,s.faceIndex=F,r.push(s)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Ti.prototype=Object.create(Xe.prototype)).constructor=Ti,Ti.prototype.isCubeTexture=!0,Object.defineProperty(Ti.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),(Ci.prototype=Object.create(Xe.prototype)).constructor=Ci,Ci.prototype.isDataTexture2DArray=!0,(Li.prototype=Object.create(Xe.prototype)).constructor=Li,Li.prototype.isDataTexture3D=!0;var Pi=new Xe,Ri=new Ci,Oi=new Li,Ii=new Ti;function Di(){this.seq=[],this.map={}}var ki=[],Ni=[],Bi=new Float32Array(16),Fi=new Float32Array(9),zi=new Float32Array(4);function Ui(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,s=ki[r];if(void 0===s&&(s=new Float32Array(r),ki[r]=s),0!==e){i.toArray(s,0);for(var o=1,a=0;o!==e;++o)t[o].toArray(s,a+=n)}return s}function ji(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Hi(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function Vi(t,e){var n=Ni[e];void 0===n&&(n=new Int32Array(e),Ni[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocTextureUnit();return n}function Gi(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Wi(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function qi(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ji(n,e))return;t.uniform2fv(this.addr,e),Hi(n,e)}}function Xi(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ji(n,e))return;t.uniform3fv(this.addr,e),Hi(n,e)}}function Yi(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ji(n,e))return;t.uniform4fv(this.addr,e),Hi(n,e)}}function Qi(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(ji(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Hi(n,e)}else{if(ji(n,i))return;zi.set(i),t.uniformMatrix2fv(this.addr,!1,zi),Hi(n,i)}}function Zi(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(ji(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Hi(n,e)}else{if(ji(n,i))return;Fi.set(i),t.uniformMatrix3fv(this.addr,!1,Fi),Hi(n,i)}}function Ki(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(ji(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Hi(n,e)}else{if(ji(n,i))return;Bi.set(i),t.uniformMatrix4fv(this.addr,!1,Bi),Hi(n,i)}}function Ji(t,e,n){var i=this.cache,r=n.allocTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||Pi,r)}function $i(t,e,n){var i=this.cache,r=n.allocTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Ri,r)}function tr(t,e,n){var i=this.cache,r=n.allocTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Oi,r)}function er(t,e,n){var i=this.cache,r=n.allocTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||Ii,r)}function nr(t,e){var n=this.cache;ji(n,e)||(t.uniform2iv(this.addr,e),Hi(n,e))}function ir(t,e){var n=this.cache;ji(n,e)||(t.uniform3iv(this.addr,e),Hi(n,e))}function rr(t,e){var n=this.cache;ji(n,e)||(t.uniform4iv(this.addr,e),Hi(n,e))}function sr(t,e){var n=this.cache;ji(n,e)||(t.uniform1fv(this.addr,e),Hi(n,e))}function or(t,e){var n=this.cache;ji(n,e)||(t.uniform1iv(this.addr,e),Hi(n,e))}function ar(t,e){var n=this.cache,i=Ui(e,this.size,2);ji(n,i)||(t.uniform2fv(this.addr,i),this.updateCache(i))}function lr(t,e){var n=this.cache,i=Ui(e,this.size,3);ji(n,i)||(t.uniform3fv(this.addr,i),this.updateCache(i))}function cr(t,e){var n=this.cache,i=Ui(e,this.size,4);ji(n,i)||(t.uniform4fv(this.addr,i),this.updateCache(i))}function hr(t,e){var n=this.cache,i=Ui(e,this.size,4);ji(n,i)||(t.uniformMatrix2fv(this.addr,!1,i),this.updateCache(i))}function ur(t,e){var n=this.cache,i=Ui(e,this.size,9);ji(n,i)||(t.uniformMatrix3fv(this.addr,!1,i),this.updateCache(i))}function dr(t,e){var n=this.cache,i=Ui(e,this.size,16);ji(n,i)||(t.uniformMatrix4fv(this.addr,!1,i),this.updateCache(i))}function pr(t,e,n){var i=this.cache,r=e.length,s=Vi(n,r);!1===ji(i,s)&&(t.uniform1iv(this.addr,s),Hi(i,s));for(var o=0;o!==r;++o)n.setTexture2D(e[o]||Pi,s[o])}function fr(t,e,n){var i=this.cache,r=e.length,s=Vi(n,r);!1===ji(i,s)&&(t.uniform1iv(this.addr,s),Hi(i,s));for(var o=0;o!==r;++o)n.setTextureCube(e[o]||Ii,s[o])}function mr(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(e.type){case 5126:return Gi;case 35664:return qi;case 35665:return Xi;case 35666:return Yi;case 35674:return Qi;case 35675:return Zi;case 35676:return Ki;case 35678:case 36198:return Ji;case 35679:return tr;case 35680:return er;case 36289:return $i;case 5124:case 35670:return Wi;case 35667:case 35671:return nr;case 35668:case 35672:return ir;case 35669:case 35673:return rr}}()}function gr(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(e.type){case 5126:return sr;case 35664:return ar;case 35665:return lr;case 35666:return cr;case 35674:return hr;case 35675:return ur;case 35676:return dr;case 35678:return pr;case 35680:return fr;case 5124:case 35670:return or;case 35667:case 35671:return nr;case 35668:case 35672:return ir;case 35669:case 35673:return rr}}()}function vr(t){this.id=t,Di.call(this)}gr.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Hi(e,t)},vr.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,s=i.length;r!==s;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var yr=/([\w\d_]+)(\])?(\[|\.)?/g;function _r(t,e){t.seq.push(e),t.map[e.id]=e}function br(t,e,n){var i=t.name,r=i.length;for(yr.lastIndex=0;;){var s=yr.exec(i),o=s[1],a=s[3];if("]"===s[2]&&(o|=0),void 0===a||"["===a&&yr.lastIndex+2===r){_r(n,void 0===a?new mr(o,t,e):new gr(o,t,e));break}var l=n.map[o];void 0===l&&_r(n,l=new vr(o)),n=l}}function xr(t,e,n){Di.call(this),this.renderer=n;for(var i=t.getProgramParameter(e,35718),r=0;r<i;++r){var s=t.getActiveUniform(e,r);br(s,t.getUniformLocation(e,s.name),this)}}function wr(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),!1===t.getShaderParameter(i,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===e?"vertex":"fragment",t.getShaderInfoLog(i),function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(n)),i}xr.prototype.setValue=function(t,e,n){var i=this.map[e];void 0!==i&&i.setValue(t,n,this.renderer)},xr.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},xr.upload=function(t,e,n,i){for(var r=0,s=e.length;r!==s;++r){var o=e[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,i)}},xr.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var s=t[i];s.id in e&&n.push(s)}return n};var Ar=0;function Er(t){switch(t){case Ae:return["Linear","( value )"];case Ee:return["sRGB","( value )"];case Me:return["RGBE","( value )"];case Te:return["RGBM","( value, 7.0 )"];case Ce:return["RGBM","( value, 16.0 )"];case Le:return["RGBD","( value, 256.0 )"];case Se:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Sr(t,e){var n=Er(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Mr(t,e){var n;switch(e){case at:n="Linear";break;case lt:n="Reinhard";break;case ct:n="Uncharted2";break;case ht:n="OptimizedCineon";break;case ut:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Tr(t){return""!==t}function Cr(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Lr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Pr(t){return t.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(t,e){var n=rn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Pr(n)})}function Rr(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,n,i){for(var r="",s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[ i \]/g,"[ "+s+" ]");return r})}function Or(t,e,n,i,r,s,o){var a=t.context,l=i.defines,c=r.vertexShader,h=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";s.shadowMapType===_?u="SHADOWMAP_TYPE_PCF":s.shadowMapType===b&&(u="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(s.envMap){switch(i.envMap.mapping){case dt:case pt:d="ENVMAP_TYPE_CUBE";break;case vt:case yt:d="ENVMAP_TYPE_CUBE_UV";break;case ft:case mt:d="ENVMAP_TYPE_EQUIREC";break;case gt:d="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case pt:case mt:p="ENVMAP_MODE_REFRACTION"}switch(i.combine){case it:f="ENVMAP_BLENDING_MULTIPLY";break;case rt:f="ENVMAP_BLENDING_MIX";break;case st:f="ENVMAP_BLENDING_ADD"}}var m,g,v,y,x=t.gammaFactor>0?t.gammaFactor:1,w=o.isWebGL2?"":function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Tr).join("\n")}(i.extensions,s,e),A=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(l),E=a.createProgram();if(i.isRawShaderMaterial?((m=[A].filter(Tr).join("\n")).length>0&&(m+="\n"),(g=[w,A].filter(Tr).join("\n")).length>0&&(g+="\n")):(m=["precision "+s.precision+" float;","precision "+s.precision+" int;","#define SHADER_NAME "+r.name,A,s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+x,"#define MAX_BONES "+s.maxBones,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+p:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+u:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Tr).join("\n"),g=[w,"precision "+s.precision+" float;","precision "+s.precision+" int;","#define SHADER_NAME "+r.name,A,s.alphaTest?"#define ALPHATEST "+s.alphaTest+(s.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+x,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+d:"",s.envMap?"#define "+p:"",s.envMap?"#define "+f:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+u:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",s.envMap&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",s.toneMapping!==ot?"#define TONE_MAPPING":"",s.toneMapping!==ot?rn.tonemapping_pars_fragment:"",s.toneMapping!==ot?Mr("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.outputEncoding||s.mapEncoding||s.matcapEncoding||s.envMapEncoding||s.emissiveMapEncoding?rn.encodings_pars_fragment:"",s.mapEncoding?Sr("mapTexelToLinear",s.mapEncoding):"",s.matcapEncoding?Sr("matcapTexelToLinear",s.matcapEncoding):"",s.envMapEncoding?Sr("envMapTexelToLinear",s.envMapEncoding):"",s.emissiveMapEncoding?Sr("emissiveMapTexelToLinear",s.emissiveMapEncoding):"",s.outputEncoding?(v=s.outputEncoding,y=Er(v),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+y[0]+y[1]+"; }"):"",s.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Tr).join("\n")),c=Lr(c=Cr(c=Pr(c),s),s),h=Lr(h=Cr(h=Pr(h),s),s),c=Rr(c),h=Rr(h),o.isWebGL2&&!i.isRawShaderMaterial){var S=!1,M=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==c.match(M)&&null!==h.match(M)&&(S=!0,c=c.replace(M,""),h=h.replace(M,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#version 300 es\n","#define varying in",S?"":"out highp vec4 pc_fragColor;",S?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var T=g+h,C=wr(a,35633,m+c),L=wr(a,35632,T);a.attachShader(E,C),a.attachShader(E,L),void 0!==i.index0AttributeName?a.bindAttribLocation(E,0,i.index0AttributeName):!0===s.morphTargets&&a.bindAttribLocation(E,0,"position"),a.linkProgram(E);var P,R,O=a.getProgramInfoLog(E).trim(),I=a.getShaderInfoLog(C).trim(),D=a.getShaderInfoLog(L).trim(),k=!0,N=!0;return!1===a.getProgramParameter(E,35714)?(k=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(E,35715),"gl.getProgramInfoLog",O,I,D)):""!==O?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",O):""!==I&&""!==D||(N=!1),N&&(this.diagnostics={runnable:k,material:i,programLog:O,vertexShader:{log:I,prefix:m},fragmentShader:{log:D,prefix:g}}),a.deleteShader(C),a.deleteShader(L),this.getUniforms=function(){return void 0===P&&(P=new xr(a,E,t)),P},this.getAttributes=function(){return void 0===R&&(R=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var s=t.getActiveAttrib(e,r).name;n[s]=t.getAttribLocation(e,s)}return n}(a,E)),R},this.destroy=function(){a.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=Ar++,this.code=n,this.usedTimes=1,this.program=E,this.vertexShader=C,this.fragmentShader=L,this}function Ir(t,e,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=Ae,n===Ae&&e&&(n=Se),n}this.getParameters=function(e,i,s,a,l,c,h){var u=r[e.type],d=h.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=Math.floor((n.maxVertexUniforms-20)/4),r=Math.min(i,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}(h):0,p=n.precision;null!==e.precision&&(p=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead.");var f=t.getRenderTarget();return{shaderID:u,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:o(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:o(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:o(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:o(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===vt||e.envMap.mapping===yt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:o(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Ie,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,fog:!!a,useFog:e.fog,fogExp:a&&a.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&s.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===A,flipSided:e.side===w,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var o=0;o<s.length;o++)i.push(n[s[o]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.push(t.gammaFactor),i.join()},this.acquireProgram=function(r,s,o,a){for(var l,c=0,h=i.length;c<h;c++){var u=i[c];if(u.code===a){++(l=u).usedTimes;break}}return void 0===l&&(l=new Or(t,e,a,r,s,o,n),i.push(l)),l},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function Dr(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&t.set(e,n={}),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function kr(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Nr(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Br(){var t=[],e=0,n=[],i=[];function r(n,i,r,s,o,a){var l=t[e];return void 0===l?t[e]=l={id:n.id,object:n,geometry:i,material:r,program:r.program,groupOrder:s,renderOrder:n.renderOrder,z:o,group:a}:(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.program=r.program,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=o,l.group=a),e++,l}return{opaque:n,transparent:i,init:function(){e=0,n.length=0,i.length=0},push:function(t,e,s,o,a,l){var c=r(t,e,s,o,a,l);(!0===s.transparent?i:n).push(c)},unshift:function(t,e,s,o,a,l){var c=r(t,e,s,o,a,l);(!0===s.transparent?i:n).unshift(c)},sort:function(){n.length>1&&n.sort(kr),i.length>1&&i.sort(Nr)}}}function Fr(){var t={};function e(n){var i=n.target;i.removeEventListener("dispose",e),delete t[i.id]}return{get:function(n,i){var r,s=t[n.id];return void 0===s?(r=new Br,t[n.id]={},t[n.id][i.id]=r,n.addEventListener("dispose",e)):void 0===(r=s[i.id])&&(r=new Br,s[i.id]=r),r},dispose:function(){t={}}}}function zr(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new Fe,color:new dn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"SpotLight":n={position:new Fe,direction:new Fe,color:new dn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"PointLight":n={position:new Fe,color:new dn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ke,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Fe,skyColor:new dn,groundColor:new dn};break;case"RectAreaLight":n={color:new dn,position:new Fe,halfWidth:new Fe,halfHeight:new Fe}}return t[e.id]=n,n}}}var Ur=0;function jr(){var t=new zr,e={id:Ur++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Fe,i=new Ne,r=new Ne;return{setup:function(s,o,a){for(var l=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=a.matrixWorldInverse,v=0,y=s.length;v<y;v++){var _=s[v],b=_.color,x=_.intensity,w=_.distance,A=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)l+=b.r*x,c+=b.g*x,h+=b.b*x;else if(_.isDirectionalLight)(S=t.get(_)).color.copy(_.color).multiplyScalar(_.intensity),S.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(g),S.shadow=_.castShadow,_.castShadow&&(S.shadowBias=(E=_.shadow).bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize),e.directionalShadowMap[u]=A,e.directionalShadowMatrix[u]=_.shadow.matrix,e.directional[u]=S,u++;else if(_.isSpotLight)(S=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(g),S.color.copy(b).multiplyScalar(x),S.distance=w,S.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(g),S.coneCos=Math.cos(_.angle),S.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),S.decay=_.decay,S.shadow=_.castShadow,_.castShadow&&(S.shadowBias=(E=_.shadow).bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize),e.spotShadowMap[p]=A,e.spotShadowMatrix[p]=_.shadow.matrix,e.spot[p]=S,p++;else if(_.isRectAreaLight)(S=t.get(_)).color.copy(b).multiplyScalar(x),S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(g),r.identity(),i.copy(_.matrixWorld),i.premultiply(g),r.extractRotation(i),S.halfWidth.set(.5*_.width,0,0),S.halfHeight.set(0,.5*_.height,0),S.halfWidth.applyMatrix4(r),S.halfHeight.applyMatrix4(r),e.rectArea[f]=S,f++;else if(_.isPointLight){var E;(S=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(g),S.color.copy(_.color).multiplyScalar(_.intensity),S.distance=_.distance,S.decay=_.decay,S.shadow=_.castShadow,_.castShadow&&(S.shadowBias=(E=_.shadow).bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize,S.shadowCameraNear=E.camera.near,S.shadowCameraFar=E.camera.far),e.pointShadowMap[d]=A,e.pointShadowMatrix[d]=_.shadow.matrix,e.point[d]=S,d++}else if(_.isHemisphereLight){var S;(S=t.get(_)).direction.setFromMatrixPosition(_.matrixWorld),S.direction.transformDirection(g),S.direction.normalize(),S.skyColor.copy(_.color).multiplyScalar(x),S.groundColor.copy(_.groundColor).multiplyScalar(x),e.hemi[m]=S,m++}}e.ambient[0]=l,e.ambient[1]=c,e.ambient[2]=h,e.directional.length=u,e.spot.length=p,e.rectArea.length=f,e.point.length=d,e.hemi.length=m,e.hash.stateID=e.id,e.hash.directionalLength=u,e.hash.pointLength=d,e.hash.spotLength=p,e.hash.rectAreaLength=f,e.hash.hemiLength=m,e.hash.shadowsLength=o.length},state:e}}function Hr(){var t=new jr,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(i){t.setup(e,n,i)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function Vr(){var t={};function e(n){var i=n.target;i.removeEventListener("dispose",e),delete t[i.id]}return{get:function(n,i){var r;return void 0===t[n.id]?(r=new Hr,t[n.id]={},t[n.id][i.id]=r,n.addEventListener("dispose",e)):void 0===t[n.id][i.id]?(r=new Hr,t[n.id][i.id]=r):r=t[n.id][i.id],r},dispose:function(){t={}}}}function Gr(t){Zn.call(this),this.type="MeshDepthMaterial",this.depthPacking=Pe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Wr(t){Zn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Fe,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function qr(t,e,n){for(var i=new nn,r=new Ne,s=new ke,o=new ke(n,n),a=new Fe,l=new Fe,c=1,h=2,u=1+(c|h),d=new Array(u),p=new Array(u),f={},m={0:w,1:x,2:A},g=[new Fe(1,0,0),new Fe(-1,0,0),new Fe(0,0,1),new Fe(0,0,-1),new Fe(0,1,0),new Fe(0,-1,0)],v=[new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,0,1),new Fe(0,0,-1)],y=[new Ye,new Ye,new Ye,new Ye,new Ye,new Ye],b=0;b!==u;++b){var E=0!=(b&c),S=0!=(b&h),M=new Gr({depthPacking:Re,morphTargets:E,skinning:S});d[b]=M;var C=new Wr({morphTargets:E,skinning:S});p[b]=C}var L=this;function P(e,n,i,r,s,o){var a=e.geometry,l=null,u=d,g=e.customDepthMaterial;if(i&&(u=p,g=e.customDistanceMaterial),g)l=g;else{var v=!1;n.morphTargets&&(a&&a.isBufferGeometry?v=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(v=a.morphTargets&&a.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var y=0;v&&(y|=c),e.isSkinnedMesh&&n.skinning&&(y|=h),l=u[y]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var _=l.uuid,b=n.uuid,x=f[_];void 0===x&&(f[_]=x={});var w=x[b];void 0===w&&(w=l.clone(),x[b]=w),l=w}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:m[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=s,l.farDistance=o),l}function R(n,r,s,o){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);var a=e.update(n),c=n.material;if(Array.isArray(c))for(var h=a.groups,u=0,d=h.length;u<d;u++){var p=h[u],f=c[p.materialIndex];if(f&&f.visible){var m=P(n,f,o,l,s.near,s.far);t.renderBufferDirect(s,null,a,m,n,p)}}else c.visible&&(m=P(n,c,o,l,s.near,s.far),t.renderBufferDirect(s,null,a,m,n,null))}for(var g=n.children,v=0,y=g.length;v<y;v++)R(g[v],r,s,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_,this.render=function(e,n,c){if(!1!==L.enabled&&(!1!==L.autoUpdate||!1!==L.needsUpdate)&&0!==e.length){var h,u=t.getRenderTarget(),d=t.state;d.setBlending(T),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=e.length;p<f;p++){var m=e[p],_=m.shadow,b=m&&m.isPointLight;if(void 0!==_){var x=_.camera;if(s.copy(_.mapSize),s.min(o),b){var w=s.x,A=s.y;y[0].set(2*w,A,w,A),y[1].set(0,A,w,A),y[2].set(3*w,A,w,A),y[3].set(w,A,w,A),y[4].set(3*w,0,w,A),y[5].set(w,0,w,A),s.x*=4,s.y*=2}null===_.map&&(_.map=new Qe(s.x,s.y,{minFilter:wt,magFilter:wt,format:Ht}),_.map.texture.name=m.name+".shadowMap",x.updateProjectionMatrix()),_.isSpotLightShadow&&_.update(m);var E=_.map,S=_.matrix;l.setFromMatrixPosition(m.matrixWorld),x.position.copy(l),b?(h=6,S.makeTranslation(-l.x,-l.y,-l.z)):(h=1,a.setFromMatrixPosition(m.target.matrixWorld),x.lookAt(a),x.updateMatrixWorld(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(x.projectionMatrix),S.multiply(x.matrixWorldInverse)),t.setRenderTarget(E),t.clear();for(var M=0;M<h;M++)b&&(a.copy(x.position),a.add(g[M]),x.up.copy(v[M]),x.lookAt(a),x.updateMatrixWorld(),d.viewport(y[M])),r.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),i.setFromMatrix(r),R(n,c,x,b)}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}L.needsUpdate=!1,t.setRenderTarget(u)}}}function Xr(t,e,n,i){var r=new function(){var e=!1,n=new Ye,i=null,r=new Ye(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,o,a){!0===a&&(e*=o,i*=o,s*=o),n.set(e,i,s,o),!1===r.equals(n)&&(t.clearColor(e,i,s,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?st(2929):ot(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case Q:t.depthFunc(512);break;case Z:t.depthFunc(519);break;case K:t.depthFunc(513);break;case J:t.depthFunc(515);break;case $:t.depthFunc(514);break;case tt:t.depthFunc(518);break;case et:t.depthFunc(516);break;case nt:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){var e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null;return{setTest:function(t){t?st(2960):ot(2960)},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&s===o||(t.stencilFunc(e,n,o),i=e,r=n,s=o)},setOp:function(e,n,i){o===e&&a===n&&l===i||(t.stencilOp(e,n,i),o=e,a=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null}}},a=t.getParameter(34921),l=new Uint8Array(a),c=new Uint8Array(a),h=new Uint8Array(a),u={},d=null,p=null,f=null,m=null,_=null,b=null,x=null,E=null,S=null,M=null,D=!1,k=null,N=null,B=null,F=null,z=null,U=t.getParameter(35661),j=!1,H=0,V=t.getParameter(7938);-1!==V.indexOf("WebGL")?(H=parseFloat(/^WebGL\ ([0-9])/.exec(V)[1]),j=H>=1):-1!==V.indexOf("OpenGL ES")&&(H=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(V)[1]),j=H>=2);var G=null,W={},q=new Ye,X=new Ye;function Y(e,n,i){var r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<i;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return s}var it={};function rt(n,r){l[n]=1,0===c[n]&&(t.enableVertexAttribArray(n),c[n]=1),h[n]!==r&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),h[n]=r)}function st(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function ot(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}function at(e,i,r,s,o,a,l,c){if(e!==T){if(f||(st(3042),f=!0),e===O)o=o||i,a=a||r,l=l||s,i===_&&o===E||(t.blendEquationSeparate(n.convert(i),n.convert(o)),_=i,E=o),r===b&&s===x&&a===S&&l===M||(t.blendFuncSeparate(n.convert(r),n.convert(s),n.convert(a),n.convert(l)),b=r,x=s,S=a,M=l),m=e,D=null;else if(e!==m||c!==D){if(_===I&&E===I||(t.blendEquation(32774),_=I,E=I),c)switch(e){case C:t.blendFuncSeparate(1,771,1,771);break;case L:t.blendFunc(1,1);break;case P:t.blendFuncSeparate(0,0,769,771);break;case R:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case C:t.blendFuncSeparate(770,771,1,771);break;case L:t.blendFunc(770,1);break;case P:t.blendFunc(0,769);break;case R:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}b=null,x=null,S=null,M=null,m=e,D=c}}else f&&(ot(3042),f=!1)}function lt(e){k!==e&&(t.frontFace(e?2304:2305),k=e)}function ct(e){e!==g?(st(2884),e!==N&&t.cullFace(e===v?1029:e===y?1028:1032)):ot(2884),N=e}function ht(e,n,i){e?(st(32823),F===n&&z===i||(t.polygonOffset(n,i),F=n,z=i)):ot(32823)}function ut(e){void 0===e&&(e=33984+U-1),G!==e&&(t.activeTexture(e),G=e)}return it[3553]=Y(3553,3553,1),it[34067]=Y(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),st(2929),s.setFunc(J),lt(!1),ct(v),st(2884),at(T),{buffers:{color:r,depth:s,stencil:o},initAttributes:function(){for(var t=0,e=l.length;t<e;t++)l[t]=0},enableAttribute:function(t){rt(t,0)},enableAttributeAndDivisor:rt,disableUnusedAttributes:function(){for(var e=0,n=c.length;e!==n;++e)c[e]!==l[e]&&(t.disableVertexAttribArray(e),c[e]=0)},enable:st,disable:ot,getCompressedTextureFormats:function(){if(null===d&&(d=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(34467),i=0;i<n.length;i++)d.push(n[i]);return d},useProgram:function(e){return p!==e&&(t.useProgram(e),p=e,!0)},setBlending:at,setMaterial:function(t,e){t.side===A?ot(2884):st(2884);var n=t.side===w;e&&(n=!n),lt(n),t.blending===C&&!1===t.transparent?at(T):at(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),r.setMask(t.colorWrite),ht(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:lt,setCullFace:ct,setLineWidth:function(e){e!==B&&(j&&t.lineWidth(e),B=e)},setPolygonOffset:ht,setScissorTest:function(t){t?st(3089):ot(3089)},activeTexture:ut,bindTexture:function(e,n){null===G&&ut();var i=W[G];void 0===i&&(W[G]=i={type:void 0,texture:void 0}),i.type===e&&i.texture===n||(t.bindTexture(e,n||it[e]),i.type=e,i.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===q.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),q.copy(e))},viewport:function(e){!1===X.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),X.copy(e))},reset:function(){for(var e=0;e<c.length;e++)1===c[e]&&(t.disableVertexAttribArray(e),c[e]=0);u={},d=null,G=null,W={},p=null,m=null,k=null,N=null,r.reset(),s.reset(),o.reset()}}}function Yr(t,e,n,i,r,s,o){var a,l={},c="undefined"!=typeof OffscreenCanvas;function h(t,e){return c?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function u(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var s=e?De.floorPowerOfTwo:Math.floor,o=s(r*t.width),l=s(r*t.height);void 0===a&&(a=h(o,l));var c=n?h(o,l):a;return c.width=o,c.height=l,c.getContext("2d").drawImage(t,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+l+")."),c}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function d(t){return De.isPowerOfTwo(t.width)&&De.isPowerOfTwo(t.height)}function p(t,e){return t.generateMipmaps&&e&&t.minFilter!==wt&&t.minFilter!==St}function f(e,n,r,s){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,s))*Math.LOG2E}function m(t,n){if(!r.isWebGL2)return t;var i=t;return 6403===t&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===t&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===t&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325===i||33326===i||34842===i||34836===i?e.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function g(t){return t===wt||t===At||t===Et?9728:9729}function v(e){var n=e.target;n.removeEventListener("dispose",v),function(e){var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}(n),n.isVideoTexture&&delete l[n.id],o.memory.textures--}function y(e){var n=e.target;n.removeEventListener("dispose",y),function(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var s=0;s<6;s++)t.deleteFramebuffer(n.__webglFramebuffer[s]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[s]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e)}}(n),o.memory.textures--}function _(t,e){var r=i.get(t);if(t.isVideoTexture&&function(t){var e=t.id,n=o.render.frame;l[e]!==n&&(l[e]=n,t.update())}(t),t.version>0&&r.__version!==t.version){var s=t.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==s.complete)return void w(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function b(n,o,a){var l;if(a?(t.texParameteri(n,10242,s.convert(o.wrapS)),t.texParameteri(n,10243,s.convert(o.wrapT)),32879!==n&&35866!==n||t.texParameteri(n,32882,s.convert(o.wrapR)),t.texParameteri(n,10240,s.convert(o.magFilter)),t.texParameteri(n,10241,s.convert(o.minFilter))):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===bt&&o.wrapT===bt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,g(o.magFilter)),t.texParameteri(n,10241,g(o.minFilter)),o.minFilter!==wt&&o.minFilter!==St&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=e.get("EXT_texture_filter_anisotropic")){if(o.type===Dt&&null===e.get("OES_texture_float_linear"))return;if(o.type===kt&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function x(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",v),e.__webglTexture=t.createTexture(),o.memory.textures++)}function w(e,i,o){var a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),x(e,i),n.activeTexture(33984+o),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var l=function(t){return!r.isWebGL2&&(t.wrapS!==bt||t.wrapT!==bt||t.minFilter!==wt&&t.minFilter!==St)}(i)&&!1===d(i.image),c=u(i.image,l,!1,r.maxTextureSize),h=d(c)||r.isWebGL2,g=s.convert(i.format),v=s.convert(i.type),y=m(g,v);b(a,i,h);var _,w=i.mipmaps;if(i.isDepthTexture){if(y=6402,i.type===Dt){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");y=36012}else r.isWebGL2&&(y=33189);i.format===qt&&6402===y&&i.type!==Rt&&i.type!==It&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Rt,v=s.convert(i.type)),i.format===Xt&&(y=34041,i.type!==zt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=zt,v=s.convert(i.type))),n.texImage2D(3553,0,y,c.width,c.height,0,g,v,null)}else if(i.isDataTexture)if(w.length>0&&h){for(var A=0,E=w.length;A<E;A++)n.texImage2D(3553,A,y,(_=w[A]).width,_.height,0,g,v,_.data);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,y,c.width,c.height,0,g,v,c.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(A=0,E=w.length;A<E;A++)_=w[A],i.format!==Ht&&i.format!==jt?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(3553,A,y,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,A,y,_.width,_.height,0,g,v,_.data);e.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,y,c.width,c.height,c.depth,0,g,v,c.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,y,c.width,c.height,c.depth,0,g,v,c.data),e.__maxMipLevel=0;else if(w.length>0&&h){for(A=0,E=w.length;A<E;A++)n.texImage2D(3553,A,y,g,v,_=w[A]);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,y,g,v,c),e.__maxMipLevel=0;p(i,h)&&f(3553,i,c.width,c.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function A(e,r,o,a){var l=s.convert(r.texture.format),c=s.convert(r.texture.type),h=m(l,c);n.texImage2D(a,0,h,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,a,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function E(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(i){var r=S(n);t.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer)i?(r=S(n),t.renderbufferStorageMultisample(36161,r,34041,n.width,n.height)):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e);else{var o=m(s.convert(n.texture.format),s.convert(n.texture.type));i?(r=S(n),t.renderbufferStorageMultisample(36161,r,o,n.width,n.height)):t.renderbufferStorage(36161,o,n.width,n.height)}t.bindRenderbuffer(36161,null)}function S(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}this.setTexture2D=_,this.setTexture2DArray=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?w(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?w(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=function(e,o){var a=i.get(e);if(6===e.image.length)if(e.version>0&&a.__version!==e.version){x(a,e),n.activeTexture(33984+o),n.bindTexture(34067,a.__webglTexture),t.pixelStorei(37440,e.flipY);for(var l=e&&e.isCompressedTexture,c=e.image[0]&&e.image[0].isDataTexture,h=[],g=0;g<6;g++)h[g]=l||c?c?e.image[g].image:e.image[g]:u(e.image[g],!1,!0,r.maxCubemapSize);var v=h[0],y=d(v)||r.isWebGL2,_=s.convert(e.format),w=s.convert(e.type),A=m(_,w);for(b(34067,e,y),g=0;g<6;g++)if(l)for(var E,S=h[g].mipmaps,M=0,T=S.length;M<T;M++)E=S[M],e.format!==Ht&&e.format!==jt?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(34069+g,M,A,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+g,M,A,E.width,E.height,0,_,w,E.data);else c?n.texImage2D(34069+g,0,A,h[g].width,h[g].height,0,_,w,h[g].data):n.texImage2D(34069+g,0,A,_,w,h[g]);a.__maxMipLevel=l?S.length-1:0,p(e,y)&&f(34067,e,v.width,v.height),a.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+o),n.bindTexture(34067,a.__webglTexture)},this.setTextureCubeDynamic=function(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)},this.setupRenderTarget=function(e){var a=i.get(e),l=i.get(e.texture);e.addEventListener("dispose",y),l.__webglTexture=t.createTexture(),o.memory.textures++;var c=!0===e.isWebGLRenderTargetCube,h=!0===e.isWebGLMultisampleRenderTarget,u=d(e)||r.isWebGL2;if(c){a.__webglFramebuffer=[];for(var g=0;g<6;g++)a.__webglFramebuffer[g]=t.createFramebuffer()}else if(a.__webglFramebuffer=t.createFramebuffer(),h)if(r.isWebGL2){a.__webglMultisampledFramebuffer=t.createFramebuffer(),a.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,a.__webglColorRenderbuffer);var v=m(s.convert(e.texture.format),s.convert(e.texture.type)),x=S(e);t.renderbufferStorageMultisample(36161,x,v,e.width,e.height),t.bindFramebuffer(36160,a.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,a.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(a.__webglDepthRenderbuffer=t.createRenderbuffer(),E(a.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){for(n.bindTexture(34067,l.__webglTexture),b(34067,e.texture,u),g=0;g<6;g++)A(a.__webglFramebuffer[g],e,36064,34069+g);p(e.texture,u)&&f(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),b(3553,e.texture,u),A(a.__webglFramebuffer,e,36064,3553),p(e.texture,u)&&f(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&function(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),_(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===qt)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==Xt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var s=0;s<6;s++)t.bindFramebuffer(36160,n.__webglFramebuffer[s]),n.__webglDepthbuffer[s]=t.createRenderbuffer(),E(n.__webglDepthbuffer[s],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),E(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(p(e,d(t)||r.isWebGL2)){var s=t.isWebGLRenderTargetCube?34067:3553,o=i.get(e).__webglTexture;n.bindTexture(s,o),f(s,e,t.width,t.height),n.bindTexture(s,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var s=e.width,o=e.height,a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,s,o,0,0,s,o,a,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}}function Qr(t,e,n){return{convert:function(t){var i;if(t===_t)return 10497;if(t===bt)return 33071;if(t===xt)return 33648;if(t===wt)return 9728;if(t===At)return 9984;if(t===Et)return 9986;if(t===St)return 9729;if(t===Mt)return 9985;if(t===Tt)return 9987;if(t===Ct)return 5121;if(t===Nt)return 32819;if(t===Bt)return 32820;if(t===Ft)return 33635;if(t===Lt)return 5120;if(t===Pt)return 5122;if(t===Rt)return 5123;if(t===Ot)return 5124;if(t===It)return 5125;if(t===Dt)return 5126;if(t===kt){if(n.isWebGL2)return 5131;if(null!==(i=e.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(t===Ut)return 6406;if(t===jt)return 6407;if(t===Ht)return 6408;if(t===Vt)return 6409;if(t===Gt)return 6410;if(t===qt)return 6402;if(t===Xt)return 34041;if(t===Yt)return 6403;if(t===I)return 32774;if(t===D)return 32778;if(t===k)return 32779;if(t===F)return 0;if(t===z)return 1;if(t===U)return 768;if(t===j)return 769;if(t===H)return 770;if(t===V)return 771;if(t===G)return 772;if(t===W)return 773;if(t===q)return 774;if(t===X)return 775;if(t===Y)return 776;if((t===Qt||t===Zt||t===Kt||t===Jt)&&null!==(i=e.get("WEBGL_compressed_texture_s3tc"))){if(t===Qt)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Zt)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Kt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Jt)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===$t||t===te||t===ee||t===ne)&&null!==(i=e.get("WEBGL_compressed_texture_pvrtc"))){if(t===$t)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===te)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ee)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ne)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===ie&&null!==(i=e.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((t===re||t===se||t===oe||t===ae||t===le||t===ce||t===he||t===ue||t===de||t===pe||t===fe||t===me||t===ge||t===ve)&&null!==(i=e.get("WEBGL_compressed_texture_astc")))return t;if(t===N||t===B){if(n.isWebGL2){if(t===N)return 32775;if(t===B)return 32776}if(null!==(i=e.get("EXT_blend_minmax"))){if(t===N)return i.MIN_EXT;if(t===B)return i.MAX_EXT}}if(t===zt){if(n.isWebGL2)return 34042;if(null!==(i=e.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Zr(){Mn.call(this),this.type="Group"}function Kr(){Mn.call(this),this.type="Camera",this.matrixWorldInverse=new Ne,this.projectionMatrix=new Ne,this.projectionMatrixInverse=new Ne}function Jr(t,e,n,i){Kr.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function $r(t){Jr.call(this),this.cameras=t||[]}(Gr.prototype=Object.create(Zn.prototype)).constructor=Gr,Gr.prototype.isMeshDepthMaterial=!0,Gr.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},(Wr.prototype=Object.create(Zn.prototype)).constructor=Wr,Wr.prototype.isMeshDistanceMaterial=!0,Wr.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Zr.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Zr,isGroup:!0}),Kr.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Kr,isCamera:!0,copy:function(t,e){return Mn.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Fe),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Mn.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Jr.prototype=Object.assign(Object.create(Kr.prototype),{constructor:Jr,isPerspectiveCamera:!0,copy:function(t,e){return Kr.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*De.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*De.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*De.RAD2DEG*Math.atan(Math.tan(.5*De.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*De.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,s=this.view;if(null!==this.view&&this.view.enabled){var o=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/o,e-=s.offsetY*n/a,i*=s.width/o,n*=s.height/a}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Mn.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),$r.prototype=Object.assign(Object.create(Jr.prototype),{constructor:$r,isArrayCamera:!0});var ts,es,ns,is,rs,ss,os=new Fe,as=new Fe;function ls(t,e,n){os.setFromMatrixPosition(e.matrixWorld),as.setFromMatrixPosition(n.matrixWorld);var i=os.distanceTo(as),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(s[8]+1)/s[0],d=o*h,p=o*u,f=i/(-h+u),m=f*-h;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var g=o+f,v=a+f;t.projectionMatrix.makePerspective(d-m,p+(i-m),l*a/v*g,c*a/v*g,g,v)}function cs(t){var e=this,n=null,i=null,r=null,s=[],o=new Ne,a=new Ne,l=1,c="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",_,!1));var h=new Ne,u=new Be,d=new Fe,p=new Jr;p.bounds=new Ye(0,0,.5,1),p.layers.enable(1);var f=new Jr;f.bounds=new Ye(.5,0,.5,1),f.layers.enable(2);var m=new $r([p,f]);function g(){return null!==n&&!0===n.isPresenting}m.layers.enable(1),m.layers.enable(2);var v,y=new ke;function _(){w(),g()?A.start():A.stop()}var b=[];function x(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=e.length;n<r;n++){var s=e[n];if(s&&("Daydream Controller"===s.id||"Gear VR Controller"===s.id||"Oculus Go Controller"===s.id||"OpenVR Gamepad"===s.id||s.id.startsWith("Oculus Touch")||s.id.startsWith("Spatial Controller"))){if(i===t)return s;i++}}}function w(){if(g()){var i=n.getEyeParameters("left");t.setDrawingBufferSize(i.renderWidth*l*2,i.renderHeight*l,1)}else e.enabled&&(v=t.getPixelRatio(),t.getSize(y),t.setDrawingBufferSize(y.width,y.height,v))}this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new Zr).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t),A.setContext(t),w(),g()&&A.start()},this.setFramebufferScaleFactor=function(t){l=t},this.setFrameOfReferenceType=function(t){c=t},this.setPoseTarget=function(t){void 0!==t&&(r=t)},this.getCamera=function(t){var e="stage"===c?1.6:0;if(!1===g())return t.position.set(0,e,0),t.rotation.set(0,0,0),t;if(n.depthNear=t.near,n.depthFar=t.far,n.getFrameData(i),"stage"===c){var l=n.stageParameters;l?o.fromArray(l.sittingToStandingTransform):o.makeTranslation(0,e,0)}var v=i.pose,y=null!==r?r:t;y.matrix.copy(o),y.matrix.decompose(y.position,y.quaternion,y.scale),null!==v.orientation&&(u.fromArray(v.orientation),y.quaternion.multiply(u)),null!==v.position&&(u.setFromRotationMatrix(o),d.fromArray(v.position),d.applyQuaternion(u),y.position.add(d)),y.updateMatrixWorld(),p.near=t.near,f.near=t.near,p.far=t.far,f.far=t.far,p.matrixWorldInverse.fromArray(i.leftViewMatrix),f.matrixWorldInverse.fromArray(i.rightViewMatrix),a.getInverse(o),"stage"===c&&(p.matrixWorldInverse.multiply(a),f.matrixWorldInverse.multiply(a));var _=y.parent;null!==_&&(h.getInverse(_.matrixWorld),p.matrixWorldInverse.multiply(h),f.matrixWorldInverse.multiply(h)),p.matrixWorld.getInverse(p.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),p.projectionMatrix.fromArray(i.leftProjectionMatrix),f.projectionMatrix.fromArray(i.rightProjectionMatrix),ls(m,p,f);var w=n.getLayers();if(w.length){var A=w[0];null!==A.leftBounds&&4===A.leftBounds.length&&p.bounds.fromArray(A.leftBounds),null!==A.rightBounds&&4===A.rightBounds.length&&f.bounds.fromArray(A.rightBounds)}return function(){for(var t=0;t<s.length;t++){var e=s[t],n=x(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&e.position.set(.2,-.6,-.05),null!==i.position&&e.position.fromArray(i.position),null!==i.orientation&&e.quaternion.fromArray(i.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(o),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var r="Daydream Controller"===n.id?0:1;b[t]!==n.buttons[r].pressed&&(b[t]=n.buttons[r].pressed,!0===b[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}(),m},this.getStandingMatrix=function(){return o},this.isPresenting=g;var A=new gn;this.setAnimationLoop=function(t){A.setAnimationLoop(t),g()&&A.start()},this.submitFrame=function(){g()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",_)}}function hs(t){var e=t.context,n=null,i=null,r=1,s=null,o="stage",a=null,l=null,c=[],h=[];function u(){return null!==i&&null!==s}var d=new Jr;d.layers.enable(1),d.viewport=new Ye;var p=new Jr;p.layers.enable(2),p.viewport=new Ye;var f=new $r([d,p]);function m(t){var e=c[h.indexOf(t.inputSource)];e&&e.dispatchEvent({type:t.type})}function g(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),_.stop()}function v(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=c[t];return void 0===e&&((e=new Zr).matrixAutoUpdate=!1,e.visible=!1,c[t]=e),e},this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t),t instanceof XRDevice&&e.setCompatibleXRDevice(t)},this.setFramebufferScaleFactor=function(t){r=t},this.setFrameOfReferenceType=function(t){o=t},this.setSession=function(n){null!==(i=n)&&(i.addEventListener("select",m),i.addEventListener("selectstart",m),i.addEventListener("selectend",m),i.addEventListener("end",g),i.baseLayer=new XRWebGLLayer(i,e,{framebufferScaleFactor:r}),i.requestFrameOfReference(o).then(function(e){s=e,t.setFramebuffer(i.baseLayer.framebuffer),_.setContext(i),_.start()}),h=i.getInputSources(),i.addEventListener("inputsourceschange",function(){h=i.getInputSources(),console.log(h);for(var t=0;t<c.length;t++)c[t].userData.inputSource=h[t]}))},this.setPoseTarget=function(t){void 0!==t&&(l=t)},this.getCamera=function(t){if(u()){var e=t.parent,n=f.cameras,i=l||t;v(f,e);for(var r=0;r<n.length;r++)v(n[r],e);i.matrixWorld.copy(f.matrixWorld);for(var s=i.children,o=(r=0,s.length);r<o;r++)s[r].updateMatrixWorld(!0);return ls(f,d,p),f}return t},this.getCameraPose=function(){return a},this.isPresenting=u;var y=null,_=new gn;_.setAnimationLoop(function(t,e){if(null!==(a=e.getDevicePose(s)))for(var n=i.baseLayer,r=e.views,o=0;o<r.length;o++){var l=r[o],u=n.getViewport(l),d=a.getViewMatrix(l),p=f.cameras[o];p.matrix.fromArray(d).getInverse(p.matrix),p.projectionMatrix.fromArray(l.projectionMatrix),p.viewport.set(u.x,u.y,u.width,u.height),0===o&&f.matrix.copy(p.matrix)}for(o=0;o<c.length;o++){var m=c[o],g=h[o];if(g){var v=e.getInputPose(g,s);if(null!==v){"targetRay"in v?m.matrix.elements=v.targetRay.transformMatrix:"pointerMatrix"in v&&(m.matrix.elements=v.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}y&&y(t,e)}),this.setAnimationLoop=function(t){y=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Ne},this.submitFrame=function(){}}function us(t){console.log("THREE.WebGLRenderer",m);var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,s=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",h=null,u=null;this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=at,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,p,f,g,v,y,_,b,x,A,E,S,M,T,C,L,P,R,O=this,I=!1,D=null,k=null,N=null,B=-1,F={geometry:null,program:null,wireframe:!1},z=null,U=null,j=new Ye,H=new Ye,V=null,G=0,W=e.width,q=e.height,X=1,Y=new Ye(0,0,W,q),Q=new Ye(0,0,W,q),Z=!1,K=new nn,J=new _i,$=!1,tt=!1,et=new Ne,nt=new Fe;function it(){return null===k?X:1}try{var rt={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c};if(e.addEventListener("webglcontextlost",ct,!1),e.addEventListener("webglcontextrestored",ht,!1),null===(d=n||e.getContext("webgl",rt)||e.getContext("experimental-webgl",rt)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Et){throw console.error("THREE.WebGLRenderer: "+Et.message),Et}function st(){p=new bi(d),(f=new yi(d,p,t)).isWebGL2||(p.get("WEBGL_depth_texture"),p.get("OES_texture_float"),p.get("OES_texture_half_float"),p.get("OES_texture_half_float_linear"),p.get("OES_standard_derivatives"),p.get("OES_element_index_uint"),p.get("ANGLE_instanced_arrays")),p.get("OES_texture_float_linear"),R=new Qr(d,p,f),(g=new Xr(d,p,R,f)).scissor(H.copy(Q).multiplyScalar(X)),g.viewport(j.copy(Y).multiplyScalar(X)),v=new Ai(d),y=new Dr,_=new Yr(d,p,g,y,f,R,v),b=new vn(d),x=new xi(d,b,v),A=new Mi(x,v),C=new Si(d),E=new Ir(O,p,f),S=new Fr,M=new Vr,T=new gi(O,g,A,a),L=new vi(d,p,v,f),P=new wi(d,p,v,f),v.programs=E.programs,O.context=d,O.capabilities=f,O.extensions=p,O.properties=y,O.renderLists=S,O.state=g,O.info=v}st();var ot=null;"undefined"!=typeof navigator&&(ot="xr"in navigator?new hs(O):new cs(O)),this.vr=ot;var lt=new qr(O,A,f.maxTextureSize);function ct(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function ht(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1,st()}function ut(t){var e=t.target;e.removeEventListener("dispose",ut),function(t){dt(t),y.remove(t)}(e)}function dt(t){var e=y.get(t).program;t.program=void 0,void 0!==e&&E.releaseProgram(e)}this.shadowMap=lt,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var t=p.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=p.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(t){void 0!==t&&(X=t,this.setSize(W,q,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new ke),t.set(W,q)},this.setSize=function(t,n,i){ot.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=t,q=n,e.width=t*X,e.height=n*X,!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new ke),t.set(W*X,q*X)},this.setDrawingBufferSize=function(t,n,i){W=t,q=n,X=i,e.width=t*i,e.height=n*i,this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Ye),t.copy(j)},this.getViewport=function(t){return t.copy(Y)},this.setViewport=function(t,e,n,i){t.isVector4?Y.set(t.x,t.y,t.z,t.w):Y.set(t,e,n,i),g.viewport(j.copy(Y).multiplyScalar(X))},this.getScissor=function(t){return t.copy(Q)},this.setScissor=function(t,e,n,i){t.isVector4?Q.set(t.x,t.y,t.z,t.w):Q.set(t,e,n,i),g.scissor(H.copy(Q).multiplyScalar(X))},this.getScissorTest=function(){return Z},this.setScissorTest=function(t){g.setScissorTest(Z=t)},this.getClearColor=function(){return T.getClearColor()},this.setClearColor=function(){T.setClearColor.apply(T,arguments)},this.getClearAlpha=function(){return T.getClearAlpha()},this.setClearAlpha=function(){T.setClearAlpha.apply(T,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),d.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ct,!1),e.removeEventListener("webglcontextrestored",ht,!1),S.dispose(),M.dispose(),y.dispose(),A.dispose(),ot.dispose(),mt.stop()},this.renderBufferImmediate=function(t,e){g.initAttributes();var n=y.get(t);t.hasPositions&&!n.position&&(n.position=d.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=d.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=d.createBuffer()),t.hasColors&&!n.color&&(n.color=d.createBuffer());var i=e.getAttributes();t.hasPositions&&(d.bindBuffer(34962,n.position),d.bufferData(34962,t.positionArray,35048),g.enableAttribute(i.position),d.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(d.bindBuffer(34962,n.normal),d.bufferData(34962,t.normalArray,35048),g.enableAttribute(i.normal),d.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(d.bindBuffer(34962,n.uv),d.bufferData(34962,t.uvArray,35048),g.enableAttribute(i.uv),d.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(d.bindBuffer(34962,n.color),d.bufferData(34962,t.colorArray,35048),g.enableAttribute(i.color),d.vertexAttribPointer(i.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),d.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,s){var o=r.isMesh&&r.matrixWorld.determinant()<0;g.setMaterial(i,o);var a=bt(t,e,i,r),l=!1;F.geometry===n.id&&F.program===a.id&&F.wireframe===(!0===i.wireframe)||(F.geometry=n.id,F.program=a.id,F.wireframe=!0===i.wireframe,l=!0),r.morphTargetInfluences&&(C.update(r,n,i,a),l=!0);var c,h=n.index,u=n.attributes.position,m=1;!0===i.wireframe&&(h=x.getWireframeAttribute(n),m=2);var v=L;null!==h&&(c=b.get(h),(v=P).setIndex(c)),l&&(function(t,e,n){if(n&&n.isInstancedBufferGeometry&&!f.isWebGL2&&null===p.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{g.initAttributes();var i=n.attributes,r=e.getAttributes(),s=t.defaultAttributeValues;for(var o in r){var a=r[o];if(a>=0){var l=i[o];if(void 0!==l){var c=l.normalized,h=l.itemSize,u=b.get(l);if(void 0===u)continue;var m=u.buffer,v=u.type,y=u.bytesPerElement;if(l.isInterleavedBufferAttribute){var _=l.data,x=_.stride,w=l.offset;_&&_.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(a,_.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=_.meshPerAttribute*_.count)):g.enableAttribute(a),d.bindBuffer(34962,m),d.vertexAttribPointer(a,h,v,c,x*y,w*y)}else l.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(a,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):g.enableAttribute(a),d.bindBuffer(34962,m),d.vertexAttribPointer(a,h,v,c,0,0)}else if(void 0!==s){var A=s[o];if(void 0!==A)switch(A.length){case 2:d.vertexAttrib2fv(a,A);break;case 3:d.vertexAttrib3fv(a,A);break;case 4:d.vertexAttrib4fv(a,A);break;default:d.vertexAttrib1fv(a,A)}}}}g.disableUnusedAttributes()}}(i,a,n),null!==h&&d.bindBuffer(34963,c.buffer));var y=1/0;null!==h?y=h.count:void 0!==u&&(y=u.count);var _=n.drawRange.start*m,w=n.drawRange.count*m,A=null!==s?s.start*m:0,E=null!==s?s.count*m:1/0,S=Math.max(_,A),M=Math.min(y,_+w,A+E)-1,T=Math.max(0,M-S+1);if(0!==T){if(r.isMesh)if(!0===i.wireframe)g.setLineWidth(i.wireframeLinewidth*it()),v.setMode(1);else switch(r.drawMode){case be:v.setMode(4);break;case xe:v.setMode(5);break;case we:v.setMode(6)}else if(r.isLine){var R=i.linewidth;void 0===R&&(R=1),g.setLineWidth(R*it()),v.setMode(r.isLineSegments?1:r.isLineLoop?2:3)}else r.isPoints?v.setMode(0):r.isSprite&&v.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&v.renderInstances(n,S,T):v.render(S,T)}},this.compile=function(t,e){(u=M.get(t,e)).init(),t.traverse(function(t){t.isLight&&(u.pushLight(t),t.castShadow&&u.pushShadow(t))}),u.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)_t(e.material[n],t.fog,e);else _t(e.material,t.fog,e)})};var pt,ft=null,mt=new gn;function gt(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLight)u.pushLight(t),t.castShadow&&u.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||K.intersectsSprite(t)){i&&nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(et);var r=A.update(t);(s=t.material).visible&&h.push(t,r,s,n,nt.z,null)}}else if(t.isImmediateRenderObject)i&&nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(et),h.push(t,null,t.material,n,nt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||K.intersectsObject(t))){i&&nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(et),r=A.update(t);var s=t.material;if(Array.isArray(s))for(var o=r.groups,a=0,l=o.length;a<l;a++){var c=o[a],d=s[c.materialIndex];d&&d.visible&&h.push(t,r,d,n,nt.z,c)}else s.visible&&h.push(t,r,s,n,nt.z,null)}var p=t.children;for(a=0,l=p.length;a<l;a++)gt(p[a],e,n,i)}}function vt(t,e,n,i){for(var r=0,s=t.length;r<s;r++){var o=t[r],a=o.object,l=o.geometry,c=void 0===i?o.material:i,h=o.group;if(n.isArrayCamera){U=n;for(var d=n.cameras,p=0,f=d.length;p<f;p++){var m=d[p];if(a.layers.test(m.layers)){if("viewport"in m)g.viewport(j.copy(m.viewport));else{var v=m.bounds;g.viewport(j.set(v.x*W,v.y*q,v.z*W,v.w*q).multiplyScalar(X))}u.setupLights(m),yt(a,e,m,l,c,h)}}}else U=null,yt(a,e,n,l,c,h)}}function yt(t,e,n,i,r,s){if(t.onBeforeRender(O,e,n,i,r,s),u=M.get(e,U||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){g.setMaterial(r);var o=bt(n,e.fog,r,t);F.geometry=null,F.program=null,F.wireframe=!1,function(t,e){t.render(function(t){O.renderBufferImmediate(t,e)})}(t,o)}else O.renderBufferDirect(n,e.fog,i,r,t,s);t.onAfterRender(O,e,n,i,r,s),u=M.get(e,U||n)}function _t(t,e,n){var i=y.get(t),r=u.state.lights,s=i.lightsHash,o=r.state.hash,a=E.getParameters(t,r.state,u.state.shadowsArray,e,J.numPlanes,J.numIntersection,n),l=E.getProgramCode(t,a),c=i.program,h=!0;if(void 0===c)t.addEventListener("dispose",ut);else if(c.code!==l)dt(t);else if(s.stateID!==o.stateID||s.directionalLength!==o.directionalLength||s.pointLength!==o.pointLength||s.spotLength!==o.spotLength||s.rectAreaLength!==o.rectAreaLength||s.hemiLength!==o.hemiLength||s.shadowsLength!==o.shadowsLength)s.stateID=o.stateID,s.directionalLength=o.directionalLength,s.pointLength=o.pointLength,s.spotLength=o.spotLength,s.rectAreaLength=o.rectAreaLength,s.hemiLength=o.hemiLength,s.shadowsLength=o.shadowsLength,h=!1;else{if(void 0!==a.shaderID)return;h=!1}if(h){if(a.shaderID){var d=mn[a.shaderID];i.shader={name:t.type,uniforms:sn(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,O),l=E.getProgramCode(t,a),c=E.acquireProgram(t,i.shader,a,l),i.program=c,t.program=c}var p=c.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<O.maxMorphTargets;f++)p["morphTarget"+f]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals)for(t.numSupportedMorphNormals=0,f=0;f<O.maxMorphNormals;f++)p["morphNormal"+f]>=0&&t.numSupportedMorphNormals++;var m=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=J.numPlanes,i.numIntersection=J.numIntersection,m.clippingPlanes=J.uniform),i.fog=e,void 0===s&&(i.lightsHash=s={}),s.stateID=o.stateID,s.directionalLength=o.directionalLength,s.pointLength=o.pointLength,s.spotLength=o.spotLength,s.rectAreaLength=o.rectAreaLength,s.hemiLength=o.hemiLength,s.shadowsLength=o.shadowsLength,t.lights&&(m.ambientLightColor.value=r.state.ambient,m.directionalLights.value=r.state.directional,m.spotLights.value=r.state.spot,m.rectAreaLights.value=r.state.rectArea,m.pointLights.value=r.state.point,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotShadowMatrix.value=r.state.spotShadowMatrix,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);var g=i.program.getUniforms(),v=xr.seqWithValue(g.seq,m);i.uniformsList=v}function bt(t,e,n,i){G=0;var r=y.get(n),s=r.lightsHash,o=u.state.lights.state.hash;$&&(tt||t!==z)&&J.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,t===z&&n.id===B),!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:(!n.lights||s.stateID===o.stateID&&s.directionalLength===o.directionalLength&&s.pointLength===o.pointLength&&s.spotLength===o.spotLength&&s.rectAreaLength===o.rectAreaLength&&s.hemiLength===o.hemiLength&&s.shadowsLength===o.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===J.numPlanes&&r.numIntersection===J.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(_t(n,e,i),n.needsUpdate=!1);var a,l,c=!1,h=!1,p=!1,m=r.program,v=m.getUniforms(),_=r.shader.uniforms;if(g.useProgram(m.program)&&(c=!0,h=!0,p=!0),n.id!==B&&(B=n.id,h=!0),c||z!==t){if(v.setValue(d,"projectionMatrix",t.projectionMatrix),f.logarithmicDepthBuffer&&v.setValue(d,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),z!==t&&(z=t,h=!0,p=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var b=v.map.cameraPosition;void 0!==b&&b.setValue(d,nt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&v.setValue(d,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){v.setOptional(d,i,"bindMatrix"),v.setOptional(d,i,"bindMatrixInverse");var x=i.skeleton;if(x)if(f.floatVertexTextures){if(void 0===x.boneTexture){var A=Math.sqrt(4*x.bones.length);A=De.ceilPowerOfTwo(A),A=Math.max(A,4);var E=new Float32Array(A*A*4);E.set(x.boneMatrices);var S=new Je(E,A,A,Ht,Dt);S.needsUpdate=!0,x.boneMatrices=E,x.boneTexture=S,x.boneTextureSize=A}v.setValue(d,"boneTexture",x.boneTexture),v.setValue(d,"boneTextureSize",x.boneTextureSize)}else v.setOptional(d,x,"boneMatrices")}return h&&(v.setValue(d,"toneMappingExposure",O.toneMappingExposure),v.setValue(d,"toneMappingWhitePoint",O.toneMappingWhitePoint),n.lights&&((a=_).ambientLightColor.needsUpdate=l=p,a.directionalLights.needsUpdate=l,a.pointLights.needsUpdate=l,a.spotLights.needsUpdate=l,a.rectAreaLights.needsUpdate=l,a.hemisphereLights.needsUpdate=l),e&&n.fog&&function(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(_,e),n.isMeshBasicMaterial?xt(_,n):n.isMeshLambertMaterial?(xt(_,n),function(t,e){e.emissiveMap&&(_.emissiveMap.value=e.emissiveMap)}(0,n)):n.isMeshPhongMaterial?(xt(_,n),n.isMeshToonMaterial?function(t,e){wt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(_,n):wt(_,n)):n.isMeshStandardMaterial?(xt(_,n),n.isMeshPhysicalMaterial?function(t,e){At(t,e),t.reflectivity.value=e.reflectivity,t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness}(_,n):At(_,n)):n.isMeshMatcapMaterial?(xt(_,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isMeshDepthMaterial?(xt(_,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isMeshDistanceMaterial?(xt(_,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(_,n)):n.isMeshNormalMaterial?(xt(_,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}(_,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(_,n)):n.isPointsMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*X,t.scale.value=.5*q,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(_,n):n.isSpriteMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(_,n):n.isShadowMaterial&&(_.color.value=n.color,_.opacity.value=n.opacity),void 0!==_.ltc_1&&(_.ltc_1.value=fn.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=fn.LTC_2),xr.upload(d,r.uniformsList,_,O)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(xr.upload(d,r.uniformsList,_,O),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&v.setValue(d,"center",i.center),v.setValue(d,"modelViewMatrix",i.modelViewMatrix),v.setValue(d,"normalMatrix",i.normalMatrix),v.setValue(d,"modelMatrix",i.matrixWorld),m}function xt(t,e){var n;t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=y.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function wt(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function At(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}mt.setAnimationLoop(function(t){ot.isPresenting()||ft&&ft(t)}),"undefined"!=typeof window&&mt.setContext(window),this.setAnimationLoop=function(t){ft=t,ot.setAnimationLoop(t),mt.start()},this.render=function(t,e){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),e&&e.isCamera){if(!I){F.geometry=null,F.program=null,F.wireframe=!1,B=-1,z=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ot.enabled&&(e=ot.getCamera(e)),(u=M.get(t,e)).init(),t.onBeforeRender(O,t,e,n||k),et.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),K.setFromMatrix(et),$=J.init(this.clippingPlanes,tt=this.localClippingEnabled,e),(h=S.get(t,e)).init(),gt(t,e,0,O.sortObjects),!0===O.sortObjects&&h.sort(),$&&J.beginShadows();var r=u.state.shadowsArray;lt.render(r,t,e),u.setupLights(e),$&&J.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),T.render(h,t,e,i);var s=h.opaque,o=h.transparent;if(t.overrideMaterial){var a=t.overrideMaterial;s.length&&vt(s,t,e,a),o.length&&vt(o,t,e,a)}else s.length&&vt(s,t,e),o.length&&vt(o,t,e);t.onAfterRender(O,t,e),null!==k&&(_.updateRenderTargetMipmap(k),_.updateMultisampleRenderTarget(k)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),ot.enabled&&ot.submitFrame(),h=null,u=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var t=G;return t>=f.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+f.maxTextures),G+=1,t},this.setTexture2D=(pt=!1,function(t,e){t&&t.isWebGLRenderTarget&&(pt||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),pt=!0),t=t.texture),_.setTexture2D(t,e)}),this.setTexture2DArray=function(t,e){_.setTexture2DArray(t,e)},this.setTexture3D=function(t,e){_.setTexture3D(t,e)},this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),_.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?_.setTextureCube(e,n):_.setTextureCubeDynamic(e,n)}}(),this.setFramebuffer=function(t){D=t},this.getRenderTarget=function(){return k},this.setRenderTarget=function(t,e,n){k=t,t&&void 0===y.get(t).__webglFramebuffer&&_.setupRenderTarget(t);var i=D,r=!1;if(t){var s=y.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(i=s[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?y.get(t).__webglMultisampledFramebuffer:s,j.copy(t.viewport),H.copy(t.scissor),V=t.scissorTest}else j.copy(Y).multiplyScalar(X),H.copy(Q).multiplyScalar(X),V=Z;if(N!==i&&(d.bindFramebuffer(36160,i),N=i),g.viewport(j),g.scissor(H),g.setScissorTest(V),r){var o=y.get(t.texture);d.framebufferTexture2D(36160,36064,34069+(e||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,i,r,s){if(t&&t.isWebGLRenderTarget){var o=y.get(t).__webglFramebuffer;if(o){var a=!1;o!==N&&(d.bindFramebuffer(36160,o),a=!0);try{var l=t.texture,c=l.format,h=l.type;if(c!==Ht&&R.convert(c)!==d.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Ct||R.convert(h)===d.getParameter(35738)||h===Dt&&(f.isWebGL2||p.get("OES_texture_float")||p.get("WEBGL_color_buffer_float"))||h===kt&&p.get(f.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===d.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&d.readPixels(e,n,i,r,R.convert(c),R.convert(h),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&d.bindFramebuffer(36160,N)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var i=e.image.width,r=e.image.height,s=R.convert(e.format);this.setTexture2D(e,0),d.copyTexImage2D(3553,n||0,s,t.x,t.y,i,r,0)},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,s=e.image.height,o=R.convert(n.format),a=R.convert(n.type);this.setTexture2D(n,0),e.isDataTexture?d.texSubImage2D(3553,i||0,t.x,t.y,r,s,o,a,e.image.data):d.texSubImage2D(3553,i||0,t.x,t.y,o,a,e.image)}}function ds(t,e){this.name="",this.color=new dn(t),this.density=void 0!==e?e:25e-5}function ps(t,e,n){this.name="",this.color=new dn(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function fs(){Mn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ms(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function gs(t,e,n,i){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function vs(t){Zn.call(this),this.type="SpriteMaterial",this.color=new dn(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function ys(t){if(Mn.call(this),this.type="Sprite",void 0===ts){ts=new Gn;var e=new ms(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);ts.setIndex([0,1,2,0,2,3]),ts.addAttribute("position",new gs(e,3,0,!1)),ts.addAttribute("uv",new gs(e,2,3,!1))}this.geometry=ts,this.material=void 0!==t?t:new vs,this.center=new ke(.5,.5)}function _s(){Mn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function bs(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),mi.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ne,this.bindMatrixInverse=new Ne}function xs(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ne)}}function ws(){Mn.call(this),this.type="Bone"}function As(t){Zn.call(this),this.type="LineBasicMaterial",this.color=new dn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function Es(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Mn.call(this),this.type="Line",this.geometry=void 0!==t?t:new Gn,this.material=void 0!==e?e:new As({color:16777215*Math.random()})}function Ss(t,e){Es.call(this,t,e),this.type="LineSegments"}function Ms(t,e){Es.call(this,t,e),this.type="LineLoop"}function Ts(t){Zn.call(this),this.type="PointsMaterial",this.color=new dn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Cs(t,e){Mn.call(this),this.type="Points",this.geometry=void 0!==t?t:new Gn,this.material=void 0!==e?e:new Ts({color:16777215*Math.random()})}function Ls(t,e,n,i,r,s,o,a,l){Xe.call(this,t,e,n,i,r,s,o,a,l),this.format=void 0!==o?o:jt,this.minFilter=void 0!==s?s:St,this.magFilter=void 0!==r?r:St,this.generateMipmaps=!1}function Ps(t,e,n,i,r,s,o,a,l,c,h,u){Xe.call(this,null,s,o,a,l,c,i,r,h,u),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Rs(t,e,n,i,r,s,o,a,l){Xe.call(this,t,e,n,i,r,s,o,a,l),this.needsUpdate=!0}function Os(t,e,n,i,r,s,o,a,l,c){if((c=void 0!==c?c:qt)!==qt&&c!==Xt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===qt&&(n=Rt),void 0===n&&c===Xt&&(n=zt),Xe.call(this,null,i,r,s,o,a,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:wt,this.minFilter=void 0!==a?a:wt,this.flipY=!1,this.generateMipmaps=!1}function Is(t){Gn.call(this),this.type="WireframeGeometry";var e,n,i,r,s,o,a,l,c,h,u=[],d=[0,0],p={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,i=m.length;e<i;e++){var g=m[e];for(n=0;n<3;n++)a=g[f[n]],l=g[f[(n+1)%3]],d[0]=Math.min(a,l),d[1]=Math.max(a,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]})}for(c in p)u.push((h=t.vertices[(o=p[c]).index1]).x,h.y,h.z),u.push((h=t.vertices[o.index2]).x,h.y,h.z)}else if(t&&t.isBufferGeometry){var v,y,_,b,x;if(h=new Fe,null!==t.index){for(v=t.attributes.position,y=t.index,0===(_=t.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),r=0,s=_.length;r<s;++r)for(e=x=(b=_[r]).start,i=x+b.count;e<i;e+=3)for(n=0;n<3;n++)a=y.getX(e+n),l=y.getX(e+(n+1)%3),d[0]=Math.min(a,l),d[1]=Math.max(a,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]});for(c in p)h.fromBufferAttribute(v,(o=p[c]).index1),u.push(h.x,h.y,h.z),h.fromBufferAttribute(v,o.index2),u.push(h.x,h.y,h.z)}else for(e=0,i=(v=t.attributes.position).count/3;e<i;e++)for(n=0;n<3;n++)h.fromBufferAttribute(v,3*e+n),u.push(h.x,h.y,h.z),h.fromBufferAttribute(v,3*e+(n+1)%3),u.push(h.x,h.y,h.z)}this.addAttribute("position",new zn(u,3))}function Ds(t,e,n){Pn.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new ks(t,e,n)),this.mergeVertices()}function ks(t,e,n){Gn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,s=[],o=[],a=[],l=[],c=new Fe,h=new Fe,u=new Fe,d=new Fe,p=new Fe;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=e+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=e;r++){var g=r/e;t(g,m,h),o.push(h.x,h.y,h.z),g-1e-5>=0?(t(g-1e-5,m,u),d.subVectors(h,u)):(t(g+1e-5,m,u),d.subVectors(u,h)),m-1e-5>=0?(t(g,m-1e-5,u),p.subVectors(h,u)):(t(g,m+1e-5,u),p.subVectors(u,h)),c.crossVectors(d,p).normalize(),a.push(c.x,c.y,c.z),l.push(g,m)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var v=i*f+r+1,y=(i+1)*f+r+1,_=(i+1)*f+r;s.push(i*f+r,v,_),s.push(v,y,_)}this.setIndex(s),this.addAttribute("position",new zn(o,3)),this.addAttribute("normal",new zn(a,3)),this.addAttribute("uv",new zn(l,2))}function Ns(t,e,n,i){Pn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Bs(t,e,n,i)),this.mergeVertices()}function Bs(t,e,n,i){Gn.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1;var r=[],s=[];function o(t,e,n,i){var r,s,o=Math.pow(2,i),l=[];for(r=0;r<=o;r++){l[r]=[];var c=t.clone().lerp(n,r/o),h=e.clone().lerp(n,r/o),u=o-r;for(s=0;s<=u;s++)l[r][s]=0===s&&r===o?c:c.clone().lerp(h,s/u)}for(r=0;r<o;r++)for(s=0;s<2*(o-r)-1;s++){var d=Math.floor(s/2);s%2==0?(a(l[r][d+1]),a(l[r+1][d]),a(l[r][d])):(a(l[r][d+1]),a(l[r+1][d+1]),a(l[r+1][d]))}}function a(t){r.push(t.x,t.y,t.z)}function l(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function c(t,e,n,i){i<0&&1===t.x&&(s[e]=t.x-1),0===n.x&&0===n.z&&(s[e]=i/2/Math.PI+.5)}function h(t){return Math.atan2(t.z,-t.x)}function u(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}!function(t){for(var n=new Fe,i=new Fe,r=new Fe,s=0;s<e.length;s+=3)l(e[s+0],n),l(e[s+1],i),l(e[s+2],r),o(n,i,r,t)}(i=i||0),function(t){for(var e=new Fe,n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){for(var t=new Fe,e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];var n=h(t)/2/Math.PI+.5,i=u(t)/Math.PI+.5;s.push(n,1-i)}(function(){for(var t=new Fe,e=new Fe,n=new Fe,i=new Fe,o=new ke,a=new ke,l=new ke,u=0,d=0;u<r.length;u+=9,d+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),n.set(r[u+6],r[u+7],r[u+8]),o.set(s[d+0],s[d+1]),a.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),i.copy(t).add(e).add(n).divideScalar(3);var p=h(i);c(o,d+0,t,p),c(a,d+2,e,p),c(l,d+4,n,p)}})(),function(){for(var t=0;t<s.length;t+=6){var e=s[t+0],n=s[t+2],i=s[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(s[t+0]+=1),n<.2&&(s[t+2]+=1),i<.2&&(s[t+4]+=1))}}()}(),this.addAttribute("position",new zn(r,3)),this.addAttribute("normal",new zn(r.slice(),3)),this.addAttribute("uv",new zn(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Fs(t,e){Pn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new zs(t,e)),this.mergeVertices()}function zs(t,e){Bs.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Us(t,e){Pn.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new js(t,e)),this.mergeVertices()}function js(t,e){Bs.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Hs(t,e){Pn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Vs(t,e)),this.mergeVertices()}function Vs(t,e){var n=(1+Math.sqrt(5))/2;Bs.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Gs(t,e){Pn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ws(t,e)),this.mergeVertices()}function Ws(t,e){var n=(1+Math.sqrt(5))/2,i=1/n;Bs.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function qs(t,e,n,i,r,s){Pn.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Xs(t,e,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Xs(t,e,n,i,r){Gn.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},n=n||1,i=i||8;var s=t.computeFrenetFrames(e=e||64,r=r||!1);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var o,a,l=new Fe,c=new Fe,h=new ke,u=new Fe,d=[],p=[],f=[],m=[];function g(r){u=t.getPointAt(r/e,u);var o=s.normals[r],h=s.binormals[r];for(a=0;a<=i;a++){var f=a/i*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);c.x=g*o.x+m*h.x,c.y=g*o.y+m*h.y,c.z=g*o.z+m*h.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=u.x+n*c.x,l.y=u.y+n*c.y,l.z=u.z+n*c.z,d.push(l.x,l.y,l.z)}}!function(){for(o=0;o<e;o++)g(o);g(!1===r?e:0),function(){for(o=0;o<=e;o++)for(a=0;a<=i;a++)h.x=o/e,h.y=a/i,f.push(h.x,h.y)}(),function(){for(a=1;a<=e;a++)for(o=1;o<=i;o++){var t=(i+1)*a+(o-1),n=(i+1)*a+o,r=(i+1)*(a-1)+o;m.push((i+1)*(a-1)+(o-1),t,r),m.push(t,n,r)}}()}(),this.setIndex(m),this.addAttribute("position",new zn(d,3)),this.addAttribute("normal",new zn(p,3)),this.addAttribute("uv",new zn(f,2))}function Ys(t,e,n,i,r,s,o){Pn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Qs(t,e,n,i,r,s)),this.mergeVertices()}function Qs(t,e,n,i,r,s){Gn.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,s=s||3;var o,a,l=[],c=[],h=[],u=[],d=new Fe,p=new Fe,f=new Fe,m=new Fe,g=new Fe,v=new Fe,y=new Fe;for(o=0;o<=n;++o){var _=o/n*r*Math.PI*2;for(M(_,r,s,t,f),M(_+.01,r,s,t,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),a=0;a<=i;++a){var b=a/i*Math.PI*2,x=-e*Math.cos(b),w=e*Math.sin(b);d.x=f.x+(x*y.x+w*g.x),d.y=f.y+(x*y.y+w*g.y),d.z=f.z+(x*y.z+w*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),h.push(p.x,p.y,p.z),u.push(o/n),u.push(a/i)}}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var A=(i+1)*a+(o-1),E=(i+1)*a+o,S=(i+1)*(a-1)+o;l.push((i+1)*(a-1)+(o-1),A,S),l.push(A,E,S)}function M(t,e,n,i,r){var s=Math.cos(t),o=Math.sin(t),a=n/e*t,l=Math.cos(a);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(a)*.5}this.setIndex(l),this.addAttribute("position",new zn(c,3)),this.addAttribute("normal",new zn(h,3)),this.addAttribute("uv",new zn(u,2))}function Zs(t,e,n,i,r){Pn.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Ks(t,e,n,i,r)),this.mergeVertices()}function Ks(t,e,n,i,r){Gn.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var s,o,a=[],l=[],c=[],h=[],u=new Fe,d=new Fe,p=new Fe;for(s=0;s<=n;s++)for(o=0;o<=i;o++){var f=o/i*r,m=s/n*Math.PI*2;d.x=(t+e*Math.cos(m))*Math.cos(f),d.y=(t+e*Math.cos(m))*Math.sin(f),d.z=e*Math.sin(m),l.push(d.x,d.y,d.z),u.x=t*Math.cos(f),u.y=t*Math.sin(f),p.subVectors(d,u).normalize(),c.push(p.x,p.y,p.z),h.push(o/i),h.push(s/n)}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var g=(i+1)*(s-1)+o-1,v=(i+1)*(s-1)+o,y=(i+1)*s+o;a.push((i+1)*s+o-1,g,y),a.push(g,v,y)}this.setIndex(a),this.addAttribute("position",new zn(l,3)),this.addAttribute("normal",new zn(c,3)),this.addAttribute("uv",new zn(h,2))}function Js(t,e,n,i,r){var s,o;if(r===function(t,e,n,i){for(var r=0,s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}(t,e,n,i)>0)for(s=e;s<n;s+=i)o=vo(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=vo(s,t[s],t[s+1],o);return o&&po(o,o.next)&&(yo(o),o=o.next),o}function $s(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!po(i,i.next)&&0!==uo(i.prev,i,i.next))i=i.next;else{if(yo(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function to(t,e,n,i,r,s,o){if(t){!o&&s&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=ao(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1)}(r)}(t,i,r,s);for(var a,l,c=t;t.prev!==t.next;)if(a=t.prev,l=t.next,s?no(t,i,r,s):eo(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),yo(t),t=l.next,c=l.next;else if((t=l)===c){o?1===o?to(t=io(t,e,n),e,n,i,r,s,2):2===o&&ro(t,e,n,i,r,s):to($s(t),e,n,i,r,s,1);break}}}function eo(t){var e=t.prev,n=t,i=t.next;if(uo(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(co(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&uo(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function no(t,e,n,i){var r=t.prev,s=t,o=t.next;if(uo(r,s,o)>=0)return!1;for(var a=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,l=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=ao(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,n,i),h=ao(a,l,e,n,i),u=t.nextZ;u&&u.z<=h;){if(u!==t.prev&&u!==t.next&&co(r.x,r.y,s.x,s.y,o.x,o.y,u.x,u.y)&&uo(u.prev,u,u.next)>=0)return!1;u=u.nextZ}for(u=t.prevZ;u&&u.z>=c;){if(u!==t.prev&&u!==t.next&&co(r.x,r.y,s.x,s.y,o.x,o.y,u.x,u.y)&&uo(u.prev,u,u.next)>=0)return!1;u=u.prevZ}return!0}function io(t,e,n){var i=t;do{var r=i.prev,s=i.next.next;!po(r,s)&&fo(r,i,i.next,s)&&mo(r,s)&&mo(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),yo(i),yo(i.next),i=t=s),i=i.next}while(i!==t);return i}function ro(t,e,n,i,r,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&ho(o,a)){var l=go(o,a);return o=$s(o,o.next),l=$s(l,l.next),to(o,e,n,i,r,s),void to(l,e,n,i,r,s)}a=a.next}o=o.next}while(o!==t)}function so(t,e){return t.x-e.x}function oo(t,e){if(e=function(t,e){var n,i=e,r=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>o){if(o=a,a===r){if(s===i.y)return i;if(s===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n.prev;var l,c=n,h=n.x,u=n.y,d=1/0;for(i=n.next;i!==c;)r>=i.x&&i.x>=h&&r!==i.x&&co(s<u?r:o,s,h,u,s<u?o:r,s,i.x,i.y)&&((l=Math.abs(s-i.y)/(r-i.x))<d||l===d&&i.x>n.x)&&mo(i,t)&&(n=i,d=l),i=i.next;return n}(t,e)){var n=go(e,t);$s(n,n.next)}}function ao(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function lo(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function co(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function ho(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&fo(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&mo(t,e)&&mo(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function uo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function po(t,e){return t.x===e.x&&t.y===e.y}function fo(t,e,n,i){return!!(po(t,e)&&po(n,i)||po(t,i)&&po(n,e))||uo(t,e,n)>0!=uo(t,e,i)>0&&uo(n,i,t)>0!=uo(n,i,e)>0}function mo(t,e){return uo(t.prev,t,t.next)<0?uo(t,e,t.next)>=0&&uo(t,t.prev,e)>=0:uo(t,e,t.prev)<0||uo(t,t.next,e)<0}function go(t,e){var n=new _o(t.i,t.x,t.y),i=new _o(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function vo(t,e,n,i){var r=new _o(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function yo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function _o(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Object.assign(ds.prototype,{isFogExp2:!0,clone:function(){return new ds(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(ps.prototype,{isFog:!0,clone:function(){return new ps(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),fs.prototype=Object.assign(Object.create(Mn.prototype),{constructor:fs,isScene:!0,copy:function(t,e){return Mn.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Mn.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ms.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ms.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(gs.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(gs.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),(vs.prototype=Object.create(Zn.prototype)).constructor=vs,vs.prototype.isSpriteMaterial=!0,vs.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},ys.prototype=Object.assign(Object.create(Mn.prototype),{constructor:ys,isSprite:!0,raycast:function(){var t=new Fe,e=new Fe,n=new Fe,i=new ke,r=new ke,s=new Ne,o=new Fe,a=new Fe,l=new Fe,c=new ke,h=new ke,u=new ke;function d(t,e,n,o,a,l){i.subVectors(t,n).addScalar(.5).multiply(o),void 0!==a?(r.x=l*i.x-a*i.y,r.y=a*i.x+l*i.y):r.copy(i),t.copy(e),t.x+=r.x,t.y+=r.y,t.applyMatrix4(s)}return function(i,r){e.setFromMatrixScale(this.matrixWorld),s.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var p,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),p=Math.sin(m));var g=this.center;d(o.set(-.5,-.5,0),n,g,e,p,f),d(a.set(.5,-.5,0),n,g,e,p,f),d(l.set(.5,.5,0),n,g,e,p,f),c.set(0,0),h.set(1,0),u.set(1,1);var v=i.ray.intersectTriangle(o,a,l,!1,t);if(null!==v||(d(a.set(-.5,.5,0),n,g,e,p,f),h.set(0,1),null!==(v=i.ray.intersectTriangle(o,l,a,!1,t)))){var y=i.ray.origin.distanceTo(t);y<i.near||y>i.far||r.push({distance:y,point:t.clone(),uv:pi.getUV(t,o,a,l,c,h,u,new ke),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Mn.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),_s.prototype=Object.assign(Object.create(Mn.prototype),{constructor:_s,copy:function(t){Mn.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);n.splice(i,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:(es=new Fe,function(t,e){es.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(es);this.getObjectForDistance(n).raycast(t,e)}),update:function(){var t=new Fe,e=new Fe;return function(n){var i=this.levels;if(i.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);i[0].object.visible=!0;for(var s=1,o=i.length;s<o&&r>=i[s].distance;s++)i[s-1].object.visible=!1,i[s].object.visible=!0;for(;s<o;s++)i[s].object.visible=!1}}}(),toJSON:function(t){var e=Mn.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var s=n[i];e.object.levels.push({object:s.object.uuid,distance:s.distance})}return e}}),bs.prototype=Object.assign(Object.create(mi.prototype),{constructor:bs,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Ye,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){mi.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(xs.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Ne;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(ns=new Ne,is=new Ne,function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,s=t.length;r<s;r++)ns.multiplyMatrices(t[r]?t[r].matrixWorld:is,e[r]),ns.toArray(n,16*r);void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new xs(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}}),ws.prototype=Object.assign(Object.create(Mn.prototype),{constructor:ws,isBone:!0}),(As.prototype=Object.create(Zn.prototype)).constructor=As,As.prototype.isLineBasicMaterial=!0,As.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Es.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Es,isLine:!0,computeLineDistances:(rs=new Fe,ss=new Fe,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)rs.fromBufferAttribute(e,i-1),ss.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=rs.distanceTo(ss);t.addAttribute("lineDistance",new zn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var s=t.vertices;for((n=t.lineDistances)[0]=0,i=1,r=s.length;i<r;i++)n[i]=n[i-1],n[i]+=s[i-1].distanceTo(s[i])}return this}),raycast:function(){var t=new Ne,e=new di,n=new tn;return function(i,r){var s=i.linePrecision,o=this.geometry,a=this.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(a),n.radius+=s,!1!==i.ray.intersectsSphere(n)){t.getInverse(a),e.copy(i.ray).applyMatrix4(t);var l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new Fe,u=new Fe,d=new Fe,p=new Fe,f=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var m=o.index,g=o.attributes.position.array;if(null!==m)for(var v=m.array,y=0,_=v.length-1;y<_;y+=f){var b=v[y+1];h.fromArray(g,3*v[y]),u.fromArray(g,3*b),e.distanceSqToSegment(h,u,p,d)>c||(p.applyMatrix4(this.matrixWorld),(A=i.ray.origin.distanceTo(p))<i.near||A>i.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else for(y=0,_=g.length/3-1;y<_;y+=f)h.fromArray(g,3*y),u.fromArray(g,3*y+3),e.distanceSqToSegment(h,u,p,d)>c||(p.applyMatrix4(this.matrixWorld),(A=i.ray.origin.distanceTo(p))<i.near||A>i.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else if(o.isGeometry){var x=o.vertices,w=x.length;for(y=0;y<w-1;y+=f){var A;e.distanceSqToSegment(x[y],x[y+1],p,d)>c||(p.applyMatrix4(this.matrixWorld),(A=i.ray.origin.distanceTo(p))<i.near||A>i.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ss.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ss,isLineSegments:!0,computeLineDistances:function(){var t=new Fe,e=new Fe;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],s=0,o=i.count;s<o;s+=2)t.fromBufferAttribute(i,s),e.fromBufferAttribute(i,s+1),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+t.distanceTo(e);n.addAttribute("lineDistance",new zn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var a=n.vertices;for(r=n.lineDistances,s=0,o=a.length;s<o;s+=2)t.copy(a[s]),e.copy(a[s+1]),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+t.distanceTo(e)}return this}}()}),Ms.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ms,isLineLoop:!0}),(Ts.prototype=Object.create(Zn.prototype)).constructor=Ts,Ts.prototype.isPointsMaterial=!0,Ts.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},Cs.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Cs,isPoints:!0,raycast:function(){var t=new Ne,e=new di,n=new tn;return function(i,r){var s=this,o=this.geometry,a=this.matrixWorld,l=i.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(a),n.radius+=l,!1!==i.ray.intersectsSphere(n)){t.getInverse(a),e.copy(i.ray).applyMatrix4(t);var c=l/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,u=new Fe,d=new Fe;if(o.isBufferGeometry){var p=o.index,f=o.attributes.position.array;if(null!==p)for(var m=p.array,g=0,v=m.length;g<v;g++){var y=m[g];u.fromArray(f,3*y),x(u,y)}else{g=0;for(var _=f.length/3;g<_;g++)u.fromArray(f,3*g),x(u,g)}}else{var b=o.vertices;for(g=0,_=b.length;g<_;g++)x(b[g],g)}}function x(t,n){var o=e.distanceSqToPoint(t);if(o<h){e.closestPointToPoint(t,d),d.applyMatrix4(a);var l=i.ray.origin.distanceTo(d);if(l<i.near||l>i.far)return;r.push({distance:l,distanceToRay:Math.sqrt(o),point:d.clone(),index:n,face:null,object:s})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ls.prototype=Object.assign(Object.create(Xe.prototype),{constructor:Ls,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(Ps.prototype=Object.create(Xe.prototype)).constructor=Ps,Ps.prototype.isCompressedTexture=!0,(Rs.prototype=Object.create(Xe.prototype)).constructor=Rs,Rs.prototype.isCanvasTexture=!0,(Os.prototype=Object.create(Xe.prototype)).constructor=Os,Os.prototype.isDepthTexture=!0,(Is.prototype=Object.create(Gn.prototype)).constructor=Is,(Ds.prototype=Object.create(Pn.prototype)).constructor=Ds,(ks.prototype=Object.create(Gn.prototype)).constructor=ks,(Ns.prototype=Object.create(Pn.prototype)).constructor=Ns,(Bs.prototype=Object.create(Gn.prototype)).constructor=Bs,(Fs.prototype=Object.create(Pn.prototype)).constructor=Fs,(zs.prototype=Object.create(Bs.prototype)).constructor=zs,(Us.prototype=Object.create(Pn.prototype)).constructor=Us,(js.prototype=Object.create(Bs.prototype)).constructor=js,(Hs.prototype=Object.create(Pn.prototype)).constructor=Hs,(Vs.prototype=Object.create(Bs.prototype)).constructor=Vs,(Gs.prototype=Object.create(Pn.prototype)).constructor=Gs,(Ws.prototype=Object.create(Bs.prototype)).constructor=Ws,(qs.prototype=Object.create(Pn.prototype)).constructor=qs,(Xs.prototype=Object.create(Gn.prototype)).constructor=Xs,Xs.prototype.toJSON=function(){var t=Gn.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},(Ys.prototype=Object.create(Pn.prototype)).constructor=Ys,(Qs.prototype=Object.create(Gn.prototype)).constructor=Qs,(Zs.prototype=Object.create(Pn.prototype)).constructor=Zs,(Ks.prototype=Object.create(Gn.prototype)).constructor=Ks;var bo={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return bo.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];xo(t),wo(n,t);var s=t.length;e.forEach(xo);for(var o=0;o<e.length;o++)i.push(s),s+=e[o].length,wo(n,e[o]);var a=function(t,e,n){n=n||2;var i,r,s,o,a,l,c,h=e&&e.length,u=h?e[0]*n:t.length,d=Js(t,0,u,n,!0),p=[];if(!d)return p;if(h&&(d=function(t,e,n,i){var r,s,o,a=[];for(r=0,s=e.length;r<s;r++)(o=Js(t,e[r]*i,r<s-1?e[r+1]*i:t.length,i,!1))===o.next&&(o.steiner=!0),a.push(lo(o));for(a.sort(so),r=0;r<a.length;r++)oo(a[r],n),n=$s(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=s=t[0],r=o=t[1];for(var f=n;f<u;f+=n)(a=t[f])<i&&(i=a),(l=t[f+1])<r&&(r=l),a>s&&(s=a),l>o&&(o=l);c=0!==(c=Math.max(s-i,o-r))?1/c:0}return to(d,p,n,i,r,c),p}(n,i);for(o=0;o<a.length;o+=3)r.push(a.slice(o,o+3));return r}};function xo(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function wo(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Ao(t,e){Pn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Eo(t,e)),this.mergeVertices()}function Eo(t,e){Gn.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,i=[],r=[],s=0,o=t.length;s<o;s++)a(t[s]);function a(t){var s=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,h=void 0!==e.bevelThickness?e.bevelThickness:6,u=void 0!==e.bevelSize?e.bevelSize:h-2,d=void 0!==e.bevelSegments?e.bevelSegments:3,p=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:So;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);var m,g,v,y,_,b,x,w,A=!1;p&&(m=p.getSpacedPoints(a),A=!0,c=!1,g=p.computeFrenetFrames(a,!1),v=new Fe,y=new Fe,_=new Fe),c||(d=0,h=0,u=0);var E=t.extractPoints(o),S=E.shape,M=E.holes;if(!bo.isClockWise(S))for(S=S.reverse(),x=0,w=M.length;x<w;x++)bo.isClockWise(b=M[x])&&(M[x]=b.reverse());var T=bo.triangulateShape(S,M),C=S;for(x=0,w=M.length;x<w;x++)S=S.concat(b=M[x]);function L(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var P,R,O,I,D,k,N=S.length,B=T.length;function F(t,e,n){var i,r,s,o=t.x-e.x,a=t.y-e.y,l=n.x-t.x,c=n.y-t.y,h=o*o+a*a;if(Math.abs(o*c-a*l)>Number.EPSILON){var u=Math.sqrt(h),d=Math.sqrt(l*l+c*c),p=e.x-a/u,f=e.y+o/u,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(o*c-a*l),g=(i=p+o*m-t.x)*i+(r=f+a*m-t.y)*r;if(g<=2)return new ke(i,r);s=Math.sqrt(g/2)}else{var v=!1;o>Number.EPSILON?l>Number.EPSILON&&(v=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(v=!0):Math.sign(a)===Math.sign(c)&&(v=!0),v?(i=-a,r=o,s=Math.sqrt(h)):(i=o,r=a,s=Math.sqrt(h/2))}return new ke(i/s,r/s)}for(var z=[],U=0,j=C.length,H=j-1,V=U+1;U<j;U++,H++,V++)H===j&&(H=0),V===j&&(V=0),z[U]=F(C[U],C[H],C[V]);var G,W,q=[],X=z.concat();for(x=0,w=M.length;x<w;x++){for(G=[],H=(j=(b=M[x]).length)-1,V=1+(U=0);U<j;U++,H++,V++)H===j&&(H=0),V===j&&(V=0),G[U]=F(b[U],b[H],b[V]);q.push(G),X=X.concat(G)}for(P=0;P<d;P++){for(O=P/d,I=h*Math.cos(O*Math.PI/2),R=u*Math.sin(O*Math.PI/2),U=0,j=C.length;U<j;U++)Q((D=L(C[U],z[U],R)).x,D.y,-I);for(x=0,w=M.length;x<w;x++)for(G=q[x],U=0,j=(b=M[x]).length;U<j;U++)Q((D=L(b[U],G[U],R)).x,D.y,-I)}for(R=u,U=0;U<N;U++)D=c?L(S[U],X[U],R):S[U],A?(y.copy(g.normals[0]).multiplyScalar(D.x),v.copy(g.binormals[0]).multiplyScalar(D.y),_.copy(m[0]).add(y).add(v),Q(_.x,_.y,_.z)):Q(D.x,D.y,0);for(W=1;W<=a;W++)for(U=0;U<N;U++)D=c?L(S[U],X[U],R):S[U],A?(y.copy(g.normals[W]).multiplyScalar(D.x),v.copy(g.binormals[W]).multiplyScalar(D.y),_.copy(m[W]).add(y).add(v),Q(_.x,_.y,_.z)):Q(D.x,D.y,l/a*W);for(P=d-1;P>=0;P--){for(O=P/d,I=h*Math.cos(O*Math.PI/2),R=u*Math.sin(O*Math.PI/2),U=0,j=C.length;U<j;U++)Q((D=L(C[U],z[U],R)).x,D.y,l+I);for(x=0,w=M.length;x<w;x++)for(G=q[x],U=0,j=(b=M[x]).length;U<j;U++)D=L(b[U],G[U],R),A?Q(D.x,D.y+m[a-1].y,m[a-1].x+I):Q(D.x,D.y,l+I)}function Y(t,e){var n,i;for(U=t.length;--U>=0;){n=U,(i=U-1)<0&&(i=t.length-1);var r=0,s=a+2*d;for(r=0;r<s;r++){var o=N*r,l=N*(r+1);K(e+n+o,e+i+o,e+i+l,e+n+l)}}}function Q(t,e,n){s.push(t),s.push(e),s.push(n)}function Z(t,e,r){J(t),J(e),J(r);var s=i.length/3,o=f.generateTopUV(n,i,s-3,s-2,s-1);$(o[0]),$(o[1]),$(o[2])}function K(t,e,r,s){J(t),J(e),J(s),J(e),J(r),J(s);var o=i.length/3,a=f.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);$(a[0]),$(a[1]),$(a[3]),$(a[1]),$(a[2]),$(a[3])}function J(t){i.push(s[3*t+0]),i.push(s[3*t+1]),i.push(s[3*t+2])}function $(t){r.push(t.x),r.push(t.y)}!function(){var t=i.length/3;if(c){var e=0,r=N*e;for(U=0;U<B;U++)Z((k=T[U])[2]+r,k[1]+r,k[0]+r);for(r=N*(e=a+2*d),U=0;U<B;U++)Z((k=T[U])[0]+r,k[1]+r,k[2]+r)}else{for(U=0;U<B;U++)Z((k=T[U])[2],k[1],k[0]);for(U=0;U<B;U++)Z((k=T[U])[0]+N*a,k[1]+N*a,k[2]+N*a)}n.addGroup(t,i.length/3-t,0)}(),function(){var t=i.length/3,e=0;for(Y(C,e),e+=C.length,x=0,w=M.length;x<w;x++)Y(b=M[x],e),e+=b.length;n.addGroup(t,i.length/3-t,1)}()}this.addAttribute("position",new zn(i,3)),this.addAttribute("uv",new zn(r,2)),this.computeVertexNormals()}(Ao.prototype=Object.create(Pn.prototype)).constructor=Ao,Ao.prototype.toJSON=function(){var t=Pn.prototype.toJSON.call(this);return Mo(this.parameters.shapes,this.parameters.options,t)},(Eo.prototype=Object.create(Gn.prototype)).constructor=Eo,Eo.prototype.toJSON=function(){var t=Gn.prototype.toJSON.call(this);return Mo(this.parameters.shapes,this.parameters.options,t)};var So={generateTopUV:function(t,e,n,i,r){var s=e[3*i],o=e[3*i+1],a=e[3*r],l=e[3*r+1];return[new ke(e[3*n],e[3*n+1]),new ke(s,o),new ke(a,l)]},generateSideWallUV:function(t,e,n,i,r,s){var o=e[3*n],a=e[3*n+1],l=e[3*n+2],c=e[3*i],h=e[3*i+1],u=e[3*i+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*s],g=e[3*s+1],v=e[3*s+2];return Math.abs(a-h)<.01?[new ke(o,1-l),new ke(c,1-u),new ke(d,1-f),new ke(m,1-v)]:[new ke(a,1-l),new ke(h,1-u),new ke(p,1-f),new ke(g,1-v)]}};function Mo(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++)n.shapes.push(t[i].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function To(t,e){Pn.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Co(t,e)),this.mergeVertices()}function Co(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Pn;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Eo.call(this,i,e),this.type="TextBufferGeometry"}function Lo(t,e,n,i,r,s,o){Pn.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Po(t,e,n,i,r,s,o)),this.mergeVertices()}function Po(t,e,n,i,r,s,o){Gn.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var a,l,c=(s=void 0!==s?s:0)+(o=void 0!==o?o:Math.PI),h=0,u=[],d=new Fe,p=new Fe,f=[],m=[],g=[],v=[];for(l=0;l<=n;l++){var y=[],_=l/n;for(a=0;a<=e;a++){var b=a/e;d.x=-t*Math.cos(i+b*r)*Math.sin(s+_*o),d.y=t*Math.cos(s+_*o),d.z=t*Math.sin(i+b*r)*Math.sin(s+_*o),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),g.push(p.x,p.y,p.z),v.push(b,1-_),y.push(h++)}u.push(y)}for(l=0;l<n;l++)for(a=0;a<e;a++){var x=u[l][a],w=u[l+1][a],A=u[l+1][a+1];(0!==l||s>0)&&f.push(u[l][a+1],x,A),(l!==n-1||c<Math.PI)&&f.push(x,w,A)}this.setIndex(f),this.addAttribute("position",new zn(m,3)),this.addAttribute("normal",new zn(g,3)),this.addAttribute("uv",new zn(v,2))}function Ro(t,e,n,i,r,s){Pn.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},this.fromBufferGeometry(new Oo(t,e,n,i,r,s)),this.mergeVertices()}function Oo(t,e,n,i,r,s){Gn.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},t=t||.5,e=e||1,r=void 0!==r?r:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,a,l,c=[],h=[],u=[],d=[],p=t,f=(e-t)/(i=void 0!==i?Math.max(1,i):1),m=new Fe,g=new ke;for(a=0;a<=i;a++){for(l=0;l<=n;l++)o=r+l/n*s,m.x=p*Math.cos(o),m.y=p*Math.sin(o),h.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/e+1)/2,g.y=(m.y/e+1)/2,d.push(g.x,g.y);p+=f}for(a=0;a<i;a++){var v=a*(n+1);for(l=0;l<n;l++){var y=(o=l+v)+n+1,_=o+n+2,b=o+1;c.push(o,y,b),c.push(y,_,b)}}this.setIndex(c),this.addAttribute("position",new zn(h,3)),this.addAttribute("normal",new zn(u,3)),this.addAttribute("uv",new zn(d,2))}function Io(t,e,n,i){Pn.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Do(t,e,n,i)),this.mergeVertices()}function Do(t,e,n,i){Gn.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=De.clamp(i,0,2*Math.PI);var r,s,o,a=[],l=[],c=[],h=1/e,u=new Fe,d=new ke;for(s=0;s<=e;s++){var p=n+s*h*i,f=Math.sin(p),m=Math.cos(p);for(o=0;o<=t.length-1;o++)u.x=t[o].x*f,u.y=t[o].y,u.z=t[o].x*m,l.push(u.x,u.y,u.z),d.x=s/e,d.y=o/(t.length-1),c.push(d.x,d.y)}for(s=0;s<e;s++)for(o=0;o<t.length-1;o++){var g=(r=o+s*t.length)+t.length,v=r+t.length+1,y=r+1;a.push(r,g,y),a.push(g,v,y)}if(this.setIndex(a),this.addAttribute("position",new zn(l,3)),this.addAttribute("uv",new zn(c,2)),this.computeVertexNormals(),i===2*Math.PI){var _=this.attributes.normal.array,b=new Fe,x=new Fe,w=new Fe;for(r=e*t.length*3,s=0,o=0;s<t.length;s++,o+=3)b.x=_[o+0],b.y=_[o+1],b.z=_[o+2],x.x=_[r+o+0],x.y=_[r+o+1],x.z=_[r+o+2],w.addVectors(b,x).normalize(),_[o+0]=_[r+o+0]=w.x,_[o+1]=_[r+o+1]=w.y,_[o+2]=_[r+o+2]=w.z}}function ko(t,e){Pn.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new No(t,e)),this.mergeVertices()}function No(t,e){Gn.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],i=[],r=[],s=[],o=0,a=0;if(!1===Array.isArray(t))c(t);else for(var l=0;l<t.length;l++)c(t[l]),this.addGroup(o,a,l),o+=a,a=0;function c(t){var o,l,c,h=i.length/3,u=t.extractPoints(e),d=u.shape,p=u.holes;for(!1===bo.isClockWise(d)&&(d=d.reverse()),o=0,l=p.length;o<l;o++)!0===bo.isClockWise(c=p[o])&&(p[o]=c.reverse());var f=bo.triangulateShape(d,p);for(o=0,l=p.length;o<l;o++)d=d.concat(c=p[o]);for(o=0,l=d.length;o<l;o++){var m=d[o];i.push(m.x,m.y,0),r.push(0,0,1),s.push(m.x,m.y)}for(o=0,l=f.length;o<l;o++){var g=f[o];n.push(g[0]+h,g[1]+h,g[2]+h),a+=3}}this.setIndex(n),this.addAttribute("position",new zn(i,3)),this.addAttribute("normal",new zn(r,3)),this.addAttribute("uv",new zn(s,2))}function Bo(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}function Fo(t,e){Gn.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,s,o=[],a=Math.cos(De.DEG2RAD*e),l=[0,0],c={},h=["a","b","c"];t.isBufferGeometry?(s=new Pn).fromBufferGeometry(t):s=t.clone(),s.mergeVertices(),s.computeFaceNormals();for(var u=s.vertices,d=s.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],g=0;g<3;g++)n=m[h[g]],i=m[h[(g+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===c[r=l[0]+","+l[1]]?c[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var v=c[r];if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=a){var y=u[v.index1];o.push(y.x,y.y,y.z),o.push((y=u[v.index2]).x,y.y,y.z)}}this.addAttribute("position",new zn(o,3))}function zo(t,e,n,i,r,s,o,a){Pn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Uo(t,e,n,i,r,s,o,a)),this.mergeVertices()}function Uo(t,e,n,i,r,s,o,a){Gn.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};var l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,s=void 0!==s&&s,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI;var c=[],h=[],u=[],d=[],p=0,f=[],m=n/2,g=0;function v(n){var r,s,f,v=new ke,y=new Fe,_=0,b=!0===n?t:e,x=!0===n?1:-1;for(s=p,r=1;r<=i;r++)h.push(0,m*x,0),u.push(0,x,0),d.push(.5,.5),p++;for(f=p,r=0;r<=i;r++){var w=r/i*a+o,A=Math.cos(w),E=Math.sin(w);y.x=b*E,y.y=m*x,y.z=b*A,h.push(y.x,y.y,y.z),u.push(0,x,0),v.x=.5*A+.5,v.y=.5*E*x+.5,d.push(v.x,v.y),p++}for(r=0;r<i;r++){var S=s+r,M=f+r;!0===n?c.push(M,M+1,S):c.push(M+1,M,S),_+=3}l.addGroup(g,_,!0===n?1:2),g+=_}!function(){var s,v,y=new Fe,_=new Fe,b=0,x=(e-t)/n;for(v=0;v<=r;v++){var w=[],A=v/r,E=A*(e-t)+t;for(s=0;s<=i;s++){var S=s/i,M=S*a+o,T=Math.sin(M),C=Math.cos(M);_.x=E*T,_.y=-A*n+m,_.z=E*C,h.push(_.x,_.y,_.z),y.set(T,x,C).normalize(),u.push(y.x,y.y,y.z),d.push(S,1-A),w.push(p++)}f.push(w)}for(s=0;s<i;s++)for(v=0;v<r;v++){var L=f[v+1][s],P=f[v+1][s+1],R=f[v][s+1];c.push(f[v][s],L,R),c.push(L,P,R),b+=6}l.addGroup(g,b,0),g+=b}(),!1===s&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(c),this.addAttribute("position",new zn(h,3)),this.addAttribute("normal",new zn(u,3)),this.addAttribute("uv",new zn(d,2))}function jo(t,e,n,i,r,s,o){zo.call(this,0,t,e,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}function Ho(t,e,n,i,r,s,o){Uo.call(this,0,t,e,n,i,r,s,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}function Vo(t,e,n,i){Pn.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Go(t,e,n,i)),this.mergeVertices()}function Go(t,e,n,i){Gn.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,s,o=[],a=[],l=[],c=[],h=new Fe,u=new ke;for(a.push(0,0,0),l.push(0,0,1),c.push(.5,.5),s=0,r=3;s<=e;s++,r+=3){var d=n+s/e*i;h.x=t*Math.cos(d),h.y=t*Math.sin(d),a.push(h.x,h.y,h.z),l.push(0,0,1),u.x=(a[r]/t+1)/2,u.y=(a[r+1]/t+1)/2,c.push(u.x,u.y)}for(r=1;r<=e;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new zn(a,3)),this.addAttribute("normal",new zn(l,3)),this.addAttribute("uv",new zn(c,2))}(To.prototype=Object.create(Pn.prototype)).constructor=To,(Co.prototype=Object.create(Eo.prototype)).constructor=Co,(Lo.prototype=Object.create(Pn.prototype)).constructor=Lo,(Po.prototype=Object.create(Gn.prototype)).constructor=Po,(Ro.prototype=Object.create(Pn.prototype)).constructor=Ro,(Oo.prototype=Object.create(Gn.prototype)).constructor=Oo,(Io.prototype=Object.create(Pn.prototype)).constructor=Io,(Do.prototype=Object.create(Gn.prototype)).constructor=Do,(ko.prototype=Object.create(Pn.prototype)).constructor=ko,ko.prototype.toJSON=function(){var t=Pn.prototype.toJSON.call(this);return Bo(this.parameters.shapes,t)},(No.prototype=Object.create(Gn.prototype)).constructor=No,No.prototype.toJSON=function(){var t=Gn.prototype.toJSON.call(this);return Bo(this.parameters.shapes,t)},(Fo.prototype=Object.create(Gn.prototype)).constructor=Fo,(zo.prototype=Object.create(Pn.prototype)).constructor=zo,(Uo.prototype=Object.create(Gn.prototype)).constructor=Uo,(jo.prototype=Object.create(zo.prototype)).constructor=jo,(Ho.prototype=Object.create(Uo.prototype)).constructor=Ho,(Vo.prototype=Object.create(Pn.prototype)).constructor=Vo,(Go.prototype=Object.create(Gn.prototype)).constructor=Go;var Wo=Object.freeze({WireframeGeometry:Is,ParametricGeometry:Ds,ParametricBufferGeometry:ks,TetrahedronGeometry:Fs,TetrahedronBufferGeometry:zs,OctahedronGeometry:Us,OctahedronBufferGeometry:js,IcosahedronGeometry:Hs,IcosahedronBufferGeometry:Vs,DodecahedronGeometry:Gs,DodecahedronBufferGeometry:Ws,PolyhedronGeometry:Ns,PolyhedronBufferGeometry:Bs,TubeGeometry:qs,TubeBufferGeometry:Xs,TorusKnotGeometry:Ys,TorusKnotBufferGeometry:Qs,TorusGeometry:Zs,TorusBufferGeometry:Ks,TextGeometry:To,TextBufferGeometry:Co,SphereGeometry:Lo,SphereBufferGeometry:Po,RingGeometry:Ro,RingBufferGeometry:Oo,PlaneGeometry:Xn,PlaneBufferGeometry:Yn,LatheGeometry:Io,LatheBufferGeometry:Do,ShapeGeometry:ko,ShapeBufferGeometry:No,ExtrudeGeometry:Ao,ExtrudeBufferGeometry:Eo,EdgesGeometry:Fo,ConeGeometry:jo,ConeBufferGeometry:Ho,CylinderGeometry:zo,CylinderBufferGeometry:Uo,CircleGeometry:Vo,CircleBufferGeometry:Go,BoxGeometry:Wn,BoxBufferGeometry:qn});function qo(t){Zn.call(this),this.type="ShadowMaterial",this.color=new dn(0),this.transparent=!0,this.setValues(t)}function Xo(t){ui.call(this,t),this.type="RawShaderMaterial"}function Yo(t){Zn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new dn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oe,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Qo(t){Yo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Zo(t){Zn.call(this),this.type="MeshPhongMaterial",this.color=new dn(16777215),this.specular=new dn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oe,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=it,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ko(t){Zo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Jo(t){Zn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oe,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function $o(t){Zn.call(this),this.type="MeshLambertMaterial",this.color=new dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=it,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ta(t){Zn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new dn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oe,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function ea(t){As.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}(qo.prototype=Object.create(Zn.prototype)).constructor=qo,qo.prototype.isShadowMaterial=!0,qo.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.color.copy(t.color),this},(Xo.prototype=Object.create(ui.prototype)).constructor=Xo,Xo.prototype.isRawShaderMaterial=!0,(Yo.prototype=Object.create(Zn.prototype)).constructor=Yo,Yo.prototype.isMeshStandardMaterial=!0,Yo.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Qo.prototype=Object.create(Yo.prototype)).constructor=Qo,Qo.prototype.isMeshPhysicalMaterial=!0,Qo.prototype.copy=function(t){return Yo.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},(Zo.prototype=Object.create(Zn.prototype)).constructor=Zo,Zo.prototype.isMeshPhongMaterial=!0,Zo.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Ko.prototype=Object.create(Zo.prototype)).constructor=Ko,Ko.prototype.isMeshToonMaterial=!0,Ko.prototype.copy=function(t){return Zo.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},(Jo.prototype=Object.create(Zn.prototype)).constructor=Jo,Jo.prototype.isMeshNormalMaterial=!0,Jo.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},($o.prototype=Object.create(Zn.prototype)).constructor=$o,$o.prototype.isMeshLambertMaterial=!0,$o.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(ta.prototype=Object.create(Zn.prototype)).constructor=ta,ta.prototype.isMeshMatcapMaterial=!0,ta.prototype.copy=function(t){return Zn.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(ea.prototype=Object.create(As.prototype)).constructor=ea,ea.prototype.isLineDashedMaterial=!0,ea.prototype.copy=function(t){return As.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var na=Object.freeze({ShadowMaterial:qo,SpriteMaterial:vs,RawShaderMaterial:Xo,ShaderMaterial:ui,PointsMaterial:Ts,MeshPhysicalMaterial:Qo,MeshStandardMaterial:Yo,MeshPhongMaterial:Zo,MeshToonMaterial:Ko,MeshNormalMaterial:Jo,MeshLambertMaterial:$o,MeshDepthMaterial:Gr,MeshDistanceMaterial:Wr,MeshBasicMaterial:fi,MeshMatcapMaterial:ta,LineDashedMaterial:ea,LineBasicMaterial:As,Material:Zn}),ia={arraySlice:function(t,e,n){return ia.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),s=0,o=0;o!==i;++s)for(var a=n[s]*e,l=0;l!==e;++l)r[o++]=t[a+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,s=t[0];void 0!==s&&void 0===s[i];)s=t[r++];if(void 0!==s){var o=s[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=s[i])&&(e.push(s.time),n.push.apply(n,o)),s=t[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{void 0!==(o=s[i])&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{void 0!==(o=s[i])&&(e.push(s.time),n.push(o)),s=t[r++]}while(void 0!==s)}}};function ra(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function sa(t,e,n,i){ra.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function oa(t,e,n,i){ra.call(this,t,e,n,i)}function aa(t,e,n,i){ra.call(this,t,e,n,i)}function la(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ia.convertArray(e,this.TimeBufferType),this.values=ia.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function ca(t,e,n){la.call(this,t,e,n)}function ha(t,e,n,i){la.call(this,t,e,n,i)}function ua(t,e,n,i){la.call(this,t,e,n,i)}function da(t,e,n,i){ra.call(this,t,e,n,i)}function pa(t,e,n,i){la.call(this,t,e,n,i)}function fa(t,e,n,i){la.call(this,t,e,n,i)}function ma(t,e,n,i){la.call(this,t,e,n,i)}function ga(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=De.generateUUID(),this.duration<0&&this.resetDuration()}function va(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ua;case"vector":case"vector2":case"vector3":case"vector4":return ma;case"color":return ha;case"quaternion":return pa;case"bool":case"boolean":return ca;case"string":return fa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],i=[];ia.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(ra.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var s;n:{i:if(!(t<i)){for(var o=n+2;;){if(void 0===i){if(t<r)break i;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,t<(i=e[++n]))break e}s=e.length;break n}if(t>=r)break t;var a=e[1];for(t<a&&(n=2,r=a),o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=r,t>=(r=e[--n-1]))break e}s=n,n=0}for(;n<s;){var l=n+s>>>1;t<e[l]?s=l:n=l+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,s=0;s!==i;++s)e[s]=n[r+s];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ra.prototype,{beforeStart_:ra.prototype.copySampleValue_,afterEnd_:ra.prototype.copySampleValue_}),sa.prototype=Object.assign(Object.create(ra.prototype),{constructor:sa,DefaultSettings_:{endingStart:_e,endingEnd:_e},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,s=t+1,o=i[r],a=i[s];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-n;break;case 2402:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:s=t,a=2*n-e;break;case 2402:s=1,a=n+i[1]-i[0];break;default:s=t-1,a=e}var l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=s*c},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f,b=0;b!==o;++b)r[b]=g*s[c+b]+v*s[l+b]+y*s[a+b]+_*s[h+b];return r}}),oa.prototype=Object.assign(Object.create(ra.prototype),{constructor:oa,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=(n-e)/(i-e),h=1-c,u=0;u!==o;++u)r[u]=s[l+u]*h+s[a+u]*c;return r}}),aa.prototype=Object.assign(Object.create(ra.prototype),{constructor:aa,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(la,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:ia.convertArray(t.times,Array),values:ia.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(la.prototype,{constructor:la,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new aa(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new oa(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new sa(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,s=i-1;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==r||s!==i){r>=s&&(r=(s=Math.max(s,1))-1);var o=this.getValueSize();this.times=ia.arraySlice(n,r,s),this.values=ia.arraySlice(this.values,r*o,s*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var s=null,o=0;o!==r;o++){var a=n[o];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),t=!1;break}if(null!==s&&s>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,s),t=!1;break}s=a}if(void 0!==i&&ia.isTypedArray(i)){o=0;for(var l=i.length;o!==l;++o){var c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,s=t.length-1,o=1;o<s;++o){var a=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(i)a=!0;else for(var c=o*n,h=c-n,u=c+n,d=0;d!==n;++d){var p=e[c+d];if(p!==e[h+d]||p!==e[u+d]){a=!0;break}}if(a){if(o!==r){t[r]=t[o];var f=o*n,m=r*n;for(d=0;d!==n;++d)e[m+d]=e[f+d]}++r}}if(s>0){for(t[r]=t[s],f=s*n,m=r*n,d=0;d!==n;++d)e[m+d]=e[f+d];++r}return r!==t.length&&(this.times=ia.arraySlice(t,0,r),this.values=ia.arraySlice(e,0,r*n)),this},clone:function(){var t=ia.arraySlice(this.times,0),e=ia.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),ca.prototype=Object.assign(Object.create(la.prototype),{constructor:ca,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ha.prototype=Object.assign(Object.create(la.prototype),{constructor:ha,ValueTypeName:"color"}),ua.prototype=Object.assign(Object.create(la.prototype),{constructor:ua,ValueTypeName:"number"}),da.prototype=Object.assign(Object.create(ra.prototype),{constructor:da,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=(n-e)/(i-e),c=a+o;a!==c;a+=4)Be.slerpFlat(r,0,s,a-o,s,a,l);return r}}),pa.prototype=Object.assign(Object.create(la.prototype),{constructor:pa,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new da(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),fa.prototype=Object.assign(Object.create(la.prototype),{constructor:fa,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ma.prototype=Object.assign(Object.create(la.prototype),{constructor:ma,ValueTypeName:"vector"}),Object.assign(ga,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,s=n.length;r!==s;++r)e.push(va(n[r]).scale(i));return new ga(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},r=0,s=n.length;r!==s;++r)e.push(la.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,s=[],o=0;o<r;o++){var a=[],l=[];a.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var c=ia.getKeyframeOrder(a);a=ia.sortedArray(a,1,c),l=ia.sortedArray(l,1,c),i||0!==a[0]||(a.push(r),l.push(l[0])),s.push(new ua(".morphTargetInfluences["+e[o].name+"]",a,l).scale(1/n))}return new ga(t,-1,s)},findByName:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,s=0,o=t.length;s<o;s++){var a=t[s],l=a.name.match(r);if(l&&l.length>1){var c=i[u=l[1]];c||(i[u]=c=[]),c.push(a)}}var h=[];for(var u in i)h.push(ga.CreateFromMorphTargetSequence(u,i[u],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var s=[],o=[];ia.flattenJSON(n,s,o,i),0!==s.length&&r.push(new t(e,s,o))}},i=[],r=t.name||"default",s=t.length||-1,o=t.fps||30,a=t.hierarchy||[],l=0;l<a.length;l++){var c=a[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h={},u=0;u<c.length;u++)if(c[u].morphTargets)for(var d=0;d<c[u].morphTargets.length;d++)h[c[u].morphTargets[d]]=-1;for(var p in h){var f=[],m=[];for(d=0;d!==c[u].morphTargets.length;++d){var g=c[u];f.push(g.time),m.push(g.morphTarget===p?1:0)}i.push(new ua(".morphTargetInfluence["+p+"]",f,m))}s=h.length*(o||1)}else{var v=".bones["+e[l].name+"]";n(ma,v+".position",c,"pos",i),n(pa,v+".quaternion",c,"rot",i),n(ma,v+".scale",c,"scl",i)}}return 0===i.length?null:new ga(r,s,i)}}),Object.assign(ga.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new ga(this.name,this.duration,t)}});var ya={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function _a(t,e,n){var i=this,r=!1,s=0,o=0,a=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,s,o),r=!0},this.itemEnd=function(t){s++,void 0!==i.onProgress&&i.onProgress(t,s,o),s===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this}}var ba=new _a,xa={};function wa(t){this.manager=void 0!==t?t:ba}function Aa(t){this.manager=void 0!==t?t:ba}function Ea(t){this.manager=void 0!==t?t:ba,this._parser=null}function Sa(t){this.manager=void 0!==t?t:ba,this._parser=null}function Ma(t){this.manager=void 0!==t?t:ba}function Ta(t){this.manager=void 0!==t?t:ba}function Ca(t){this.manager=void 0!==t?t:ba}function La(){this.type="Curve",this.arcLengthDivisions=200}function Pa(t,e,n,i,r,s,o,a){La.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=o||!1,this.aRotation=a||0}function Ra(t,e,n,i,r,s){Pa.call(this,t,e,n,n,i,r,s),this.type="ArcCurve"}function Oa(){var t=0,e=0,n=0,i=0;function r(r,s,o,a){t=r,e=o,n=-3*r+3*s-2*o-a,i=2*r-2*s+o+a}return{initCatmullRom:function(t,e,n,i,s){r(e,n,s*(n-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,s,o,a){var l=(e-t)/s-(n-t)/(s+o)+(n-e)/o,c=(n-e)/o-(i-e)/(o+a)+(i-n)/a;r(e,n,l*=o,c*=o)},calc:function(r){var s=r*r;return t+e*r+n*s+i*(s*r)}}}Object.assign(wa.prototype,{load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,s=ya.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;if(void 0===xa[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var a=o[1],l=!!o[2],c=o[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var h,u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);h="blob"===u?new Blob([d.buffer],{type:a}):d.buffer;break;case"document":var f=new DOMParser;h=f.parseFromString(c,a);break;case"json":h=JSON.parse(c);break;default:h=c}setTimeout(function(){e&&e(h),r.manager.itemEnd(t)},0)}catch(v){setTimeout(function(){i&&i(v),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{xa[t]=[],xa[t].push({onLoad:e,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",t,!0),m.addEventListener("load",function(e){var n=this.response;ya.add(t,n);var i=xa[t];if(delete xa[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var s=0,o=i.length;s<o;s++)(a=i[s]).onLoad&&a.onLoad(n);r.manager.itemEnd(t)}else{for(s=0,o=i.length;s<o;s++){var a;(a=i[s]).onError&&a.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),m.addEventListener("progress",function(e){for(var n=xa[t],i=0,r=n.length;i<r;i++){var s=n[i];s.onProgress&&s.onProgress(e)}},!1),m.addEventListener("error",function(e){var n=xa[t];delete xa[t];for(var i=0,s=n.length;i<s;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),m.addEventListener("abort",function(e){var n=xa[t];delete xa[t];for(var i=0,s=n.length;i<s;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(t),m}xa[t].push({onLoad:e,onProgress:n,onError:i})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(Aa.prototype,{load:function(t,e,n,i){var r=this,s=new wa(r.manager);s.setPath(r.path),s.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=ga.parse(t[n]);e.push(i)}return e},setPath:function(t){return this.path=t,this}}),Object.assign(Ea.prototype,{load:function(t,e,n,i){var r=this,s=[],o=new Ps;o.image=s;var a=new wa(this.manager);function l(l){a.load(t[l],function(t){var n=r._parser(t,!0);s[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(o.minFilter=St),o.format=n.format,o.needsUpdate=!0,e&&e(o))},n,i)}if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,h=0,u=t.length;h<u;++h)l(h);else a.load(t,function(t){var n=r._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,a=0;a<i;a++){s[a]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)s[a].mipmaps.push(n.mipmaps[a*n.mipmapCount+l]),s[a].format=n.format,s[a].width=n.width,s[a].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=St),o.format=n.format,o.needsUpdate=!0,e&&e(o)},n,i);return o},setPath:function(t){return this.path=t,this}}),Object.assign(Sa.prototype,{load:function(t,e,n,i){var r=this,s=new Je,o=new wa(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,function(t){var n=r._parser(t);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:bt,s.wrapT=void 0!==n.wrapT?n.wrapT:bt,s.magFilter=void 0!==n.magFilter?n.magFilter:St,s.minFilter=void 0!==n.minFilter?n.minFilter:Tt,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps),1===n.mipmapCount&&(s.minFilter=St),s.needsUpdate=!0,e&&e(s,n))},n,i),s},setPath:function(t){return this.path=t,this}}),Object.assign(Ma.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,s=ya.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),ya.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ta.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){var r=new Ti,s=new Ma(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var o=0;function a(n){s.load(t[n],function(t){r.images[n]=t,6==++o&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(var l=0;l<t.length;++l)a(l);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ca.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){var r=new Xe,s=new Ma(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(n){r.image=n;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?jt:Ht,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(La.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),s=0;for(i.push(0),n=1;n<=t;n++)s+=(e=this.getPoint(n/t)).distanceTo(r),i.push(s),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,s=i.length;n=e||t*i[s-1];for(var o,a=0,l=s-1;a<=l;)if((o=i[r=Math.floor(a+(l-a)/2)]-n)<0)a=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(s-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(s-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r=new Fe,s=[],o=[],a=[],l=new Fe,c=new Ne;for(n=0;n<=t;n++)s[n]=this.getTangentAt(n/t),s[n].normalize();o[0]=new Fe,a[0]=new Fe;var h=Number.MAX_VALUE,u=Math.abs(s[0].x),d=Math.abs(s[0].y),p=Math.abs(s[0].z);for(u<=h&&(h=u,r.set(1,0,0)),d<=h&&(h=d,r.set(0,1,0)),p<=h&&r.set(0,0,1),l.crossVectors(s[0],r).normalize(),o[0].crossVectors(s[0],l),a[0].crossVectors(s[0],o[0]),n=1;n<=t;n++)o[n]=o[n-1].clone(),a[n]=a[n-1].clone(),l.crossVectors(s[n-1],s[n]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(De.clamp(s[n-1].dot(s[n]),-1,1)),o[n].applyMatrix4(c.makeRotationAxis(l,i))),a[n].crossVectors(s[n],o[n]);if(!0===e)for(i=Math.acos(De.clamp(o[0].dot(o[t]),-1,1)),i/=t,s[0].dot(l.crossVectors(o[0],o[t]))>0&&(i=-i),n=1;n<=t;n++)o[n].applyMatrix4(c.makeRotationAxis(s[n],i*n)),a[n].crossVectors(s[n],o[n]);return{tangents:s,normals:o,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),(Pa.prototype=Object.create(La.prototype)).constructor=Pa,Pa.prototype.isEllipseCurve=!0,Pa.prototype.getPoint=function(t,e){for(var n=e||new ke,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);var o=this.aStartAngle+t*r,a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=a-this.aX,d=l-this.aY;a=u*c-d*h+this.aX,l=u*h+d*c+this.aY}return n.set(a,l)},Pa.prototype.copy=function(t){return La.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Pa.prototype.toJSON=function(){var t=La.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Pa.prototype.fromJSON=function(t){return La.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(Ra.prototype=Object.create(Pa.prototype)).constructor=Ra,Ra.prototype.isArcCurve=!0;var Ia=new Fe,Da=new Oa,ka=new Oa,Na=new Oa;function Ba(t,e,n,i){La.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Fa(t,e,n,i,r){var s=.5*(i-e),o=.5*(r-n),a=t*t;return(2*n-2*i+s+o)*(t*a)+(-3*n+3*i-2*s-o)*a+s*t+n}function za(t,e,n,i){return function(t,n){var i=1-t;return i*i*e}(t)+function(t,e){return 2*(1-t)*t*n}(t)+function(t,e){return t*t*i}(t)}function Ua(t,e,n,i,r){return function(t,n){var i=1-t;return i*i*i*e}(t)+function(t,e){var i=1-t;return 3*i*i*t*n}(t)+function(t,e){return 3*(1-t)*t*t*i}(t)+function(t,e){return t*t*t*r}(t)}function ja(t,e,n,i){La.call(this),this.type="CubicBezierCurve",this.v0=t||new ke,this.v1=e||new ke,this.v2=n||new ke,this.v3=i||new ke}function Ha(t,e,n,i){La.call(this),this.type="CubicBezierCurve3",this.v0=t||new Fe,this.v1=e||new Fe,this.v2=n||new Fe,this.v3=i||new Fe}function Va(t,e){La.call(this),this.type="LineCurve",this.v1=t||new ke,this.v2=e||new ke}function Ga(t,e){La.call(this),this.type="LineCurve3",this.v1=t||new Fe,this.v2=e||new Fe}function Wa(t,e,n){La.call(this),this.type="QuadraticBezierCurve",this.v0=t||new ke,this.v1=e||new ke,this.v2=n||new ke}function qa(t,e,n){La.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Fe,this.v1=e||new Fe,this.v2=n||new Fe}function Xa(t){La.call(this),this.type="SplineCurve",this.points=t||[]}(Ba.prototype=Object.create(La.prototype)).constructor=Ba,Ba.prototype.isCatmullRomCurve3=!0,Ba.prototype.getPoint=function(t,e){var n,i,r,s,o=e||new Fe,a=this.points,l=a.length,c=(l-(this.closed?0:1))*t,h=Math.floor(c),u=c-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/l)+1)*l:0===u&&h===l-1&&(h=l-2,u=1),this.closed||h>0?n=a[(h-1)%l]:(Ia.subVectors(a[0],a[1]).add(a[0]),n=Ia),i=a[h%l],r=a[(h+1)%l],this.closed||h+2<l?s=a[(h+2)%l]:(Ia.subVectors(a[l-1],a[l-2]).add(a[l-1]),s=Ia),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),d),f=Math.pow(i.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(s),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Da.initNonuniformCatmullRom(n.x,i.x,r.x,s.x,p,f,m),ka.initNonuniformCatmullRom(n.y,i.y,r.y,s.y,p,f,m),Na.initNonuniformCatmullRom(n.z,i.z,r.z,s.z,p,f,m)}else"catmullrom"===this.curveType&&(Da.initCatmullRom(n.x,i.x,r.x,s.x,this.tension),ka.initCatmullRom(n.y,i.y,r.y,s.y,this.tension),Na.initCatmullRom(n.z,i.z,r.z,s.z,this.tension));return o.set(Da.calc(u),ka.calc(u),Na.calc(u)),o},Ba.prototype.copy=function(t){La.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Ba.prototype.toJSON=function(){var t=La.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Ba.prototype.fromJSON=function(t){La.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new Fe).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(ja.prototype=Object.create(La.prototype)).constructor=ja,ja.prototype.isCubicBezierCurve=!0,ja.prototype.getPoint=function(t,e){var n=e||new ke,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Ua(t,i.x,r.x,s.x,o.x),Ua(t,i.y,r.y,s.y,o.y)),n},ja.prototype.copy=function(t){return La.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ja.prototype.toJSON=function(){var t=La.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ja.prototype.fromJSON=function(t){return La.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Ha.prototype=Object.create(La.prototype)).constructor=Ha,Ha.prototype.isCubicBezierCurve3=!0,Ha.prototype.getPoint=function(t,e){var n=e||new Fe,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Ua(t,i.x,r.x,s.x,o.x),Ua(t,i.y,r.y,s.y,o.y),Ua(t,i.z,r.z,s.z,o.z)),n},Ha.prototype.copy=function(t){return La.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ha.prototype.toJSON=function(){var t=La.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ha.prototype.fromJSON=function(t){return La.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Va.prototype=Object.create(La.prototype)).constructor=Va,Va.prototype.isLineCurve=!0,Va.prototype.getPoint=function(t,e){var n=e||new ke;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Va.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Va.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Va.prototype.copy=function(t){return La.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Va.prototype.toJSON=function(){var t=La.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Va.prototype.fromJSON=function(t){return La.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Ga.prototype=Object.create(La.prototype)).constructor=Ga,Ga.prototype.isLineCurve3=!0,Ga.prototype.getPoint=function(t,e){var n=e||new Fe;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Ga.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ga.prototype.copy=function(t){return La.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ga.prototype.toJSON=function(){var t=La.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ga.prototype.fromJSON=function(t){return La.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Wa.prototype=Object.create(La.prototype)).constructor=Wa,Wa.prototype.isQuadraticBezierCurve=!0,Wa.prototype.getPoint=function(t,e){var n=e||new ke,i=this.v0,r=this.v1,s=this.v2;return n.set(za(t,i.x,r.x,s.x),za(t,i.y,r.y,s.y)),n},Wa.prototype.copy=function(t){return La.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Wa.prototype.toJSON=function(){var t=La.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Wa.prototype.fromJSON=function(t){return La.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(qa.prototype=Object.create(La.prototype)).constructor=qa,qa.prototype.isQuadraticBezierCurve3=!0,qa.prototype.getPoint=function(t,e){var n=e||new Fe,i=this.v0,r=this.v1,s=this.v2;return n.set(za(t,i.x,r.x,s.x),za(t,i.y,r.y,s.y),za(t,i.z,r.z,s.z)),n},qa.prototype.copy=function(t){return La.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},qa.prototype.toJSON=function(){var t=La.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},qa.prototype.fromJSON=function(t){return La.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Xa.prototype=Object.create(La.prototype)).constructor=Xa,Xa.prototype.isSplineCurve=!0,Xa.prototype.getPoint=function(t,e){var n=e||new ke,i=this.points,r=(i.length-1)*t,s=Math.floor(r),o=r-s,a=i[0===s?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(Fa(o,a.x,l.x,c.x,h.x),Fa(o,a.y,l.y,c.y,h.y)),n},Xa.prototype.copy=function(t){La.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this},Xa.prototype.toJSON=function(){var t=La.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t},Xa.prototype.fromJSON=function(t){La.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new ke).fromArray(i))}return this};var Ya=Object.freeze({ArcCurve:Ra,CatmullRomCurve3:Ba,CubicBezierCurve:ja,CubicBezierCurve3:Ha,EllipseCurve:Pa,LineCurve:Va,LineCurve3:Ga,QuadraticBezierCurve:Wa,QuadraticBezierCurve3:qa,SplineCurve:Xa});function Qa(){La.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Za(t){Qa.call(this),this.type="Path",this.currentPoint=new ke,t&&this.setFromPoints(t)}function Ka(t){Za.call(this,t),this.uuid=De.generateUUID(),this.type="Shape",this.holes=[]}function Ja(t,e){Mn.call(this),this.type="Light",this.color=new dn(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function $a(t,e,n){Ja.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Mn.DefaultUp),this.updateMatrix(),this.groundColor=new dn(e)}function tl(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new ke(512,512),this.map=null,this.matrix=new Ne}function el(){tl.call(this,new Jr(50,1,.5,500))}function nl(t,e,n,i,r,s){Ja.call(this,t,e),this.type="SpotLight",this.position.copy(Mn.DefaultUp),this.updateMatrix(),this.target=new Mn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==s?s:1,this.shadow=new el}function il(t,e,n,i){Ja.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new tl(new Jr(90,1,.5,500))}function rl(t,e,n,i,r,s){Kr.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()}function sl(){tl.call(this,new rl(-5,5,5,-5,.5,500))}function ol(t,e){Ja.call(this,t,e),this.type="DirectionalLight",this.position.copy(Mn.DefaultUp),this.updateMatrix(),this.target=new Mn,this.shadow=new sl}function al(t,e){Ja.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function ll(t,e,n,i){Ja.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function cl(t){this.manager=void 0!==t?t:ba,this.textures={}}Qa.prototype=Object.assign(Object.create(La.prototype),{constructor:Qa,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Va(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,s=this.curves[i],o=s.getLength();return s.getPointAt(0===o?0:1-r/o)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var s=r[i],o=s.getPoints(s&&s.isEllipseCurve?2*t:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?t*s.points.length:t),a=0;a<o.length;a++){var l=o[a];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){La.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=La.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){La.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new Ya[i.type]).fromJSON(i))}return this}}),Za.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Za,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Va(this.currentPoint.clone(),new ke(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var r=new Wa(this.currentPoint.clone(),new ke(t,e),new ke(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,r,s){var o=new ja(this.currentPoint.clone(),new ke(t,e),new ke(n,i),new ke(r,s));this.curves.push(o),this.currentPoint.set(r,s)},splineThru:function(t){var e=new Xa([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,s){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,s)},absarc:function(t,e,n,i,r,s){this.absellipse(t,e,n,n,i,r,s)},ellipse:function(t,e,n,i,r,s,o,a){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,s,o,a)},absellipse:function(t,e,n,i,r,s,o,a){var l=new Pa(t,e,n,i,r,s,o,a);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var h=l.getPoint(1);this.currentPoint.copy(h)},copy:function(t){return Qa.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Qa.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Qa.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Ka.prototype=Object.assign(Object.create(Za.prototype),{constructor:Ka,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Za.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=Za.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){Za.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Za).fromJSON(i))}return this}}),Ja.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Ja,isLight:!0,copy:function(t){return Mn.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Mn.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),$a.prototype=Object.assign(Object.create(Ja.prototype),{constructor:$a,isHemisphereLight:!0,copy:function(t){return Ja.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(tl.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),el.prototype=Object.assign(Object.create(tl.prototype),{constructor:el,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*De.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix())}}),nl.prototype=Object.assign(Object.create(Ja.prototype),{constructor:nl,isSpotLight:!0,copy:function(t){return Ja.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),il.prototype=Object.assign(Object.create(Ja.prototype),{constructor:il,isPointLight:!0,copy:function(t){return Ja.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),rl.prototype=Object.assign(Object.create(Kr.prototype),{constructor:rl,isOrthographicCamera:!0,copy:function(t,e){return Kr.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,s=n+t,o=i+e,a=i-e;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),h=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;s=(r+=h*(this.view.offsetX/l))+h*(this.view.width/l),a=(o-=u*(this.view.offsetY/c))-u*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Mn.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),sl.prototype=Object.assign(Object.create(tl.prototype),{constructor:sl}),ol.prototype=Object.assign(Object.create(Ja.prototype),{constructor:ol,isDirectionalLight:!0,copy:function(t){return Ja.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),al.prototype=Object.assign(Object.create(Ja.prototype),{constructor:al,isAmbientLight:!0}),ll.prototype=Object.assign(Object.create(Ja.prototype),{constructor:ll,isRectAreaLight:!0,copy:function(t){return Ja.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Ja.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(cl.prototype,{load:function(t,e,n,i){var r=this,s=new wa(r.manager);s.setPath(r.path),s.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new na[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.uniforms)for(var r in t.uniforms){var s=t.uniforms[r];switch(i.uniforms[r]={},s.type){case"t":i.uniforms[r].value=n(s.value);break;case"c":i.uniforms[r].value=(new dn).setHex(s.value);break;case"v2":i.uniforms[r].value=(new ke).fromArray(s.value);break;case"v3":i.uniforms[r].value=(new Fe).fromArray(s.value);break;case"v4":i.uniforms[r].value=(new Ye).fromArray(s.value);break;case"m3":i.uniforms[r].value=(new ze).fromArray(s.value);case"m4":i.uniforms[r].value=(new Ne).fromArray(s.value);break;default:i.uniforms[r].value=s.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var o in t.extensions)i.extensions[o]=t.extensions[o];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),i.normalScale=(new ke).fromArray(a)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),i},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var hl={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function ul(t){this.manager=void 0!==t?t:ba}Object.assign(ul.prototype,{load:function(t,e,n,i){var r=this,s=new wa(r.manager);s.setPath(r.path),s.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=new Gn,n=t.data.index;if(void 0!==n){var i=new dl[n.type](n.array);e.setIndex(new Rn(i,1))}var r=t.data.attributes;for(var s in r){var o=new Rn(i=new dl[(d=r[s]).type](d.array),d.itemSize,d.normalized);void 0!==d.name&&(o.name=d.name),e.addAttribute(s,o)}var a=t.data.morphAttributes;if(a)for(var s in a){for(var l=a[s],c=[],h=0,u=l.length;h<u;h++){var d;o=new Rn(i=new dl[(d=l[h]).type](d.array),d.itemSize,d.normalized),void 0!==d.name&&(o.name=d.name),c.push(o)}e.morphAttributes[s]=c}var p=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==p){h=0;for(var f=p.length;h!==f;++h){var m=p[h];e.addGroup(m.start,m.count,m.materialIndex)}}var g=t.data.boundingSphere;if(void 0!==g){var v=new Fe;void 0!==g.center&&v.fromArray(g.center),e.boundingSphere=new tn(v,g.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e},setPath:function(t){return this.path=t,this}});var dl={Int8Array,Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function pl(t){this.manager=void 0!==t?t:ba,this.resourcePath=""}Object.assign(pl.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){var r=this,s=void 0===this.path?hl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;var o=new wa(r.manager);o.setPath(this.path),o.load(t,function(n){var s=null;try{s=JSON.parse(n)}catch(a){return void 0!==i&&i(a),void console.error("THREE:ObjectLoader: Can't parse "+t+".",a.message)}var o=s.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(s,e):console.error("THREE.ObjectLoader: Can't load "+t)},n,i)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(a)}),s=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,s),a=this.parseObject(t.object,i,o);return t.animations&&(a.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(a),a},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Ka).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new ul,r=0,s=t.length;r<s;r++){var o,a=t[r];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Wo[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Wo[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Wo[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Wo[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Wo[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Wo[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Wo[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Wo[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Wo[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Wo[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new Wo[a.type]((new Ya[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Wo[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Wo[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,h=a.shapes.length;c<h;c++)l.push(e[a.shapes[c]]);o=new Wo[a.type](l,a.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,h=a.shapes.length;c<h;c++)l.push(e[a.shapes[c]]);var u=a.options.extrudePath;void 0!==u&&(a.options.extrudePath=(new Ya[u.type]).fromJSON(u)),o=new Wo[a.type](l,a.options);break;case"BufferGeometry":o=i.parse(a);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?o=(new THREE.LegacyJSONLoader).parse(a,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),!0===o.isBufferGeometry&&void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}return n},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new cl;r.setTextures(e);for(var s=0,o=t.length;s<o;s++){var a=t[s];if("MultiMaterial"===a.type){for(var l=[],c=0;c<a.materials.length;c++){var h=a.materials[c];void 0===n[h.uuid]&&(n[h.uuid]=r.parse(h)),l.push(n[h.uuid])}i[a.uuid]=l}else void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=ga.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){var n=this,i={};function r(t){return n.manager.itemStart(t),s.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}if(void 0!==t&&t.length>0){var s=new Ma(new _a(e));s.setCrossOrigin(this.crossOrigin);for(var o=0,a=t.length;o<a;o++){var l=t[o],c=l.url;if(Array.isArray(c)){i[l.uuid]=[];for(var h=0,u=c.length;h<u;h++){var d=c[h],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;i[l.uuid].push(r(p))}}else p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url,i[l.uuid]=r(p)}}return i},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,s=t.length;r<s;r++){var o,a=t[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image),(o=Array.isArray(e[a.image])?new Ti(e[a.image]):new Xe(e[a.image])).needsUpdate=!0,o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.mapping&&(o.mapping=n(a.mapping,_l)),void 0!==a.offset&&o.offset.fromArray(a.offset),void 0!==a.repeat&&o.repeat.fromArray(a.repeat),void 0!==a.center&&o.center.fromArray(a.center),void 0!==a.rotation&&(o.rotation=a.rotation),void 0!==a.wrap&&(o.wrapS=n(a.wrap[0],bl),o.wrapT=n(a.wrap[1],bl)),void 0!==a.format&&(o.format=a.format),void 0!==a.type&&(o.type=a.type),void 0!==a.encoding&&(o.encoding=a.encoding),void 0!==a.minFilter&&(o.minFilter=n(a.minFilter,xl)),void 0!==a.magFilter&&(o.magFilter=n(a.magFilter,xl)),void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy),void 0!==a.flipY&&(o.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(o.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(o.unpackAlignment=a.unpackAlignment),i[a.uuid]=o}return i},parseObject:function(t,e,n){var i;function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function s(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var s=t[i];void 0===n[s]&&console.warn("THREE.ObjectLoader: Undefined material",s),e.push(n[s])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new fs,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new dn(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new ps(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new ds(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Jr(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new rl(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new al(t.color,t.intensity);break;case"DirectionalLight":i=new ol(t.color,t.intensity);break;case"PointLight":i=new il(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new ll(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new nl(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new $a(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=r(t.geometry),a=s(t.material);i=o.bones&&o.bones.length>0?new bs(o,a):new mi(o,a),void 0!==t.drawMode&&i.setDrawMode(t.drawMode);break;case"LOD":i=new _s;break;case"Line":i=new Es(r(t.geometry),s(t.material),t.mode);break;case"LineLoop":i=new Ms(r(t.geometry),s(t.material));break;case"LineSegments":i=new Ss(r(t.geometry),s(t.material));break;case"PointCloud":case"Points":i=new Cs(r(t.geometry),s(t.material));break;case"Sprite":i=new ys(s(t.material));break;case"Group":i=new Zr;break;default:i=new Mn}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,c=0;c<l.length;c++)i.add(this.parseObject(l[c],e,n));if("LOD"===t.type)for(var h=t.levels,u=0;u<h.length;u++){var d=h[u],p=i.getObjectByProperty("uuid",d.object);void 0!==p&&i.addLevel(p,d.distance)}return i}});var fl,ml,gl,vl,yl,_l={UVMapping:300,CubeReflectionMapping:dt,CubeRefractionMapping:pt,EquirectangularReflectionMapping:ft,EquirectangularRefractionMapping:mt,SphericalReflectionMapping:gt,CubeUVReflectionMapping:vt,CubeUVRefractionMapping:yt},bl={RepeatWrapping:_t,ClampToEdgeWrapping:bt,MirroredRepeatWrapping:xt},xl={NearestFilter:wt,NearestMipMapNearestFilter:At,NearestMipMapLinearFilter:Et,LinearFilter:St,LinearMipMapNearestFilter:Mt,LinearMipMapLinearFilter:Tt};function wl(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:ba,this.options=void 0}function Al(){this.type="ShapePath",this.color=new dn,this.subPaths=[],this.currentPath=null}function El(t){this.type="Font",this.data=t}function Sl(t,e,n,i,r){var s=r.glyphs[t]||r.glyphs["?"];if(s){var o,a,l,c,h,u,d,p,f=new Al;if(s.o)for(var m=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),g=0,v=m.length;g<v;)switch(m[g++]){case"m":o=m[g++]*e+n,a=m[g++]*e+i,f.moveTo(o,a);break;case"l":o=m[g++]*e+n,a=m[g++]*e+i,f.lineTo(o,a);break;case"q":l=m[g++]*e+n,c=m[g++]*e+i,h=m[g++]*e+n,u=m[g++]*e+i,f.quadraticCurveTo(h,u,l,c);break;case"b":l=m[g++]*e+n,c=m[g++]*e+i,h=m[g++]*e+n,u=m[g++]*e+i,d=m[g++]*e+n,p=m[g++]*e+i,f.bezierCurveTo(h,u,d,p,l,c)}return{offsetX:s.ha*e,path:f}}}function Ml(t){this.manager=void 0!==t?t:ba}function Tl(){}wl.prototype={constructor:wl,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,s=ya.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;fetch(t).then(function(t){return t.blob()}).then(function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)}).then(function(n){ya.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(Al.prototype,{moveTo:function(t,e){this.currentPath=new Za,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,s){this.currentPath.bezierCurveTo(t,e,n,i,r,s)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],s=new Ka;s.curves=r.curves,e.push(s)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,s=0;s<n;r=s++){var o=e[r],a=e[s],l=a.x-o.x,c=a.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=e[s],l=-l,a=e[r],c=-c),t.y<o.y||t.y>a.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var h=c*(t.x-o.x)-l*(t.y-o.y);if(0===h)return!0;if(h<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(a.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=a.x)return!0}}return i}var r=bo.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===e)return n(s);var o,a,l,c=[];if(1===s.length)return a=s[0],(l=new Ka).curves=a.curves,c.push(l),c;var h=!r(s[0].getPoints());h=t?!h:h;var u,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=s.length;v<y;v++)o=r(u=(a=s[v]).getPoints()),(o=t?!o:o)?(!h&&f[g]&&g++,f[g]={s:new Ka,p:u},f[g].s.curves=a.curves,h&&g++,m[g]=[]):m[g].push({h:a,p:u[0]});if(!f[0])return n(s);if(f.length>1){for(var _=!1,b=[],x=0,w=f.length;x<w;x++)p[x]=[];for(x=0,w=f.length;x<w;x++)for(var A=m[x],E=0;E<A.length;E++){for(var S=A[E],M=!0,T=0;T<f.length;T++)i(S.p,f[T].p)&&(x!==T&&b.push({froms:x,tos:T,hole:E}),M?(M=!1,p[T].push(S)):_=!0);M&&p[x].push(S)}b.length>0&&(_||(m=p))}v=0;for(var C=f.length;v<C;v++){c.push(l=f[v].s);for(var L=0,P=(d=m[v]).length;L<P;L++)l.holes.push(d[L].h)}return c}}),Object.assign(El.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=function(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],a=0,l=0,c=0;c<i.length;c++){var h=i[c];if("\n"===h)a=0,l-=s;else{var u=Sl(h,r,a,l,n);a+=u.offsetX,o.push(u.path)}}return o}(t,e,this.data),r=0,s=i.length;r<s;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Object.assign(Ml.prototype,{load:function(t,n,i,r){var s=this,o=new wa(this.manager);o.setPath(this.path),o.load(t,function(t){var i;try{i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}var r=s.parse(i);n&&n(r)},i,r)},parse:function(t){return new El(t)},setPath:function(t){return this.path=t,this}}),Tl.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n+1];if(e[n].test(t))return r}return null}},Object.assign(Tl.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e,n);return i},createMaterial:(fl={NoBlending:T,NormalBlending:C,AdditiveBlending:L,SubtractiveBlending:P,MultiplyBlending:R,CustomBlending:O},ml=new dn,gl=new Ca,vl=new cl,function(t,e,n){var i={};function r(t,r,s,o,a){var l,c=e+t,h=Tl.Handlers.get(c);null!==h?l=h.load(c):(gl.setCrossOrigin(n),l=gl.load(c)),void 0!==r&&(l.repeat.fromArray(r),1!==r[0]&&(l.wrapS=_t),1!==r[1]&&(l.wrapT=_t)),void 0!==s&&l.offset.fromArray(s),void 0!==o&&("repeat"===o[0]&&(l.wrapS=_t),"mirror"===o[0]&&(l.wrapS=xt),"repeat"===o[1]&&(l.wrapT=_t),"mirror"===o[1]&&(l.wrapT=xt)),void 0!==a&&(l.anisotropy=a);var u=De.generateUUID();return i[u]=l,u}var s={uuid:De.generateUUID(),type:"MeshLambertMaterial"};for(var o in t){var a=t[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":s.name=a;break;case"blending":s.blending=fl[a];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":s.color=ml.fromArray(a).getHex();break;case"colorSpecular":s.specular=ml.fromArray(a).getHex();break;case"colorEmissive":s.emissive=ml.fromArray(a).getHex();break;case"specularCoef":s.shininess=a;break;case"shading":"basic"===a.toLowerCase()&&(s.type="MeshBasicMaterial"),"phong"===a.toLowerCase()&&(s.type="MeshPhongMaterial"),"standard"===a.toLowerCase()&&(s.type="MeshStandardMaterial");break;case"mapDiffuse":s.map=r(a,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":s.emissiveMap=r(a,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":s.lightMap=r(a,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":s.aoMap=r(a,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":s.bumpMap=r(a,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":s.bumpScale=a;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":s.normalMap=r(a,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":s.normalScale=a;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":s.specularMap=r(a,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":s.metalnessMap=r(a,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":s.roughnessMap=r(a,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":s.alphaMap=r(a,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":s.side=w;break;case"doubleSided":s.side=A;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),s.opacity=a;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":s[o]=a;break;case"vertexColors":!0===a&&(s.vertexColors=M),"face"===a&&(s.vertexColors=S);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,a)}}return"MeshBasicMaterial"===s.type&&delete s.emissive,"MeshPhongMaterial"!==s.type&&delete s.specular,s.opacity<1&&(s.transparent=!0),vl.setTextures(i),vl.parse(s)})});var Cl,Ll,Pl,Rl,Ol,Il,Dl,kl,Nl,Bl,Fl,zl,Ul,jl,Hl,Vl,Gl,Wl,ql,Xl,Yl,Ql,Zl,Kl,Jl,$l={getContext:function(){return void 0===yl&&(yl=new(window.AudioContext||window.webkitAudioContext)),yl},setContext:function(t){yl=t}};function tc(t){this.manager=void 0!==t?t:ba}function ec(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Jr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Jr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function nc(t,e,n,i){Mn.call(this),this.type="CubeCamera";var r=new Jr(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new Fe(1,0,0)),this.add(r);var s=new Jr(90,1,t,e);s.up.set(0,-1,0),s.lookAt(new Fe(-1,0,0)),this.add(s);var o=new Jr(90,1,t,e);o.up.set(0,0,1),o.lookAt(new Fe(0,1,0)),this.add(o);var a=new Jr(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new Fe(0,-1,0)),this.add(a);var l=new Jr(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new Fe(0,0,1)),this.add(l);var c=new Jr(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new Fe(0,0,-1)),this.add(c),this.renderTarget=new Ke(n,n,i=i||{format:jt,magFilter:St,minFilter:St}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),i=this.renderTarget,h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,s),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=h,t.setRenderTarget(i,5),t.render(e,c),t.setRenderTarget(n)},this.clear=function(t,e,n,i){for(var r=t.getRenderTarget(),s=this.renderTarget,o=0;o<6;o++)t.setRenderTarget(s,o),t.clear(e,n,i);t.setRenderTarget(r)}}function ic(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function rc(){Mn.call(this),this.type="AudioListener",this.context=$l.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function sc(t){Mn.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function oc(t){sc.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function ac(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function lc(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function cc(t,e,n){var i=n||hc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function hc(t,e,n){this.path=e,this.parsedPath=n||hc.parseTrackName(e),this.node=hc.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function uc(){this.uuid=De.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function dc(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,s=new Array(r),o={endingStart:_e,endingEnd:_e},a=0;a!==r;++a){var l=i[a].createInterpolant(null);s[a]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ye,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function pc(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function fc(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function mc(){Gn.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function gc(t,e,n){ms.call(this,t,e),this.meshPerAttribute=n||1}function vc(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Rn.call(this,t,e,n),this.meshPerAttribute=i||1}function yc(t,e,n,i){this.ray=new di(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function _c(t,e){return t.distance-e.distance}function bc(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,s=0,o=r.length;s<o;s++)bc(r[s],e,n,!0)}function xc(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function wc(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function Ac(t,e){this.min=void 0!==t?t:new ke(1/0,1/0),this.max=void 0!==e?e:new ke(-1/0,-1/0)}function Ec(t,e){this.start=void 0!==t?t:new Fe,this.end=void 0!==e?e:new Fe}function Sc(t){Mn.call(this),this.material=t,this.render=function(){}}function Mc(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,s=void 0!==i?i:1,o=0,a=this.object.geometry;a&&a.isGeometry?o=3*a.faces.length:a&&a.isBufferGeometry&&(o=a.attributes.normal.count);var l=new Gn,c=new zn(2*o*3,3);l.addAttribute("position",c),Ss.call(this,l,new As({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function Tc(t,e){Mn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new Gn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,s=1;r<32;r++,s++){var o=r/32*Math.PI*2,a=s/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(a),Math.sin(a),1)}n.addAttribute("position",new zn(i,3));var l=new As({fog:!1});this.cone=new Ss(n,l),this.add(this.cone),this.update()}function Cc(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new Gn,i=[],r=[],s=new dn(0,0,1),o=new dn(0,1,0),a=0;a<e.length;a++){var l=e[a];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(o.r,o.g,o.b))}n.addAttribute("position",new zn(i,3)),n.addAttribute("color",new zn(r,3));var c=new As({vertexColors:M,depthTest:!1,depthWrite:!1,transparent:!0});Ss.call(this,n,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Lc(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new Po(e,4,2),r=new fi({wireframe:!0,fog:!1});mi.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Pc(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var n=new Gn;n.addAttribute("position",new zn([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var i=new As({fog:!1});Es.call(this,n,i);var r=new Gn;r.addAttribute("position",new zn([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new mi(r,new fi({side:w,fog:!1}))),this.update()}function Rc(t,e,n){Mn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new js(e);i.rotateY(.5*Math.PI),this.material=new fi({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=M);var r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.addAttribute("color",new Rn(s,3)),this.add(new mi(i,this.material)),this.update()}function Oc(t,e,n,i){t=t||10,e=e||10,n=new dn(void 0!==n?n:4473924),i=new dn(void 0!==i?i:8947848);for(var r=e/2,s=t/e,o=t/2,a=[],l=[],c=0,h=0,u=-o;c<=e;c++,u+=s){a.push(-o,0,u,o,0,u),a.push(u,0,-o,u,0,o);var d=c===r?n:i;d.toArray(l,h),d.toArray(l,h+=3),d.toArray(l,h+=3),d.toArray(l,h+=3),h+=3}var p=new Gn;p.addAttribute("position",new zn(a,3)),p.addAttribute("color",new zn(l,3));var f=new As({vertexColors:M});Ss.call(this,p,f)}function Ic(t,e,n,i,r,s){t=t||10,e=e||16,n=n||8,i=i||64,r=new dn(void 0!==r?r:4473924),s=new dn(void 0!==s?s:8947848);var o,a,l,c,h,u,d,p=[],f=[];for(c=0;c<=e;c++)l=c/e*(2*Math.PI),o=Math.sin(l)*t,a=Math.cos(l)*t,p.push(0,0,0),p.push(o,0,a),f.push((d=1&c?r:s).r,d.g,d.b),f.push(d.r,d.g,d.b);for(c=0;c<=n;c++)for(d=1&c?r:s,u=t-t/n*c,h=0;h<i;h++)l=h/i*(2*Math.PI),o=Math.sin(l)*u,a=Math.cos(l)*u,p.push(o,0,a),f.push(d.r,d.g,d.b),l=(h+1)/i*(2*Math.PI),o=Math.sin(l)*u,a=Math.cos(l)*u,p.push(o,0,a),f.push(d.r,d.g,d.b);var m=new Gn;m.addAttribute("position",new zn(p,3)),m.addAttribute("color",new zn(f,3));var g=new As({vertexColors:M});Ss.call(this,m,g)}function Dc(t,e,n,i){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new Gn,s=new Float32Array(3*(3*(this.divisionsInnerAngle+2*this.divisionsOuterAngle)+3));r.addAttribute("position",new Rn(s,3));var o=new As({color:65280}),a=new As({color:16776960});Es.call(this,r,[a,o]),this.update()}function kc(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,s=void 0!==i?i:1,o=0,a=this.object.geometry;a&&a.isGeometry?o=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Gn,c=new zn(2*o*3,3);l.addAttribute("position",c),Ss.call(this,l,new As({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function Nc(t,e,n){Mn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new Gn;i.addAttribute("position",new zn([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new As({fog:!1});this.lightPlane=new Es(i,r),this.add(this.lightPlane),(i=new Gn).addAttribute("position",new zn([0,0,0,0,0,1],3)),this.targetLine=new Es(i,r),this.add(this.targetLine),this.update()}function Bc(t){var e=new Gn,n=new As({color:16777215,vertexColors:S}),i=[],r=[],s={},o=new dn(16755200),a=new dn(16711680),l=new dn(43775),c=new dn(16777215),h=new dn(3355443);function u(t,e,n){d(t,n),d(e,n)}function d(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(i.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",a),u("p","n2",a),u("p","n3",a),u("p","n4",a),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l),u("c","t",c),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),e.addAttribute("position",new zn(i,3)),e.addAttribute("color",new zn(r,3)),Ss.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Fc(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Gn;r.setIndex(new Rn(n,1)),r.addAttribute("position",new Rn(i,3)),Ss.call(this,r,new As({color:e})),this.matrixAutoUpdate=!1,this.update()}function zc(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Gn;r.setIndex(new Rn(i,1)),r.addAttribute("position",new zn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ss.call(this,r,new As({color:n})),this.geometry.computeBoundingSphere()}function Uc(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=new Gn;r.addAttribute("position",new zn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Es.call(this,r,new As({color:i}));var s=new Gn;s.addAttribute("position",new zn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new mi(s,new fi({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function jc(t,e,n,i,r,s){Mn.call(this),void 0===t&&(t=new Fe(0,0,1)),void 0===e&&(e=new Fe(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===s&&(s=.2*r),void 0===Ql&&((Ql=new Gn).addAttribute("position",new zn([0,0,0,0,1,0],3)),(Zl=new Uo(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Es(Ql,new As({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new mi(Zl,new fi({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,s)}function Hc(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Gn;n.addAttribute("position",new zn(e,3)),n.addAttribute("color",new zn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new As({vertexColors:M});Ss.call(this,n,i)}function Vc(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ba.call(this,t),this.type="catmullrom",this.closed=!0}function Gc(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ba.call(this,t),this.type="catmullrom"}function Wc(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ba.call(this,t),this.type="catmullrom"}Object.assign(tc.prototype,{load:function(t,e,n,i){var r=new wa(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,function(t){var n=t.slice(0);$l.getContext().decodeAudioData(n,function(t){e(t)})},n,i)},setPath:function(t){return this.path=t,this}}),Object.assign(ec.prototype,{update:(Nl=new Ne,Bl=new Ne,function(t){if(Cl!==this||Ll!==t.focus||Pl!==t.fov||Rl!==t.aspect*this.aspect||Ol!==t.near||Il!==t.far||Dl!==t.zoom||kl!==this.eyeSep){Cl=this,Ll=t.focus,Pl=t.fov,Rl=t.aspect*this.aspect,Ol=t.near,Il=t.far,Dl=t.zoom;var e,n,i=t.projectionMatrix.clone(),r=(kl=this.eyeSep/2)*Ol/Ll,s=Ol*Math.tan(De.DEG2RAD*Pl*.5)/Dl;Bl.elements[12]=-kl,Nl.elements[12]=kl,i.elements[0]=2*Ol/((n=s*Rl+r)-(e=-s*Rl+r)),i.elements[8]=(n+e)/(n-e),this.cameraL.projectionMatrix.copy(i),i.elements[0]=2*Ol/((n=s*Rl-r)-(e=-s*Rl-r)),i.elements[8]=(n+e)/(n-e),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Bl),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Nl)})}),(nc.prototype=Object.create(Mn.prototype)).constructor=nc,Object.assign(ic.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),rc.prototype=Object.assign(Object.create(Mn.prototype),{constructor:rc,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new Fe,e=new Be,n=new Fe,i=new Fe,r=new ic;return function(s){Mn.prototype.updateMatrixWorld.call(this,s);var o=this.context.listener,a=this.up;if(this.timeDelta=r.getDelta(),this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),o.positionX){var l=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(t.x,l),o.positionY.linearRampToValueAtTime(t.y,l),o.positionZ.linearRampToValueAtTime(t.z,l),o.forwardX.linearRampToValueAtTime(i.x,l),o.forwardY.linearRampToValueAtTime(i.y,l),o.forwardZ.linearRampToValueAtTime(i.z,l),o.upX.linearRampToValueAtTime(a.x,l),o.upY.linearRampToValueAtTime(a.y,l),o.upZ.linearRampToValueAtTime(a.z,l)}else o.setPosition(t.x,t.y,t.z),o.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z)}}()}),sc.prototype=Object.assign(Object.create(Mn.prototype),{constructor:sc,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),oc.prototype=Object.assign(Object.create(sc.prototype),{constructor:oc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var t=new Fe,e=new Be,n=new Fe,i=new Fe;return function(r){if(Mn.prototype.updateMatrixWorld.call(this,r),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(t,e,n),i.set(0,0,1).applyQuaternion(e);var s=this.panner;if(s.positionX){var o=this.context.currentTime+this.listener.timeDelta;s.positionX.linearRampToValueAtTime(t.x,o),s.positionY.linearRampToValueAtTime(t.y,o),s.positionZ.linearRampToValueAtTime(t.z,o),s.orientationX.linearRampToValueAtTime(i.x,o),s.orientationY.linearRampToValueAtTime(i.y,o),s.orientationZ.linearRampToValueAtTime(i.z,o)}else s.setPosition(t.x,t.y,t.z),s.setOrientation(i.x,i.y,i.z)}}}()}),Object.assign(ac.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(lc.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,s=this.cumulativeWeight;if(0===s){for(var o=0;o!==i;++o)n[r+o]=n[o];s=e}else this._mixBufferRegion(n,r,0,e/(s+=e),i);this.cumulativeWeight=s},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,s=this.binding;this.cumulativeWeight=0,r<1&&this._mixBufferRegion(n,i,3*e,1-r,e);for(var o=e,a=e+e;o!==a;++o)if(n[o]!==n[o+e]){s.setValue(n,i);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,n=3*e;this.binding.getValue(t,n);for(var i=e,r=n;i!==r;++i)t[i]=t[n+i%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,n,i,r){if(i>=.5)for(var s=0;s!==r;++s)t[e+s]=t[n+s]},_slerp:function(t,e,n,i){Be.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var s=1-i,o=0;o!==r;++o){var a=e+o;t[a]=t[a]*s+t[n+o]*i}}}),Object.assign(cc.prototype,{getValue:function(t,e){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(hc,{Composite:cc,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new hc.Composite(t,e,n):new hc(t,e,n)},sanitizeNodeName:(ql=new RegExp("[\\[\\]\\.:\\/]","g"),function(t){return t.replace(/\s/g,"_").replace(ql,"")}),parseTrackName:(Fl="[^\\[\\]\\.:\\/]",zl="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Ul=/((?:WC+[\/:])*)/.source.replace("WC",Fl),jl=/(WCOD+)?/.source.replace("WCOD",zl),Hl=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Fl),Vl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Fl),Gl=new RegExp("^"+Ul+jl+Hl+Vl+"$"),Wl=["material","materials","bones"],function(t){var e=Gl.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Wl.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var s=i(r.children);if(s)return s}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(hc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=hc.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var s=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===s){s=o;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==s){if(void 0===t[s])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[s]}}var a=t[i];if(void 0!==a){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===r){r=o;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+i+" but it wasn't found.",t)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(hc.prototype,{_getValue_unbound:hc.prototype.getValue,_setValue_unbound:hc.prototype.setValue}),Object.assign(uc.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid,p=i[d];if(void 0===p){p=e++,i[d]=p,t.push(u);for(var f=0,m=a;f!==m;++f)o[f].push(new hc(u,r[f],s[f]))}else if(p<n){l=t[p];var g=--n,v=t[g];for(i[v.uuid]=p,t[p]=v,i[d]=g,t[g]=u,f=0,m=a;f!==m;++f){var y=o[f],_=y[g],b=y[p];y[p]=_,void 0===b&&(b=new hc(u,r[f],s[f])),y[g]=b}}else t[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,s=0,o=arguments.length;s!==o;++s){var a=arguments[s],l=a.uuid,c=n[l];if(void 0!==c&&c>=e){var h=e++,u=t[h];n[u.uuid]=c,t[c]=u,n[l]=h,t[h]=a;for(var d=0,p=r;d!==p;++d){var f=i[d],m=f[h],g=f[c];f[c]=m,f[h]=g}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,s=r.length,o=0,a=arguments.length;o!==a;++o){var l=arguments[o],c=l.uuid,h=i[c];if(void 0!==h)if(delete i[c],h<n){var u=--n,d=t[u],p=t[y=--e];i[d.uuid]=h,t[h]=d,i[p.uuid]=u,t[u]=p,t.pop();for(var f=0,m=s;f!==m;++f){var g=(_=r[f])[u],v=_[y];_[h]=g,_[u]=v,_.pop()}}else{var y;for(i[(p=t[y=--e]).uuid]=h,t[h]=p,t.pop(),f=0,m=s;f!==m;++f){var _;(_=r[f])[h]=_[y],_.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var s=this._paths,o=this._parsedPaths,a=this._objects,l=this.nCachedObjects_,c=new Array(a.length);n[t]=i=r.length,s.push(t),o.push(e),r.push(c);for(var h=l,u=a.length;h!==u;++h)c[h]=new hc(a[h],t,e);return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];e[t[o]]=n,s[n]=a,s.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(dc.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,s=i/r;t.warp(1,r/i,e),this.warp(s,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,s=this._timeScaleInterpolant,o=this.timeScale;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);var a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+n,l[0]=t/o,l[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var s=(t-r)*n;if(s<0||0===n)return;this._startTime=null,e=n*s}e*=this._updateTimeScale(t);var o=this._updateTime(e),a=this._updateWeight(t);if(a>0)for(var l=this._interpolants,c=this._propertyBindings,h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulate(i,a)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,i=this.loop,r=this._loopCount,s=2202===i;if(0===t)return-1===r?e:s&&1==(1&r)?n-e:e;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),e>=n||e<0){var o=Math.floor(e/n);e-=n*o,r+=Math.abs(o);var a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){var l=t<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(s&&1==(1&r))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:_e:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:_e:2402)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);var o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=n,this}}),pc.prototype=Object.assign(Object.create(n.prototype),{constructor:pc,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,s=t._propertyBindings,o=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName,c=l[a];void 0===c&&(l[a]=c={});for(var h=0;h!==r;++h){var u=i[h],d=u.name,p=c[d];if(void 0!==p)s[h]=p;else{if(void 0!==(p=s[h])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,a,d));continue}++(p=new lc(hc.create(n,d,e&&e._propertyBindings[h].binding.parsedPath),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(p,a,d),s[h]=p}o[h].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,s=0,o=r.length;s!==o;++s){var a=r[s];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{var o=s.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),s.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],s=this._bindings;void 0===r&&(i[e]=r={}),r[n]=t,t._cacheIndex=s.length,s.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete o[r];t:{for(var c in o)break t;delete s[i]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new oa(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?ga.findByName(n,t):t,s=null!==r?r.uuid:t,o=this._actionsByClip[s],a=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;a=o.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var c=new dc(this,r,e);return this._bindAction(c,a),this._addInactiveAction(c,s,i),c},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?ga.findByName(n,t):t,s=this._actionsByClip[r?r.uuid:t];return void 0!==s&&s.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){for(var e=this._actions,n=this._nActiveActions,i=this.time+=t*=this.timeScale,r=Math.sign(t),s=this._accuIndex^=1,o=0;o!==n;++o)e[o]._update(i,t,r,s);var a=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)a[o].apply(s);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var s=r.knownActions,o=0,a=s.length;o!==a;++o){var l=s[o];this._deactivateAction(l);var c=l._cacheIndex,h=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=c,e[c]=h,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var s=this._bindingsByRootAndName[e];if(void 0!==s)for(var o in s){var a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),fc.prototype.clone=function(){return new fc(void 0===this.value.clone?this.value:this.value.clone())},mc.prototype=Object.assign(Object.create(Gn.prototype),{constructor:mc,isInstancedBufferGeometry:!0,copy:function(t){return Gn.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),gc.prototype=Object.assign(Object.create(ms.prototype),{constructor:gc,isInstancedInterleavedBuffer:!0,copy:function(t){return ms.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),vc.prototype=Object.assign(Object.create(Rn.prototype),{constructor:vc,isInstancedBufferAttribute:!0,copy:function(t){return Rn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(yc.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return bc(t,this,i,e),i.sort(_c),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,s=t.length;r<s;r++)bc(t[r],this,i,e);return i.sort(_c),i}}),Object.assign(xc.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(De.clamp(e/this.radius,-1,1))),this}}),Object.assign(wc.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}),Object.assign(Ac.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new ke;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new ke),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new ke),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new ke),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new ke),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new ke;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(Ec.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Fe),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Fe),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Fe),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:(Xl=new Fe,Yl=new Fe,function(t,e){Xl.subVectors(t,this.start),Yl.subVectors(this.end,this.start);var n=Yl.dot(Yl),i=Yl.dot(Xl)/n;return e&&(i=De.clamp(i,0,1)),i}),closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Fe),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),(Sc.prototype=Object.create(Mn.prototype)).constructor=Sc,Sc.prototype.isImmediateRenderObject=!0,(Mc.prototype=Object.create(Ss.prototype)).constructor=Mc,Mc.prototype.update=function(){var t=new Fe,e=new Fe,n=new ze;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,s=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var a=o.vertices,l=o.faces,c=0,h=0,u=l.length;h<u;h++)for(var d=l[h],p=0,f=d.vertexNormals.length;p<f;p++){var m=d.vertexNormals[p];t.copy(a[d[i[p]]]).applyMatrix4(r),e.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),s.setXYZ(c,t.x,t.y,t.z),s.setXYZ(c+=1,e.x,e.y,e.z),c+=1}else if(o&&o.isBufferGeometry){var g=o.attributes.position,v=o.attributes.normal;for(c=0,p=0,f=g.count;p<f;p++)t.set(g.getX(p),g.getY(p),g.getZ(p)).applyMatrix4(r),e.set(v.getX(p),v.getY(p),v.getZ(p)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),s.setXYZ(c,t.x,t.y,t.z),s.setXYZ(c+=1,e.x,e.y,e.z),c+=1}s.needsUpdate=!0}}(),(Tc.prototype=Object.create(Mn.prototype)).constructor=Tc,Tc.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Tc.prototype.update=function(){var t=new Fe;return function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),(Cc.prototype=Object.create(Ss.prototype)).constructor=Cc,Cc.prototype.updateMatrixWorld=function(){var t=new Fe,e=new Ne,n=new Ne;return function(i){var r=this.bones,s=this.geometry,o=s.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var a=0,l=0;a<r.length;a++){var c=r[a];c.parent&&c.parent.isBone&&(e.multiplyMatrices(n,c.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(l,t.x,t.y,t.z),e.multiplyMatrices(n,c.parent.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(l+1,t.x,t.y,t.z),l+=2)}s.getAttribute("position").needsUpdate=!0,Mn.prototype.updateMatrixWorld.call(this,i)}}(),(Lc.prototype=Object.create(mi.prototype)).constructor=Lc,Lc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Lc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},(Pc.prototype=Object.create(Es.prototype)).constructor=Pc,Pc.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},Pc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},(Rc.prototype=Object.create(Mn.prototype)).constructor=Rc,Rc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Rc.prototype.update=function(){var t=new Fe,e=new dn,n=new dn;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var s=0,o=r.count;s<o;s++){var a=s<o/2?e:n;r.setXYZ(s,a.r,a.g,a.b)}r.needsUpdate=!0}i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),(Oc.prototype=Object.create(Ss.prototype)).constructor=Oc,(Ic.prototype=Object.create(Ss.prototype)).constructor=Ic,(Dc.prototype=Object.create(Es.prototype)).constructor=Dc,Dc.prototype.update=function(){var t,e,n=this.audio,i=this.range,r=this.divisionsInnerAngle,s=this.divisionsOuterAngle,o=De.degToRad(n.panner.coneInnerAngle),a=De.degToRad(n.panner.coneOuterAngle),l=o/2,c=a/2,h=0,u=0,d=this.geometry,p=d.attributes.position;function f(n,r,s,o){var a=(r-n)/s;for(p.setXYZ(h,0,0,0),u++,t=n;t<r;t+=a)p.setXYZ(e=h+u,Math.sin(t)*i,0,Math.cos(t)*i),p.setXYZ(e+1,Math.sin(Math.min(t+a,r))*i,0,Math.cos(Math.min(t+a,r))*i),p.setXYZ(e+2,0,0,0),u+=3;d.addGroup(h,u,o),h+=u,u=0}d.clearGroups(),f(-c,-l,s,0),f(-l,l,r,1),f(l,c,s,0),p.needsUpdate=!0,o===a&&(this.material[0].visible=!1)},Dc.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},(kc.prototype=Object.create(Ss.prototype)).constructor=kc,kc.prototype.update=function(){var t=new Fe,e=new Fe,n=new ze;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,s=this.object.geometry,o=s.vertices,a=s.faces,l=0,c=0,h=a.length;c<h;c++){var u=a[c],d=u.normal;t.copy(o[u.a]).add(o[u.b]).add(o[u.c]).divideScalar(3).applyMatrix4(i),e.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),r.setXYZ(l,t.x,t.y,t.z),r.setXYZ(l+=1,e.x,e.y,e.z),l+=1}r.needsUpdate=!0}}(),(Nc.prototype=Object.create(Mn.prototype)).constructor=Nc,Nc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Nc.prototype.update=function(){var t=new Fe,e=new Fe,n=new Fe;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(e),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=n.length()}}(),(Bc.prototype=Object.create(Ss.prototype)).constructor=Bc,Bc.prototype.update=function(){var t,e,n=new Fe,i=new Kr;function r(r,s,o,a){n.set(s,o,a).unproject(i);var l=e[r];if(void 0!==l)for(var c=t.getAttribute("position"),h=0,u=l.length;h<u;h++)c.setXYZ(l[h],n.x,n.y,n.z)}return function(){t=this.geometry,e=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),(Fc.prototype=Object.create(Ss.prototype)).constructor=Fc,Fc.prototype.update=function(){var t=new $e;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,i=t.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Fc.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Fc.prototype.copy=function(t){return Ss.prototype.copy.call(this,t),this.object=t.object,this},Fc.prototype.clone=function(){return(new this.constructor).copy(this)},(zc.prototype=Object.create(Ss.prototype)).constructor=zc,zc.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Mn.prototype.updateMatrixWorld.call(this,t))},(Uc.prototype=Object.create(Es.prototype)).constructor=Uc,Uc.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?w:x,this.lookAt(this.plane.normal),Mn.prototype.updateMatrixWorld.call(this,t)},(jc.prototype=Object.create(Mn.prototype)).constructor=jc,jc.prototype.setDirection=(Jl=new Fe,function(t){t.y>.99999?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(Jl.set(t.z,0,-t.x).normalize(),Kl=Math.acos(t.y),this.quaternion.setFromAxisAngle(Jl,Kl))}),jc.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},jc.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},jc.prototype.copy=function(t){return Mn.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},jc.prototype.clone=function(){return(new this.constructor).copy(this)},(Hc.prototype=Object.create(Ss.prototype)).constructor=Hc,La.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(La.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Qa.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Pn,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new Fe(r.x,r.y,r.z||0))}return e}}),Object.assign(Za.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Vc.prototype=Object.create(Ba.prototype),Gc.prototype=Object.create(Ba.prototype),Wc.prototype=Object.create(Ba.prototype),Object.assign(Wc.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Oc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Cc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Tl.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),hl.extractUrlBase(t)}}),Object.assign(pl.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Ac.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign($e.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Ec.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(De,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),De.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),De.ceilPowerOfTwo(t)}}),Object.assign(ze.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ne.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new Fe),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,s)}}),en.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Be.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(di.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(pi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(pi,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),pi.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),pi.getNormal(t,e,n,i)}}),Object.assign(Ka.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ao(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ko(this,t)}}),Object.assign(ke.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Fe.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ye.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Pn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Mn.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Mn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(_s.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(xs.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),bs.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(La.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Jr.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Ja.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Rn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Gn.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Gn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Eo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(fc.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Zn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new dn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(Zo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ui.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(us.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(us.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(qr.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ke.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Qe.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(cs.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),sc.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new tc).load(t,function(t){e.setBuffer(t)}),this},ac.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},nc.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var qc={merge:function(t,e,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};We.crossOrigin=void 0,We.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Ca;r.setCrossOrigin(this.crossOrigin);var s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},We.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Ta;r.setCrossOrigin(this.crossOrigin);var s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},We.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},We.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Xc={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};t.WebGLMultisampleRenderTarget=Ze,t.WebGLRenderTargetCube=Ke,t.WebGLRenderTarget=Qe,t.WebGLRenderer=us,t.ShaderLib=mn,t.UniformsLib=fn,t.UniformsUtils=hn,t.ShaderChunk=rn,t.FogExp2=ds,t.Fog=ps,t.Scene=fs,t.Sprite=ys,t.LOD=_s,t.SkinnedMesh=bs,t.Skeleton=xs,t.Bone=ws,t.Mesh=mi,t.LineSegments=Ss,t.LineLoop=Ms,t.Line=Es,t.Points=Cs,t.Group=Zr,t.VideoTexture=Ls,t.DataTexture=Je,t.DataTexture2DArray=Ci,t.DataTexture3D=Li,t.CompressedTexture=Ps,t.CubeTexture=Ti,t.CanvasTexture=Rs,t.DepthTexture=Os,t.Texture=Xe,t.AnimationLoader=Aa,t.CompressedTextureLoader=Ea,t.DataTextureLoader=Sa,t.CubeTextureLoader=Ta,t.TextureLoader=Ca,t.ObjectLoader=pl,t.MaterialLoader=cl,t.BufferGeometryLoader=ul,t.DefaultLoadingManager=ba,t.LoadingManager=_a,t.ImageLoader=Ma,t.ImageBitmapLoader=wl,t.FontLoader=Ml,t.FileLoader=wa,t.Loader=Tl,t.LoaderUtils=hl,t.Cache=ya,t.AudioLoader=tc,t.SpotLightShadow=el,t.SpotLight=nl,t.PointLight=il,t.RectAreaLight=ll,t.HemisphereLight=$a,t.DirectionalLightShadow=sl,t.DirectionalLight=ol,t.AmbientLight=al,t.LightShadow=tl,t.Light=Ja,t.StereoCamera=ec,t.PerspectiveCamera=Jr,t.OrthographicCamera=rl,t.CubeCamera=nc,t.ArrayCamera=$r,t.Camera=Kr,t.AudioListener=rc,t.PositionalAudio=oc,t.AudioContext=$l,t.AudioAnalyser=ac,t.Audio=sc,t.VectorKeyframeTrack=ma,t.StringKeyframeTrack=fa,t.QuaternionKeyframeTrack=pa,t.NumberKeyframeTrack=ua,t.ColorKeyframeTrack=ha,t.BooleanKeyframeTrack=ca,t.PropertyMixer=lc,t.PropertyBinding=hc,t.KeyframeTrack=la,t.AnimationUtils=ia,t.AnimationObjectGroup=uc,t.AnimationMixer=pc,t.AnimationClip=ga,t.Uniform=fc,t.InstancedBufferGeometry=mc,t.BufferGeometry=Gn,t.Geometry=Pn,t.InterleavedBufferAttribute=gs,t.InstancedInterleavedBuffer=gc,t.InterleavedBuffer=ms,t.InstancedBufferAttribute=vc,t.Face3=yn,t.Object3D=Mn,t.Raycaster=yc,t.Layers=bn,t.EventDispatcher=n,t.Clock=ic,t.QuaternionLinearInterpolant=da,t.LinearInterpolant=oa,t.DiscreteInterpolant=aa,t.CubicInterpolant=sa,t.Interpolant=ra,t.Triangle=pi,t.Math=De,t.Spherical=xc,t.Cylindrical=wc,t.Plane=en,t.Frustum=nn,t.Sphere=tn,t.Ray=di,t.Matrix4=Ne,t.Matrix3=ze,t.Box3=$e,t.Box2=Ac,t.Line3=Ec,t.Euler=_n,t.Vector4=Ye,t.Vector3=Fe,t.Vector2=ke,t.Quaternion=Be,t.Color=dn,t.ImmediateRenderObject=Sc,t.VertexNormalsHelper=Mc,t.SpotLightHelper=Tc,t.SkeletonHelper=Cc,t.PointLightHelper=Lc,t.RectAreaLightHelper=Pc,t.HemisphereLightHelper=Rc,t.GridHelper=Oc,t.PolarGridHelper=Ic,t.PositionalAudioHelper=Dc,t.FaceNormalsHelper=kc,t.DirectionalLightHelper=Nc,t.CameraHelper=Bc,t.BoxHelper=Fc,t.Box3Helper=zc,t.PlaneHelper=Uc,t.ArrowHelper=jc,t.AxesHelper=Hc,t.Shape=Ka,t.Path=Za,t.ShapePath=Al,t.Font=El,t.CurvePath=Qa,t.Curve=La,t.ImageUtils=We,t.ShapeUtils=bo,t.WebGLUtils=Qr,t.WireframeGeometry=Is,t.ParametricGeometry=Ds,t.ParametricBufferGeometry=ks,t.TetrahedronGeometry=Fs,t.TetrahedronBufferGeometry=zs,t.OctahedronGeometry=Us,t.OctahedronBufferGeometry=js,t.IcosahedronGeometry=Hs,t.IcosahedronBufferGeometry=Vs,t.DodecahedronGeometry=Gs,t.DodecahedronBufferGeometry=Ws,t.PolyhedronGeometry=Ns,t.PolyhedronBufferGeometry=Bs,t.TubeGeometry=qs,t.TubeBufferGeometry=Xs,t.TorusKnotGeometry=Ys,t.TorusKnotBufferGeometry=Qs,t.TorusGeometry=Zs,t.TorusBufferGeometry=Ks,t.TextGeometry=To,t.TextBufferGeometry=Co,t.SphereGeometry=Lo,t.SphereBufferGeometry=Po,t.RingGeometry=Ro,t.RingBufferGeometry=Oo,t.PlaneGeometry=Xn,t.PlaneBufferGeometry=Yn,t.LatheGeometry=Io,t.LatheBufferGeometry=Do,t.ShapeGeometry=ko,t.ShapeBufferGeometry=No,t.ExtrudeGeometry=Ao,t.ExtrudeBufferGeometry=Eo,t.EdgesGeometry=Fo,t.ConeGeometry=jo,t.ConeBufferGeometry=Ho,t.CylinderGeometry=zo,t.CylinderBufferGeometry=Uo,t.CircleGeometry=Vo,t.CircleBufferGeometry=Go,t.BoxGeometry=Wn,t.CubeGeometry=Wn,t.BoxBufferGeometry=qn,t.ShadowMaterial=qo,t.SpriteMaterial=vs,t.RawShaderMaterial=Xo,t.ShaderMaterial=ui,t.PointsMaterial=Ts,t.MeshPhysicalMaterial=Qo,t.MeshStandardMaterial=Yo,t.MeshPhongMaterial=Zo,t.MeshToonMaterial=Ko,t.MeshNormalMaterial=Jo,t.MeshLambertMaterial=$o,t.MeshDepthMaterial=Gr,t.MeshDistanceMaterial=Wr,t.MeshBasicMaterial=fi,t.MeshMatcapMaterial=ta,t.LineDashedMaterial=ea,t.LineBasicMaterial=As,t.Material=Zn,t.Float64BufferAttribute=Un,t.Float32BufferAttribute=zn,t.Uint32BufferAttribute=Fn,t.Int32BufferAttribute=Bn,t.Uint16BufferAttribute=Nn,t.Int16BufferAttribute=kn,t.Uint8ClampedBufferAttribute=Dn,t.Uint8BufferAttribute=In,t.Int8BufferAttribute=On,t.BufferAttribute=Rn,t.ArcCurve=Ra,t.CatmullRomCurve3=Ba,t.CubicBezierCurve=ja,t.CubicBezierCurve3=Ha,t.EllipseCurve=Pa,t.LineCurve=Va,t.LineCurve3=Ga,t.QuadraticBezierCurve=Wa,t.QuadraticBezierCurve3=qa,t.SplineCurve=Xa,t.REVISION=m,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=g,t.CullFaceBack=v,t.CullFaceFront=y,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=_,t.PCFSoftShadowMap=b,t.FrontSide=x,t.BackSide=w,t.DoubleSide=A,t.FlatShading=1,t.SmoothShading=2,t.NoColors=E,t.FaceColors=S,t.VertexColors=M,t.NoBlending=T,t.NormalBlending=C,t.AdditiveBlending=L,t.SubtractiveBlending=P,t.MultiplyBlending=R,t.CustomBlending=O,t.AddEquation=I,t.SubtractEquation=D,t.ReverseSubtractEquation=k,t.MinEquation=N,t.MaxEquation=B,t.ZeroFactor=F,t.OneFactor=z,t.SrcColorFactor=U,t.OneMinusSrcColorFactor=j,t.SrcAlphaFactor=H,t.OneMinusSrcAlphaFactor=V,t.DstAlphaFactor=G,t.OneMinusDstAlphaFactor=W,t.DstColorFactor=q,t.OneMinusDstColorFactor=X,t.SrcAlphaSaturateFactor=Y,t.NeverDepth=Q,t.AlwaysDepth=Z,t.LessDepth=K,t.LessEqualDepth=J,t.EqualDepth=$,t.GreaterEqualDepth=tt,t.GreaterDepth=et,t.NotEqualDepth=nt,t.MultiplyOperation=it,t.MixOperation=rt,t.AddOperation=st,t.NoToneMapping=ot,t.LinearToneMapping=at,t.ReinhardToneMapping=lt,t.Uncharted2ToneMapping=ct,t.CineonToneMapping=ht,t.ACESFilmicToneMapping=ut,t.UVMapping=300,t.CubeReflectionMapping=dt,t.CubeRefractionMapping=pt,t.EquirectangularReflectionMapping=ft,t.EquirectangularRefractionMapping=mt,t.SphericalReflectionMapping=gt,t.CubeUVReflectionMapping=vt,t.CubeUVRefractionMapping=yt,t.RepeatWrapping=_t,t.ClampToEdgeWrapping=bt,t.MirroredRepeatWrapping=xt,t.NearestFilter=wt,t.NearestMipMapNearestFilter=At,t.NearestMipMapLinearFilter=Et,t.LinearFilter=St,t.LinearMipMapNearestFilter=Mt,t.LinearMipMapLinearFilter=Tt,t.UnsignedByteType=Ct,t.ByteType=Lt,t.ShortType=Pt,t.UnsignedShortType=Rt,t.IntType=Ot,t.UnsignedIntType=It,t.FloatType=Dt,t.HalfFloatType=kt,t.UnsignedShort4444Type=Nt,t.UnsignedShort5551Type=Bt,t.UnsignedShort565Type=Ft,t.UnsignedInt248Type=zt,t.AlphaFormat=Ut,t.RGBFormat=jt,t.RGBAFormat=Ht,t.LuminanceFormat=Vt,t.LuminanceAlphaFormat=Gt,t.RGBEFormat=Wt,t.DepthFormat=qt,t.DepthStencilFormat=Xt,t.RedFormat=Yt,t.RGB_S3TC_DXT1_Format=Qt,t.RGBA_S3TC_DXT1_Format=Zt,t.RGBA_S3TC_DXT3_Format=Kt,t.RGBA_S3TC_DXT5_Format=Jt,t.RGB_PVRTC_4BPPV1_Format=$t,t.RGB_PVRTC_2BPPV1_Format=te,t.RGBA_PVRTC_4BPPV1_Format=ee,t.RGBA_PVRTC_2BPPV1_Format=ne,t.RGB_ETC1_Format=ie,t.RGBA_ASTC_4x4_Format=re,t.RGBA_ASTC_5x4_Format=se,t.RGBA_ASTC_5x5_Format=oe,t.RGBA_ASTC_6x5_Format=ae,t.RGBA_ASTC_6x6_Format=le,t.RGBA_ASTC_8x5_Format=ce,t.RGBA_ASTC_8x6_Format=he,t.RGBA_ASTC_8x8_Format=ue,t.RGBA_ASTC_10x5_Format=de,t.RGBA_ASTC_10x6_Format=pe,t.RGBA_ASTC_10x8_Format=fe,t.RGBA_ASTC_10x10_Format=me,t.RGBA_ASTC_12x10_Format=ge,t.RGBA_ASTC_12x12_Format=ve,t.LoopOnce=2200,t.LoopRepeat=ye,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=_e,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=be,t.TriangleStripDrawMode=xe,t.TriangleFanDrawMode=we,t.LinearEncoding=Ae,t.sRGBEncoding=Ee,t.GammaEncoding=Se,t.RGBEEncoding=Me,t.LogLuvEncoding=3003,t.RGBM7Encoding=Te,t.RGBM16Encoding=Ce,t.RGBDEncoding=Le,t.BasicDepthPacking=Pe,t.RGBADepthPacking=Re,t.TangentSpaceNormalMap=Oe,t.ObjectSpaceNormalMap=Ie,t.Face4=function(t,e,n,i,r,s,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new yn(t,e,n,r,s,o)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Cs(t,e)},t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ys(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Cs(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ts(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ts(t)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ts(t)},t.Vertex=function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Fe(t,e,n)},t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Rn(t,e).setDynamic(!0)},t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new On(t,e)},t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new In(t,e)},t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Dn(t,e)},t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new kn(t,e)},t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Nn(t,e)},t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Bn(t,e)},t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Fn(t,e)},t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new zn(t,e)},t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Un(t,e)},t.ClosedSplineCurve3=Vc,t.SplineCurve3=Gc,t.Spline=Wc,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Hc(t)},t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Fc(t,e)},t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ss(new Fo(t.geometry),new As({color:void 0!==e?e:16777215}))},t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ss(new Is(t.geometry),new As({color:void 0!==e?e:16777215}))},t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new wa(t)},t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Sa(t)},t.GeometryUtils=qc,t.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.SceneUtils=Xc,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof i&&void 0!==n?i:(t=t||self).THREE={})}(this)},{}],37:[function(t,e,n){"use strict";THREE.DRACOLoader=function(t){this.timeLoaded=0,this.manager=t||THREE.DefaultLoadingManager,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=THREE.TrianglesDrawMode,this.nativeAttributeMap={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"}},THREE.DRACOLoader.prototype={constructor:THREE.DRACOLoader,load:function(t,e,n,i){var r=this,s=new THREE.FileLoader(r.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.load(t,function(t){r.decodeDracoFile(t,e)},n,i)},setPath:function(t){return this.path=t,this},setVerbosity:function(t){return this.verbosity=t,this},setDrawMode:function(t){return this.drawMode=t,this},setSkipDequantization:function(t,e){var n=!0;return void 0!==e&&(n=e),this.getAttributeOptions(t).skipDequantization=n,this},decodeDracoFile:function(t,e,n,i){var r=this;THREE.DRACOLoader.getDecoderModule().then(function(s){r.decodeDracoFileInternal(t,s.decoder,e,n,i)})},decodeDracoFileInternal:function(t,e,n,i,r){var s=new e.DecoderBuffer;s.Init(new Int8Array(t),t.byteLength);var o=new e.Decoder,a=o.GetEncodedGeometryType(s);if(a==e.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else{if(a!=e.POINT_CLOUD){var l="THREE.DRACOLoader: Unknown geometry type.";throw console.error(l),new Error(l)}this.verbosity>0&&console.log("Loaded a point cloud.")}n(this.convertDracoGeometryTo3JS(e,o,a,s,i,r))},addAttributeToGeometry:function(t,e,n,i,r,s,o,a){if(0===s.ptr){var l="THREE.DRACOLoader: No attribute "+i;throw console.error(l),new Error(l)}var c,h,u=s.num_components(),d=n.num_points()*u;switch(r){case Float32Array:c=new t.DracoFloat32Array,e.GetAttributeFloatForAllPoints(n,s,c),a[i]=new Float32Array(d),h=THREE.Float32BufferAttribute;break;case Int8Array:c=new t.DracoInt8Array,e.GetAttributeInt8ForAllPoints(n,s,c),a[i]=new Int8Array(d),h=THREE.Int8BufferAttribute;break;case Int16Array:c=new t.DracoInt16Array,e.GetAttributeInt16ForAllPoints(n,s,c),a[i]=new Int16Array(d),h=THREE.Int16BufferAttribute;break;case Int32Array:c=new t.DracoInt32Array,e.GetAttributeInt32ForAllPoints(n,s,c),a[i]=new Int32Array(d),h=THREE.Int32BufferAttribute;break;case Uint8Array:c=new t.DracoUInt8Array,e.GetAttributeUInt8ForAllPoints(n,s,c),a[i]=new Uint8Array(d),h=THREE.Uint8BufferAttribute;break;case Uint16Array:c=new t.DracoUInt16Array,e.GetAttributeUInt16ForAllPoints(n,s,c),a[i]=new Uint16Array(d),h=THREE.Uint16BufferAttribute;break;case Uint32Array:c=new t.DracoUInt32Array,e.GetAttributeUInt32ForAllPoints(n,s,c),a[i]=new Uint32Array(d),h=THREE.Uint32BufferAttribute;break;default:throw l="THREE.DRACOLoader: Unexpected attribute type.",console.error(l),new Error(l)}for(var p=0;p<d;p++)a[i][p]=c.GetValue(p);o.addAttribute(i,new h(a[i],u)),t.destroy(c)},convertDracoGeometryTo3JS:function(t,e,n,i,r,s){var o,a;!0===this.getAttributeOptions("position").skipDequantization&&e.SkipAttributeTransform(t.POSITION);var l=performance.now();if(n===t.TRIANGULAR_MESH?(o=new t.Mesh,a=e.DecodeBufferToMesh(i,o)):(o=new t.PointCloud,a=e.DecodeBufferToPointCloud(i,o)),!a.ok()||0==o.ptr){var c="THREE.DRACOLoader: Decoding failed: ";throw c+=a.error_msg(),console.error(c),t.destroy(e),t.destroy(o),new Error(c)}var h,u=performance.now();t.destroy(i),n==t.TRIANGULAR_MESH?(h=o.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+h.toString())):h=0;var d=o.num_points(),p=o.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+d.toString()),console.log("Number of attributes loaded: "+p.toString()));var f=e.GetAttributeId(o,t.POSITION);if(-1==f)throw c="THREE.DRACOLoader: No position attribute found.",console.error(c),t.destroy(e),t.destroy(o),new Error(c);var m=e.GetAttribute(o,f),g={},v=new THREE.BufferGeometry;if(r)for(var y in r){var _=s[y],b=e.GetAttributeByUniqueId(o,r[y]);this.addAttributeToGeometry(t,e,o,y,_,b,v,g)}else for(var y in this.nativeAttributeMap){var x=e.GetAttributeId(o,t[this.nativeAttributeMap[y]]);-1!==x&&(this.verbosity>0&&console.log("Loaded "+y+" attribute."),b=e.GetAttribute(o,x),this.addAttributeToGeometry(t,e,o,y,Float32Array,b,v,g))}if(n==t.TRIANGULAR_MESH)if(this.drawMode===THREE.TriangleStripDrawMode){var w=new t.DracoInt32Array;e.GetTriangleStripsFromMesh(o,w),g.indices=new Uint32Array(w.size());for(var A=0;A<w.size();++A)g.indices[A]=w.GetValue(A);t.destroy(w)}else{g.indices=new Uint32Array(3*h);var E=new t.DracoInt32Array;for(A=0;A<h;++A){e.GetFaceFromMesh(o,A,E);var S=3*A;g.indices[S]=E.GetValue(0),g.indices[S+1]=E.GetValue(1),g.indices[S+2]=E.GetValue(2)}t.destroy(E)}v.drawMode=this.drawMode,n==t.TRIANGULAR_MESH&&v.setIndex(new(g.indices.length>65535?THREE.Uint32BufferAttribute:THREE.Uint16BufferAttribute)(g.indices,1));var M=new t.AttributeQuantizationTransform;if(M.InitFromAttribute(m))for(v.attributes.position.isQuantized=!0,v.attributes.position.maxRange=M.range(),v.attributes.position.numQuantizationBits=M.quantization_bits(),v.attributes.position.minValues=new Float32Array(3),A=0;A<3;++A)v.attributes.position.minValues[A]=M.min_value(A);return t.destroy(M),t.destroy(e),t.destroy(o),this.decode_time=u-l,this.import_time=performance.now()-u,this.verbosity>0&&(console.log("Decode time: "+this.decode_time),console.log("Import time: "+this.import_time)),v},isVersionSupported:function(t,e){THREE.DRACOLoader.getDecoderModule().then(function(n){e(n.decoder.isVersionSupported(t))})},getAttributeOptions:function(t){return void 0===this.attributeOptions[t]&&(this.attributeOptions[t]={}),this.attributeOptions[t]}},THREE.DRACOLoader.decoderPath="./",THREE.DRACOLoader.decoderConfig={},THREE.DRACOLoader.decoderModulePromise=null,THREE.DRACOLoader.setDecoderPath=function(t){THREE.DRACOLoader.decoderPath=t},THREE.DRACOLoader.setDecoderConfig=function(t){var e=THREE.DRACOLoader.decoderConfig.wasmBinary;THREE.DRACOLoader.decoderConfig=t||{},THREE.DRACOLoader.releaseDecoderModule(),e&&(THREE.DRACOLoader.decoderConfig.wasmBinary=e)},THREE.DRACOLoader.releaseDecoderModule=function(){THREE.DRACOLoader.decoderModulePromise=null},THREE.DRACOLoader.getDecoderModule=function(){var t=this,e=THREE.DRACOLoader.decoderPath,n=THREE.DRACOLoader.decoderConfig,i=THREE.DRACOLoader.decoderModulePromise;return i||("undefined"!=typeof DracoDecoderModule?i=Promise.resolve():"object"!=typeof WebAssembly||"js"===n.type?i=THREE.DRACOLoader._loadScript(e+"draco_decoder.js"):(n.wasmBinaryFile=e+"draco_decoder.wasm",i=THREE.DRACOLoader._loadScript(e+"draco_wasm_wrapper.js").then(function(){return THREE.DRACOLoader._loadArrayBuffer(n.wasmBinaryFile)}).then(function(t){n.wasmBinary=t})),i=i.then(function(){return new Promise(function(e){n.onModuleLoaded=function(n){t.timeLoaded=performance.now(),e({decoder:n})},DracoDecoderModule(n)})}),THREE.DRACOLoader.decoderModulePromise=i,i)},THREE.DRACOLoader._loadScript=function(t){var e=document.getElementById("decoder_script");null!==e&&e.parentNode.removeChild(e);var n=document.getElementsByTagName("head")[0],i=document.createElement("script");return i.id="decoder_script",i.type="text/javascript",i.src=t,new Promise(function(t){i.onload=t,n.appendChild(i)})},THREE.DRACOLoader._loadArrayBuffer=function(t){var e=new THREE.FileLoader;return e.setResponseType("arraybuffer"),new Promise(function(n,i){e.load(t,n,void 0,i)})}},{}],38:[function(t,n,i){THREE.GLTFLoader=function(){function t(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this.dracoLoader=null}function n(){var t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}t.prototype={constructor:t,crossOrigin:"anonymous",load:function(t,n,i,r){var s,o=this;s=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(t),o.manager.itemStart(t);var a=function(e){r?r(e):console.error(e),o.manager.itemError(t),o.manager.itemEnd(t)},l=new THREE.FileLoader(o.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.load(t,function(i){try{o.parse(i,s,function(e){n(e),o.manager.itemEnd(t)},a)}catch(e){a(e)}},i,a)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setDRACOLoader:function(t){return this.dracoLoader=t,this},parse:function(t,e,n,l){var c,f={};if("string"==typeof t)c=t;else if(THREE.LoaderUtils.decodeText(new Uint8Array(t,0,4))===a){try{f[i.KHR_BINARY_GLTF]=new h(t)}catch(_){return void(l&&l(_))}c=f[i.KHR_BINARY_GLTF].content}else c=THREE.LoaderUtils.decodeText(new Uint8Array(t));var m=JSON.parse(c);if(void 0===m.asset||m.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(m.extensionsUsed)for(var g=0;g<m.extensionsUsed.length;++g){var v=m.extensionsUsed[g],y=m.extensionsRequired||[];switch(v){case i.KHR_LIGHTS_PUNCTUAL:f[v]=new s(m);break;case i.KHR_MATERIALS_UNLIT:f[v]=new o(m);break;case i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:f[v]=new p(m);break;case i.KHR_DRACO_MESH_COMPRESSION:f[v]=new u(m,this.dracoLoader);break;case i.MSFT_TEXTURE_DDS:f[i.MSFT_TEXTURE_DDS]=new r;break;case i.KHR_TEXTURE_TRANSFORM:f[i.KHR_TEXTURE_TRANSFORM]=new d(m);break;default:y.indexOf(v)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}new P(m,f,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(n,l)}}};var i={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(){if(!THREE.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=i.MSFT_TEXTURE_DDS,this.ddsLoader=new THREE.DDSLoader}function s(t){this.name=i.KHR_LIGHTS_PUNCTUAL,this.lightDefs=(t.extensions&&t.extensions[i.KHR_LIGHTS_PUNCTUAL]||{}).lights||[]}function o(t){this.name=i.KHR_MATERIALS_UNLIT}s.prototype.loadLight=function(t){var e,n=this.lightDefs[t],i=new THREE.Color(16777215);void 0!==n.color&&i.fromArray(n.color);var r=void 0!==n.range?n.range:0;switch(n.type){case"directional":(e=new THREE.DirectionalLight(i)).target.position.set(0,0,-1),e.add(e.target);break;case"point":(e=new THREE.PointLight(i)).distance=r;break;case"spot":(e=new THREE.SpotLight(i)).distance=r,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,e.angle=n.spot.outerConeAngle,e.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,e.target.position.set(0,0,-1),e.add(e.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return e.position.set(0,0,0),e.decay=2,void 0!==n.intensity&&(e.intensity=n.intensity),e.name=n.name||"light_"+t,Promise.resolve(e)},o.prototype.getMaterialType=function(t){return THREE.MeshBasicMaterial},o.prototype.extendParams=function(t,e,n){var i=[];t.color=new THREE.Color(1,1,1),t.opacity=1;var r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var s=r.baseColorFactor;t.color.fromArray(s),t.opacity=s[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(t,"map",r.baseColorTexture))}return Promise.all(i)};var a="glTF",l=12,c={JSON:1313821514,BIN:5130562};function h(t){this.name=i.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(t,0,l);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==a)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var n=new DataView(t,l),r=0;r<n.byteLength;){var s=n.getUint32(r,!0),o=n.getUint32(r+=4,!0);if(r+=4,o===c.JSON){var h=new Uint8Array(t,l+r,s);this.content=THREE.LoaderUtils.decodeText(h)}else if(o===c.BIN){var u=l+r;this.body=t.slice(u,u+s)}r+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function u(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=i.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e}function d(t){this.name=i.KHR_TEXTURE_TRANSFORM}function p(){return{name:i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(t,e,n){var i=e.extensions[this.name],r=THREE.ShaderLib.standard,s=THREE.UniformsUtils.clone(r.uniforms),o=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),a=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),u=r.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",o).replace("#include <metalnessmap_pars_fragment>",a).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",h);delete s.roughness,delete s.metalness,delete s.roughnessMap,delete s.metalnessMap,s.specular={value:(new THREE.Color).setHex(1118481)},s.glossiness={value:.5},s.specularMap={value:null},s.glossinessMap={value:null},t.vertexShader=r.vertexShader,t.fragmentShader=u,t.uniforms=s,t.defines={STANDARD:""},t.color=new THREE.Color(1,1,1),t.opacity=1;var d=[];if(Array.isArray(i.diffuseFactor)){var p=i.diffuseFactor;t.color.fromArray(p),t.opacity=p[3]}if(void 0!==i.diffuseTexture&&d.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new THREE.Color(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new THREE.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var f=i.specularGlossinessTexture;d.push(n.assignTexture(t,"glossinessMap",f)),d.push(n.assignTexture(t,"specularMap",f))}return Promise.all(d)},createMaterial:function(t){var e=new THREE.ShaderMaterial({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return e.isGLTFSpecularGlossinessMaterial=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e.extensions.derivatives=!0,e},cloneMaterial:function(t){var e=t.clone();e.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,i=0,r=n.length;i<r;i++)e[n[i]]=t[n[i]];return e},refreshUniforms:function(t,e,n,i,r,s){if(!0===r.isGLTFSpecularGlossinessMaterial){var o,a=r.uniforms,l=r.defines;a.opacity.value=r.opacity,a.diffuse.value.copy(r.color),a.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),a.map.value=r.map,a.specularMap.value=r.specularMap,a.alphaMap.value=r.alphaMap,a.lightMap.value=r.lightMap,a.lightMapIntensity.value=r.lightMapIntensity,a.aoMap.value=r.aoMap,a.aoMapIntensity.value=r.aoMapIntensity,r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.glossinessMap?o=r.glossinessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap&&(o=r.emissiveMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),a.uvTransform.value.copy(o.matrix)),r.envMap&&(a.envMap.value=r.envMap,a.envMapIntensity.value=r.envMapIntensity,a.flipEnvMap.value=r.envMap.isCubeTexture?-1:1,a.reflectivity.value=r.reflectivity,a.refractionRatio.value=r.refractionRatio,a.maxMipLevel.value=t.properties.get(r.envMap).__maxMipLevel),a.specular.value.copy(r.specular),a.glossiness.value=r.glossiness,a.glossinessMap.value=r.glossinessMap,a.emissiveMap.value=r.emissiveMap,a.bumpMap.value=r.bumpMap,a.normalMap.value=r.normalMap,a.displacementMap.value=r.displacementMap,a.displacementScale.value=r.displacementScale,a.displacementBias.value=r.displacementBias,null!==a.glossinessMap.value&&void 0===l.USE_GLOSSINESSMAP&&(l.USE_GLOSSINESSMAP="",l.USE_ROUGHNESSMAP=""),null===a.glossinessMap.value&&void 0!==l.USE_GLOSSINESSMAP&&(delete l.USE_GLOSSINESSMAP,delete l.USE_ROUGHNESSMAP)}}}}function f(t,e,n,i){THREE.Interpolant.call(this,t,e,n,i)}u.prototype.decodePrimitive=function(t,e){var n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,o={},a={},l={};for(var c in s){var h=b[c]||c.toLowerCase();o[h]=s[c]}for(c in t.attributes)if(h=b[c]||c.toLowerCase(),void 0!==s[c]){var u=n.accessors[t.attributes[c]];l[h]=g[u.componentType],a[h]=!0===u.normalized}return e.getDependency("bufferView",r).then(function(t){return new Promise(function(e){i.decodeDracoFile(t,function(t){for(var n in t.attributes){var i=a[n];void 0!==i&&(t.attributes[n].normalized=i)}e(t)},o,l)})})},d.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.needsUpdate=!0,t},(f.prototype=Object.create(THREE.Interpolant.prototype)).constructor=f,f.prototype.beforeStart_=f.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i,s=0;s!==i;s++)e[s]=n[r+s];return e},f.prototype.afterEnd_=f.prototype.copySampleValue_,f.prototype.interpolate_=function(t,e,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,c=i-e,h=(n-e)/c,u=h*h,d=u*h,p=t*l,f=p-l,m=-2*d+3*u,g=d-u,v=1-m,y=g-u+h,_=0;_!==o;_++)r[_]=v*s[f+_+o]+y*(s[f+_+a]*c)+m*s[p+_+o]+g*(s[p+_]*c);return r};var m,g=(Number,THREE,THREE,THREE,THREE,THREE,THREE,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),v={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},y={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},_=(THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,THREE,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),b={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},x={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},w={CUBICSPLINE:void 0,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},A={"image/png":THREE.RGBAFormat,"image/jpeg":THREE.RGBFormat};function E(t,e){return"string"!=typeof t||""===t?"":/^(https?:)?\/\//i.test(t)?t:/^data:.*,.*$/i.test(t)?t:/^blob:.*$/i.test(t)?t:e+t}function S(t,e,n){for(var i in n.extensions)void 0===t[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function M(t,e){void 0!==e.extras&&("object"==typeof e.extras?t.userData=e.extras:console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function T(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){var r=e.extras.targetNames;if(t.morphTargetInfluences.length===r.length)for(t.morphTargetDictionary={},n=0,i=r.length;n<i;n++)t.morphTargetDictionary[r[n]]=n;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function C(t){for(var e="",n=Object.keys(t).sort(),i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function L(t){if(t.isInterleavedBufferAttribute){for(var e=t.count,n=t.itemSize,i=t.array.slice(0,e*n),r=0,s=0;r<e;++r)i[s++]=t.getX(r),n>=2&&(i[s++]=t.getY(r)),n>=3&&(i[s++]=t.getZ(r)),n>=4&&(i[s++]=t.getW(r));return new THREE.BufferAttribute(i,n,t.normalized)}return t.clone()}function P(t,e,i){this.json=t||{},this.extensions=e||{},this.options=i||{},this.cache=new n,this.primitiveCache={},this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function R(t,e,n){var i=e.attributes,r=[];function s(e,i){return n.getDependency("accessor",e).then(function(e){t.addAttribute(i,e)})}for(var o in i){var a=b[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!t.index){var l=n.getDependency("accessor",e.indices).then(function(e){t.setIndex(e)});r.push(l)}return M(t,e),Promise.all(r).then(function(){return void 0!==e.targets?function(t,e,n){for(var i=!1,r=!1,s=0,o=e.length;s<o&&(void 0!==(c=e[s]).POSITION&&(i=!0),void 0!==c.NORMAL&&(r=!0),!i||!r);s++);if(!i&&!r)return Promise.resolve(t);var a=[],l=[];for(s=0,o=e.length;s<o;s++){var c=e[s];if(i){var h=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):t.attributes.position;a.push(h)}r&&(h=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):t.attributes.normal,l.push(h))}return Promise.all([Promise.all(a),Promise.all(l)]).then(function(n){for(var s=n[0],o=n[1],a=0,l=s.length;a<l;a++)t.attributes.position!==s[a]&&(s[a]=L(s[a]));for(a=0,l=o.length;a<l;a++)t.attributes.normal!==o[a]&&(o[a]=L(o[a]));for(a=0,l=e.length;a<l;a++){var c=e[a],h="morphTarget"+a;if(i&&void 0!==c.POSITION){var u=s[a];u.name=h;for(var d=t.attributes.position,p=0,f=u.count;p<f;p++)u.setXYZ(p,u.getX(p)+d.getX(p),u.getY(p)+d.getY(p),u.getZ(p)+d.getZ(p))}if(r&&void 0!==c.NORMAL){var m=o[a];m.name=h;var g=t.attributes.normal;for(p=0,f=m.count;p<f;p++)m.setXYZ(p,m.getX(p)+g.getX(p),m.getY(p)+g.getY(p),m.getZ(p)+g.getZ(p))}}return i&&(t.morphAttributes.position=s),r&&(t.morphAttributes.normal=o),t})}(t,e.targets,n):t})}return P.prototype.parse=function(t,e){var n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(e){var s={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:n,userData:{}};S(r,s,i),t(s)}).catch(e)},P.prototype.markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[],i={},r={},s=0,o=e.length;s<o;s++)for(var a=e[s].joints,l=0,c=a.length;l<c;l++)t[a[l]].isBone=!0;for(var h=0,u=t.length;h<u;h++){var d=t[h];void 0!==d.mesh&&(void 0===i[d.mesh]&&(i[d.mesh]=r[d.mesh]=0),i[d.mesh]++,void 0!==d.skin&&(n[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=i,this.json.meshUses=r},P.prototype.getDependency=function(t,e){var n=t+":"+e,r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this.loadMesh(e);break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this.loadBufferView(e);break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this.loadMaterial(e);break;case"texture":r=this.loadTexture(e);break;case"skin":r=this.loadSkin(e);break;case"animation":r=this.loadAnimation(e);break;case"camera":r=this.loadCamera(e);break;case"light":r=this.extensions[i.KHR_LIGHTS_PUNCTUAL].loadLight(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r},P.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var n=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(e,i){return n.getDependency(t,i)})),this.cache.add(t,e)}return e},P.prototype.loadBuffer=function(t){var e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[i.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(t,i){n.load(E(e.uri,r.path),t,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})},P.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(t){var n=e.byteOffset||0;return t.slice(n,n+(e.byteLength||0))})},P.prototype.loadAccessor=function(t){var e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var r=[];return r.push(void 0!==i.bufferView?this.getDependency("bufferView",i.bufferView):null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(t){var r,s,o=t[0],a=_[i.type],l=g[i.componentType],c=l.BYTES_PER_ELEMENT,h=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;if(u&&u!==c*a){var p="InterleavedBuffer:"+i.bufferView+":"+i.componentType,f=e.cache.get(p);f||(r=new l(o),f=new THREE.InterleavedBuffer(r,u/c),e.cache.add(p,f)),s=new THREE.InterleavedBufferAttribute(f,a,h/c,d)}else r=null===o?new l(i.count*a):new l(o,h,i.count*a),s=new THREE.BufferAttribute(r,a,d);if(void 0!==i.sparse){var m=i.sparse.values.byteOffset||0,v=new(0,g[i.sparse.indices.componentType])(t[1],i.sparse.indices.byteOffset||0,i.sparse.count*_.SCALAR),y=new l(t[2],m,i.sparse.count*a);null!==o&&s.setArray(s.array.slice());for(var b=0,x=v.length;b<x;b++){var w=v[b];if(s.setX(w,y[b*a]),a>=2&&s.setY(w,y[b*a+1]),a>=3&&s.setZ(w,y[b*a+2]),a>=4&&s.setW(w,y[b*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return s})},P.prototype.loadTexture=function(t){var e,n=this,r=this.json,s=this.options,o=this.textureLoader,a=window.URL||window.webkitURL,l=r.textures[t],c=l.extensions||{},h=(e=c[i.MSFT_TEXTURE_DDS]?r.images[c[i.MSFT_TEXTURE_DDS].source]:r.images[l.source]).uri,u=!1;return void 0!==e.bufferView&&(h=n.getDependency("bufferView",e.bufferView).then(function(t){u=!0;var n=new Blob([t],{type:e.mimeType});return h=a.createObjectURL(n)})),Promise.resolve(h).then(function(t){var e=THREE.Loader.Handlers.get(t);return e||(e=c[i.MSFT_TEXTURE_DDS]?n.extensions[i.MSFT_TEXTURE_DDS].ddsLoader:o),new Promise(function(n,i){e.load(E(t,s.path),n,void 0,i)})}).then(function(t){!0===u&&a.revokeObjectURL(h),t.flipY=!1,void 0!==l.name&&(t.name=l.name),e.mimeType in A&&(t.format=A[e.mimeType]);var n=(r.samplers||{})[l.sampler]||{};return t.magFilter=v[n.magFilter]||THREE.LinearFilter,t.minFilter=v[n.minFilter]||THREE.LinearMipMapLinearFilter,t.wrapS=y[n.wrapS]||THREE.RepeatWrapping,t.wrapT=y[n.wrapT]||THREE.RepeatWrapping,t})},P.prototype.assignTexture=function(t,e,n){var r=this;return this.getDependency("texture",n.index).then(function(s){switch(e){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":s.format=THREE.RGBFormat}if(r.extensions[i.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[i.KHR_TEXTURE_TRANSFORM]:void 0;o&&(s=r.extensions[i.KHR_TEXTURE_TRANSFORM].extendTexture(s,o))}t[e]=s})},P.prototype.assignFinalMaterial=function(t){var e=t.geometry,n=t.material,r=this.extensions,s=void 0!==e.attributes.tangent,o=void 0!==e.attributes.color,a=void 0===e.attributes.normal,l=!0===t.isSkinnedMesh,c=Object.keys(e.morphAttributes).length>0,h=c&&void 0!==e.morphAttributes.normal;if(t.isPoints){var u=this.cache.get(p="PointsMaterial:"+n.uuid);u||(u=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.lights=!1,this.cache.add(p,u)),n=u}else if(t.isLine){var d=this.cache.get(p="LineBasicMaterial:"+n.uuid);d||(d=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(d,n),d.color.copy(n.color),d.lights=!1,this.cache.add(p,d)),n=d}if(s||o||a||l||c){var p="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(p+="specular-glossiness:"),l&&(p+="skinning:"),s&&(p+="vertex-tangents:"),o&&(p+="vertex-colors:"),a&&(p+="flat-shading:"),c&&(p+="morph-targets:"),h&&(p+="morph-normals:");var f=this.cache.get(p);f||(f=n.isGLTFSpecularGlossinessMaterial?r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(n):n.clone(),l&&(f.skinning=!0),s&&(f.vertexTangents=!0),o&&(f.vertexColors=THREE.VertexColors),a&&(f.flatShading=!0),c&&(f.morphTargets=!0),h&&(f.morphNormals=!0),this.cache.add(p,f)),n=f}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),e.addAttribute("uv2",new THREE.BufferAttribute(e.attributes.uv.array,2))),n.isGLTFSpecularGlossinessMaterial&&(t.onBeforeRender=r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),t.material=n},P.prototype.loadMaterial=function(t){var e,n=this.extensions,r=this.json.materials[t],s={},o=r.extensions||{},a=[];if(o[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=n[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];e=l.getMaterialType(r),a.push(l.extendParams(s,r,this))}else if(o[i.KHR_MATERIALS_UNLIT]){var c=n[i.KHR_MATERIALS_UNLIT];e=c.getMaterialType(r),a.push(c.extendParams(s,r,this))}else{e=THREE.MeshStandardMaterial;var h=r.pbrMetallicRoughness||{};if(s.color=new THREE.Color(1,1,1),s.opacity=1,Array.isArray(h.baseColorFactor)){var u=h.baseColorFactor;s.color.fromArray(u),s.opacity=u[3]}void 0!==h.baseColorTexture&&a.push(this.assignTexture(s,"map",h.baseColorTexture)),s.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,s.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(a.push(this.assignTexture(s,"metalnessMap",h.metallicRoughnessTexture)),a.push(this.assignTexture(s,"roughnessMap",h.metallicRoughnessTexture)))}!0===r.doubleSided&&(s.side=THREE.DoubleSide);var d=r.alphaMode||"OPAQUE";return"BLEND"===d?s.transparent=!0:(s.transparent=!1,"MASK"===d&&(s.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&e!==THREE.MeshBasicMaterial&&(a.push(this.assignTexture(s,"normalMap",r.normalTexture)),s.normalScale=new THREE.Vector2(1,1),void 0!==r.normalTexture.scale&&s.normalScale.set(r.normalTexture.scale,r.normalTexture.scale)),void 0!==r.occlusionTexture&&e!==THREE.MeshBasicMaterial&&(a.push(this.assignTexture(s,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(s.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&e!==THREE.MeshBasicMaterial&&(s.emissive=(new THREE.Color).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&e!==THREE.MeshBasicMaterial&&a.push(this.assignTexture(s,"emissiveMap",r.emissiveTexture)),Promise.all(a).then(function(){var t;return t=e===THREE.ShaderMaterial?n[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new e(s),void 0!==r.name&&(t.name=r.name),t.map&&(t.map.encoding=THREE.sRGBEncoding),t.emissiveMap&&(t.emissiveMap.encoding=THREE.sRGBEncoding),t.specularMap&&(t.specularMap.encoding=THREE.sRGBEncoding),M(t,r),r.extensions&&S(n,t,r),t})},P.prototype.loadGeometries=function(t){var e=this,n=this.extensions,r=this.primitiveCache;function s(t){return n[i.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then(function(n){return R(n,t,e)})}for(var o,a,l=[],c=0,h=t.length;c<h;c++){var u,d=t[c],p=(a=(o=d).extensions&&o.extensions[i.KHR_DRACO_MESH_COMPRESSION])?"draco:"+a.bufferView+":"+a.indices+":"+C(a.attributes):o.indices+":"+C(o.attributes)+":"+o.mode,f=r[p];f?l.push(f.promise):(u=d.extensions&&d.extensions[i.KHR_DRACO_MESH_COMPRESSION]?s(d):R(new THREE.BufferGeometry,d,e),r[p]={primitive:d,promise:u},l.push(u))}return Promise.all(l)},P.prototype.loadMesh=function(t){for(var e=this,n=this.json.meshes[t],i=n.primitives,r=[],s=0,o=i.length;s<o;s++){var a=void 0===i[s].material?m=m||new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide}):this.getDependency("material",i[s].material);r.push(a)}return Promise.all(r).then(function(r){return e.loadGeometries(i).then(function(s){for(var o=[],a=0,l=s.length;a<l;a++){var c,h=s[a],u=i[a],d=r[a];if(4===u.mode||5===u.mode||6===u.mode||void 0===u.mode)!0===(c=!0===n.isSkinnedMesh?new THREE.SkinnedMesh(h,d):new THREE.Mesh(h,d)).isSkinnedMesh&&c.normalizeSkinWeights(),5===u.mode?c.drawMode=THREE.TriangleStripDrawMode:6===u.mode&&(c.drawMode=THREE.TriangleFanDrawMode);else if(1===u.mode)c=new THREE.LineSegments(h,d);else if(3===u.mode)c=new THREE.Line(h,d);else if(2===u.mode)c=new THREE.LineLoop(h,d);else{if(0!==u.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);c=new THREE.Points(h,d)}Object.keys(c.geometry.morphAttributes).length>0&&T(c,n),c.name=n.name||"mesh_"+t,s.length>1&&(c.name+="_"+a),M(c,n),e.assignFinalMaterial(c),o.push(c)}if(1===o.length)return o[0];var p=new THREE.Group;for(a=0,l=o.length;a<l;a++)p.add(o[a]);return p})})},P.prototype.loadCamera=function(t){var e,n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new THREE.PerspectiveCamera(THREE.Math.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new THREE.OrthographicCamera(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar)),void 0!==n.name&&(e.name=n.name),M(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")},P.prototype.loadSkin=function(t){var e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then(function(t){return n.inverseBindMatrices=t,n})},P.prototype.loadAnimation=function(t){for(var e=this.json.animations[t],n=[],i=[],r=[],s=[],o=[],a=0,l=e.channels.length;a<l;a++){var c=e.channels[a],h=e.samplers[c.sampler],u=c.target,d=void 0!==e.parameters?e.parameters[h.input]:h.input,p=void 0!==e.parameters?e.parameters[h.output]:h.output;n.push(this.getDependency("node",void 0!==u.node?u.node:u.id)),i.push(this.getDependency("accessor",d)),r.push(this.getDependency("accessor",p)),s.push(h),o.push(u)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(s),Promise.all(o)]).then(function(n){for(var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=[],c=0,h=i.length;c<h;c++){var u=i[c],d=r[c],p=s[c],m=o[c],g=a[c];if(void 0!==u){var v;switch(u.updateMatrix(),u.matrixAutoUpdate=!0,x[g.path]){case x.weights:v=THREE.NumberKeyframeTrack;break;case x.rotation:v=THREE.QuaternionKeyframeTrack;break;case x.position:case x.scale:default:v=THREE.VectorKeyframeTrack}var y=u.name?u.name:u.uuid,_=void 0!==m.interpolation?w[m.interpolation]:THREE.InterpolateLinear,b=[];x[g.path]===x.weights?u.traverse(function(t){!0===t.isMesh&&t.morphTargetInfluences&&b.push(t.name?t.name:t.uuid)}):b.push(y);for(var A=0,E=b.length;A<E;A++){var S=new v(b[A]+"."+x[g.path],d.array,p.array,_);"CUBICSPLINE"===m.interpolation&&(S.createInterpolant=function(t){return new f(this.times,this.values,this.getValueSize()/3,t)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(S)}}}return new THREE.AnimationClip(void 0!==e.name?e.name:"animation_"+t,void 0,l)})},P.prototype.loadNode=function(t){var e=this.json,n=this.extensions,r=e.meshReferences,s=e.meshUses,o=e.nodes[t];return(!0===o.isBone?Promise.resolve(new THREE.Bone):void 0!==o.mesh?this.getDependency("mesh",o.mesh).then(function(t){var e;if(r[o.mesh]>1){var n=s[o.mesh]++;(e=t.clone()).name+="_instance_"+n,e.onBeforeRender=t.onBeforeRender;for(var i=0,a=e.children.length;i<a;i++)e.children[i].name+="_instance_"+n,e.children[i].onBeforeRender=t.children[i].onBeforeRender}else e=t;return void 0!==o.weights&&e.traverse(function(t){if(t.isMesh)for(var e=0,n=o.weights.length;e<n;e++)t.morphTargetInfluences[e]=o.weights[e]}),e}):void 0!==o.camera?this.getDependency("camera",o.camera):o.extensions&&o.extensions[i.KHR_LIGHTS_PUNCTUAL]&&void 0!==o.extensions[i.KHR_LIGHTS_PUNCTUAL].light?this.getDependency("light",o.extensions[i.KHR_LIGHTS_PUNCTUAL].light):Promise.resolve(new THREE.Object3D)).then(function(t){if(void 0!==o.name&&(t.name=THREE.PropertyBinding.sanitizeNodeName(o.name)),M(t,o),o.extensions&&S(n,t,o),void 0!==o.matrix){var e=new THREE.Matrix4;e.fromArray(o.matrix),t.applyMatrix(e)}else void 0!==o.translation&&t.position.fromArray(o.translation),void 0!==o.rotation&&t.quaternion.fromArray(o.rotation),void 0!==o.scale&&t.scale.fromArray(o.scale);return t})},P.prototype.loadScene=function(){function t(e,n,i,r){var s=i.nodes[e];return r.getDependency("node",e).then(function(t){return void 0===s.skin?t:r.getDependency("skin",s.skin).then(function(t){for(var n=[],i=0,s=(e=t).joints.length;i<s;i++)n.push(r.getDependency("node",e.joints[i]));return Promise.all(n)}).then(function(n){for(var i=!0===t.isGroup?t.children:[t],r=0,s=i.length;r<s;r++){for(var o=i[r],a=[],l=[],c=0,h=n.length;c<h;c++){var u=n[c];if(u){a.push(u);var d=new THREE.Matrix4;void 0!==e.inverseBindMatrices&&d.fromArray(e.inverseBindMatrices.array,16*c),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[c])}o.bind(new THREE.Skeleton(a,l),o.matrixWorld)}return t});var e}).then(function(e){n.add(e);var o=[];if(s.children)for(var a=s.children,l=0,c=a.length;l<c;l++)o.push(t(a[l],e,i,r));return Promise.all(o)})}return function(e){var n=this.json,i=this.extensions,r=this.json.scenes[e],s=new THREE.Scene;void 0!==r.name&&(s.name=r.name),M(s,r),r.extensions&&S(i,s,r);for(var o=r.nodes||[],a=[],l=0,c=o.length;l<c;l++)a.push(t(o[l],s,n,this));return Promise.all(a).then(function(){return s})}}(),t}()},{}],39:[function(t,e,n){THREE.MTLLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(t,e,n,i){var r=this,s=void 0===this.path?THREE.LoaderUtils.extractUrlBase(t):this.path,o=new THREE.FileLoader(this.manager);o.setPath(this.path),o.load(t,function(t){e(r.parse(t,s))},n,i)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setTexturePath:function(t){return console.warn("THREE.MTLLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setMaterialOptions:function(t){return this.materialOptions=t,this},parse:function(t,e){for(var n=t.split("\n"),i={},r=/\s+/,s={},o=0;o<n.length;o++){var a=n[o];if(0!==(a=a.trim()).length&&"#"!==a.charAt(0)){var l=a.indexOf(" "),c=l>=0?a.substring(0,l):a;c=c.toLowerCase();var h=l>=0?a.substring(l+1):"";if(h=h.trim(),"newmtl"===c)s[h]=i={name:h};else if("ka"===c||"kd"===c||"ks"===c||"ke"===c){var u=h.split(r,3);i[c]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else i[c]=h}}var d=new THREE.MTLLoader.MaterialCreator(this.resourcePath||e,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(s),d}},THREE.MTLLoader.MaterialCreator=function(t,e){this.baseUrl=t||"",this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(t){return this.crossOrigin=t,this},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var n in t){var i=t[n],r={};for(var s in e[n]=r,i){var o=!0,a=i[s],l=s.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(a=[a[0]/255,a[1]/255,a[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===a[0]&&0===a[1]&&0===a[2]&&(o=!1)}o&&(r[l]=a)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var e=this,n=this.materialsInfo[t],i={name:t,side:this.side};function r(t,n){if(!i[t]){var r,s,o=e.getTextureParams(n,i),a=e.loadTexture((r=e.baseUrl,"string"!=typeof(s=o.url)||""===s?"":/^https?:\/\//i.test(s)?s:r+s));a.repeat.copy(o.scale),a.offset.copy(o.offset),a.wrapS=e.wrap,a.wrapT=e.wrap,i[t]=a}}for(var s in n){var o,a=n[s];if(""!==a)switch(s.toLowerCase()){case"kd":i.color=(new THREE.Color).fromArray(a);break;case"ks":i.specular=(new THREE.Color).fromArray(a);break;case"ke":i.emissive=(new THREE.Color).fromArray(a);break;case"map_kd":r("map",a);break;case"map_ks":r("specularMap",a);break;case"map_ke":r("emissiveMap",a);break;case"norm":r("normalMap",a);break;case"map_bump":case"bump":r("bumpMap",a);break;case"map_d":r("alphaMap",a),i.transparent=!0;break;case"ns":i.shininess=parseFloat(a);break;case"d":(o=parseFloat(a))<1&&(i.opacity=o,i.transparent=!0);break;case"tr":o=parseFloat(a),this.options&&this.options.invertTrProperty&&(o=1-o),o>0&&(i.opacity=1-o,i.transparent=!0)}}return this.materials[t]=new THREE.MeshPhongMaterial(i),this.materials[t]},getTextureParams:function(t,e){var n,i={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},r=t.split(/\s+/);return(n=r.indexOf("-bm"))>=0&&(e.bumpScale=parseFloat(r[n+1]),r.splice(n,2)),(n=r.indexOf("-s"))>=0&&(i.scale.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),(n=r.indexOf("-o"))>=0&&(i.offset.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),i.url=r.join(" ").trim(),i},loadTexture:function(t,e,n,i,r){var s,o=THREE.Loader.Handlers.get(t),a=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===o&&(o=new THREE.TextureLoader(a)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin),s=o.load(t,n,i,r),void 0!==e&&(s.mapping=e),s}}},{}],40:[function(t,e,n){THREE.OBJLoader=function(){var t=/^[og]\s*(.+)?/,e=/^mtllib /,n=/^usemtl /;function i(){var t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"==typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){var i=this.vertices,r=this.object.geometry.vertices;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){var i=this.normals,r=this.object.geometry.normals;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addColor:function(t,e,n){var i=this.colors,r=this.object.geometry.colors;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addUV:function(t,e,n){var i=this.uvs,r=this.object.geometry.uvs;r.push(i[t+0],i[t+1]),r.push(i[e+0],i[e+1]),r.push(i[n+0],i[n+1])},addUVLine:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,i,r,s,o,a,l){var c=this.vertices.length,h=this.parseVertexIndex(t,c),u=this.parseVertexIndex(e,c),d=this.parseVertexIndex(n,c);if(this.addVertex(h,u,d),void 0!==i&&""!==i){var p=this.uvs.length;h=this.parseUVIndex(i,p),u=this.parseUVIndex(r,p),d=this.parseUVIndex(s,p),this.addUV(h,u,d)}if(void 0!==o&&""!==o){var f=this.normals.length;h=this.parseNormalIndex(o,f),u=o===a?h:this.parseNormalIndex(a,f),d=o===l?h:this.parseNormalIndex(l,f),this.addNormal(h,u,d)}this.colors.length>0&&this.addColor(h,u,d)},addPointGeometry:function(t){this.object.geometry.type="Points";for(var e=this.vertices.length,n=0,i=t.length;n<i;n++)this.addVertexPoint(this.parseVertexIndex(t[n],e))},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var n=this.vertices.length,i=this.uvs.length,r=0,s=t.length;r<s;r++)this.addVertexLine(this.parseVertexIndex(t[r],n));var o=0;for(s=e.length;o<s;o++)this.addUVLine(this.parseUVIndex(e[o],i))}};return t.startObject("",!1),t}function r(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this.materials=null}return r.prototype={constructor:r,load:function(t,e,n,i){var r=this,s=new THREE.FileLoader(r.manager);s.setPath(this.path),s.load(t,function(t){e(r.parse(t))},n,i)},setPath:function(t){return this.path=t,this},setMaterials:function(t){return this.materials=t,this},parse:function(r){console.time("OBJLoader");var s=new i;-1!==r.indexOf("\r\n")&&(r=r.replace(/\r\n/g,"\n")),-1!==r.indexOf("\\\n")&&(r=r.replace(/\\\n/g,""));for(var o=r.split("\n"),a="",l="",c=[],h="function"==typeof"".trimLeft,u=0,d=o.length;u<d;u++)if(a=o[u],0!==(a=h?a.trimLeft():a.trim()).length&&"#"!==(l=a.charAt(0)))if("v"===l){var p=a.split(/\s+/);switch(p[0]){case"v":s.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),8===p.length&&s.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":s.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":s.uvs.push(parseFloat(p[1]),parseFloat(p[2]))}}else if("f"===l){for(var f=a.substr(1).trim().split(/\s+/),m=[],g=0,v=f.length;g<v;g++){var y=f[g];if(y.length>0){var _=y.split("/");m.push(_)}}var b=m[0];for(g=1,v=m.length-1;g<v;g++){var x=m[g],w=m[g+1];s.addFace(b[0],x[0],w[0],b[1],x[1],w[1],b[2],x[2],w[2])}}else if("l"===l){var A=a.substring(1).trim().split(" "),E=[],S=[];if(-1===a.indexOf("/"))E=A;else for(var M=0,T=A.length;M<T;M++){var C=A[M].split("/");""!==C[0]&&E.push(C[0]),""!==C[1]&&S.push(C[1])}s.addLineGeometry(E,S)}else if("p"===l){var L=a.substr(1).trim().split(" ");s.addPointGeometry(L)}else if(null!==(c=t.exec(a))){var P=(" "+c[0].substr(1).trim()).substr(1);s.startObject(P)}else if(n.test(a))s.object.startMaterial(a.substring(7).trim(),s.materialLibraries);else if(e.test(a))s.materialLibraries.push(a.substring(7).trim());else{if("s"!==l){if("\0"===a)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+a+'"')}if((c=a.split(" ")).length>1){var R=c[1].trim().toLowerCase();s.object.smooth="0"!==R&&"off"!==R}else s.object.smooth=!0;(W=s.object.currentMaterial())&&(W.smooth=s.object.smooth)}s.finalize();var O=new THREE.Group;for(O.materialLibraries=[].concat(s.materialLibraries),u=0,d=s.objects.length;u<d;u++){var I=s.objects[u],D=I.geometry,k=I.materials,N="Line"===D.type,B="Points"===D.type,F=!1;if(0!==D.vertices.length){var z=new THREE.BufferGeometry;z.addAttribute("position",new THREE.Float32BufferAttribute(D.vertices,3)),D.normals.length>0?z.addAttribute("normal",new THREE.Float32BufferAttribute(D.normals,3)):z.computeVertexNormals(),D.colors.length>0&&(F=!0,z.addAttribute("color",new THREE.Float32BufferAttribute(D.colors,3))),D.uvs.length>0&&z.addAttribute("uv",new THREE.Float32BufferAttribute(D.uvs,2));for(var U,j=[],H=0,V=k.length;H<V;H++){var G=k[H],W=void 0;if(null!==this.materials)if(W=this.materials.create(G.name),!N||!W||W instanceof THREE.LineBasicMaterial){if(B&&W&&!(W instanceof THREE.PointsMaterial)){var q=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});THREE.Material.prototype.copy.call(q,W),q.color.copy(W.color),q.map=W.map,q.lights=!1,W=q}}else{var X=new THREE.LineBasicMaterial;THREE.Material.prototype.copy.call(X,W),X.color.copy(W.color),X.lights=!1,W=X}W||((W=N?new THREE.LineBasicMaterial:B?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial).name=G.name),W.flatShading=!G.smooth,W.vertexColors=F?THREE.VertexColors:THREE.NoColors,j.push(W)}if(j.length>1){for(H=0,V=k.length;H<V;H++)z.addGroup((G=k[H]).groupStart,G.groupCount,H);U=N?new THREE.LineSegments(z,j):B?new THREE.Points(z,j):new THREE.Mesh(z,j)}else U=N?new THREE.LineSegments(z,j[0]):B?new THREE.Points(z,j[0]):new THREE.Mesh(z,j[0]);U.name=I.name,O.add(U)}}return console.timeEnd("OBJLoader"),O}},r}()},{}],41:[function(t,e,n){var i=t("layout-bmfont-text"),r=t("inherits"),s=t("quad-indices"),o=t("three-buffer-vertex-data"),a=t("object-assign"),l=t("./lib/vertices"),c=t("./lib/utils"),h=THREE.BufferGeometry;function u(t){h.call(this),"string"==typeof t&&(t={text:t}),this._opt=a({},t),t&&this.update(t)}e.exports=function(t){return new u(t)},r(u,h),u.prototype.update=function(t){if("string"==typeof t&&(t={text:t}),!(t=a({},this._opt,t)).font)throw new TypeError("must specify a { font } in options");this.layout=i(t);var e=!1!==t.flipY,n=t.font,r=n.common.scaleW,c=n.common.scaleH,h=this.layout.glyphs.filter(function(t){var e=t.data;return e.width*e.height>0});this.visibleGlyphs=h;var u=l.positions(h),d=l.uvs(h,r,c,e),p=s({clockwise:!0,type:"uint16",count:h.length});if(o.index(this,p,1,"uint16"),o.attr(this,"position",u,2),o.attr(this,"uv",d,2),!t.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(t.multipage){var f=l.pages(h);o.attr(this,"page",f,1)}},u.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var t=this.attributes.position.array;if(!t||!this.attributes.position.itemSize||t.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);c.computeSphere(t,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')},u.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.boundingBox,e=this.attributes.position.array;!e||!this.attributes.position.itemSize||e.length<2?t.makeEmpty():c.computeBox(e,t)}},{"./lib/utils":42,"./lib/vertices":43,inherits:17,"layout-bmfont-text":22,"object-assign":25,"quad-indices":34,"three-buffer-vertex-data":44}],42:[function(t,e,n){var i=2,r={min:[0,0],max:[0,0]};function s(t){var e=t.length/i;r.min[0]=t[0],r.min[1]=t[1],r.max[0]=t[0],r.max[1]=t[1];for(var n=0;n<e;n++){var s=t[n*i+0],o=t[n*i+1];r.min[0]=Math.min(s,r.min[0]),r.min[1]=Math.min(o,r.min[1]),r.max[0]=Math.max(s,r.max[0]),r.max[1]=Math.max(o,r.max[1])}}e.exports.computeBox=function(t,e){s(t),e.min.set(r.min[0],r.min[1],0),e.max.set(r.max[0],r.max[1],0)},e.exports.computeSphere=function(t,e){s(t);var n=r.min[0],i=r.min[1],o=r.max[0]-n,a=r.max[1]-i,l=Math.sqrt(o*o+a*a);e.center.set(n+o/2,i+a/2,0),e.radius=l/2}},{}],43:[function(t,e,n){e.exports.pages=function(t){var e=new Float32Array(4*t.length*1),n=0;return t.forEach(function(t){var i=t.data.page||0;e[n++]=i,e[n++]=i,e[n++]=i,e[n++]=i}),e},e.exports.uvs=function(t,e,n,i){var r=new Float32Array(4*t.length*2),s=0;return t.forEach(function(t){var o=t.data,a=o.y+o.height,l=o.x/e,c=o.y/n,h=(o.x+o.width)/e,u=a/n;i&&(c=(n-o.y)/n,u=(n-a)/n),r[s++]=l,r[s++]=c,r[s++]=l,r[s++]=u,r[s++]=h,r[s++]=u,r[s++]=h,r[s++]=c}),r},e.exports.positions=function(t){var e=new Float32Array(4*t.length*2),n=0;return t.forEach(function(t){var i=t.data,r=t.position[0]+i.xoffset,s=t.position[1]+i.yoffset,o=i.width,a=i.height;e[n++]=r,e[n++]=s,e[n++]=r,e[n++]=s+a,e[n++]=r+o,e[n++]=s+a,e[n++]=r+o,e[n++]=s}),e}},{}],44:[function(t,e,n){var i=t("flatten-vertex-data"),r=!1;function s(t,e,n,s){if(e=e||[],!t||function(t,e,n){if(t.itemSize!==n)return!0;if(!t.array)return!0;var i=t.array.length;return Array.isArray(e)&&Array.isArray(e[0])?i!==e.length*n:i!==e.length}(t,e,n)){e=i(e,s);var o=t&&"function"!=typeof t.setArray;return t&&!o||(o&&!r&&(r=!0,console.warn(["A WebGL buffer is being updated with a new size or itemSize, ","however this version of ThreeJS only supports fixed-size buffers.","\nThe old buffer may still be kept in memory.\n","To avoid memory leaks, it is recommended that you dispose ","your geometries and create new ones, or update to ThreeJS r82 or newer.\n","See here for discussion:\n","https://github.com/mrdoob/three.js/pull/9631"].join(""))),t=new THREE.BufferAttribute(e,n)),t.itemSize=n,t.needsUpdate=!0,"function"==typeof t.setArray&&t.setArray(e),t}return i(e,t.array),t.needsUpdate=!0,null}e.exports.attr=function(t,e,n,i,r){if("number"!=typeof i&&(i=3),"string"!=typeof r&&(r="float32"),Array.isArray(n)&&Array.isArray(n[0])&&n[0].length!==i)throw new Error("Nested vertex array has unexpected size; expected "+i+" but found "+n[0].length);var o=s(t.getAttribute(e),n,i,r);o&&t.addAttribute(e,o)},e.exports.index=function(t,e,n,i){"number"!=typeof n&&(n=1),"string"!=typeof i&&(i="uint16");var r=!t.index&&"function"!=typeof t.setIndex,o=s(r?t.getAttribute("index"):t.index,e,n,i);o&&(r?t.addAttribute("index",o):t.index=o)}},{"flatten-vertex-data":13}],45:[function(t,e,n){(n=e.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],46:[function(t,e,n){(function(t){!function(t,i){"object"==typeof n&&void 0!==e?e.exports=i():t.WebVRPolyfill=i()}(this,function(){"use strict";var e,n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},i=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},r=function(t,e){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]},s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},o=function(t,e){return function(t,e){t.exports=function(){var t,e,i,r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t,e,n){return t+(e-t)*n},a=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),l=function(){var t=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return t}}(),c=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),function(){var t=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return t}}()),h=(e=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),i=e?parseInt(e[1],10):null,function(){return i}),u=function(){var t=!1;if(65===h()){var e=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(e){var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),4!==n.length);i=!0);}catch(l){r=!0,s=l}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}(t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e[1].split(".")),i=n[3];t=3325===parseInt(n[2],10)&&parseInt(i,10)<148}}return function(){return t}}(),d=function(){var t=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return t}}(),p=function(){var t=90==window.orientation||-90==window.orientation;return d()?!t:t},f=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},m=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},g=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},v=function(t,e,n,i){var r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e),t.compileShader(r);var s=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(s,n),t.compileShader(s);var o=t.createProgram();for(var a in t.attachShader(o,r),t.attachShader(o,s),i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.deleteShader(r),t.deleteShader(s),o},y=function(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r="",s=0;s<i;s++)n[r=t.getActiveUniform(e,s).name.replace("[0]","")]=t.getUniformLocation(e,r);return n},_=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},b=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},x=function(t){if(a()){var e=t.style.width,n=t.style.height;t.style.width=parseInt(e)+1+"px",t.style.height=parseInt(n)+"px",setTimeout(function(){t.style.width=e,t.style.height=n},100)}window.canvas=t},w=function(){var t=Math.PI/180,e=.25*Math.PI,n=new Float32Array([0,0,0,1]),i=new Float32Array([0,0,0]);function r(r,s,o,a,l,c){var h,u,d,p,f,m,g,v,y,_,b,x,w,A,E,S,M,T,C;!function(n,i,r,s){var o=Math.tan(i?i.upDegrees*t:e),a=Math.tan(i?i.downDegrees*t:e),l=Math.tan(i?i.leftDegrees*t:e),c=Math.tan(i?i.rightDegrees*t:e),h=2/(l+c),u=2/(o+a);n[0]=h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=-(l-c)*h*.5,n[9]=(o-a)*u*.5,n[10]=s/(r-s),n[11]=-1,n[12]=0,n[13]=0,n[14]=s*r/(r-s),n[15]=0}(r,a||null,c.depthNear,c.depthFar),d=o.position||i,b=(p=(u=o.orientation||n)[0])*(v=p+p),x=p*(y=(f=u[1])+f),w=p*(_=(m=u[2])+m),E=f*_,M=(g=u[3])*v,T=g*y,C=g*_,(h=s)[0]=1-((A=f*y)+(S=m*_)),h[1]=x+C,h[2]=w-T,h[3]=0,h[4]=x-C,h[5]=1-(b+S),h[6]=E+M,h[7]=0,h[8]=w+T,h[9]=E-M,h[10]=1-(b+A),h[11]=0,h[12]=d[0],h[13]=d[1],h[14]=d[2],h[15]=1,l&&function(t,e,n){var i,r,s,o,a,c,h,u,d,p,f,m,g=l[0],v=l[1],y=l[2];e===t?(t[12]=e[0]*g+e[4]*v+e[8]*y+e[12],t[13]=e[1]*g+e[5]*v+e[9]*y+e[13],t[14]=e[2]*g+e[6]*v+e[10]*y+e[14],t[15]=e[3]*g+e[7]*v+e[11]*y+e[15]):(r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],h=e[6],u=e[7],d=e[8],p=e[9],f=e[10],m=e[11],t[0]=i=e[0],t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=c,t[6]=h,t[7]=u,t[8]=d,t[9]=p,t[10]=f,t[11]=m,t[12]=i*g+a*v+d*y+e[12],t[13]=r*g+c*v+p*y+e[13],t[14]=s*g+h*v+f*y+e[14],t[15]=o*g+u*v+m*y+e[15])}(s,s),function(t,e){var n=s[0],i=s[1],r=s[2],o=s[3],a=s[4],l=s[5],c=s[6],h=s[7],u=s[8],d=s[9],p=s[10],f=s[11],m=s[12],g=s[13],v=s[14],y=s[15],_=n*l-i*a,b=n*c-r*a,x=n*h-o*a,w=i*c-r*l,A=i*h-o*l,E=r*h-o*c,S=u*g-d*m,M=u*v-p*m,T=u*y-f*m,C=d*v-p*g,L=d*y-f*g,P=p*y-f*v,R=_*P-b*L+x*C+w*T-A*M+E*S;R&&(t[0]=(l*P-c*L+h*C)*(R=1/R),t[1]=(r*L-i*P-o*C)*R,t[2]=(g*E-v*A+y*w)*R,t[3]=(p*A-d*E-f*w)*R,t[4]=(c*T-a*P-h*M)*R,t[5]=(n*P-r*T+o*M)*R,t[6]=(v*x-m*E-y*b)*R,t[7]=(u*E-p*x+f*b)*R,t[8]=(a*L-l*T+h*S)*R,t[9]=(i*T-n*L-o*S)*R,t[10]=(m*A-g*x+y*_)*R,t[11]=(d*x-u*A-f*_)*R,t[12]=(l*M-a*C-c*S)*R,t[13]=(n*C-i*M+r*S)*R,t[14]=(g*b-m*w-v*_)*R,t[15]=(u*w-d*b+p*_)*R)}(s)}return function(t,e,n){return!(!t||!e||(t.pose=e,t.timestamp=e.timestamp,r(t.leftProjectionMatrix,t.leftViewMatrix,e,n._getFieldOfView("left"),n._getEyeOffset("left"),n),r(t.rightProjectionMatrix,t.rightViewMatrix,e,n._getFieldOfView("right"),n._getEyeOffset("right"),n),0))}}(),A=function(t){var e=t.indexOf("://"),n=t.indexOf("/",-1!==e?e+3:0);return-1===n&&(n=t.length),t.substring(0,n)},E=(t={},function(e,n){void 0===t[e]&&(console.warn("webvr-polyfill: "+n),t[e]=!0)}),S=function(t,e){E(t,t+" has been deprecated. This may not work on native WebVR displays. "+(e?"Please use "+e+" instead.":""))},M=function(t,e,n){if(e){for(var i=[],r=null,s=0;s<e.length;++s)switch(o=e[s]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((l=e[++s])<t.TEXTURE0||l>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),i.push(null,null);break}r||(r=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(l),i.push(t.getParameter(o),null);break;case t.ACTIVE_TEXTURE:r=t.getParameter(t.ACTIVE_TEXTURE),i.push(null);break;default:i.push(t.getParameter(o))}for(n(t),s=0;s<e.length;++s){var o,a=i[s];switch(o=e[s]){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,a);break;case t.COLOR_CLEAR_VALUE:t.clearColor(a[0],a[1],a[2],a[3]);break;case t.COLOR_WRITEMASK:t.colorMask(a[0],a[1],a[2],a[3]);break;case t.CURRENT_PROGRAM:t.useProgram(a);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,a);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,a);break;case t.TEXTURE_BINDING_2D:if((l=e[++s])<t.TEXTURE0||l>t.TEXTURE31)break;t.activeTexture(l),t.bindTexture(t.TEXTURE_2D,a);break;case t.TEXTURE_BINDING_CUBE_MAP:var l;if((l=e[++s])<t.TEXTURE0||l>t.TEXTURE31)break;t.activeTexture(l),t.bindTexture(t.TEXTURE_CUBE_MAP,a);break;case t.VIEWPORT:t.viewport(a[0],a[1],a[2],a[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:a?t.enable(o):t.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}r&&t.activeTexture(r)}}else n(t)},T=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),C=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function L(t,e,n,i){this.gl=t,this.cardboardUI=e,this.bufferScale=n,this.dirtySubmitFrameBindings=i,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,a()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=v(t,T,C,this.attribs),this.uniforms=y(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}L.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},L.prototype.onResize=function(){var t=this.gl,e=this;M(t,[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0],function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.framebuffer),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.texImage2D(t.TEXTURE_2D,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,e.bufferWidth,e.bufferHeight,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.renderTarget,0),e.ctxAttribs.depth&&e.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e.depthStencilBuffer)):e.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e.depthBuffer)):e.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,e.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,e.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),e.realClearColor.apply(t,e.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},L.prototype.patch=function(){if(!this.isPatched){var t=this,e=this.gl.canvas,n=this.gl;a()||(e.width=f()*this.bufferScale,e.height=m()*this.bufferScale,Object.defineProperty(e,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(n){t.bufferWidth=n,t.realCanvasWidth.set.call(e,n),t.onResize()}}),Object.defineProperty(e,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(n){t.bufferHeight=n,t.realCanvasHeight.set.call(e,n),t.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(e,i){t.lastBoundFramebuffer=i||t.framebuffer,t.realBindFramebuffer.call(n,e,t.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(e){switch(e){case n.CULL_FACE:t.cullFace=!0;break;case n.DEPTH_TEST:t.depthTest=!0;break;case n.BLEND:t.blend=!0;break;case n.SCISSOR_TEST:t.scissorTest=!0;break;case n.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(n,e)},n.disable=function(e){switch(e){case n.CULL_FACE:t.cullFace=!1;break;case n.DEPTH_TEST:t.depthTest=!1;break;case n.BLEND:t.blend=!1;break;case n.SCISSOR_TEST:t.scissorTest=!1;break;case n.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(n,e)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(e,i,r,s){t.colorMask[0]=e,t.colorMask[1]=i,t.colorMask[2]=r,t.colorMask[3]=s,t.realColorMask.call(n,e,i,r,s)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(e,i,r,s){t.clearColor[0]=e,t.clearColor[1]=i,t.clearColor[2]=r,t.clearColor[3]=s,t.realClearColor.call(n,e,i,r,s)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(e,i,r,s){t.viewport[0]=e,t.viewport[1]=i,t.viewport[2]=r,t.viewport[3]=s,t.realViewport.call(n,e,i,r,s)},this.isPatched=!0,x(e)}},L.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,e=this.gl.canvas;a()||(Object.defineProperty(e,"width",this.realCanvasWidth),Object.defineProperty(e,"height",this.realCanvasHeight)),e.width=this.bufferWidth,e.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){x(e)},1)}},L.prototype.setTextureBounds=function(t,e){t||(t=[0,0,.5,1]),e||(e=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=e[0],this.viewportOffsetScale[5]=e[1],this.viewportOffsetScale[6]=e[2],this.viewportOffsetScale[7]=e[3]},L.prototype.submitFrame=function(){var t=this.gl,e=this,n=[];if(this.dirtySubmitFrameBindings||n.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),M(t,n,function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.cullFace&&e.realDisable.call(t,t.CULL_FACE),e.depthTest&&e.realDisable.call(t,t.DEPTH_TEST),e.blend&&e.realDisable.call(t,t.BLEND),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realDisable.call(t,t.STENCIL_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(e.ctxAttribs.alpha||a())&&(e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(e.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.enableVertexAttribArray(e.attribs.position),t.enableVertexAttribArray(e.attribs.texCoord),t.vertexAttribPointer(e.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(e.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(e.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.uniform4fv(e.uniforms.viewportOffsetScale,e.viewportOffsetScale),t.drawElements(t.TRIANGLES,e.indexCount,t.UNSIGNED_SHORT,0),e.cardboardUI&&e.cardboardUI.renderNoState(),e.realBindFramebuffer.call(e.gl,t.FRAMEBUFFER,e.framebuffer),e.ctxAttribs.preserveDrawingBuffer||(e.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),e.dirtySubmitFrameBindings||e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.cullFace&&e.realEnable.call(t,t.CULL_FACE),e.depthTest&&e.realEnable.call(t,t.DEPTH_TEST),e.blend&&e.realEnable.call(t,t.BLEND),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realEnable.call(t,t.STENCIL_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),!e.ctxAttribs.alpha&&e.ctxAttribs.preserveDrawingBuffer||e.realClearColor.apply(t,e.clearColor)}),a()){var i=t.canvas;i.width==e.bufferWidth&&i.height==e.bufferHeight||(e.bufferWidth=i.width,e.bufferHeight=i.height,e.onResize())}},L.prototype.updateDeviceInfo=function(t){var e=this.gl,n=this;M(e,[e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING],function(e){var i=n.computeMeshVertices_(n.meshWidth,n.meshHeight,t);if(e.bindBuffer(e.ARRAY_BUFFER,n.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),!n.indexCount){var r=n.computeMeshIndices_(n.meshWidth,n.meshHeight);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW),n.indexCount=r.length}})},L.prototype.computeMeshVertices_=function(t,e,n){for(var i=new Float32Array(2*t*e*5),r=n.getLeftEyeVisibleTanAngles(),s=n.getLeftEyeNoLensTanAngles(),a=n.getLeftEyeVisibleScreenRect(s),l=0,c=0;c<2;c++){for(var h=0;h<e;h++)for(var u=0;u<t;u++,l++){var d=u/(t-1),p=h/(e-1),f=d,m=p,g=o(r[0],r[2],d),v=o(r[3],r[1],p),y=Math.sqrt(g*g+v*v),_=n.distortion.distortInverse(y);p=2*(a.y+(p=(v*_/y-s[3])/(s[1]-s[3]))*a.height-.5),i[5*l+0]=d=2*(a.x+(d=(g*_/y-s[0])/(s[2]-s[0]))*a.width-.5),i[5*l+1]=p,i[5*l+2]=f,i[5*l+3]=m,i[5*l+4]=c}var b=r[2]-r[0];r[0]=-(b+r[0]),r[2]=b-r[2],s[0]=-((b=s[2]-s[0])+s[0]),s[2]=b-s[2],a.x=1-(a.x+a.width)}return i},L.prototype.computeMeshIndices_=function(t,e){for(var n=new Uint16Array(2*(t-1)*(e-1)*6),i=t/2,r=e/2,s=0,o=0,a=0;a<2;a++)for(var l=0;l<e;l++)for(var c=0;c<t;c++,s++)0!=c&&0!=l&&(c<=i==l<=r?(n[o++]=s,n[o++]=s-t-1,n[o++]=s-t,n[o++]=s-t-1,n[o++]=s,n[o++]=s-1):(n[o++]=s-1,n[o++]=s-t,n[o++]=s,n[o++]=s-t,n[o++]=s-1,n[o++]=s-t-1));return n},L.prototype.getOwnPropertyDescriptor_=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(e)},n.set=function(t){this.setAttribute(e,t)}),n};var P=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),R=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),O=Math.PI/180,I=.3125;function D(t){this.gl=t,this.attribs={position:0},this.program=v(t,P,R,this.attribs),this.uniforms=y(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function k(t){this.coefficients=t}D.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},D.prototype.listen=function(t,e){var n=this.gl.canvas;this.listener=function(i){var r=n.clientWidth/2;i.clientX>r-42&&i.clientX<r+42&&i.clientY>n.clientHeight-42?t(i):i.clientX<42&&i.clientY<42&&e(i)},n.addEventListener("click",this.listener,!1)},D.prototype.onResize=function(){var t=this.gl,e=this;M(t,[t.ARRAY_BUFFER_BINDING],function(t){var n=[],i=t.drawingBufferWidth/2,r=Math.max(screen.width,screen.height)*window.devicePixelRatio,s=t.drawingBufferWidth/r*window.devicePixelRatio,o=4*s/2,a=42*s,l=28*s/2,c=14*s;function h(t,e){var r=(90-t)*O,s=Math.cos(r),o=Math.sin(r);n.push(I*s*l+i,I*o*l+l),n.push(e*s*l+i,e*o*l+l)}n.push(i-o,a),n.push(i-o,t.drawingBufferHeight),n.push(i+o,a),n.push(i+o,t.drawingBufferHeight),e.gearOffset=n.length/2;for(var u=0;u<=6;u++){var d=60*u;h(d,1),h(d+12,1),h(d+20,.75),h(d+40,.75),h(d+48,1)}function p(e,i){n.push(c+e,t.drawingBufferHeight-c-i)}e.gearVertexCount=n.length/2-e.gearOffset,e.arrowOffset=n.length/2;var f=o/Math.sin(45*O);p(0,l),p(l,0),p(l+f,f),p(f,l+f),p(f,l-f),p(0,l),p(l,2*l),p(l+f,2*l-f),p(f,l-f),p(0,l),p(f,l-o),p(28*s,l-o),p(f,l+o),p(28*s,l+o),e.arrowVertexCount=n.length/2-e.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW)})},D.prototype.render=function(){var t=this.gl,e=this;M(t,[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING],function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.renderNoState()})},D.prototype.renderNoState=function(){var t,e,n,i,r,s,o=this.gl;o.useProgram(this.program),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.enableVertexAttribArray(this.attribs.position),o.vertexAttribPointer(this.attribs.position,2,o.FLOAT,!1,8,0),o.uniform4f(this.uniforms.color,1,1,1,1),r=1/(0-(n=o.drawingBufferHeight)),s=1/-1023.9,(t=this.projMat)[0]=-2*(i=1/(0-(e=o.drawingBufferWidth))),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(0+e)*i,t[13]=(n+0)*r,t[14]=1024.1*s,t[15]=1,o.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.drawArrays(o.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),o.drawArrays(o.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},k.prototype.distortInverse=function(t){for(var e=0,n=1,i=t-this.distort(e);Math.abs(n-e)>1e-4;){var r=t-this.distort(n),s=n-r*((n-e)/(r-i));e=n,n=s,i=r}return n},k.prototype.distort=function(t){for(var e=t*t,n=0,i=0;i<this.coefficients.length;i++)n=e*(n+this.coefficients[i]);return(n+1)*t};var N=Math.PI/180,B=180/Math.PI,F=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0};F.prototype={constructor:F,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();return 0!==t?this.multiplyScalar(1/t):(this.x=0,this.y=0,this.z=0),this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,c=a*n+o*e-r*i,h=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+c*-o-h*-s,this.y=c*a+u*-s+h*-r-l*-o,this.z=h*a+u*-o+l*-s-c*-r,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}};var z,U,j=function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1};function H(t){this.width=t.width||f(),this.height=t.height||m(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}j.prototype={constructor:j,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,e,n){var i=Math.cos(t/2),r=Math.cos(e/2),s=Math.cos(n/2),o=Math.sin(t/2),a=Math.sin(e/2),l=Math.sin(n/2);return this.x=o*r*s+i*a*l,this.y=i*a*s-o*r*l,this.z=i*r*l+o*a*s,this.w=i*r*s-o*a*l,this},setFromEulerYXZ:function(t,e,n){var i=Math.cos(t/2),r=Math.cos(e/2),s=Math.cos(n/2),o=Math.sin(t/2),a=Math.sin(e/2),l=Math.sin(n/2);return this.x=o*r*s+i*a*l,this.y=i*a*s-o*r*l,this.z=i*r*l-o*a*s,this.w=i*r*s+o*a*l,this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=Math.cos(n),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t.x,i=t.y,r=t.z,s=t.w,o=e.x,a=e.y,l=e.z,c=e.w;return this.x=n*c+s*o+i*l-r*a,this.y=i*c+s*a+r*o-n*l,this.z=r*c+s*l+n*a-i*o,this.w=s*c-n*o-i*a-r*l,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(this.x=this.x*(t=1/t),this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this.x,i=this.y,r=this.z,s=this.w,o=s*t.w+n*t.x+i*t.y+r*t.z;if(o<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,o=-o):this.copy(t),o>=1)return this.w=s,this.x=n,this.y=i,this.z=r,this;var a=Math.acos(o),l=Math.sqrt(1-o*o);if(Math.abs(l)<.001)return this.w=.5*(s+this.w),this.x=.5*(n+this.x),this.y=.5*(i+this.y),this.z=.5*(r+this.z),this;var c=Math.sin((1-e)*a)/l,h=Math.sin(e*a)/l;return this.w=s*c+this.w*h,this.x=n*c+this.x*h,this.y=i*c+this.y*h,this.z=r*c+this.z*h,this},setFromUnitVectors:function(t,e){return void 0===z&&(z=new F),(U=t.dot(e)+1)<1e-6?(U=0,Math.abs(t.x)>Math.abs(t.z)?z.set(-t.y,t.x,0):z.set(0,-t.z,t.y)):z.crossVectors(t,e),this.x=z.x,this.y=z.y,this.z=z.z,this.w=U,this.normalize(),this}};var V=new H({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),G=new H({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),W={CardboardV1:new X({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new X({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function q(t,e){this.viewer=W.CardboardV2,this.updateDeviceParams(t),this.distortion=new k(this.viewer.distortionCoefficients);for(var n=0;n<e.length;n++){var i=e[n];W[i.id]=new X(i)}}function X(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}q.prototype.updateDeviceParams=function(t){this.device=this.determineDevice_(t)||this.device},q.prototype.getDevice=function(){return this.device},q.prototype.setViewer=function(t){this.viewer=t,this.distortion=new k(this.viewer.distortionCoefficients)},q.prototype.determineDevice_=function(t){if(!t)return a()?(console.warn("Using fallback iOS device measurements."),G):(console.warn("Using fallback Android device measurements."),V);var e=.0254/t.ydpi;return new H({widthMeters:.0254/t.xdpi*f(),heightMeters:e*m(),bevelMeters:.001*t.bevelMm})},q.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,e=this.device,n=this.distortion,i=t.screenLensDistance,r=t.interLensDistance/2,s=t.baselineLensDistance-e.bevelMeters,o=e.heightMeters-s,a=B*Math.atan(n.distort((e.widthMeters-t.interLensDistance)/2/i)),l=B*Math.atan(n.distort(r/i)),c=B*Math.atan(n.distort(s/i)),h=B*Math.atan(n.distort(o/i));return{leftDegrees:Math.min(a,t.fov),rightDegrees:Math.min(l,t.fov),downDegrees:Math.min(c,t.fov),upDegrees:Math.min(h,t.fov)}},q.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,e=this.device,n=this.distortion,i=Math.tan(-N*t.fov),r=Math.tan(N*t.fov),s=Math.tan(N*t.fov),o=Math.tan(-N*t.fov),a=e.widthMeters/4,l=e.heightMeters/2,c=t.interLensDistance/2-a,h=-(t.baselineLensDistance-e.bevelMeters-l),u=t.screenLensDistance,d=n.distort((c-a)/u),p=n.distort((h+l)/u),f=n.distort((c+a)/u),m=n.distort((h-l)/u),g=new Float32Array(4);return g[0]=Math.max(i,d),g[1]=Math.min(r,p),g[2]=Math.min(s,f),g[3]=Math.max(o,m),g},q.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,e=this.device,n=this.distortion,i=new Float32Array(4),r=n.distortInverse(Math.tan(-N*t.fov)),s=n.distortInverse(Math.tan(N*t.fov)),o=n.distortInverse(Math.tan(N*t.fov)),a=n.distortInverse(Math.tan(-N*t.fov)),l=e.widthMeters/4,c=e.heightMeters/2,h=t.interLensDistance/2-l,u=-(t.baselineLensDistance-e.bevelMeters-c),d=t.screenLensDistance,p=(u+c)/d,f=(h+l)/d,m=(u-c)/d;return i[0]=Math.max(r,(h-l)/d),i[1]=Math.min(s,p),i[2]=Math.min(o,f),i[3]=Math.max(a,m),i},q.prototype.getLeftEyeVisibleScreenRect=function(t){var e=this.viewer,n=this.device,i=e.screenLensDistance,r=(n.widthMeters-e.interLensDistance)/2,s=e.baselineLensDistance-n.bevelMeters,o=(t[0]*i+r)/n.widthMeters,a=(t[3]*i+s)/n.heightMeters;return{x:o,y:a,width:(t[2]*i+r)/n.widthMeters-o,height:(t[1]*i+s)/n.heightMeters-a}},q.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},q.prototype.getFieldOfViewRightEye=function(t){var e=this.getFieldOfViewLeftEye(t);return{leftDegrees:e.rightDegrees,rightDegrees:e.leftDegrees,upDegrees:e.upDegrees,downDegrees:e.downDegrees}},q.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.getUndistortedParams_();return{leftDegrees:B*Math.atan(t.outerDist),rightDegrees:B*Math.atan(t.innerDist),downDegrees:B*Math.atan(t.bottomDist),upDegrees:B*Math.atan(t.topDist)}},q.prototype.getUndistortedViewportLeftEye=function(){var t=this.getUndistortedParams_(),e=this.device,n=this.viewer.screenLensDistance,i=e.width/(e.widthMeters/n),r=e.height/(e.heightMeters/n),s=Math.round((t.eyePosX-t.outerDist)*i),o=Math.round((t.eyePosY-t.bottomDist)*r);return{x:s,y:o,width:Math.round((t.eyePosX+t.innerDist)*i)-s,height:Math.round((t.eyePosY+t.topDist)*r)-o}},q.prototype.getUndistortedParams_=function(){var t=this.viewer,e=this.device,n=t.screenLensDistance,i=t.interLensDistance/2/n,r=e.heightMeters/n,s=e.widthMeters/n/2-i,o=(t.baselineLensDistance-e.bevelMeters)/n,a=this.distortion.distortInverse(Math.tan(N*t.fov)),l=Math.min(s,a),c=Math.min(i,a),h=Math.min(o,a);return{outerDist:l,innerDist:c,topDist:Math.min(r-o,a),bottomDist:h,eyePosX:s,eyePosY:o}},q.Viewers=W;var Y={format:1,last_updated:"2018-12-10T17:01:42Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function Q(t,e){if(this.dpdb=Y,this.recalculateDeviceParams_(),t){this.onDeviceParamsUpdated=e;var n=new XMLHttpRequest,i=this;n.open("GET",t,!0),n.addEventListener("load",function(){i.loading=!1,n.status>=200&&n.status<=299?(i.dpdb=JSON.parse(n.response),i.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),n.send()}}function Z(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function K(t,e){this.set(t,e)}function J(t,e){this.kFilter=t,this.isDebug=e,this.currentAccelMeasurement=new K,this.currentGyroMeasurement=new K,this.previousGyroMeasurement=new K,this.filterQ=a()?new j(-1,0,0,1):new j(1,0,0,1),this.previousFilterQ=new j,this.previousFilterQ.copy(this.filterQ),this.accelQ=new j,this.isOrientationInitialized=!1,this.estimatedGravity=new F,this.measuredGravity=new F,this.gyroIntegralQ=new j}function $(t,e){this.predictionTimeS=t,this.isDebug=e,this.previousQ=new j,this.previousTimestampS=null,this.deltaQ=new j,this.outQ=new j}function tt(t,e,n,i){this.yawOnly=n,this.accelerometer=new F,this.gyroscope=new F,this.filter=new J(t,i),this.posePredictor=new $(e,i),this.isFirefoxAndroid=c(),this.isIOS=a();var r=h();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=u(),this.filterToWorldQ=new j,a()?this.filterToWorldQ.setFromAxisAngle(new F(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new F(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new j,this.worldToScreenQ=new j,this.originalPoseAdjustQ=new j,this.originalPoseAdjustQ.setFromAxisAngle(new F(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),p()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new j,this.orientationOut_=new Float32Array(4),this.start()}Q.prototype.getDeviceParams=function(){return this.deviceParams},Q.prototype.recalculateDeviceParams_=function(){var t=this.calcDeviceParams_();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Q.prototype.calcDeviceParams_=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var e=navigator.userAgent||navigator.vendor||window.opera,n=f(),i=m();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=0;r<t.devices.length;r++){var s=t.devices[r];if(s.rules)if("ios"==s.type||"android"==s.type){if(a()==("ios"==s.type)){for(var o=!1,l=0;l<s.rules.length;l++)if(this.ruleMatches_(s.rules[l],e,n,i)){o=!0;break}if(o)return new Z({xdpi:s.dpi[0]||s.dpi,ydpi:s.dpi[1]||s.dpi,bevelMm:s.bw})}}else console.warn("Device["+r+"] has invalid type.");else console.warn("Device["+r+"] has no rules section.")}return console.warn("No DPDB device match."),null},Q.prototype.ruleMatches_=function(t,e,n,i){if(!t.ua&&!t.res)return!1;if(t.ua&&"SM"===t.ua.substring(0,2)&&(t.ua=t.ua.substring(0,7)),t.ua&&e.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var r=t.res[0],s=t.res[1];if(Math.min(n,i)!=Math.min(r,s)||Math.max(n,i)!=Math.max(r,s))return!1}return!0},K.prototype.set=function(t,e){this.sample=t,this.timestampS=e},K.prototype.copy=function(t){this.set(t.sample,t.timestampS)},J.prototype.addAccelMeasurement=function(t,e){this.currentAccelMeasurement.set(t,e)},J.prototype.addGyroMeasurement=function(t,e){var n;this.currentGyroMeasurement.set(t,e),n=e-this.previousGyroMeasurement.timestampS,isNaN(n)||n<=.001||n>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},J.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var e=new j;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n,i=new j;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",B*((n=i).w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(n.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var r=new j;r.copy(this.filterQ),r.multiply(i),this.filterQ.slerp(r,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},J.prototype.getOrientation=function(){return this.filterQ},J.prototype.accelToQuaternion_=function(t){var e=new F;e.copy(t),e.normalize();var n=new j;return n.setFromUnitVectors(new F(0,0,-1),e),n.inverse(),n},J.prototype.gyroToQuaternionDelta_=function(t,e){var n=new j,i=new F;return i.copy(t),i.normalize(),n.setFromAxisAngle(i,t.length()*e),n},$.prototype.getPrediction=function(t,e,n){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=n,t;var i=new F;i.copy(e),i.normalize();var r=e.length();return r<20*N?(this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(B*r).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ):(this.deltaQ.setFromAxisAngle(i,r*this.predictionTimeS),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=n,this.outQ)},tt.prototype.getPosition=function(){return null},tt.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(n=(new j).setFromAxisAngle(new F(0,0,-1),0),i=new j,-90===window.orientation?i.setFromAxisAngle(new F(0,1,0),Math.PI/-2):i.setFromAxisAngle(new F(0,1,0),Math.PI/2),n.multiply(i)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((e=new j).setFromAxisAngle(new F(1,0,0),-Math.PI/2),e),t=this._deviceOrientationQ,(r=new j).copy(t),r.multiply(this.deviceOrientationFilterToWorldQ),r.multiply(this.resetQ),r.multiply(this.worldToScreenQ),r.multiplyQuaternions(this.deviceOrientationFixQ,r),this.yawOnly&&(r.x=0,r.z=0,r.normalize()),this.orientationOut_[0]=r.x,this.orientationOut_[1]=r.y,this.orientationOut_[2]=r.z,this.orientationOut_[3]=r.w,this.orientationOut_;var e,n,i,r,s=this.filter.getOrientation();return t=this.posePredictor.getPrediction(s,this.gyroscope,this.previousTimestampS),(r=new j).copy(this.filterToWorldQ),r.multiply(this.resetQ),r.multiply(t),r.multiply(this.worldToScreenQ),this.yawOnly&&(r.x=0,r.z=0,r.normalize()),this.orientationOut_[0]=r.x,this.orientationOut_[1]=r.y,this.orientationOut_[2]=r.z,this.orientationOut_[3]=r.w,this.orientationOut_},tt.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),p()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},tt.prototype.onDeviceOrientation_=function(t){this._deviceOrientationQ=this._deviceOrientationQ||new j;var e=t.alpha,n=t.beta,i=t.gamma;e=(e||0)*Math.PI/180,n=(n||0)*Math.PI/180,i=(i||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(n,e,-i)},tt.prototype.onDeviceMotion_=function(t){this.updateDeviceMotion_(t)},tt.prototype.updateDeviceMotion_=function(t){var e=t.accelerationIncludingGravity,n=t.rotationRate,i=t.timeStamp/1e3,r=i-this.previousTimestampS;return r<0?(E("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=i)):r<=.001||r>1?(E("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=i)):(this.accelerometer.set(-e.x,-e.y,-e.z),d()?this.gyroscope.set(-n.beta,n.alpha,n.gamma):this.gyroscope.set(n.alpha,n.beta,n.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,i),this.filter.addGyroMeasurement(this.gyroscope,i),void(this.previousTimestampS=i))},tt.prototype.onOrientationChange_=function(t){this.setScreenTransform_()},tt.prototype.onMessage_=function(t){var e=t.data;e&&e.type&&"devicemotion"===e.type.toLowerCase()&&this.updateDeviceMotion_(e.deviceMotionEvent)},tt.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new F(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new F(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},tt.prototype.start=function(){var t,e,n;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),a()&&(t=window.self!==window.top,e=A(document.referrer),n=A(window.location.href),t&&e!==n)&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},tt.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var et=new F(1,0,0),nt=new F(0,0,1),it=new j;it.setFromAxisAngle(et,-Math.PI/2),it.multiply((new j).setFromAxisAngle(nt,Math.PI/2));var rt=function(){function t(e){r(this,t),this.config=e,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new j,this._outQ=new j,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return s(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new tt(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var t=this.sensor.quaternion;this._sensorQ.set(t[0],t[1],t[2],t[3]);var e=this._outQ;return e.copy(it),e.multiply(this._sensorQ),this.config.YAW_ONLY&&(e.x=e.z=0,e.normalize()),this._out[0]=e.x,this._out[1]=e.y,this._out[2]=e.z,this._out[3]=e.w,this._out}},{key:"_onSensorError",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),t}();function st(){this.loadIcon_();var t=document.createElement("div");(s=t.style).position="fixed",s.top=0,s.right=0,s.bottom=0,s.left=0,s.backgroundColor="gray",s.fontFamily="sans-serif",s.zIndex=1e6;var e=document.createElement("img");e.src=this.icon,(s=e.style).marginLeft="25%",s.marginTop="25%",s.width="50%",t.appendChild(e);var n=document.createElement("div");(s=n.style).textAlign="center",s.fontSize="16px",s.lineHeight="24px",s.margin="24px 25%",s.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(n);var i=document.createElement("div");(s=i.style).backgroundColor="#CFD8DC",s.position="fixed",s.bottom=0,s.width="100%",s.height="48px",s.padding="14px 24px",s.boxSizing="border-box",s.color="#656A6B",t.appendChild(i);var r=document.createElement("div");r.style.float="left",r.innerHTML="No Cardboard viewer?";var s,o=document.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="_blank",(s=o.style).float="right",s.fontWeight=600,s.textTransform="uppercase",s.borderLeft="1px solid gray",s.paddingLeft="24px",s.textDecoration="none",s.color="#656A6B",i.appendChild(r),i.appendChild(o),this.overlay=t,this.text=n,this.hide()}st.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var e=this.overlay.querySelector("img").style;p()?(e.width="20%",e.marginLeft="40%",e.marginTop="3%"):(e.width="50%",e.marginLeft="25%",e.marginTop="25%")},st.prototype.hide=function(){this.overlay.style.display="none"},st.prototype.showTemporarily=function(t,e){this.show(e),this.timer=setTimeout(this.hide.bind(this),t)},st.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},st.prototype.update=function(){this.disableShowTemporarily(),!p()&&_()?this.show():this.hide()},st.prototype.loadIcon_=function(){this.icon="data:image/svg+xml,"+encodeURIComponent("<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>")};var ot="CardboardV1",at="WEBVR_CARDBOARD_VIEWER";function lt(t){try{this.selectedKey=localStorage.getItem(at)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=t||ot),this.dialog=this.createDialog_(q.Viewers),this.root=null,this.onChangeCallbacks_=[]}lt.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},lt.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},lt.prototype.getCurrentViewer=function(){return q.Viewers[this.selectedKey]},lt.prototype.getSelectedKey_=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},lt.prototype.onChange=function(t){this.onChangeCallbacks_.push(t)},lt.prototype.fireOnChange_=function(t){for(var e=0;e<this.onChangeCallbacks_.length;e++)this.onChangeCallbacks_[e](t)},lt.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&q.Viewers[this.selectedKey]){this.fireOnChange_(q.Viewers[this.selectedKey]);try{localStorage.setItem(at,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},lt.prototype.createDialog_=function(t){var e=document.createElement("div");e.classList.add("webvr-polyfill-viewer-selector"),e.style.display="none";var n=document.createElement("div");(r=n.style).position="fixed",r.left=0,r.top=0,r.width="100%",r.height="100%",r.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var i=document.createElement("div"),r=i.style;for(var s in r.boxSizing="border-box",r.position="fixed",r.top="24px",r.left="50%",r.marginLeft="-140px",r.width="280px",r.padding="24px",r.overflow="hidden",r.background="#fafafa",r.fontFamily="'Roboto', sans-serif",r.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer")),t)i.appendChild(this.createChoice_(s,t[s].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),e.appendChild(n),e.appendChild(i),e},lt.prototype.createH1_=function(t){var e=document.createElement("h1"),n=e.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",e.innerHTML=t,e},lt.prototype.createChoice_=function(t,e){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var i=document.createElement("input");i.style.fontSize="30px",i.setAttribute("id",t),i.setAttribute("type","radio"),i.setAttribute("value",t),i.setAttribute("name","field");var r=document.createElement("label");return r.style.marginLeft="4px",r.setAttribute("for",t),r.innerHTML=e,n.appendChild(i),n.appendChild(r),n},lt.prototype.createButton_=function(t,e){var n=document.createElement("button");n.innerHTML=t;var i=n.style;return i.float="right",i.textTransform="uppercase",i.color="#1094f7",i.fontSize="14px",i.letterSpacing=0,i.border=0,i.background="none",i.marginTop="16px",n.addEventListener("click",e),n},"undefined"!=typeof window?window:void 0!==n||"undefined"!=typeof self&&self;var ct,ht=(ct=function(t,e){return function(t,e){var n;n=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),s="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,o=function(){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),s?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",(function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}).bind(this)))}return i(t,[{key:"enable",value:function(){s?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){s?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=o},function(t,e,n){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=n()}(e={exports:{}}),e.exports}())&&ct.__esModule&&Object.prototype.hasOwnProperty.call(ct,"default")?ct.default:ct,ut=1e3,dt=[0,0,.5,1],pt=[.5,0,.5,1],ft=window.requestAnimationFrame,mt=window.cancelAnimationFrame;function gt(t){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return S("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function vt(t){var e=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=ut++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return S("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new gt({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,e&&_()&&(this.wakelock_=new ht)}vt.prototype.getFrameData=function(t){return w(t,this._getPose(),this)},vt.prototype.getPose=function(){return S("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},vt.prototype.resetPose=function(){return S("VRDisplay.prototype.resetPose"),this._resetPose()},vt.prototype.getImmediatePose=function(){return S("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},vt.prototype.requestAnimationFrame=function(t){return ft(t)},vt.prototype.cancelAnimationFrame=function(t){return mt(t)},vt.prototype.wrapForFullscreen=function(t){if(a())return t;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var e=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",e.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==t)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=t,this.originalParent_=t.parentElement,this.originalParent_||document.body.appendChild(t),!this.fullscreenWrapper_.parentElement){var n=this.fullscreenElement_.parentElement;n.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),n.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var i=this;return function(){if(i.fullscreenElement_){var t=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];i.fullscreenElement_.setAttribute("style",t.join("; ")+";")}}(),this.fullscreenWrapper_},vt.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var t=this.fullscreenElement_;this.fullscreenElementCachedStyle_?t.setAttribute("style",this.fullscreenElementCachedStyle_):t.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var e=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(t),this.originalParent_===e?e.insertBefore(t,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(t),e.removeChild(this.fullscreenWrapper_),t}},vt.prototype.requestPresent=function(t){var e=this.isPresenting,n=this;return t instanceof Array||(S("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise(function(i,r){if(n.capabilities.canPresent)if(0==t.length||t.length>n.capabilities.maxLayers)r(new Error("Invalid number of layers."));else{var s=t[0];if(s.source){var o=s.leftBounds||dt,c=s.rightBounds||pt;if(e){var h=n.layer_;h.source!==s.source&&(h.source=s.source);for(var u=0;u<4;u++)h.leftBounds[u]=o[u],h.rightBounds[u]=c[u];return n.wrapForFullscreen(n.layer_.source),n.updatePresent_(),void i()}if(n.layer_={predistorted:s.predistorted,source:s.source,leftBounds:o.slice(0),rightBounds:c.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var d=n.wrapForFullscreen(n.layer_.source);n.addFullscreenListeners_(d,function(){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n.isPresenting=d===t,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(t){console.error("screen.orientation.lock() failed due to",t.message)}),n.waitingForPresent_=!1,n.beginPresent_(),i()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.disableWakeLock(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()},function(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.disableWakeLock(),n.waitingForPresent_=!1,n.isPresenting=!1,r(new Error("Unable to present.")))}),function(t){if(l())return!1;if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(d)?(n.enableWakeLock(),n.waitingForPresent_=!0):(a()||l())&&(n.enableWakeLock(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),i())}n.waitingForPresent_||a()||(g(),r(new Error("Unable to present.")))}else i()}else r(new Error("VRDisplay is not capable of presenting."))})},vt.prototype.exitPresent=function(){var t=this.isPresenting,e=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(n,i){t?(!g()&&a()&&(e.endPresent_(),e.fireVRDisplayPresentChange_()),l()&&(e.removeFullscreenWrapper(),e.removeFullscreenListeners_(),e.endPresent_(),e.fireVRDisplayPresentChange_()),n()):i(new Error("Was not presenting to VRDisplay."))})},vt.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},vt.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(t)},vt.prototype.fireVRDisplayConnect_=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(t)},vt.prototype.addFullscreenListeners_=function(t,e,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=t,this.fullscreenChangeHandler_=e,this.fullscreenErrorHandler_=n,e&&(document.fullscreenEnabled?t.addEventListener("fullscreenchange",e,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",e,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",e,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",e,!1)),n&&(document.fullscreenEnabled?t.addEventListener("fullscreenerror",n,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",n,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",n,!1))},vt.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var t=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var e=this.fullscreenChangeHandler_;t.removeEventListener("fullscreenchange",e,!1),t.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),t.removeEventListener("msfullscreenchange",e,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;t.removeEventListener("fullscreenerror",n,!1),t.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),t.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},vt.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},vt.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},vt.prototype.beginPresent_=function(){},vt.prototype.endPresent_=function(){},vt.prototype.submitFrame=function(t){},vt.prototype.getEyeParameters=function(t){return null};var yt={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function _t(t){var e=b({},yt);t=b(e,t||{}),vt.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new gt({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new rt(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Q(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new q(this.dpdb_.getDeviceParams(),t.ADDITIONAL_VIEWERS),this.viewerSelector_=new lt(t.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new st),a()&&window.addEventListener("resize",this.onResize_.bind(this))}return(_t.prototype=Object.create(vt.prototype))._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},_t.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},_t.prototype._getFieldOfView=function(t){var e;if("left"==t)e=this.deviceInfo_.getFieldOfViewLeftEye();else{if("right"!=t)return console.error("Invalid eye provided: %s",t),null;e=this.deviceInfo_.getFieldOfViewRightEye()}return e},_t.prototype._getEyeOffset=function(t){var e;if("left"==t)e=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if("right"!=t)return console.error("Invalid eye provided: %s",t),null;e=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return e},_t.prototype.getEyeParameters=function(t){var e=this._getEyeOffset(t),n=this._getFieldOfView(t),i={offset:e,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(i,"fieldOfView",{enumerable:!0,get:function(){return S("VRFieldOfView","VRFrameData's projection matrices"),n}}),i},_t.prototype.onDeviceParamsUpdated_=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},_t.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},_t.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=f()*this.bufferScale_,t.canvas.height=m()*this.bufferScale_,this.cardboardUI_=new D(t)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new D(t)),this.distorter_=new L(t,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen((function(t){this.viewerSelector_.show(this.layer_.source.parentElement),t.stopPropagation(),t.preventDefault()}).bind(this),(function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}).bind(this)),this.rotateInstructions_&&(p()&&_()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},_t.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},_t.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},_t.prototype.submitFrame=function(t){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var e=this.layer_.source.getContext("webgl").canvas;e.width==this.lastWidth&&e.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=e.width,this.lastHeight=e.height,this.cardboardUI_.render()}},_t.prototype.onOrientationChange_=function(t){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},_t.prototype.onResize_=function(t){if(this.layer_){var e=this.layer_.source.getContext("webgl");e.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),x(e.canvas)}},_t.prototype.onViewerChanged_=function(t){this.deviceInfo_.setViewer(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},_t.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(t)},_t.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},_t.VRDisplay=vt,_t}()}(e={exports:{}}),e.exports}(),a=(e=o)&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,l={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function c(t){this.config=s(s({},l),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&i())&&(this.enable(),this.getVRDisplays().then(function(t){t&&t[0]&&t[0].fireVRDisplayConnect_&&t[0].fireVRDisplayConnect_()}))}c.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(i()){var t=new a({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},c.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,e=new this.native.VRFrameData,n=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(i){i instanceof t?n.call(this,i):(n.call(this,e),i.pose=e.pose,r(e.leftProjectionMatrix,i.leftProjectionMatrix),r(e.rightProjectionMatrix,i.rightProjectionMatrix),r(e.leftViewMatrix,i.leftViewMatrix),r(e.rightViewMatrix,i.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=a.VRDisplay,window.VRFrameData=a.VRFrameData},c.prototype.getVRDisplays=function(){var t=this;return this.hasNative?this.native.getVRDisplays.call(navigator).then(function(e){return e.length>0?e:t.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},c.version="0.10.10",c.VRFrameData=a.VRFrameData,c.VRDisplay=a.VRDisplay;var h=Object.freeze({default:c}),u=h&&c||h;return void 0!==n&&n.window&&(n.document||(n.document=n.window.document),n.navigator||(n.navigator=n.window.navigator)),u})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(t,e,n){var i=/\n/,r=/\s/;function s(t,e,n,i){var r=t.indexOf(e,n);return-1===r||r>i?i:r}function o(t){return r.test(t)}function a(t,e,n,i){return{start:e,end:e+Math.min(i,n-e)}}e.exports=function(t,n){return e.exports.lines(t,n).map(function(e){return t.substring(e.start,e.end)}).join("\n")},e.exports.lines=function(t,e){if(0===(e=e||{}).width&&"nowrap"!==e.mode)return[];t=t||"";var n="number"==typeof e.width?e.width:Number.MAX_VALUE,r=Math.max(0,e.start||0),l="number"==typeof e.end?e.end:t.length,c=e.mode,h=e.measure||a;return"pre"===c?function(t,e,n,r,s){for(var o=[],a=n,l=n;l<r&&l<e.length;l++){var c=e.charAt(l),h=i.test(c);if(h||l===r-1){var u=t(e,a,h?l:l+1,s);o.push(u),a=l+1}}return o}(h,t,r,l,n):function(t,e,n,i,r,a){var l=[],c=r;for("nowrap"===a&&(c=Number.MAX_VALUE);n<i&&n<e.length;){for(var h=s(e,"\n",n,i);n<h&&o(e.charAt(n));)n++;var u=t(e,n,h,c),d=n+(u.end-u.start),p=d+"\n".length;if(d<h){for(;d>n&&!o(e.charAt(d));)d--;if(d===n)p>n+"\n".length&&p--,d=p;else for(p=d;d>n&&o(e.charAt(d-"\n".length));)d--}if(d>=n){var f=t(e,n,d,c);l.push(f)}n=p}return l}(h,t,r,l,n,c)}},{}],48:[function(t,n,i){"use strict";var r=t("global/window"),s=t("is-function"),o=t("parse-headers"),a=t("xtend");function l(t,e,n){var i=t;return s(e)?(n=e,"string"==typeof t&&(i={uri:t})):i=a(e,{uri:t}),i.callback=n,i}function c(t,e,n){return h(e=l(t,e,n))}function h(t){if(void 0===t.callback)throw new Error("callback argument missing");var n=!1,i=function(e,i,r){n||(n=!0,t.callback(e,i,r))};function r(){var t=void 0;if(t=u.response?u.response:u.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;if(""===t.responseType&&(!t.responseXML||"parsererror"!==t.responseXML.documentElement.nodeName))return t.responseXML}catch(e){}return null}(u),y)try{t=JSON.parse(t)}catch(e){}return t}function s(t){return clearTimeout(d),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,i(t,_)}function a(){if(!h){var e;clearTimeout(d);var n=_,s=null;return 0!==(e=t.useXDR&&void 0===u.status?200:1223===u.status?204:u.status)?(n={body:r(),statusCode:e,method:f,headers:{},url:p,rawRequest:u},u.getAllResponseHeaders&&(n.headers=o(u.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),i(s,n,n.body)}}var l,h,u=t.xhr||null;u||(u=t.cors||t.useXDR?new c.XDomainRequest:new c.XMLHttpRequest);var d,p=u.url=t.uri||t.url,f=u.method=t.method||"GET",m=t.body||t.data,g=u.headers=t.headers||{},v=!!t.sync,y=!1,_={body:void 0,headers:{},statusCode:0,method:f,url:p,rawRequest:u};if("json"in t&&!1!==t.json&&(y=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),m=JSON.stringify(!0===t.json?m:t.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(a,0)},u.onload=a,u.onerror=s,u.onprogress=function(){},u.onabort=function(){h=!0},u.ontimeout=s,u.open(f,p,!v,t.username,t.password),v||(u.withCredentials=!!t.withCredentials),!v&&t.timeout>0&&(d=setTimeout(function(){if(!h){h=!0,u.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",s(t)}},t.timeout)),u.setRequestHeader)for(l in g)g.hasOwnProperty(l)&&u.setRequestHeader(l,g[l]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(u.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(u),u.send(m||null),u}n.exports=c,c.XMLHttpRequest=r.XMLHttpRequest||function(){},c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:r.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){c["delete"===t?"del":t]=function(e,n,i){return(n=l(e,n,i)).method=t.toUpperCase(),h(n)}})},{"global/window":15,"is-function":19,"parse-headers":30,xtend:50}],49:[function(t,e,n){e.exports=void 0!==self.DOMParser?function(t){return(new self.DOMParser).parseFromString(t,"application/xml")}:void 0!==self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(t){var e=new self.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}:function(t){var e=document.createElement("div");return e.innerHTML=t,e}},{}],50:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t};var i=Object.prototype.hasOwnProperty},{}],51:[function(t,e,n){e.exports={name:"aframe",version:"0.9.2",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe-master.js.map > dist/aframe-master.js","dist:min":"npm run browserify -s -- --debug -p [minifyify --map aframe-master.min.js.map --output dist/aframe-master.min.js.map] -o dist/aframe-master.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prepush:"node scripts/testOnlyCheck.js",prerelease:"node scripts/release.js 0.9.1 0.9.2",start:"npm run dev","start:https":"cross-env SSL=true npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",files:["dist/*","docs/**/*","src/**/*","vendor/**/*"],dependencies:{"browserify-css":"^0.8.4","custom-event-polyfill":"^1.0.6",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7f3744be954574caf3072a5fd260ca90",envify:"^3.4.1","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","style-attr":"^1.0.2","super-animejs":"^3.0.0","super-three":"^0.102.2","three-bmfont-text":"^2.1.0","webvr-polyfill":"^0.10.10"},devDependencies:{browserify:"^13.1.0","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.0.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"github:sukima/markserv#feature/fix-broken-websoketio-link",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],52:[function(t,e,n){var i=t("super-animejs"),r=t("../core/component").components,s=t("../core/component").registerComponent,o=t("../lib/three"),a=t("../utils"),l=new o.Color,c=new o.Color,h=a.entity.getComponentProperty,u=a.entity.setComponentProperty,d={},p="color",f="components",m="object3D";function g(t){t.x=o.Math.degToRad(t.x),t.y=o.Math.degToRad(t.y),t.z=o.Math.degToRad(t.z)}function v(t,e,n){var i;for(i=0;i<e.length;i++)t.addEventListener(e[i],n)}function y(t,e,n){var i;for(i=0;i<e.length;i++)t.removeEventListener(e[i],n)}function _(t,e){var n,i,r;for(i=x(e),r=t,n=0;n<i.length;n++)r=r[i[n]];if(void 0===r)throw console.log(t),new Error("[animation] property ("+e+") could not be found");return r}function b(t,e,n,i){var r,s,a,l;for(e.startsWith("object3D.rotation")&&(n=o.Math.degToRad(n)),s=x(e),l=t,r=0;r<s.length-1;r++)l=l[s[r]];a=s[s.length-1],i!==p?l[a]=n:"r"in l[a]?(l[a].r=n.r,l[a].g=n.g,l[a].b=n.b):(l[a].x=n.r,l[a].y=n.g,l[a].z=n.b)}function x(t){return t in d?d[t]:(d[t]=t.split("."),d[t])}function w(t){return t.isRawProperty||t.property.startsWith(f)||t.property.startsWith(m)}e.exports.Component=s("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(t){return!0===t||"true"===t||!1!==t&&"false"!==t&&parseInt(t,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var t=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){t.animationIsPlaying=!1,t.el.emit("animationcomplete",t.eventDetail,!1),t.id&&t.el.emit("animationcomplete__"+t.id,t.eventDetail,!1)}}},update:function(t){var e=this.config,n=this.data;this.animationIsPlaying=!1,this.data.enabled&&n.property&&(e.autoplay=!1,e.direction=n.dir,e.duration=n.dur,e.easing=n.easing,e.elasticity=n.elasticity,e.loop=n.loop,e.round=n.round,this.createAndStartAnimation())},tick:function(t,e){this.animationIsPlaying&&(this.time+=e,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var t=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=i(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!t.autoplay||t.startEvents&&t.startEvents.length||(t.delay?setTimeout(this.beginAnimation,t.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=i(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var t,e,n,i=this.config,r=this.data,s=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(e in t=""===r.from?_(s,r.property):r.from,this.setColorConfig(t,r.to),t=this.fromColor,n=this.toColor,this.targetsArray.length=0,this.targetsArray.push(t),i.targets=this.targetsArray,n)i[e]=n[e];var o;i.update=(o={},function(t){var e;(e=t.animatables[0].target).r===o.r&&e.g===o.g&&e.b===o.b||b(s,r.property,e,r.type)})}},updateConfigForDefault:function(){var t,e,n,i,r=this.config,s=this.data,o=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(t=""===s.from?w(s)?_(o,s.property):h(o,s.property):s.from,n=s.to,isNaN(t||n)?(t=t?t.toString():t,n=n?n.toString():n):(t=parseFloat(t),n=parseFloat(n)),(e="true"===s.to||"false"===s.to||!0===s.to||!1===s.to)&&(t="true"===s.from||!0===s.from?1:0,n="true"===s.to||!0===s.to?1:0),this.targets.aframeProperty=t,r.targets=this.targets,r.aframeProperty=n,r.update=function(t){var n;(n=t.animatables[0].target.aframeProperty)!==i&&(i=n,e&&(n=n>=1),w(s)?b(o,s.property,n,s.type):u(o,s.property,n))})},updateConfigForVector:function(){var t,e,n,i,r=this.config,s=this.data,o=this.el;for(t in e=""!==s.from?a.coordinates.parse(s.from):h(o,s.property),n=a.coordinates.parse(s.to),"rotation"===s.property&&(g(e),g(n)),this.targetsArray.length=0,this.targetsArray.push(e),r.targets=this.targetsArray,n)r[t]=n[t];r.update="position"!==s.property&&"rotation"!==s.property&&"scale"!==s.property?function(){var t={};return function(e){var n=e.animatables[0].target;n.x===t.x&&n.y===t.y&&n.z===t.z||(t.x=n.x,t.y=n.y,t.z=n.z,u(o,s.property,n))}}():(i={},function(t){var e=t.animatables[0].target;"scale"===s.property&&(e.x=Math.max(1e-4,e.x),e.y=Math.max(1e-4,e.y),e.z=Math.max(1e-4,e.z)),e.x===i.x&&e.y===i.y&&e.z===i.z||(i.x=e.x,i.y=e.y,i.z=e.z,o.object3D[s.property].set(e.x,e.y,e.z))})},updateConfig:function(){var t,e,n,i,s,o;e=this.el,o=(s=this.data.property.split("."))[1],t=(n=e.components[i=s[0]]||r[i])?o&&!n.schema[o]?null:o?n.schema[o].type:n.schema.type:null,w(this.data)&&this.data.type===p?this.updateConfigForRawColor():"vec2"===t||"vec3"===t||"vec4"===t?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(t){var e,n=this.data,r=this.el,s=this;return""===n.from&&!!n.property.startsWith(f)&&(e=x(n.property)[1],!r.components[e]&&(r.addEventListener("componentinitialized",function n(o){o.detail.name===e&&(t(),s.animation=i(s.config),r.removeEventListener("componentinitialized",n))}),!0))},stopRelatedAnimations:function(){var t,e;for(e in this.el.components)t=this.el.components[e],e!==this.attrName&&"animation"===t.name&&t.animationIsPlaying&&t.data.property===this.data.property&&(t.animationIsPlaying=!1)},addEventListeners:function(){var t=this.data,e=this.el;v(e,t.startEvents,this.onStartEvent),v(e,t.pauseEvents,this.pauseAnimation),v(e,t.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var t=this.data,e=this.el;y(e,t.startEvents,this.onStartEvent),y(e,t.pauseEvents,this.pauseAnimation),y(e,t.resumeEvents,this.resumeAnimation)},setColorConfig:function(t,e){l.set(t),c.set(e),e=this.toColor,(t=this.fromColor).r=l.r,t.g=l.g,t.b=l.b,e.r=c.r,e.g=c.g,e.b=c.b}})},{"../core/component":103,"../lib/three":151,"../utils":176,"super-animejs":35}],53:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../lib/three");e.exports.Component=i("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var t,e=this.el;t=this.camera=new r.PerspectiveCamera,e.setObject3D("camera",t)},update:function(t){var e=this.data,n=this.camera;n.aspect=e.aspect||window.innerWidth/window.innerHeight,n.far=e.far,n.fov=e.fov,n.near=e.near,n.zoom=e.zoom,n.updateProjectionMatrix(),this.updateActiveCamera(t),this.updateSpectatorCamera(t)},updateActiveCamera:function(t){var e=this.data,n=this.el,i=this.system;t&&t.active===e.active||e.spectator||(e.active&&i.activeCameraEl!==n?i.setActiveCamera(n):e.active||i.activeCameraEl!==n||i.disableActiveCamera())},updateSpectatorCamera:function(t){var e=this.data,n=this.el,i=this.system;t&&t.spectator===e.spectator||(e.spectator&&i.spectatorCameraEl!==n?i.setSpectatorCamera(n):e.spectator||i.spectatorCameraEl!==n||i.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},{"../core/component":103,"../lib/three":151}],54:[function(t,e,n){var i,r,s,o,a=t("../core/component").registerComponent,l=t("../utils/"),c=l.bind,h={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]};e.exports.Component=a("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:l.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){var t=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.updateCanvasBounds=l.debounce(function(){t.canvasBounds=t.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=c(this.onCursorDown,this),this.onCursorUp=c(this.onCursorUp,this),this.onIntersection=c(this.onIntersection,this),this.onIntersectionCleared=c(this.onIntersectionCleared,this),this.onMouseMove=c(this.onMouseMove,this)},update:function(t){this.data.rayOrigin!==t.rayOrigin&&this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var t=this.el;t.removeState("cursor-hovering"),t.removeState("cursor-fusing"),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState("cursor-hovered"),this.removeEventListeners()},addEventListeners:function(){var t,e=this.data,n=this.el,i=this;function r(){t=n.sceneEl.canvas,e.downEvents.length||e.upEvents.length||(h.DOWN.forEach(function(e){t.addEventListener(e,i.onCursorDown)}),h.UP.forEach(function(e){t.addEventListener(e,i.onCursorUp)}))}(t=n.sceneEl.canvas)?r():n.sceneEl.addEventListener("render-target-loaded",r),e.downEvents.forEach(function(t){n.addEventListener(t,i.onCursorDown)}),e.upEvents.forEach(function(t){n.addEventListener(t,i.onCursorUp)}),n.addEventListener("raycaster-intersection",this.onIntersection),n.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),n.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var t,e=this.data,n=this.el,i=this;!(t=n.sceneEl.canvas)||e.downEvents.length||e.upEvents.length||(h.DOWN.forEach(function(e){t.removeEventListener(e,i.onCursorDown)}),h.UP.forEach(function(e){t.removeEventListener(e,i.onCursorUp)})),e.downEvents.forEach(function(t){n.removeEventListener(t,i.onCursorDown)}),e.upEvents.forEach(function(t){n.removeEventListener(t,i.onCursorUp)}),n.removeEventListener("raycaster-intersection",this.onIntersection),n.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("touchstart",this.onMouseMove),t.removeEventListener("touchmove",this.onMouseMove),n.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var t,e=this.el;(t=e.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("touchmove",this.onMouseMove),e.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(t.addEventListener("mousemove",this.onMouseMove,!1),t.addEventListener("touchmove",this.onMouseMove,!1),e.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:(i=new THREE.Vector3,r=new THREE.Vector2,s=new THREE.Vector3,o={origin:s,direction:i},function(t){var e,n,a=this.canvasBounds,l=this.el.sceneEl.camera;l.parent.updateMatrixWorld(),n=(e="touchmove"===t.type||"touchstart"===t.type?t.touches.item(0):t).clientY-a.top,r.x=(e.clientX-a.left)/a.width*2-1,r.y=-n/a.height*2+1,s.setFromMatrixPosition(l.matrixWorld),i.set(r.x,r.y,.5).unproject(l).sub(s).normalize(),this.el.setAttribute("raycaster",o),"touchmove"===t.type&&t.preventDefault()}),onCursorDown:function(t){"mouse"===this.data.rayOrigin&&"touchstart"===t.type&&(this.onMouseMove(t),this.el.components.raycaster.checkIntersections(),t.preventDefault()),this.twoWayEmit("mousedown"),this.cursorDownEl=this.intersectedEl},onCursorUp:function(t){var e=this.data;this.twoWayEmit("mouseup"),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit("mouseup",this.intersectedEventDetail)),e.fuse&&"mouse"!==e.rayOrigin||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit("click"),this.cursorDownEl=null,"touchend"===t.type&&t.preventDefault()},onIntersection:function(t){var e,n,i,r;r=t.detail.intersections[n=t.detail.els[0]===this.el?1:0],(i=t.detail.els[n])&&this.intersectedEl!==i&&(this.intersectedEl&&(e=this.el.components.raycaster.getIntersection(this.intersectedEl))&&e.distance<=r.distance||(this.clearCurrentIntersection(!0),this.setIntersection(i,r)))},onIntersectionCleared:function(t){-1!==t.detail.clearedEls.indexOf(this.intersectedEl)&&this.clearCurrentIntersection()},setIntersection:function(t,e){var n=this.el,i=this.data,r=this;this.intersectedEl!==t&&(this.intersectedEl=t,n.addState("cursor-hovering"),t.addState("cursor-hovered"),this.twoWayEmit("mouseenter"),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.add("a-mouse-cursor-hover"),0!==i.fuseTimeout&&i.fuse&&(n.addState("cursor-fusing"),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout(function(){n.removeState("cursor-fusing"),r.twoWayEmit("click")},i.fuseTimeout)))},clearCurrentIntersection:function(t){var e,n,i=this.el;this.intersectedEl&&(this.intersectedEl.removeState("cursor-hovered"),i.removeState("cursor-hovering"),i.removeState("cursor-fusing"),this.twoWayEmit("mouseleave"),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.remove("a-mouse-cursor-hover"),this.intersectedEl=null,clearTimeout(this.fuseTimeout),!0!==t&&0!==(n=this.el.components.raycaster.intersections).length&&(e=n[n[0].object.el===i?1:0])&&this.setIntersection(e.object.el,e))},twoWayEmit:function(t){var e,n=this.el,i=this.intersectedEl;e=this.el.components.raycaster.getIntersection(i),this.eventDetail.intersectedEl=i,this.eventDetail.intersection=e,n.emit(t,this.eventDetail),i&&(this.intersectedEventDetail.intersection=e,i.emit(t,this.intersectedEventDetail))}})},{"../core/component":103,"../utils/":176}],55:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),s=t("../utils/tracked-controls"),o=s.checkControllerPresentAndSetup,a=s.emitIfAxesChanged,l=s.onButtonEvent;e.exports.Component=i("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){o(this,"Daydream Controller",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{armModel:t.armModel,hand:t.hand,idPrefix:"Daydream Controller",orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.obj",mtl:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).menu=n.getObjectByName("AppButton_AppButton_Cylinder.004"),e.system=n.getObjectByName("HomeButton_HomeButton_Cylinder.005"),e.trackpad=n.getObjectByName("TouchPad_TouchPad_Cylinder.003"),n.position.set(0,0,-.04))},onAxisMoved:function(t){a(this,this.mapping.axes,t)},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes;if(n&&n[t]){var i;switch(e){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}n[t].material.color.set(i)}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],56:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),s=t("../utils/tracked-controls"),o=s.checkControllerPresentAndSetup,a=s.emitIfAxesChanged,l=s.onButtonEvent;e.exports.Component=i("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){o(this,"Gear VR",this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:"Gear VR",orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.obj",mtl:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).trigger=n.children[2],e.trackpad=n.children[1])},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},onAxisMoved:function(t){a(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes;if(n&&n[t]){var i;switch(e){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}n[t].material.color.set(i)}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],57:[function(t,e,n){var i=t("../core/geometry").geometries,r=t("../core/geometry").geometryNames,s=t("../core/component").registerComponent,o=t("../lib/three"),a=new o.Geometry;e.exports.Component=s("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:r,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(t){var e,n=this.data,i=this.el,r=this.system;this.geometry&&(r.unuseGeometry(t),this.geometry=null),this.geometry=r.getOrCreateGeometry(n),(e=i.getObject3D("mesh"))?e.geometry=this.geometry:((e=new o.Mesh).geometry=this.geometry,i.setObject3D("mesh",e))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=a,this.geometry=null},updateSchema:function(t){var e=this.oldData&&this.oldData.primitive,n=t.primitive,r=i[n]&&i[n].schema;if(!r)throw new Error("Unknown geometry schema `"+n+"`");e&&e===n||this.extendSchema(r)}})},{"../core/component":103,"../core/geometry":104,"../lib/three":151}],58:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../lib/three"),s=t("../utils/").debug("components:gltf-model:warn");e.exports.Component=i("gltf-model",{schema:{type:"model"},init:function(){var t=this.system.getDRACOLoader();this.model=null,this.loader=new r.GLTFLoader,t&&this.loader.setDRACOLoader(t)},update:function(){var t=this,e=this.el,n=this.data;n&&(this.remove(),this.loader.load(n,function(n){t.model=n.scene||n.scenes[0],t.model.animations=n.animations,e.setObject3D("mesh",t.model),e.emit("model-loaded",{format:"gltf",model:t.model})},void 0,function(t){s(t&&t.message?t.message:"Failed to load glTF model"),e.emit("model-error",{format:"gltf",src:n})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":103,"../lib/three":151,"../utils/":176}],59:[function(t,e,n){var i=t("../core/component").registerComponent,r={left:"https://cdn.aframe.io/controllers/hands/leftHand.glb",right:"https://cdn.aframe.io/controllers/hands/rightHand.glb"},s={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},o={};function a(t,e){var n;if(t)return"grip"===(n=o[t])?n+(e?"close":"open"):"point"===n||"thumb"===n?n+(e?"up":"down"):"pointing"===n||"pistol"===n?n+(e?"start":"end"):void 0}o[s.fist]="grip",o[s.thumbUp]="pistol",o[s.point]="pointing",o[s.thumb]="thumb",e.exports.Component=i("hand-controls",{schema:{default:"left"},init:function(){var t=this,e=this.el;this.gesture=s.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){t.handleButton("grip","down")},this.onGripUp=function(){t.handleButton("grip","up")},this.onTrackpadDown=function(){t.handleButton("trackpad","down")},this.onTrackpadUp=function(){t.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){t.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){t.handleButton("trackpad","touchend")},this.onTriggerDown=function(){t.handleButton("trigger","down")},this.onTriggerUp=function(){t.handleButton("trigger","up")},this.onTriggerTouchStart=function(){t.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){t.handleButton("trigger","touchend")},this.onGripTouchStart=function(){t.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){t.handleButton("grip","touchend")},this.onThumbstickDown=function(){t.handleButton("thumbstick","down")},this.onThumbstickUp=function(){t.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){t.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){t.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){t.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){t.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){t.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){t.handleButton("surface","touchend")},e.addEventListener("controllerconnected",this.onControllerConnected),e.addEventListener("controllerdisconnected",this.onControllerDisconnected),e.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(t,e){var n=this.el.getObject3D("mesh");n&&n.mixer&&n.mixer.update(e/1e3)},addEventListeners:function(){var t=this.el;t.addEventListener("gripdown",this.onGripDown),t.addEventListener("gripup",this.onGripUp),t.addEventListener("trackpaddown",this.onTrackpadDown),t.addEventListener("trackpadup",this.onTrackpadUp),t.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),t.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),t.addEventListener("triggerdown",this.onTriggerDown),t.addEventListener("triggerup",this.onTriggerUp),t.addEventListener("triggertouchstart",this.onTriggerTouchStart),t.addEventListener("triggertouchend",this.onTriggerTouchEnd),t.addEventListener("griptouchstart",this.onGripTouchStart),t.addEventListener("griptouchend",this.onGripTouchEnd),t.addEventListener("thumbstickdown",this.onThumbstickDown),t.addEventListener("thumbstickup",this.onThumbstickUp),t.addEventListener("abuttontouchstart",this.onAorXTouchStart),t.addEventListener("abuttontouchend",this.onAorXTouchEnd),t.addEventListener("bbuttontouchstart",this.onBorYTouchStart),t.addEventListener("bbuttontouchend",this.onBorYTouchEnd),t.addEventListener("xbuttontouchstart",this.onAorXTouchStart),t.addEventListener("xbuttontouchend",this.onAorXTouchEnd),t.addEventListener("ybuttontouchstart",this.onBorYTouchStart),t.addEventListener("ybuttontouchend",this.onBorYTouchEnd),t.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),t.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var t=this.el;t.removeEventListener("gripdown",this.onGripDown),t.removeEventListener("gripup",this.onGripUp),t.removeEventListener("trackpaddown",this.onTrackpadDown),t.removeEventListener("trackpadup",this.onTrackpadUp),t.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),t.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),t.removeEventListener("triggerdown",this.onTriggerDown),t.removeEventListener("triggerup",this.onTriggerUp),t.removeEventListener("triggertouchstart",this.onTriggerTouchStart),t.removeEventListener("triggertouchend",this.onTriggerTouchEnd),t.removeEventListener("griptouchstart",this.onGripTouchStart),t.removeEventListener("griptouchend",this.onGripTouchEnd),t.removeEventListener("thumbstickdown",this.onThumbstickDown),t.removeEventListener("thumbstickup",this.onThumbstickUp),t.removeEventListener("abuttontouchstart",this.onAorXTouchStart),t.removeEventListener("abuttontouchend",this.onAorXTouchEnd),t.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),t.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),t.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),t.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),t.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),t.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),t.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),t.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(t){var e,n=this.el,i=this.data,s=this;e={hand:i,model:!1,orientationOffset:{x:0,y:0,z:"left"===i?90:-90}},i!==t&&this.loader.load(r[i],function(t){var i=t.scene.children[0];i.mixer=new THREE.AnimationMixer(i),s.clips=t.animations,n.setObject3D("mesh",i),i.position.set(0,0,0),i.rotation.set(0,0,0),n.setAttribute("vive-controls",e),n.setAttribute("oculus-touch-controls",e),n.setAttribute("windows-motion-controls",e)})},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(t,e){var n,i="down"===e,r="touchstart"===e;if(0===e.indexOf("touch")){if(r===this.touchedButtons[t])return;this.touchedButtons[t]=r}else{if(i===this.pressedButtons[t])return;this.pressedButtons[t]=i}n=this.gesture,this.gesture=this.determineGesture(),this.gesture!==n&&(this.animateGesture(this.gesture,n),this.emitGestureEvents(this.gesture,n))},determineGesture:function(){var t,e,n,i=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,o=this.pressedButtons.trackpad||this.touchedButtons.trackpad,a=this.pressedButtons.trigger||this.touchedButtons.trigger,l=this.touchedButtons.AorX||this.touchedButtons.BorY;return(n=(e=this.el.components["tracked-controls"])&&e.controller&&e.controller.id)&&0===n.indexOf("OpenVR ")?i||a?t=s.fist:o&&(t=s.point):i?t=r||l||o?a?s.fist:s.point:a?s.thumbUp:s.pointThumb:a&&(t=s.hold),t},getClip:function(t){var e,n;for(n=0;n<this.clips.length;n++)if((e=this.clips[n]).name===t)return e},animateGesture:function(t,e){t?this.playAnimation(t||s.open,e,!1):this.playAnimation(e,e,!0)},emitGestureEvents:function(t,e){var n,i=this.el;e!==t&&((n=a(e,!1))&&i.emit(n),(n=a(t,!0))&&i.emit(n))},playAnimation:function(t,e,n){var i,r,s,o=this.el.getObject3D("mesh");if(o){if(o.mixer.stopAllAction(),i=this.getClip(t),(s=o.mixer.clipAction(i)).clampWhenFinished=!0,s.loop=THREE.LoopRepeat,s.repetitions=0,s.timeScale=n?-1:1,s.time=n?i.duration:0,s.weight=1,!e||t===e)return o.mixer.stopAllAction(),void s.play();i=this.getClip(e),(r=o.mixer.clipAction(i)).weight=.15,r.play(),s.play(),r.crossFadeTo(s,.15,!0)}}})},{"../core/component":103}],60:[function(t,e,n){t("./animation"),t("./camera"),t("./cursor"),t("./daydream-controls"),t("./gearvr-controls"),t("./geometry"),t("./gltf-model"),t("./hand-controls"),t("./laser-controls"),t("./light"),t("./line"),t("./link"),t("./look-controls"),t("./material"),t("./obj-model"),t("./oculus-go-controls"),t("./oculus-touch-controls"),t("./position"),t("./raycaster"),t("./rotation"),t("./scale"),t("./shadow"),t("./sound"),t("./text"),t("./tracked-controls"),t("./tracked-controls-webvr"),t("./tracked-controls-webxr"),t("./visible"),t("./vive-controls"),t("./vive-focus-controls"),t("./wasd-controls"),t("./windows-motion-controls"),t("./scene/background"),t("./scene/debug"),t("./scene/embedded"),t("./scene/inspector"),t("./scene/fog"),t("./scene/keyboard-shortcuts"),t("./scene/pool"),t("./scene/screenshot"),t("./scene/stats"),t("./scene/vr-mode-ui")},{"./animation":52,"./camera":53,"./cursor":54,"./daydream-controls":55,"./gearvr-controls":56,"./geometry":57,"./gltf-model":58,"./hand-controls":59,"./laser-controls":61,"./light":62,"./line":63,"./link":64,"./look-controls":65,"./material":66,"./obj-model":67,"./oculus-go-controls":68,"./oculus-touch-controls":69,"./position":70,"./raycaster":71,"./rotation":72,"./scale":73,"./scene/background":74,"./scene/debug":75,"./scene/embedded":76,"./scene/fog":77,"./scene/inspector":78,"./scene/keyboard-shortcuts":79,"./scene/pool":80,"./scene/screenshot":81,"./scene/stats":82,"./scene/vr-mode-ui":83,"./shadow":84,"./sound":85,"./text":86,"./tracked-controls":89,"./tracked-controls-webvr":87,"./tracked-controls-webxr":88,"./visible":90,"./vive-controls":91,"./vive-focus-controls":92,"./wasd-controls":93,"./windows-motion-controls":94}],61:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/");i("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var t=this.config,e=this.el,n=this,i={hand:this.data.hand,model:this.data.model&&!this.el.sceneEl.hasWebXR};function s(i){var s=t[i.detail.name];if(s){var o=r.extend({showLine:!0},s.raycaster||{});i.detail.rayOrigin&&(o.origin=i.detail.rayOrigin.origin,o.direction=i.detail.rayOrigin.direction,o.showLine=!0),i.detail.rayOrigin||!n.modelReady?e.setAttribute("raycaster",o):e.setAttribute("raycaster","showLine",!0),e.setAttribute("cursor",r.extend({fuse:!1},s.cursor))}}e.setAttribute("daydream-controls",i),e.setAttribute("gearvr-controls",i),e.setAttribute("oculus-go-controls",i),e.setAttribute("oculus-touch-controls",i),e.setAttribute("vive-controls",i),e.setAttribute("vive-focus-controls",i),e.setAttribute("windows-motion-controls",i),this.data.model&&this.el.sceneEl.hasWebXR&&this.initDefaultModel(),e.addEventListener("controllerconnected",s),e.addEventListener("controllerdisconnected",function(){e.setAttribute("raycaster","showLine",!1)}),e.addEventListener("controllermodelready",function(t){s(t),n.modelReady=!0})},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"gearvr-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}},initDefaultModel:function(){var t=this.modelEl=document.createElement("a-entity");t.setAttribute("geometry",{primitive:"sphere",radius:.03}),t.setAttribute("material",{color:this.data.color}),this.el.appendChild(t)}})},{"../core/component":103,"../utils/":176}],62:[function(t,e,n){var i=t("../utils/bind"),r=t("../utils").diff,s=t("../utils/debug"),o=t("../core/component").registerComponent,a=t("../lib/three"),l=a.Math.degToRad,c=s("components:light:warn");e.exports.Component=o("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var t=this.el;this.light=null,this.defaultTarget=null,this.rendererSystem=this.el.sceneEl.systems.renderer,this.system.registerLight(t)},update:function(t){var e=this.data,n=r(e,t),s=this.light,o=this.rendererSystem,a=this;if(!s||"type"in n)this.setLight(this.data),this.updateShadow();else{var c=!1;Object.keys(n).forEach(function(t){var n=e[t];switch(t){case"color":s.color.set(n),o.applyColorCorrection(s.color);break;case"groundColor":s.groundColor.set(n),o.applyColorCorrection(s.groundColor);break;case"angle":s.angle=l(n);break;case"target":null===n?"spot"!==e.type&&"directional"!==e.type||(s.target=a.defaultTarget):n.hasLoaded?a.onSetTarget(n,s):n.addEventListener("loaded",i(a.onSetTarget,a,n,s));break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":c||(a.updateShadow(),c=!0);break;default:s[t]=n}})}},setLight:function(t){var e=this.el,n=this.getLight(t);n&&(this.light&&e.removeObject3D("light"),this.light=n,this.light.el=e,e.setObject3D("light",this.light),"spot"!==t.type&&"directional"!==t.type&&"hemisphere"!==t.type||e.getObject3D("light").translateY(-1),"spot"===t.type&&(e.setObject3D("light-target",this.defaultTarget),e.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var t=this.el,e=this.data,n=this.light;n.castShadow=e.castShadow;var i=t.getObject3D("cameraHelper");if(e.shadowCameraVisible&&!i?t.setObject3D("cameraHelper",new a.CameraHelper(n.shadow.camera)):!e.shadowCameraVisible&&i&&t.removeObject3D("cameraHelper"),!e.castShadow)return n;n.shadow.bias=e.shadowBias,n.shadow.radius=e.shadowRadius,n.shadow.mapSize.height=e.shadowMapHeight,n.shadow.mapSize.width=e.shadowMapWidth,n.shadow.camera.near=e.shadowCameraNear,n.shadow.camera.far=e.shadowCameraFar,n.shadow.camera instanceof a.OrthographicCamera?(n.shadow.camera.top=e.shadowCameraTop,n.shadow.camera.right=e.shadowCameraRight,n.shadow.camera.bottom=e.shadowCameraBottom,n.shadow.camera.left=e.shadowCameraLeft):n.shadow.camera.fov=e.shadowCameraFov,n.shadow.camera.updateProjectionMatrix(),i&&i.update()},getLight:function(t){var e=t.angle,n=new a.Color(t.color);this.rendererSystem.applyColorCorrection(n),n=n.getHex();var r=t.decay,s=t.distance,o=new a.Color(t.groundColor);this.rendererSystem.applyColorCorrection(o),o=o.getHex();var h=t.intensity,u=t.type,d=t.target,p=null;switch(u.toLowerCase()){case"ambient":return new a.AmbientLight(n,h);case"directional":return p=new a.DirectionalLight(n,h),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",i(this.onSetTarget,this,d,p))),p;case"hemisphere":return new a.HemisphereLight(n,o,h);case"point":return new a.PointLight(n,h,s,r);case"spot":return p=new a.SpotLight(n,h,s,l(e),t.penumbra,r),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",i(this.onSetTarget,this,d,p))),p;default:c("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",u)}},onSetTarget:function(t,e){e.target=t.object3D},remove:function(){var t=this.el;t.removeObject3D("light"),t.getObject3D("cameraHelper")&&t.removeObject3D("cameraHelper")}})},{"../core/component":103,"../lib/three":151,"../utils":176,"../utils/bind":170,"../utils/debug":172}],63:[function(t,e,n){var i=t("../core/component").registerComponent;function r(t,e){return!(!t||!e)&&t.x===e.x&&t.y===e.y&&t.z===e.z}e.exports.Component=i("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var t,e,n=this.data;this.rendererSystem=this.el.sceneEl.systems.renderer,e=this.material=new THREE.LineBasicMaterial({color:n.color,opacity:n.opacity,transparent:n.opacity<1,visible:n.visible}),(t=this.geometry=new THREE.BufferGeometry).addAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.rendererSystem.applyColorCorrection(e.color),this.line=new THREE.Line(t,e),this.el.setObject3D(this.attrName,this.line)},update:function(t){var e=this.data,n=this.geometry,i=!1,s=this.material,o=n.attributes.position.array;r(e.start,t.start)||(o[0]=e.start.x,o[1]=e.start.y,o[2]=e.start.z,i=!0),r(e.end,t.end)||(o[3]=e.end.x,o[4]=e.end.y,o[5]=e.end.z,i=!0),i&&(n.attributes.position.needsUpdate=!0,n.computeBoundingSphere()),s.color.setStyle(e.color),this.rendererSystem.applyColorCorrection(s.color),s.opacity=e.opacity,s.transparent=e.opacity<1,s.visible=e.visible},remove:function(){this.el.removeObject3D("line",this.line)}})},{"../core/component":103}],64:[function(t,e,n){var i,r,s,o,a,l,c,h,u=t("../core/component").registerComponent,d=t("../core/shader").registerShader,p=t("../lib/three");e.exports.Component=u("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new p.Quaternion,this.hiddenEls=[]},update:function(t){var e,n=this.data,i=this.el;n.visualAspectEnabled&&(this.initVisualAspect(),e=n.highlighted?n.highlightedColor:n.borderColor,i.setAttribute("material","backgroundColor",n.highlighted?n.highlightedColor:n.backgroundColor),i.setAttribute("material","strokeColor",e),n.on!==t.on&&this.updateEventListener(),void 0!==t.peekMode&&n.peekMode!==t.peekMode&&this.updatePeekMode(),n.image&&t.image!==n.image&&i.setAttribute("material","pano","string"==typeof n.image?n.image:n.image.src))},updatePeekMode:function(){var t=this.el,e=this.sphereEl;this.data.peekMode?(this.hideAll(),t.getObject3D("mesh").visible=!1,e.setAttribute("visible",!0)):(this.showAll(),t.getObject3D("mesh").visible=!0,e.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var t=this.el;t.isPlaying&&(this.removeEventListener(),t.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var t=this.data.on;t&&this.el.removeEventListener(t,this.navigate)},initVisualAspect:function(){var t,e,n,i=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(n=this.textEl=this.textEl||document.createElement("a-entity"),e=this.sphereEl=this.sphereEl||document.createElement("a-entity"),t=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),i.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),i.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),n.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),n.setAttribute("position","0 1.5 0"),i.appendChild(n),t.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),t.setAttribute("rotation","0 180 0"),t.setAttribute("position","0 0 0"),t.setAttribute("visible",!1),i.appendChild(t),e.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),e.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),e.setAttribute("visible",!1),i.appendChild(e),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:(a=new p.Vector3,l=new p.Vector3,c=new p.Quaternion,h=new p.Vector3,function(){var t,e,n=this.el,i=n.object3D,r=n.sceneEl.camera,s=this.textEl;if(this.data.visualAspectEnabled)if(i.updateMatrixWorld(),r.parent.updateMatrixWorld(),r.updateMatrixWorld(),i.matrix.decompose(l,c,h),l.setFromMatrixPosition(i.matrixWorld),a.setFromMatrixPosition(r.matrixWorld),(e=l.distanceTo(a))>20)this.previousQuaternion||(this.quaternionClone.copy(c),this.previousQuaternion=this.quaternionClone),i.lookAt(a);else{if(t=this.calculateCameraPortalOrientation(),e<.5){if(!0===this.semiSphereEl.getAttribute("visible"))return;s.setAttribute("text","width",1.5),t<=0?(s.setAttribute("position","0 0 0.75"),s.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(s.setAttribute("position","0 0 -0.75"),s.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),n.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=t}else s.setAttribute("rotation",t<=0?"0 180 0":"0 0 0"),s.setAttribute("text","width",5),s.setAttribute("position","0 1.5 0"),n.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(i.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}),hideAll:function(){var t=this.el,e=this.hiddenEls,n=this;e.length>0||t.sceneEl.object3D.traverse(function(i){i&&i.el&&i.el.hasAttribute("link-controls")||i.el&&i!==t.sceneEl.object3D&&i.el!==t&&i.el!==n.sphereEl&&i.el!==t.sceneEl.cameraEl&&!1!==i.el.getAttribute("visible")&&i.el!==n.textEl&&i.el!==n.semiSphereEl&&(i.el.setAttribute("visible",!1),e.push(i.el))})},showAll:function(){this.hiddenEls.forEach(function(t){t.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:(i=new p.Matrix4,r=new p.Vector3,s=new p.Vector3(0,0,1),o=new p.Vector3(0,0,0),function(){var t=this.el,e=t.sceneEl.camera;return r.set(0,0,0),s.set(0,0,1),o.set(0,0,0),t.object3D.matrixWorld.extractRotation(i),s.applyMatrix4(i),t.object3D.updateMatrixWorld(),t.object3D.localToWorld(o),e.parent.parent.updateMatrixWorld(),e.parent.updateMatrixWorld(),e.updateMatrixWorld(),e.localToWorld(r),r.sub(o).normalize(),s.normalize(),Math.sign(s.dot(r))}),remove:function(){this.removeEventListener()}}),d("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = saturate(direction.y * 0.5  + 0.5);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join("\n")})},{"../core/component":103,"../core/shader":113,"../lib/three":151}],65:[function(t,e,n){var i,r=t("../core/component").registerComponent,s=t("../lib/three"),o=t("../utils/").bind,a=t("../utils").device.PolyfillControls,l=Math.PI/2;e.exports.Component=r("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},hmdEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0}},init:function(){this.previousHMDPosition=new s.Vector3,this.hmdQuaternion=new s.Quaternion,this.hmdEuler=new s.Euler,this.position=new s.Vector3,this.savedRotation=new s.Vector3,this.savedPosition=new s.Vector3,this.polyfillObject=new s.Object3D,this.polyfillControls=new a(this.polyfillObject),this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix(),this.savedPose={position:new s.Vector3,rotation:new s.Euler},this.el.sceneEl.is("vr-mode")&&this.onEnterVR()},update:function(t){var e=this.data;e.enabled!==t.enabled&&this.updateGrabCursor(e.enabled),!t||e.hmdEnabled||t.hmdEnabled||(this.pitchObject.rotation.set(0,0,0),this.yawObject.rotation.set(0,0,0)),t&&!e.pointerLockEnabled!==t.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(t){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=o(this.onMouseDown,this),this.onMouseMove=o(this.onMouseMove,this),this.onMouseUp=o(this.onMouseUp,this),this.onTouchStart=o(this.onTouchStart,this),this.onTouchMove=o(this.onTouchMove,this),this.onTouchEnd=o(this.onTouchEnd,this),this.onEnterVR=o(this.onEnterVR,this),this.onExitVR=o(this.onExitVR,this),this.onPointerLockChange=o(this.onPointerLockChange,this),this.onPointerLockError=o(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new s.Object3D,this.yawObject=new s.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var t=this.el.sceneEl,e=t.canvas;e?(e.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),e.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),t.addEventListener("enter-vr",this.onEnterVR),t.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):t.addEventListener("render-target-loaded",o(this.addEventListeners,this))},removeEventListeners:function(){var t=this.el.sceneEl,e=t&&t.canvas;e&&(e.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("enter-vr",this.onEnterVR),t.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:(i=new s.Matrix4,function(){var t,e=this.hmdEuler,n=this.el.object3D,r=this.pitchObject,s=this.yawObject,o=this.el.sceneEl;o.is("vr-mode")&&o.hasWebXR?(t=o.renderer.vr.getCameraPose())&&(i.elements=t.poseModelMatrix,i.decompose(n.position,n.rotation,n.scale)):n.updateMatrix(),o.is("vr-mode")&&o.checkHeadsetConnected()||(this.polyfillControls.update(),e.setFromQuaternion(this.polyfillObject.quaternion,"YXZ"),n.rotation.x=e.x+r.rotation.x,n.rotation.y=e.y+s.rotation.y)}),onMouseMove:function(t){var e,n,i,r=this.pitchObject,s=this.previousMouseEvent,o=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(n=t.movementX||t.mozMovementX||0,i=t.movementY||t.mozMovementY||0):(n=t.screenX-s.screenX,i=t.screenY-s.screenY),this.previousMouseEvent=t,o.rotation.y+=.002*n*(e=this.data.reverseMouseDrag?1:-1),r.rotation.x+=.002*i*e,r.rotation.x=Math.max(-l,Math.min(l,r.rotation.x)))},onMouseDown:function(t){if(this.data.enabled&&0===t.button){var e=this.el.sceneEl,n=e&&e.canvas;this.mouseDown=!0,this.previousMouseEvent=t,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(n.requestPointerLock?n.requestPointerLock():n.mozRequestPointerLock&&n.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(t){1===t.touches.length&&this.data.touchEnabled&&(this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(t){var e;this.touchStarted&&this.data.touchEnabled&&(e=2*Math.PI*(t.touches[0].pageX-this.touchStart.x)/this.el.sceneEl.canvas.clientWidth,this.yawObject.rotation.y-=.5*e*(this.data.reverseTouchDrag?1:-1),this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.updateMatrix())},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0))},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(t){var e=this.el.sceneEl;function n(){e.canvas.classList.add("a-grab-cursor")}function i(){e.canvas.classList.remove("a-grab-cursor")}e.canvas?t?n():i():e.addEventListener("render-target-loaded",t?n:i)},saveCameraPose:function(){var t=this.el;this.savedPose.position.copy(t.object3D.position),this.savedPose.rotation.copy(t.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var t=this.el,e=this.savedPose;this.hasSavedPose&&(t.object3D.position.copy(e.position),t.object3D.rotation.copy(e.rotation),this.hasSavedPose=!1)}})},{"../core/component":103,"../lib/three":151,"../utils":176,"../utils/":176}],66:[function(t,e,n){var i=t("../utils/"),r=t("../core/component"),s=t("../lib/three"),o=t("../core/shader"),a=i.debug("components:material:error"),l=o.shaders;function c(t,e){t.dispose(),e.unregisterMaterial(t)}e.exports.Component=(0,r.registerComponent)("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:o.shaderNames,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]}},init:function(){this.material=null},update:function(t){var e=this.data;this.shader&&e.shader===t.shader||this.updateShader(e.shader),this.shader.update(this.data),this.updateMaterial(t)},updateSchema:function(t){var e,n,i,r;e=this.oldData&&this.oldData.shader,(i=l[r=(n=t&&t.shader)||e]&&l[r].schema)||a("Unknown shader schema "+r),e&&n===e||(this.extendSchema(i),this.updateBehavior())},updateBehavior:function(){var t,e,n=this.el.sceneEl,i=this.schema,r=this;function s(t,n){var i;for(i in e)e[i]=t;r.shader.update(e)}for(t in this.tick=void 0,e={},i)"time"===i[t].type&&(this.tick=s,e[t]=!0);n&&(this.tick?n.addBehavior(this):n.removeBehavior(this))},updateShader:function(t){var e,n=this.data,i=l[t]&&l[t].Shader;if(!i)throw new Error("Unknown shader "+t);(e=this.shader=new i).el=this.el,e.init(n),this.setMaterial(e.material),this.updateSchema(n)},updateMaterial:function(t){var e,n=this.data,i=this.material;for(e in i.alphaTest=n.alphaTest,i.depthTest=!1!==n.depthTest,i.depthWrite=!1!==n.depthWrite,i.opacity=n.opacity,i.flatShading=n.flatShading,i.side=function(t){switch(n.side){case"back":return s.BackSide;case"double":return s.DoubleSide;default:return s.FrontSide}}(),i.transparent=!1!==n.transparent||n.opacity<1,i.vertexColors=function(t){switch(n.vertexColors){case"face":return s.FaceColors;case"vertex":return s.VertexColors;default:return s.NoColors}}(),i.visible=n.visible,i.blending=function(t){switch(n.blending){case"none":return s.NoBlending;case"additive":return s.AdditiveBlending;case"subtractive":return s.SubtractiveBlending;case"multiply":return s.MultiplyBlending;default:return s.NormalBlending}}(),t)break;!e||t.alphaTest===n.alphaTest&&t.side===n.side&&t.vertexColors===n.vertexColors||(i.needsUpdate=!0)},remove:function(){var t=new s.MeshBasicMaterial,e=this.material,n=this.el.getObject3D("mesh");n&&(n.material=t),c(e,this.system)},setMaterial:function(t){var e,n=this.el,i=this.system;this.material&&c(this.material,i),this.material=t,i.registerMaterial(t),(e=n.getObject3D("mesh"))?e.material=t:n.addEventListener("object3dset",function e(i){"mesh"===i.detail.type&&i.target===n&&(n.getObject3D("mesh").material=t,n.removeEventListener("object3dset",e))})}})},{"../core/component":103,"../core/shader":113,"../lib/three":151,"../utils/":176}],67:[function(t,e,n){var i=t("../utils/debug"),r=t("../core/component").registerComponent,s=t("../lib/three"),o=i("components:obj-model:warn");e.exports.Component=r("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var t=this;this.model=null,this.objLoader=new s.OBJLoader,this.mtlLoader=new s.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(e){t.model&&"material"===e.detail.name&&t.applyMaterial()})},update:function(){var t=this.data;t.obj&&(this.resetMesh(),this.loadObj(t.obj,t.mtl))},remove:function(){this.model&&this.resetMesh()},resetMesh:function(){this.el.removeObject3D("mesh")},loadObj:function(t,e){var n=this,i=this.el,r=this.mtlLoader,s=this.objLoader,a=this.el.sceneEl.systems.renderer,l=e.substr(0,e.lastIndexOf("/")+1);if(e)return i.hasAttribute("material")&&o("Material component properties are ignored when a .MTL is provided"),r.setResourcePath(l),void r.load(e,function(e){e.preload(),s.setMaterials(e),s.load(t,function(t){n.model=t,n.model.traverse(function(t){if(t.isMesh){var e=t.material;e.color&&a.applyColorCorrection(e.color),e.map&&a.applyColorCorrection(e.map),e.emissive&&a.applyColorCorrection(e.emissive),e.emissiveMap&&a.applyColorCorrection(e.emissiveMap)}}),i.setObject3D("mesh",t),i.emit("model-loaded",{format:"obj",model:t})})});s.load(t,function(t){n.model=t,n.applyMaterial(),i.setObject3D("mesh",t),i.emit("model-loaded",{format:"obj",model:t})})},applyMaterial:function(){var t=this.el.components.material;t&&this.model.traverse(function(e){e instanceof s.Mesh&&(e.material=t.material)})}})},{"../core/component":103,"../lib/three":151,"../utils/debug":172}],68:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),s=t("../utils/tracked-controls"),o=s.checkControllerPresentAndSetup,a=s.emitIfAxesChanged,l=s.onButtonEvent;e.exports.Component=i("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.controllerPresent=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){o(this,"Oculus Go",this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:"Oculus Go",orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model","https://cdn.aframe.io/controllers/oculus/go/oculus-go-controller.gltf")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).trigger=n.getObjectByName("oculus_go_button_trigger"),e.trackpad=n.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},onAxisMoved:function(t){a(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes;if(n&&n[t]){var i,r;switch(e){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}(r=n[t]).material.color.set(i),this.rendererSystem.applyColorCorrection(r.material.color)}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],69:[function(t,e,n){var i=t("../utils/bind"),r=t("../core/component").registerComponent,s=t("../lib/three"),o=t("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,l=o.emitIfAxesChanged,c=o.onButtonEvent,h={left:"https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-left.gltf",right:"https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-right.gltf"},u=new s.Vector3(0,0,-.053),d={left:{origin:{x:.008,y:-.004,z:0},direction:{x:0,y:-.8,z:-1}},right:{origin:{x:-.008,y:-.004,z:0},direction:{x:0,y:-.8,z:-1}}};e.exports.Component=r("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(e){c(e.detail.id,"down",t,t.data.hand)},this.onButtonUp=function(e){c(e.detail.id,"up",t,t.data.hand)},this.onButtonTouchStart=function(e){c(e.detail.id,"touchstart",t,t.data.hand)},this.onButtonTouchEnd=function(e){c(e.detail.id,"touchend",t,t.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),t.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),t.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){a(this,"Oculus Touch",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(){var t=this.data;t.model&&this.el.setAttribute("gltf-model","url("+h[t.hand]+")")},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{id:"right"===t.hand?"Oculus Touch (Right)":"Oculus Touch (Left)",controller:0,hand:t.hand,orientationOffset:t.orientationOffset}),this.loadModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var e,n=this.mapping[this.data.hand].buttons[t.detail.id],i=this.buttonMeshes;n&&("trigger"!==n&&"grip"!==n||(e=t.detail.state.value),i&&("trigger"===n&&i.trigger&&(i.trigger.rotation.x=this.originalXRotationTrigger-e*(Math.PI/26)),"grip"===n&&i.grip&&(i.grip.position.x=this.originalXPositionGrip+("left"===this.data.hand?-1:1)*e*.004)),this.el.emit(n+"changed",t.detail.state))},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).grip=n.getObjectByName("buttonHand"),this.originalXPositionGrip=e.grip.position.x,e.thumbstick=n.getObjectByName("stick"),e.trigger=n.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=e.trigger.rotation.x,e.xbutton=n.getObjectByName("buttonX"),e.abutton=n.getObjectByName("buttonA"),e.ybutton=n.getObjectByName("buttonY"),e.bbutton=n.getObjectByName("buttonB"),n.position.copy(u),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:d[this.data.hand]}))},onAxisMoved:function(t){l(this,this.mapping[this.data.hand].axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n,i=this.buttonMeshes;this.data.model&&i&&i[t]&&((n=i[t]).material.color.set("up"===e||"touchend"===e?this.data.buttonColor:"touchstart"===e?this.data.buttonTouchColor:this.data.buttonHighlightColor),this.rendererSystem.applyColorCorrection(n.material.color))}})},{"../core/component":103,"../lib/three":151,"../utils/bind":170,"../utils/tracked-controls":184}],70:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("position",{schema:{type:"vec3"},update:function(){var t=this.data;this.el.object3D.position.set(t.x,t.y,t.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},{"../core/component":103}],71:[function(t,e,n){var i,r,s=t("../core/component").registerComponent,o=t("../lib/three"),a=t("../utils/").debug("components:raycaster:warn"),l=/^[\w\s-.,[\]#]*$/,c={childList:!0,attributes:!0,subtree:!0};function h(t,e){var n;for(t.length=e.length,n=0;n<e.length;n++)t[n]=e[n]}e.exports.Component=s("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new o.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new o.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new o.Vector3,this.otherLineEndVec3=new o.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(t){var e=this.data,n=this.el,i=this.raycaster;i.far=e.far,i.near=e.near,!e.showLine||e.far===t.far&&e.origin===t.origin&&e.direction===t.direction&&t.showLine||(this.unitLineEndVec3.copy(e.origin).add(e.direction).normalize(),this.drawLine()),!e.showLine&&t.showLine&&n.removeAttribute("line"),e.objects===t.objects||l.test(e.objects)||a('[raycaster] Selector "'+e.objects+'" may not update automatically with DOM changes.'),e.objects||a('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),e.autoRefresh!==t.autoRefresh&&n.isPlaying&&(e.autoRefresh?this.addEventListeners():this.removeEventListeners()),t.enabled&&!e.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,c),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var t,e=this.data;t=this.el.sceneEl.querySelectorAll(e.objects?e.objects:"*"),this.objects=this.flattenObject3DMaps(t),this.dirty=!1},tick:function(t){var e=this.data,n=this.prevCheckTime;e.enabled&&(n&&t-n<e.interval||(this.prevCheckTime=t,this.checkIntersections()))},checkIntersections:function(){var t,e,n=this.clearedIntersectedEls,i=this.el,r=this.data,s=this.intersectedEls,o=this.intersections,a=this.newIntersectedEls,l=this.newIntersections,c=this.prevIntersectedEls,u=this.rawIntersections;for(this.dirty&&this.refreshObjects(),h(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),u.length=0,this.raycaster.intersectObjects(this.objects,!0,u),o.length=0,s.length=0,t=0;t<u.length;t++)e=u[t],r.showLine&&e.object===i.getObject3D("line")||e.object.el&&(o.push(e),s.push(e.object.el));for(l.length=0,a.length=0,t=0;t<o.length;t++)-1===c.indexOf(o[t].object.el)&&(l.push(o[t]),a.push(o[t].object.el));for(n.length=0,t=0;t<c.length;t++)-1===s.indexOf(c[t])&&(c[t].emit("raycaster-intersected-cleared",this.intersectedClearedDetail),n.push(c[t]));for(n.length&&i.emit("raycaster-intersection-cleared",this.intersectionClearedDetail),t=0;t<a.length;t++)a[t].emit("raycaster-intersected",this.intersectedDetail);l.length&&(this.intersectionDetail.els=a,this.intersectionDetail.intersections=l,i.emit("raycaster-intersection",this.intersectionDetail)),setTimeout(this.updateLine)},updateLine:function(){var t,e=this.intersections;this.data.showLine&&(e.length&&(t=e[0].object.el===this.el&&e[1]?e[1].distance:e[0].distance),this.drawLine(t))},getIntersection:function(t){var e,n;for(e=0;e<this.intersections.length;e++)if((n=this.intersections[e]).object.el===t)return n;return null},updateOriginDirection:(i=new o.Vector3,r=new o.Vector3,function(){var t=this.el,e=this.data;e.useWorldCoordinates?this.raycaster.set(e.origin,e.direction):(t.object3D.getWorldPosition(r),0===e.origin.x&&0===e.origin.y&&0===e.origin.z||(r=t.object3D.localToWorld(r.copy(e.origin))),i.copy(e.direction).transformDirection(t.object3D.matrixWorld).normalize(),this.raycaster.set(r,i))}),drawLine:function(t){var e,n=this.data,i=this.el;e=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,void 0===t&&(t=n.far===1/0?1e3:n.far),this.lineData.start=n.origin,this.lineData.end=e.copy(this.unitLineEndVec3).multiplyScalar(t),i.setAttribute("line",this.lineData)},flattenObject3DMaps:function(t){var e,n,i=this.objects;for(i.length=0,n=0;n<t.length;n++)if(t[n].isEntity&&t[n].object3D)for(e in t[n].object3DMap)i.push(t[n].getObject3D(e));return i},clearAllIntersections:function(){var t;for(t=0;t<this.intersectedEls.length;t++)this.intersectedEls[t].emit("raycaster-intersected-cleared",this.intersectedClearedDetail);h(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit("raycaster-intersection-cleared",this.intersectionClearedDetail)}})},{"../core/component":103,"../lib/three":151,"../utils/":176}],72:[function(t,e,n){var i=t("../lib/three").Math.degToRad,r=t("../core/component").registerComponent;e.exports.Component=r("rotation",{schema:{type:"vec3"},update:function(){var t=this.data,e=this.el.object3D;e.rotation.set(i(t.x),i(t.y),i(t.z)),e.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},{"../core/component":103,"../lib/three":151}],73:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var t=this.data;this.el.object3D.scale.set(0===t.x?1e-5:t.x,0===t.y?1e-5:t.y,0===t.z?1e-5:t.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},{"../core/component":103}],74:[function(t,e,n){var i=t("../../core/component").registerComponent;e.exports.Component=i("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var t=this.data;this.el.object3D.background=t.transparent?null:new THREE.Color(t.color)}})},{"../../core/component":103}],75:[function(t,e,n){var i=t("../../core/component").registerComponent;e.exports.Component=i("debug",{schema:{default:!0}})},{"../../core/component":103}],76:[function(t,e,n){var i=t("../../core/component").registerComponent;e.exports.Component=i("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var t=this.el,e=t.querySelector(".a-enter-vr");!0===this.data?(e&&e.classList.add("embedded"),t.removeFullScreenStyles()):(e&&e.classList.remove("embedded"),t.addFullScreenStyles())}})},{"../../core/component":103}],77:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../lib/three"),s=t("../../utils/debug")("components:fog:warn");e.exports.Component=i("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var t=this.data,e=this.el,n=this.el.object3D.fog;if(e.isScene)return n&&t.type===n.name?void Object.keys(this.schema).forEach(function(e){var i=t[e];"color"===e&&(i=new r.Color(i)),n[e]=i}):(e.object3D.fog=function(t){var e;return(e="exponential"===t.type?new r.FogExp2(t.color,t.density):new r.Fog(t.color,t.near,t.far)).name=t.type,e}(t),void e.systems.material.updateMaterials());s("Fog component can only be applied to <a-scene>")},remove:function(){var t=this.el.object3D.fog;t&&(t.far=0,t.near=.1)}})},{"../../core/component":103,"../../lib/three":151,"../../utils/debug":172}],78:[function(t,e,n){(function(n){var i,r=t("../../constants").AFRAME_INJECTED,s=t("../../../package"),o=t("../../core/component").registerComponent,a=t("../../utils/"),l="https://unpkg.com/aframe-inspector@"+((i=s.version.split("."))[2]="x",i.join("."))+"/dist/aframe-inspector.min.js";e.exports.Component=o("inspector",{schema:{url:{default:"dev"===n.env.INSPECTOR_VERSION?"https://aframe.io/aframe-inspector/dist/aframe-inspector.js":l}},init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var t;this.firstPlay&&"false"!==(t=a.getUrlParameter("inspector"))&&t&&(this.openInspector(),this.firstPlay=!1)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(t){73===t.keyCode&&t.ctrlKey&&t.altKey&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(t){"INJECT_AFRAME_INSPECTOR"===t.data&&this.openInspector()},openInspector:function(t){var e,n=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(t):(this.showLoader(),(e=document.createElement("script")).src=this.data.url,e.setAttribute("data-name","aframe-inspector"),e.setAttribute(r,""),e.onload=function(){AFRAME.INSPECTOR.open(t),n.hideLoader(),n.removeEventListeners()},e.onerror=function(){n.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(e),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,t("_process"))},{"../../../package":51,"../../constants":95,"../../core/component":103,"../../utils/":176,_process:32}],79:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../utils/").shouldCaptureKeyEvent;e.exports.Component=i("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(t){this.enterVREnabled=this.data.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(t){var e=this.el;r(t)&&(this.enterVREnabled&&70===t.keyCode&&e.enterVR(),this.enterVREnabled&&27===t.keyCode&&e.exitVR())}})},{"../../core/component":103,"../../utils/":176}],80:[function(t,e,n){var i=t("../../utils/debug"),r=t("../../core/component").registerComponent,s=i("components:pool:warn");e.exports.Component=r("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var t;for(this.availableEls=[],this.usedEls=[],this.data.mixin||s("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||s("Container "+this.data.container+" not found.")),this.container=this.container||this.el,t=0;t<this.data.size;++t)this.createEntity()},update:function(t){var e=this.data;t.mixin===e.mixin&&t.size===e.size||this.initPool()},createEntity:function(){var t;(t=document.createElement("a-entity")).play=this.wrapPlay(t.play),t.setAttribute("mixin",this.data.mixin),t.object3D.visible=!1,t.pause(),this.container.appendChild(t),this.availableEls.push(t)},wrapPlay:function(t){var e=this.usedEls;return function(){-1!==e.indexOf(this)&&t.call(this)}},requestEntity:function(){var t;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void s("Requested entity from empty pool: "+this.attrName);s("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return t=this.availableEls.shift(),this.usedEls.push(t),t.object3D.visible=!0,t},returnEntity:function(t){var e=this.usedEls.indexOf(t);if(-1!==e)return this.usedEls.splice(e,1),this.availableEls.push(t),t.object3D.visible=!1,t.pause(),t;s("The returned entity was not previously pooled from "+this.attrName)}})},{"../../core/component":103,"../../utils/debug":172}],81:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../lib/three"),s=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),o=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join("\n");e.exports.Component=i("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){var t=this.el,e=this;function n(){var n=t.renderer.getContext();n&&(e.cubeMapSize=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),e.material=new r.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:s,fragmentShader:o,side:r.DoubleSide}),e.quad=new r.Mesh(new r.PlaneBufferGeometry(1,1),e.material),e.quad.visible=!1,e.camera=new r.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),e.canvas=document.createElement("canvas"),e.ctx=e.canvas.getContext("2d"),t.object3D.add(e.quad),e.onKeyDown=e.onKeyDown.bind(e))}t.renderer?n():t.addEventListener("render-target-loaded",n)},getRenderTarget:function(t,e){return new r.WebGLRenderTarget(t,e,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,wrapS:r.ClampToEdgeWrapping,wrapT:r.ClampToEdgeWrapping,format:r.RGBAFormat,type:r.UnsignedByteType})},resize:function(t,e){this.quad.scale.set(t,e,1),this.camera.left=-1*t/2,this.camera.right=t/2,this.camera.top=e/2,this.camera.bottom=-1*e/2,this.camera.updateProjectionMatrix(),this.canvas.width=t,this.canvas.height=e},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(t){this.data&&83===t.keyCode&&t.ctrlKey&&t.altKey&&this.capture(t.shiftKey?"equirectangular":"perspective")},setCapture:function(t){var e,n,i,s=this.el;return"perspective"===t?(this.quad.visible=!1,n=this.data.camera&&this.data.camera.components.camera.camera||s.camera,e={width:this.data.width,height:this.data.height}):(n=this.camera,i=new r.CubeCamera(s.camera.near,s.camera.far,Math.min(this.cubeMapSize,2048)),s.camera.getWorldPosition(i.position),s.camera.getWorldQuaternion(i.quaternion),i.update(s.renderer,s.object3D),this.quad.material.uniforms.map.value=i.renderTarget.texture,e={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:n,size:e,projection:t}},capture:function(t){var e,n=this.el.renderer.vr.enabled,i=this.el.renderer;i.vr.enabled=!1,e=this.setCapture(t),this.renderCapture(e.camera,e.size,e.projection),this.saveCapture(),i.vr.enabled=n},getCanvas:function(t){var e=this.setCapture(t);return this.renderCapture(e.camera,e.size,e.projection),this.canvas},renderCapture:function(t,e,n){var i,r,s,o=this.el.renderer.autoClear,a=this.el,l=a.renderer;r=this.getRenderTarget(e.width,e.height),s=new Uint8Array(4*e.width*e.height),this.resize(e.width,e.height),l.autoClear=!0,l.render(a.object3D,t,r,!0),l.autoClear=o,l.readRenderTargetPixels(r,0,0,e.width,e.height,s),"perspective"===n&&(s=this.flipPixelsVertically(s,e.width,e.height)),i=new ImageData(new Uint8ClampedArray(s),e.width,e.height),this.quad.visible=!1,this.ctx.putImageData(i,0,0)},flipPixelsVertically:function(t,e,n){for(var i=t.slice(0),r=0;r<e;++r)for(var s=0;s<n;++s)i[4*r+s*e*4]=t[4*r+(n-s)*e*4],i[4*r+1+s*e*4]=t[4*r+1+(n-s)*e*4],i[4*r+2+s*e*4]=t[4*r+2+(n-s)*e*4],i[4*r+3+s*e*4]=t[4*r+3+(n-s)*e*4];return i},saveCapture:function(){this.canvas.toBlob(function(t){var e="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",n=document.createElement("a"),i=URL.createObjectURL(t);n.href=i,n.setAttribute("download",e),n.innerHTML="downloading...",n.style.display="none",document.body.appendChild(n),setTimeout(function(){n.click(),document.body.removeChild(n)},1)},"image/png")}})},{"../../core/component":103,"../../lib/three":151}],82:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../../vendor/rStats"),s=t("../../utils");t("../../../vendor/rStats.extras"),t("../../lib/rStatsAframe");var o=window.aframeStats,a=s.bind,l=window.threeStats;e.exports.Component=i("stats",{schema:{default:!0},init:function(){var t=this.el;"false"!==s.getUrlParameter("stats")&&(this.stats=function(t){var e=new l(t.renderer),n=new o(t);return new r({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:t.isMobile?[]:[e,n]})}(t),this.statsEl=document.querySelector(".rs-base"),this.hideBound=a(this.hide,this),this.showBound=a(this.show,this),t.addEventListener("enter-vr",this.hideBound),t.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var t=this.stats;t&&(t("rAF").tick(),t("FPS").frame(),t().update())},hide:function(){this.statsEl.classList.add("a-hidden")},show:function(){this.statsEl.classList.remove("a-hidden")}})},{"../../../vendor/rStats":186,"../../../vendor/rStats.extras":185,"../../core/component":103,"../../lib/rStatsAframe":150,"../../utils":176}],83:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../constants/"),s=t("../../utils/"),o=s.bind;e.exports.Component=i("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""}},init:function(){var t=this,e=this.el;"false"!==s.getUrlParameter("ui")&&(this.insideLoader=!1,this.enterVREl=null,this.orientationModalEl=null,this.bindMethods(),e.addEventListener("enter-vr",this.updateEnterVRInterface),e.addEventListener("exit-vr",this.updateEnterVRInterface),window.addEventListener("message",function(e){"loaderReady"===e.data.type&&(t.insideLoader=!0,t.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=o(this.onEnterVRButtonClick,this),this.onModalClick=o(this.onModalClick,this),this.toggleOrientationModalIfNeeded=o(this.toggleOrientationModalIfNeeded,this),this.updateEnterVRInterface=o(this.updateEnterVRInterface,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},update:function(){var t,e,n,i=this.data,o=this.el;if(!i.enabled||this.insideLoader||"false"===s.getUrlParameter("ui"))return this.remove();this.enterVREl||this.orientationModalEl||(i.enterVRButton?(this.enterVREl=document.querySelector(i.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=(t=this.onEnterVRButtonClick,(n=document.createElement("div")).classList.add("a-enter-vr"),n.setAttribute(r.AFRAME_INJECTED,""),(e=document.createElement("button")).className="a-enter-vr-button",e.setAttribute("title","Enter VR mode with a headset or fullscreen mode on a desktop. Visit https://webvr.rocks or https://webvr.info for more information."),e.setAttribute(r.AFRAME_INJECTED,""),n.appendChild(e),e.addEventListener("click",function(e){t(),e.stopPropagation()}),n),o.appendChild(this.enterVREl)),this.orientationModalEl=function(t){var e=document.createElement("div");e.className="a-orientation-modal",e.classList.add("a-hidden"),e.setAttribute(r.AFRAME_INJECTED,"");var n=document.createElement("button");return n.setAttribute(r.AFRAME_INJECTED,""),n.innerHTML="Exit VR",n.addEventListener("click",t),e.appendChild(n),e}(this.onModalClick),o.appendChild(this.orientationModalEl),this.updateEnterVRInterface())},remove:function(){[this.enterVREl,this.orientationModalEl].forEach(function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})},updateEnterVRInterface:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){this.enterVREl&&(this.el.is("vr-mode")?this.enterVREl.classList.add("a-hidden"):this.enterVREl.classList.remove("a-hidden"))},toggleOrientationModalIfNeeded:function(){var t=this.el,e=this.orientationModalEl;e&&t.isMobile&&(!s.device.isLandscape()&&t.is("vr-mode")?e.classList.remove("a-hidden"):e.classList.add("a-hidden"))}})},{"../../constants/":95,"../../core/component":103,"../../utils/":176}],84:[function(t,e,n){var i=t("../core/component"),r=t("../lib/three"),s=t("../utils/bind");e.exports.Component=(0,i.registerComponent)("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=s(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var t=this.data;this.updateDescendants(t.cast,t.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(t,e){var n=this.el.sceneEl;this.el.object3D.traverse(function(i){if(i instanceof r.Mesh&&(i.castShadow=t,i.receiveShadow=e,n.hasLoaded&&i.material))for(var s=Array.isArray(i.material)?i.material:[i.material],o=0;o<s.length;o++)s[o].needsUpdate=!0})}})},{"../core/component":103,"../lib/three":151,"../utils/bind":170}],85:[function(t,n,i){var r=t("../core/component").registerComponent,s=t("../utils/debug"),o=t("../lib/three"),a=s("components:sound:warn");n.exports.Component=r("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var t=this;this.listener=null,this.audioLoader=new o.AudioLoader,this.pool=new o.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){t.playSound()}},update:function(t){var e,n,i=this.data,r=i.src!==t.src;if(r){if(!i.src)return;this.setupSound()}for(e=0;e<this.pool.children.length;e++)n=this.pool.children[e],i.positional&&(n.setDistanceModel(i.distanceModel),n.setMaxDistance(i.maxDistance),n.setRefDistance(i.refDistance),n.setRolloffFactor(i.rolloffFactor)),n.setLoop(i.loop),n.setVolume(i.volume),n.isPaused=!1;if(i.on!==t.on&&this.updateEventListener(t.on),r){var s=this;this.loaded=!1,this.audioLoader.load(i.src,function(t){for(e=0;e<s.pool.children.length;e++)(n=s.pool.children[e]).setBuffer(t);s.loaded=!0,o.Cache.remove(i.src),(s.data.autoplay||s.mustPlay)&&s.playSound(),s.el.emit("sound-loaded",s.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var t;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(t=0;t<this.pool.children.length;t++)this.pool.children[t].disconnect()}catch(e){a("Audio source not properly disconnected")}},updateEventListener:function(t){var e=this.el;t&&e.removeEventListener(t,this.playSoundBound),e.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var t,e,n=this.el,i=n.sceneEl,r=this;this.pool.children.length>0&&(this.stopSound(),n.removeObject3D("sound"));var s=this.listener=i.audioListener||new o.AudioListener;for(i.audioListener=s,i.camera&&i.camera.add(s),i.addEventListener("camera-set-active",function(t){t.detail.cameraEl.getObject3D("camera").add(s)}),this.pool=new o.Group,t=0;t<this.data.poolSize;t++)e=this.data.positional?new o.PositionalAudio(s):new o.Audio(s),this.pool.add(e);for(n.setObject3D(this.attrName,this.pool),t=0;t<this.pool.children.length;t++)(e=this.pool.children[t]).onEnded=function(){this.isPlaying=!1,r.el.emit("sound-ended",r.evtDetail,!1)}},pauseSound:function(){var t,e;for(this.isPlaying=!1,t=0;t<this.pool.children.length;t++)(e=this.pool.children[t]).source&&e.source.buffer&&e.isPlaying&&!e.isPaused&&(e.isPaused=!0,e.pause())},playSound:function(t){var e,n,i;if(!this.loaded)return a("Sound not loaded yet. It will be played once it finished loading"),void(this.mustPlay=!0);for(e=!1,this.isPlaying=!0,n=0;n<this.pool.children.length;n++)(i=this.pool.children[n]).isPlaying||!i.buffer||e||(t&&t(i),i.play(),i.isPaused=!1,e=!0);e?this.mustPlay=!1:a("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var t,e;for(this.isPlaying=!1,t=0;t<this.pool.children.length;t++){if(!(e=this.pool.children[t]).source||!e.source.buffer)return;e.stop()}}})},{"../core/component":103,"../lib/three":151,"../utils/debug":172}],86:[function(t,e,n){var i=t("three-bmfont-text"),r=t("load-bmfont"),s=t("../core/component").registerComponent,o=t("../core/shader"),a=t("../lib/three"),l=t("../utils/"),c=l.debug("components:text:error"),h=o.shaders,u=l.debug("components:text:warn"),d="https://cdn.aframe.io/fonts/",p={aileronsemibold:d+"Aileron-Semibold.fnt",dejavu:d+"DejaVu-sdf.fnt",exo2bold:d+"Exo2Bold.fnt",exo2semibold:d+"Exo2SemiBold.fnt",kelsonsans:d+"KelsonSans.fnt",monoid:d+"Monoid.fnt",mozillavr:d+"mozillavr.fnt",roboto:d+"Roboto-msdf.json",sourcecodepro:d+"SourceCodePro.fnt"},f=["roboto"];e.exports.FONTS=p;var m,g,v,y,_=new function(){var t=this.cache={};this.get=function(e,n){return e in t?t[e]:(t[e]=n(),t[e])}},b={},x={},w=/^\w+:/;function A(t,e,n){return t||(.5+e)*n}e.exports.Component=s("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:"roboto"},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:h},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=i(),this.createOrUpdateMaterial(),this.mesh=new a.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh)},update:function(t){var e=this.data,n=this.currentFont;x[e.font]?this.texture=x[e.font]:(this.texture=x[e.font]=new a.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),t.font===e.font?n&&(this.updateGeometry(this.geometry,n),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var t,e,n,i=this.data,r=this.material,s=this.shaderData;if(n=i.shader,-1!==f.indexOf(i.font)||i.font.indexOf("-msdf.")>=0?n="msdf":i.font in p&&-1===f.indexOf(i.font)&&(n="sdf"),t=(this.shaderObject&&this.shaderObject.name)!==n,s.alphaTest=i.alphaTest,s.color=i.color,s.map=this.texture,s.opacity=i.opacity,s.side=function(t){switch(i.side){case"back":return a.FrontSide;case"double":return a.DoubleSide;default:return a.BackSide}}(),s.transparent=i.transparent,s.negate=i.negate,!t)return this.shaderObject.update(s),r.transparent=s.transparent,void(r.side=s.side);e=function(t,e,n){var i,r;return(r=new h[e].Shader).el=t,r.init(n),r.update(n),(i=r.material).transparent=n.transparent,{material:i,shader:r}}(this.el,n,s),this.material=e.material,this.shaderObject=e.shader,this.material.side=s.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var t,e=this.data,n=this.el,i=this.geometry,s=this;e.font||u("No font specified. Using the default font."),this.mesh.visible=!1,t=this.lookupFont(e.font||"roboto")||e.font,_.get(t,function(){return n=t,i=e.yOffset,new Promise(function(t,e){r(n,function(r,s){if(r)return c("Error loading font",n),void e(r);n.indexOf("/Roboto-msdf.json")>=0&&(i=30),i&&s.chars.map(function(t){t.yoffset+=i}),t(s)})});var n,i}).then(function(r){var o;if(1!==r.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");b[t]||(r.widthFactor=b[r]=function(t){var e=0,n=0,i=0;return t.chars.map(function(t){e+=t.xadvance,t.id>=48&&t.id<=57&&(i++,n+=t.xadvance)}),i?n/i:e/t.chars.length}(r)),s.updateGeometry(i,r),s.currentFont=r,s.updateLayout(),o=s.getFontImageSrc(),_.get(o,function(){return t=o,new Promise(function(e,n){(new a.ImageLoader).load(t,function(t){e(t)},void 0,function(){c("Error loading font image",t),n(null)})});var t}).then(function(t){var i=s.texture;i.image=t,i.needsUpdate=!0,x[e.font]=i,s.texture=i,s.mesh.visible=!0,n.emit("textfontset",{font:e.font,fontObj:r})}).catch(function(t){c(t.message),c(t.stack)})}).catch(function(t){c(t.message),c(t.stack)})},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var t=this.lookupFont(this.data.font||"roboto")||this.data.font,e=this.currentFont.pages[0];return e.match(w)&&0!==e.indexOf("http")?t.replace(/(\.fnt)|(\.json)/,".png"):a.LoaderUtils.extractUrlBase(t)+e},updateLayout:function(){var t,e,n,i,r,s,o,a,l,c=this.el,h=this.data,u=this.geometry,d=this.mesh;if(u.layout){if(n=c.getAttribute("geometry"),i=(s=(o=h.width||n&&n.width||1)/A(h.wrapPixels,h.wrapCount,this.currentFont.widthFactor))*((r=u.layout).height+r.descender),n&&"plane"===n.primitive&&(n.width||c.setAttribute("geometry","width",o),n.height||c.setAttribute("geometry","height",i)),"left"===(t="align"===h.anchor?h.align:h.anchor))a=0;else if("right"===t)a=-1*r.width;else{if("center"!==t)throw new TypeError("Invalid text.anchor property value",t);a=-1*r.width/2}if("bottom"===(e=h.baseline))l=0;else if("top"===e)l=-1*r.height+r.ascender;else{if("center"!==e)throw new TypeError("Invalid text.baseline property value",e);l=-1*r.height/2}d.position.x=a*s+h.xOffset,d.position.y=l*s,d.position.z=h.zOffset,d.scale.set(s,-1*s,s)}},lookupFont:function(t){return p[t]},updateGeometry:(m={},g={},v=/\\n/g,y=/\\t/g,function(t,e){var n=this.data;g.font=e,g.lineHeight=n.lineHeight&&isFinite(n.lineHeight)?n.lineHeight:e.common.lineHeight,g.text=n.value.toString().replace(v,"\n").replace(y,"\t"),g.width=A(n.wrapPixels,n.wrapCount,e.widthFactor),t.update(l.extend(m,n,g))})})},{"../core/component":103,"../core/shader":113,"../lib/three":151,"../utils/":176,"load-bmfont":23,"three-bmfont-text":41}],87:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/tracked-controls"),s=t("../constants").DEFAULT_CAMERA_HEIGHT,o=t("../lib/three"),a=t("../constants").DEFAULT_HANDEDNESS,l={touches:[]};e.exports.Component=i("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!0},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new o.Vector3,this.controllerQuaternion=new o.Quaternion,this.controllerEuler=new o.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(t,e){var n=this.el.getObject3D("mesh");n&&n.update&&n.update(e/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return s},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var t=this.data,e=r.findMatchingControllerWebVR(this.system.controllers,t.id,t.idPrefix,t.hand,t.controller);this.controller=e,this.el.components["tracked-controls"].controller=e,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(t){var e,n,i,r,s=this.controller,o=this.controllerEuler,l=this.controllerQuaternion,c=this.deltaControllerPosition;n=this.getHeadElement().object3D,r=this.defaultUserHeight(),i=s.pose,e=(s?s.hand:void 0)||a,t.copy(n.position),c.set(.175*("left"===e?-1:"right"===e?1:0),-.3,-.03),c.multiplyScalar(r),c.applyAxisAngle(n.up,n.rotation.y),t.add(c),c.set(0,0,-.175),c.multiplyScalar(r),i.orientation?l.fromArray(i.orientation):l.copy(n.quaternion),o.setFromQuaternion(l),o.set(o.x,o.y,0),c.applyEuler(o),t.add(c)},updatePose:function(){var t,e,n=this.controller,i=this.data,r=this.el.object3D,s=this.system.vrDisplay;n&&((t=n.pose).position?r.position.fromArray(t.position):i.armModel&&this.applyArmModel(r.position),t.orientation&&r.quaternion.fromArray(t.orientation),s&&t.position&&(e=this.el.sceneEl.renderer.vr.getStandingMatrix(),r.matrix.compose(r.position,r.quaternion,r.scale),r.matrix.multiplyMatrices(e,r.matrix),r.matrix.decompose(r.position,r.quaternion,r.scale)),r.rotateX(this.data.orientationOffset.x*o.Math.DEG2RAD),r.rotateY(this.data.orientationOffset.y*o.Math.DEG2RAD),r.rotateZ(this.data.orientationOffset.z*o.Math.DEG2RAD))},updateButtons:function(){var t,e=this.controller;if(e){for(t=0;t<e.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[t]||(this.buttonEventDetails[t]={id:t,state:this.buttonStates[t]}),this.handleButton(t,e.buttons[t]);this.handleAxes()}},handleButton:function(t,e){return!!(this.handlePress(t,e)|this.handleTouch(t,e)|this.handleValue(t,e))&&(this.el.emit("buttonchanged",this.buttonEventDetails[t],!1),!0)},handleAxes:function(){var t,e=!1,n=this.controller.axes,i=this.axis,r=this.changedAxes;for(this.changedAxes.length=0,t=0;t<n.length;++t)r.push(i[t]!==n[t]),r[t]&&(e=!0);if(!e)return!1;for(this.axis.length=0,t=0;t<n.length;t++)this.axis.push(n[t]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(t,e){var n=this.buttonStates[t];return e.pressed!==n.pressed&&(this.el.emit(e.pressed?"buttondown":"buttonup",this.buttonEventDetails[t],!1),n.pressed=e.pressed,!0)},handleTouch:function(t,e){var n=this.buttonStates[t];return e.touched!==n.touched&&(this.el.emit(e.touched?"touchstart":"touchend",this.buttonEventDetails[t],!1,l),n.touched=e.touched,!0)},handleValue:function(t,e){var n=this.buttonStates[t];return e.value!==n.value&&(n.value=e.value,!0)}})},{"../constants":95,"../core/component":103,"../lib/three":151,"../utils/tracked-controls":184}],88:[function(t,e,n){var i=t("../utils/tracked-controls"),r=t("../core/component").registerComponent;e.exports.Component=r("tracked-controls-webxr",{schema:{hand:{type:"string",default:""}},init:function(){this.addSessionEventListeners=this.addSessionEventListeners.bind(this),this.updateController=this.updateController.bind(this),this.emitButtonUpEvent=this.emitButtonUpEvent.bind(this),this.emitButtonDownEvent=this.emitButtonDownEvent.bind(this),this.buttonEventDetails={id:"trigger",state:{pressed:!1}}},play:function(){var t=this.el.sceneEl;this.updateController(),this.addSessionEventListeners(),t.addEventListener("enter-vr",this.addSessionEventListeners),t.addEventListener("controllersupdated",this.updateController)},pause:function(){var t=this.el.sceneEl;this.removeSessionEventListeners(),t.removeEventListener("enter-vr",this.addSessionEventListeners),t.removeEventListener("controllersupdated",this.updateController)},addSessionEventListeners:function(){var t=this.el.sceneEl;t.xrSession&&(t.xrSession.addEventListener("selectstart",this.emitButtonDownEvent),t.xrSession.addEventListener("selectend",this.emitButtonUpEvent))},removeSessionEventListeners:function(){var t=this.el.sceneEl;t.xrSession&&(t.xrSession.addEventListener("selectstart",this.emitButtonDownEvent),t.xrSession.addEventListener("selectend",this.emitButtonUpEvent))},emitButtonDownEvent:function(t){this.controller&&t.inputSource.handedness===this.data.hand&&(this.buttonEventDetails.state.pressed=!0,this.el.emit("buttondown",this.buttonEventDetails),this.el.emit("buttonchanged",this.buttonEventDetails),this.el.emit("triggerdown"))},emitButtonUpEvent:function(t){this.controller&&t.inputSource.handedness===this.data.hand&&(this.buttonEventDetails.state.pressed=!1,this.el.emit("buttonup",this.buttonEventDetails),this.el.emit("buttonchanged",this.buttonEventDetails),this.el.emit("triggerup"))},updateController:function(){this.controller=i.findMatchingControllerWebXR(this.system.controllers,this.data.hand),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var t,e=this.el.sceneEl,n=this.el.object3D;this.controller&&e.frame&&(t=e.frame.getInputPose(this.controller,e.frameOfReference))&&(n.matrix.elements=t.targetRay.transformMatrix,n.matrix.decompose(n.position,n.rotation,n.scale))}})},{"../core/component":103,"../utils/tracked-controls":184}],89:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!0},headElement:{type:"selector"}},update:function(){var t=this.el;t.setAttribute(t.sceneEl.hasWebXR?"tracked-controls-webxr":"tracked-controls-webvr",this.data)}})},{"../core/component":103}],90:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":103}],91:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),s=t("../utils/tracked-controls"),o=s.checkControllerPresentAndSetup,a=s.emitIfAxesChanged,l=s.onButtonEvent;e.exports.Component=i("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},init:function(){var t=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var t=this.data;o(this,"OpenVR ",{index:"right"===t.hand?0:"left"===t.hand?1:2})},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{idPrefix:"OpenVR ",controller:"right"===t.hand?1:"left"===t.hand?0:2,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",mtl:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id],n=this.buttonMeshes;e&&("trigger"===e&&n&&n.trigger&&(n.trigger.rotation.x=-t.detail.state.value*(Math.PI/12)),this.el.emit(e+"changed",t.detail.state))},onModelLoaded:function(t){var e,n=t.detail.model,i=this;this.data.model&&((e=this.buttonMeshes={}).grip={left:n.getObjectByName("leftgrip"),right:n.getObjectByName("rightgrip")},e.menu=n.getObjectByName("menubutton"),e.system=n.getObjectByName("systembutton"),e.trackpad=n.getObjectByName("touchpad"),e.trigger=n.getObjectByName("trigger"),Object.keys(e).forEach(function(t){i.setButtonColor(t,i.data.buttonColor)}),n.position.set(0,-.015,.04))},onAxisMoved:function(t){a(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&(-1!==e.indexOf("touch")||this.setButtonColor(t,"up"===e?this.data.buttonColor:this.data.buttonHighlightColor))},setButtonColor:function(t,e){var n=this.buttonMeshes,i=this.rendererSystem;if(n){if("grip"===t)return n.grip.left.material.color.set(e),n.grip.right.material.color.set(e),i.applyColorCorrection(n.grip.left.material.color),void i.applyColorCorrection(n.grip.right.material.color);n[t].material.color.set(e),i.applyColorCorrection(n[t].material.color)}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],92:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),s=t("../utils/tracked-controls"),o=s.checkControllerPresentAndSetup,a=s.emitIfAxesChanged,l=s.onButtonEvent;e.exports.Component=i("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trigger","trackpad"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){o(this,"HTC Vive Focus",this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:"HTC Vive Focus",orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model","https://cdn.aframe.io/controllers/vive/focus-controller/focus-controller.gltf")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).trigger=n.getObjectByName("BumperKey"),e.triggerPressed=n.getObjectByName("BumperKey_Press"),e.triggerPressed&&(e.triggerPressed.visible=!1),e.trackpad=n.getObjectByName("TouchPad"),e.trackpadPressed=n.getObjectByName("TouchPad_Press"),e.trackpadPressed&&(e.trackpadPressed.visible=!1))},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},onAxisMoved:function(t){a(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes,i=t+"Pressed";if(n&&n[t]&&n[i]){var r;switch(e){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor}r&&n[i].material.color.set(r),n[i].visible=!!r,n[t].visible=!r}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],93:[function(t,e,n){var i,r,s=t("../constants").keyboardevent.KEYCODE_TO_CODE,o=t("../core/component").registerComponent,a=t("../lib/three"),l=t("../utils/"),c=l.bind,h=l.shouldCaptureKeyEvent,u=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];e.exports.Component=o("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.easing=1.1,this.velocity=new a.Vector3,this.onBlur=c(this.onBlur,this),this.onFocus=c(this.onFocus,this),this.onKeyDown=c(this.onKeyDown,this),this.onKeyUp=c(this.onKeyUp,this),this.onVisibilityChange=c(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(t,e){var n=this.data,i=this.el,r=this.velocity;(r[n.adAxis]||r[n.wsAxis]||!function(t){var e;for(e in t)return!1;return!0}(this.keys))&&(this.updateVelocity(e/=1e3),(r[n.adAxis]||r[n.wsAxis])&&i.object3D.position.add(this.getMovementVector(e)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(t){var e,n,i,r,s,o=this.data,a=this.keys,l=this.velocity;if(n=o.adAxis,r=o.wsAxis,t>.2)return l[n]=0,void(l[r]=0);var c=Math.pow(1/this.easing,60*t);0!==l[n]&&(l[n]-=l[n]*c),0!==l[r]&&(l[r]-=l[r]*c),Math.abs(l[n])<1e-5&&(l[n]=0),Math.abs(l[r])<1e-5&&(l[r]=0),o.enabled&&(e=o.acceleration,o.adEnabled&&(i=o.adInverted?-1:1,(a.KeyA||a.ArrowLeft)&&(l[n]-=i*e*t),(a.KeyD||a.ArrowRight)&&(l[n]+=i*e*t)),o.wsEnabled&&(s=o.wsInverted?-1:1,(a.KeyW||a.ArrowUp)&&(l[r]-=s*e*t),(a.KeyS||a.ArrowDown)&&(l[r]+=s*e*t)))},getMovementVector:(i=new a.Vector3(0,0,0),r=new a.Euler(0,0,0,"YXZ"),function(t){var e=this.el.getAttribute("rotation");return i.copy(this.velocity),i.multiplyScalar(t),e?(r.set(a.Math.degToRad(this.data.fly?e.x:0),a.Math.degToRad(e.y),0),i.applyEuler(r),i):i}),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(t){var e;h(t)&&-1!==u.indexOf(e=t.code||s[t.keyCode])&&(this.keys[e]=!0)},onKeyUp:function(t){delete this.keys[t.code||s[t.keyCode]]}})},{"../constants":95,"../core/component":103,"../lib/three":151,"../utils/":176}],94:[function(t,e,n){var i,r=t("../core/component").registerComponent,s=t("../utils/bind"),o=t("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,l=o.emitIfAxesChanged,c=o.onButtonEvent,h=t("../utils/"),u=h.debug("components:windows-motion-controls:debug"),d=h.debug("components:windows-motion-controls:warn"),p=t("../constants").DEFAULT_HANDEDNESS,f={left:"left.glb",right:"right.glb",default:"universal.glb"},m=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/;e.exports.Component=r("windows-motion-controls",{schema:{hand:{default:p},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:{axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=s(this.onModelError,this),this.onModelLoaded=s(this.onModelLoaded,this),this.onControllersUpdate=s(this.onControllersUpdate,this),this.checkIfControllerPresent=s(this.checkIfControllerPresent,this),this.onAxisMoved=s(this.onAxisMoved,this)},init:function(){var t=this,e=this.el;this.onButtonChanged=s(this.onButtonChanged,this),this.onButtonDown=function(e){c(e.detail.id,"down",t)},this.onButtonUp=function(e){c(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){c(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){c(e.detail.id,"touchend",t)},this.onControllerConnected=function(){t.setModelVisibility(!0)},this.onControllerDisconnected=function(){t.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},e.addEventListener("controllerconnected",this.onControllerConnected),e.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),t.addEventListener("model-error",this.onModelError),t.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),t.removeEventListener("model-error",this.onModelError),t.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){a(this,"Spatial Controller (Spatial Interaction Source) ",{hand:this.data.hand,index:this.data.pair})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var t=this.createControllerModelUrl();this.loadModel(t)}else this.modelReady()},createControllerModelUrl:function(t){var e=this.el.components["tracked-controls"],n=e?e.controller:null,i="default",r=this.data.hand;if(n&&(r=n.hand,!t)){var s=n.id.match(m);i=s&&s[0]||i}return"https://cdn.aframe.io/controllers/microsoft/"+i+"/"+(f[r]||f.default)},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{idPrefix:"Spatial Controller (Spatial Interaction Source) ",controller:t.pair,hand:t.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(t){var e=this.createControllerModelUrl(!0);t.detail.src!==e?(d("Failed to load controller model for device, attempting to load default."),this.loadModel(e)):d("Failed to load default controller model.")},loadModel:function(t){this.el.setAttribute("gltf-model","url("+t+")")},onModelLoaded:function(t){var e,n,i,r,s=this.controllerModel=t.detail.model,o=this.loadedMeshInfo;if(u("Processing model"),o.buttonMeshes={},o.axisMeshes={},s){for(e=0;e<this.mapping.buttons.length;e++)(n=this.mapping.buttonMeshNames[this.mapping.buttons[e]])?(i=s.getObjectByName(n))?(r={index:e,value:a(i,"VALUE"),pressed:a(i,"PRESSED"),unpressed:a(i,"UNPRESSED")}).value&&r.pressed&&r.unpressed?o.buttonMeshes[this.mapping.buttons[e]]=r:d("Missing button submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", PRESSED: "+!!r.pressed+", UNPRESSED:"+!!r.unpressed+")"):d("Missing button mesh with name: "+n):u("Skipping unknown button at index: "+e+" with mapped name: "+this.mapping.buttons[e]);for(e=0;e<this.mapping.axisMeshNames.length;e++)(n=this.mapping.axisMeshNames[e])?(i=s.getObjectByName(n))?(r={index:e,value:a(i,"VALUE"),min:a(i,"MIN"),max:a(i,"MAX")}).value&&r.min&&r.max?o.axisMeshes[e]=r:d("Missing axis submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", MIN: "+!!r.min+", MAX:"+!!r.max+")"):d("Missing axis mesh with name: "+n):u("Skipping unknown axis at index: "+e);this.calculateRayOriginFromMesh(s),this.setModelVisibility()}function a(t,e){for(var n=0,i=t.children.length;n<i;n++){var r=t.children[n];if(r&&r.name===e)return r}}u("Model load complete.")},calculateRayOriginFromMesh:(i=new THREE.Quaternion,function(t){var e;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,e=t.getObjectByName(this.mapping.pointingPoseMeshName)){var n=t.parent;n&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=n),e.getWorldPosition(this.rayOrigin.origin),e.getWorldQuaternion(i),this.rayOrigin.direction.applyQuaternion(i),n&&t.updateMatrixWorld(!0)}else u("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}),lerpAxisTransform:function(){var t=new THREE.Quaternion;return function(e,n){var i=this.loadedMeshInfo.axisMeshes[e];if(i){var r=i.min,s=i.max,o=i.value,a=.5*n+.5;o.setRotationFromQuaternion(t.copy(r.quaternion).slerp(s.quaternion,a)),o.position.lerpVectors(r.position,s.position,a)}}}(),lerpButtonTransform:function(){var t=new THREE.Quaternion;return function(e,n){var i=this.loadedMeshInfo.buttonMeshes[e];if(i){var r=i.unpressed,s=i.pressed,o=i.value;o.setRotationFromQuaternion(t.copy(r.quaternion).slerp(s.quaternion,n)),o.position.lerpVectors(r.position,s.position,n)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(e,t.detail.state.value),this.el.emit(e+"changed",t.detail.state))},onAxisMoved:function(t){var e=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var n=0;n<e;n++)this.lerpAxisTransform(n,t.detail.axis[n]||0);l(this,this.mapping.axes,t)},setModelVisibility:function(t){var e=this.el.getObject3D("mesh");this.modelVisible=t=void 0!==t?t:this.modelVisible,e&&(e.visible=t)}})},{"../constants":95,"../core/component":103,"../utils/":176,"../utils/bind":170,"../utils/tracked-controls":184}],95:[function(t,e,n){e.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:t("./keyboardevent")}},{"./keyboardevent":96}],96:[function(t,e,n){e.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},{}],97:[function(t,e,n){var i=t("./a-node"),r=t("../utils/bind"),s=t("../utils/debug"),o=t("./a-register-element").registerElement,a=t("../lib/three"),l=new a.FileLoader,c=s("core:a-assets:warn");function h(t){if(t.hasAttribute("autoplay")||"auto"===t.getAttribute("preload"))return new Promise(function(e,n){if(4===t.readyState)return e();if(t.error)return n();function i(){for(var n=0,i=0;i<t.buffered.length;i++)n+=t.buffered.end(i)-t.buffered.start(i);n>=t.duration&&("VIDEO"===t.tagName&&(a.Cache.files[t.getAttribute("src")]=t),e())}t.addEventListener("loadeddata",i,!1),t.addEventListener("progress",i,!1),t.addEventListener("error",n,!1)})}function u(t){var e=function(t){var e,n,i;if(t.hasAttribute("crossorigin"))return t;if(null!==(e=t.getAttribute("src"))){if(-1===e.indexOf("://"))return t;if((i=(n=e).indexOf("://")>-1?n.split("/")[2]:n.split("/")[0]).substring(0,i.indexOf(":"))===window.location.host)return t}return c('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',e),t.crossOrigin="anonymous",t.cloneNode(!0)}(t);return e.tagName&&"video"===e.tagName.toLowerCase()&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline","")),e!==t&&(t.parentNode.appendChild(e),t.parentNode.removeChild(t)),e}function d(t){var e=t.lastIndexOf(".");if(e>=0){var n=t.slice(e,t.length);if(".gltf"===n||".glb"===n)return"arraybuffer"}return"text"}e.exports=o("a-assets",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=l,this.timeout=null}},attachedCallback:{value:function(){var t,e,n,i,s,o,l=this,d=[];if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(s=this.querySelectorAll("img"),t=0;t<s.length;t++)i=u(s[t]),d.push(new Promise(function(e,n){a.Cache.files[s[t].getAttribute("src")]=i,i.onload=e,i.onerror=n}));for(n=this.querySelectorAll("audio, video"),t=0;t<n.length;t++)(e=u(n[t])).src||e.srcObject||c("Audio/video asset has neither `src` nor `srcObject` attributes."),d.push(h(e));Promise.all(d).then(r(this.load,this)),o=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){l.hasLoaded||(c("Asset loading timed out in ",o,"ms"),l.emit("timeout"),l.load())},o)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){i.prototype.load.call(this,null,function(t){return t.isAssetItem&&t.hasAttribute("src")})}}})}),o("a-asset-item",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var t=this,e=this.getAttribute("src");l.setResponseType(this.getAttribute("response-type")||d(e)),l.load(e,function(e){t.data=e,setTimeout(function(){i.prototype.load.call(t)})},function(e){t.emit("progress",{loadedBytes:e.loaded,totalBytes:e.total,xhr:e})},function(e){t.emit("error",{xhr:e})})}}})}),e.exports.inferResponseType=d},{"../lib/three":151,"../utils/bind":170,"../utils/debug":172,"./a-node":101,"./a-register-element":102}],98:[function(t,e,n){var i=t("../utils/debug"),r=t("./a-register-element").registerElement,s=i("core:cubemap:warn");e.exports=r("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var t,e=this.querySelectorAll("[src]"),n=[];if(6===e.length){for(t=0;t<e.length;t++)n.push(e[t].getAttribute("src"));return n}s("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":172,"./a-register-element":102}],99:[function(t,e,n){var i,r,s,o=t("./a-node"),a=t("./component").components,l=t("./a-register-element").registerElement,c=t("../lib/three"),h=t("../utils/"),u=h.debug("core:a-entity:debug"),d=h.debug("core:a-entity:warn"),p="__",f=["position","rotation","scale","visible"],m={once:!0},g=Object.create(o.prototype,{createdCallback:{value:function(){this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new c.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}},attributeChangedCallback:{value:function(t,e,n){var i=this.components[t];i&&i.justInitialized&&""===n?delete i.justInitialized:(i||null!==n)&&this.setEntityAttribute(t,e,n)}},attachedCallback:{value:function(){var t,e=this.sceneEl,n=this;this.addToParent(),this.isScene||(e?!(t=e.querySelector("a-assets"))||t.hasLoaded?this.load():t.addEventListener("loaded",function(){n.load()}):this.load())}},detachedCallback:{value:function(){var t;if(this.parentEl){for(t in this.components)this.removeComponent(t,!1);this.isScene||(this.removeFromParent(),o.prototype.detachedCallback.call(this),this.object3D.el=null)}}},getObject3D:{value:function(t){return this.object3DMap[t]}},setObject3D:{value:function(t,e){var n,i=this;if(!(e instanceof c.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(n=this.getObject3D(t))&&this.object3D.remove(n),e.el=this,e.children.length&&e.traverse(function(t){t.el=i}),this.object3D.add(e),this.object3DMap[t]=e,this.emit("object3dset",{object:e,type:t})}},removeObject3D:{value:function(t){var e=this.getObject3D(t);e?(this.object3D.remove(e),delete this.object3DMap[t],this.emit("object3dremove",{type:t})):d("Tried to remove `Object3D` of type:",t,"which was not defined.")}},getOrCreateObject3D:{value:function(t,e){var n=this.getObject3D(t);return!n&&e&&(n=new e,this.setObject3D(t,n)),d("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),n}},add:{value:function(t){if(!t.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(t.object3D),this.emit("child-attached",{el:t})}},addToParent:{value:function(){var t=this.parentEl=this.parentNode;t&&t.add&&!this.attachedToParent&&(t.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var t=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,t.emit("child-detached",{el:this})}},load:{value:function(){var t=this;!this.hasLoaded&&this.parentEl&&o.prototype.load.call(this,function(){t.parentEl&&(t.updateComponents(),(t.isScene||t.parentEl.isPlaying)&&t.play())})},writable:window.debug},remove:{value:function(t){t?this.object3D.remove(t.object3D):this.parentNode.removeChild(this)}},getChildEntities:{value:function(){for(var t=this.children,e=[],n=0;n<t.length;n++){var r=t[n];r instanceof i&&e.push(r)}return e}},initComponent:{value:function(t,e,n){var i,r,s,o;if(o=(s=h.split(t,p))[0],r=s.length>2?s.slice(1).join("__"):s[1],a[o]&&(v(this,t)||void 0!==e||n)&&!(t in this.components)){if(this.initComponentDependencies(o),r&&!a[o].multiple)throw new Error("Trying to initialize multiple components of type `"+o+"`. There can only be one component of this type per entity.");i=new a[o].Component(this,e,r),this.isPlaying&&i.play(),this.hasAttribute(t)||(i.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,t,"")),u("Component initialized: %s",t)}},writable:window.debug},initComponentDependencies:{value:function(t){var e,n;if(a[t]&&(e=a[t].dependencies))for(n=0;n<e.length;n++)this.initComponent(e[n],window.HTMLElement.prototype.getAttribute.call(this,e[n])||void 0,!0)}},removeComponent:{value:function(t,e){var n;(n=this.components[t])&&(n.initialized?(n.pause(),n.remove(),e&&(n.destroy(),delete this.components[t]),this.emit("componentremoved",n.evtDetail,!1)):this.addEventListener("componentinitialized",function n(i){i.detail.name===t&&(this.removeComponent(t,e),this.removeEventListener("componentinitialized",n))}))},writable:window.debug},updateComponents:{value:function(){var t,e,n,i,r,s,o=this.componentsToUpdate;if(this.hasLoaded){for(n=0;n<this.mixinEls.length;n++)for(i in this.mixinEls[n].componentCache)y(i)&&(o[i]=!0);if(this.getExtraComponents)for(i in e=this.getExtraComponents())y(i)&&(o[i]=!0);for(n=0;n<this.attributes.length;++n)-1===f.indexOf(i=this.attributes[n].name)&&y(i)&&(o[i]=!0);for(n=0;n<f.length;n++)this.hasAttribute(i=f[n])&&this.updateComponent(i,this.getDOMAttribute(i));for(i in o)r=this.getDOMAttribute(i),t=(s=e&&e[i])?s.constructor===Object?h.extend(s,h.styleParser.parse(r||{})):r||s:r,this.updateComponent(i,t),delete o[i]}},writable:window.debug},updateComponent:{value:function(t,e,n){var i=this.components[t];if(i)return null!==e||v(this,t)?void i.updateProperties(e,n):void this.removeComponent(t,!0);this.initComponent(t,e,!1)}},removeAttribute:{value:function(t,e){var n=this.components[t];n&&void 0===e&&this.removeComponent(t,!0),n&&void 0!==e?n.resetProperty(e):("mixin"===t&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,t))}},play:{value:function(){var t,e,n;if(!this.isPlaying&&this.hasLoaded){for(n in this.isPlaying=!0,this.components)this.components[n].play();for(t=this.getChildEntities(),e=0;e<t.length;e++)t[e].play();this.emit("play")}},writable:!0},pause:{value:function(){var t,e,n;if(this.isPlaying){for(n in this.isPlaying=!1,this.components)this.components[n].pause();for(t=this.getChildEntities(),e=0;e<t.length;e++)t[e].pause();this.emit("pause")}},writable:!0},setEntityAttribute:{value:function(t,e,n){if(a[t]||this.components[t])this.updateComponent(t,n);else if("mixin"===t){if(n===this.computedMixinStr)return;this.mixinUpdate(n,e)}}},mixinUpdate:{value:(s=[],function(t,e){var n,i,r,o,a=this;if(this.hasLoaded){for(e=e||this.getAttribute("mixin"),r=this.updateMixins(t,e),s.length=0,o=0;o<this.mixinEls.length;o++)for(n in this.mixinEls[o].componentCache)-1===s.indexOf(n)&&(this.components[n]?this.components[n].handleMixinUpdate():this.initComponent(n,null),s.push(n));for(o=0;o<r.oldMixinIds.length;o++)if(i=document.getElementById(r.oldMixinIds[o]))for(n in i.componentCache)-1===s.indexOf(n)&&this.components[n]&&(this.getDOMAttribute(n)?this.components[n].handleMixinUpdate():this.removeComponent(n,!0))}else this.addEventListener("loaded",function(){a.mixinUpdate(t,e)},m)})},setAttribute:{value:(r={},function(t,e,n){var i,s,l,c,u;if(l=(c=t.indexOf(p))>0?t.substring(0,c):t,!a[l])return"mixin"===t&&this.mixinUpdate(e),void o.prototype.setAttribute.call(this,t,e);if(!this.components[t]&&this.hasAttribute(t)&&this.updateComponent(t,window.HTMLElement.prototype.getAttribute.call(this,t)),void 0!==n&&"string"==typeof e&&e.length>0&&"string"==typeof h.styleParser.parse(e)){for(u in r)delete r[u];(i=r)[e]=n,s=!1}else i=e,s=!0===n;this.updateComponent(t,i,s),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[t].flushToDOM()}),writable:window.debug},flushToDOM:{value:function(t){var e,n,i,r=this.components,s=this.children;for(i in r)r[i].flushToDOM();if(t)for(n=0;n<s.length;++n)(e=s[n]).flushToDOM&&e.flushToDOM(t)}},getAttribute:{value:function(t){var e,n,i,r;return"position"===t?this.object3D.position:"rotation"===t?((r=this.rotationObj).x=(n=c.Math.radToDeg)((i=this.object3D.rotation).x),r.y=n(i.y),r.z=n(i.z),r):"scale"===t?this.object3D.scale:"visible"===t?this.object3D.visible:(e=this.components[t])?e.data:window.HTMLElement.prototype.getAttribute.call(this,t)},writable:window.debug},getDOMAttribute:{value:function(t){var e=this.components[t];return e?e.attrValue:window.HTMLElement.prototype.getAttribute.call(this,t)},writable:window.debug},addState:{value:function(t){this.is(t)||(this.states.push(t),this.emit("stateadded",t))}},removeState:{value:function(t){var e=this.states.indexOf(t);-1!==e&&(this.states.splice(e,1),this.emit("stateremoved",t))}},is:{value:function(t){return-1!==this.states.indexOf(t)}},inspect:{value:function(){this.sceneEl.components.inspector.openInspector(this)}},destroy:{value:function(){var t;if(this.parentNode)d("Entity can only be destroyed if detached from scenegraph.");else for(t in this.components)this.components[t].destroy()}}});function v(t,e){return!(!t.components[e]||!t.components[e].attrValue)||function(t,e){var n,i=!1;for(n=0;n<e.length&&!(i=e[n].hasAttribute(t));++n);return i}(e,t.mixinEls)}function y(t){return-1!==t.indexOf(p)&&(t=h.split(t,p)[0]),!!a[t]}i=l("a-entity",{prototype:g}),e.exports=i},{"../lib/three":151,"../utils/":176,"./a-node":101,"./a-register-element":102,"./component":103}],100:[function(t,e,n){var i=t("./a-node"),r=t("./a-register-element").registerElement,s=t("./component").components,o=t("../utils");e.exports=r("a-mixin",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id"),this.isMixin=!0}},attributeChangedCallback:{value:function(t,e,n){this.cacheAttribute(t,n),this.updateEntities()}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(t,e){window.HTMLElement.prototype.setAttribute.call(this,t,e),this.cacheAttribute(t,e)}},cacheAttribute:{value:function(t,e){var n,i;i=o.split(t,"__")[0],(n=s[i])&&(void 0===e&&(e=window.HTMLElement.prototype.getAttribute.call(this,t)),this.componentCache[t]=n.parseAttrValueForCache(e))}},getAttribute:{value:function(t){return this.componentCache[t]||window.HTMLElement.prototype.getAttribute.call(this,t)}},cacheAttributes:{value:function(){var t,e=this.attributes;for(t=0;t<e.length;t++)this.cacheAttribute(e[t].name)}},updateEntities:{value:function(){var t,e,n;if(this.sceneEl)for(e=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),n=0;n<e.length;n++)(t=e[n]).hasLoaded&&!t.isMixin&&t.mixinUpdate(this.id)}}})})},{"../utils":176,"./a-node":101,"./a-register-element":102,"./component":103}],101:[function(t,e,n){var i,r,s,o,a=t("./a-register-element").registerElement,l=t("./a-register-element").isNode,c=t("../utils/"),h=c.debug("core:a-node:warn"),u=c.debug("core:a-node:error");e.exports=a("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]},writable:window.debug},attachedCallback:{value:function(){var t;this.sceneEl=this.closestScene(),this.sceneEl||h("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(t=this.getAttribute("mixin"))&&this.updateMixins(t)},writable:window.debug},attributeChangedCallback:{value:function(t,e,n){n!==this.computedMixinStr&&("mixin"!==t||this.isMixin||this.updateMixins(n,e))}},closestScene:{value:function(){for(var t=this;t&&!t.isScene;)t=t.parentElement;return t}},closest:{value:function(t){for(var e=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,n=this;n&&!e.call(n,t);)n=n.parentElement;return n}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(t,e){var n,i=this;this.hasLoaded||(e=e||l,n=this.getChildren().filter(e).map(function(t){return new Promise(function(e){if(t.hasLoaded)return e();t.addEventListener("loaded",e)})}),Promise.all(n).then(function(){i.hasLoaded=!0,t&&t(),i.emit("loaded",void 0,!1)}).catch(function(t){u("Failure loading node: ",t)}))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:(r=[],s=[],o={},function(t,e){var n,i,a;for(r.length=0,s.length=0,i=t?c.split(t.trim(),/\s+/):r,a=e?c.split(e.trim(),/\s+/):s,o.newMixinIds=i,o.oldMixinIds=a,n=0;n<a.length;n++)-1===i.indexOf(a[n])&&this.unregisterMixin(a[n]);for(this.computedMixinStr="",this.mixinEls.length=0,n=0;n<i.length;n++)this.registerMixin(document.getElementById(i[n]));return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),o})},registerMixin:{value:function(t){var e,n,i;if(t){if(i=t.getAttribute("mixin"))for(e=c.split(i.trim(),/\s+/),n=0;n<e.length;n++)this.registerMixin(document.getElementById(e[n]));this.computedMixinStr=this.computedMixinStr+" "+t.id,this.mixinEls.push(t)}}},setAttribute:{value:function(t,e){"mixin"===t&&this.updateMixins(e),window.HTMLElement.prototype.setAttribute.call(this,t,e)}},unregisterMixin:{value:function(t){var e,n=this.mixinEls;for(e=0;e<n.length;++e)if(t===n[e].id){n.splice(e,1);break}}},emit:{value:(i={},function(t,e,n,r){void 0===n&&(n=!0),i.bubbles=!!n,i.detail=e,r&&(i=c.extend({},r,i)),this.dispatchEvent(new CustomEvent(t,i))}),writable:window.debug}})})},{"../utils/":176,"./a-register-element":102}],102:[function(t,e,n){var i,r;t("document-register-element");var s=e.exports.knownTags={};function o(t,e,n,i){e.forEach(function(e){!function(e,n,i,r){var s=i[n],o=r[n];s&&o&&s!==o&&(t[n]={value:function(){return o.apply(this,arguments),s.apply(this,arguments)},writable:window.debug})}(0,e,n,i)})}function a(t,e){Object.getOwnPropertyNames(t).forEach(function(n){var i;e[n]||(i=Object.getOwnPropertyDescriptor(t,n),e[n]={value:t[n],writable:i.writable})})}e.exports.isNode=function(t){return t.tagName.toLowerCase()in s||t.isNode},e.exports.registerElement=function(t,e){var n=Object.getPrototypeOf(e.prototype),l=e,c=i&&n===i.prototype,h=r&&n===r.prototype;return(c||h)&&function(t){s[t.toLowerCase()]=!0}(t),c&&(l=function(t){var e={};return o(e,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],t,i.prototype),a(t,e),e}(e.prototype),l={prototype:Object.create(n,l)}),h&&(l=function(t){var e={};return o(e,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],t,i.prototype),o(e,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],t,r.prototype),a(t,e),e}(e.prototype),l={prototype:Object.create(n,l)}),Object.getOwnPropertyNames(l.prototype).forEach(function(t){var e=l.prototype[t];"function"==typeof e&&(e.displayName=t)}),document.registerElement(t,l)},e.exports.wrapMethods=o,i=t("./a-node"),r=t("./a-entity")},{"./a-entity":99,"./a-node":101,"document-register-element":11}],103:[function(t,e,n){var i=t("./schema"),r=t("./scene/scenes"),s=t("./system"),o=t("../utils/"),a=e.exports.components={},l=i.parseProperties,c=i.parseProperty,h=i.process,u=i.isSingleProperty,d=i.stringifyProperties,p=i.stringifyProperty,f=o.styleParser,m=o.debug("core:component:warn"),g=document.currentScript,v=new RegExp("[A-Z]+"),y={},_=e.exports.Component=function(t,e,n){var i=this;this.el=t,this.id=n,this.attrName=this.name+(n?"__"+n:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.isSingleProperty=u(this.schema),this.isSinglePropertyObject=this.isSingleProperty&&E(c(void 0,this.schema))&&!(this.schema.default instanceof window.HTMLElement),this.isObjectBased=!this.isSingleProperty||this.isSinglePropertyObject,this.el.components[this.attrName]=this,this.objectPool=y[this.name],function(t,e){var n;for(n in e)e[n]=e[n].bind(t)}(this,this.events),this.attrValue=void 0,this.isObjectBased?(this.nextData=this.objectPool.use(),o.objectPool.removeUnusedKeys(this.nextData,this.schema),this.oldData=this.objectPool.use(),o.objectPool.removeUnusedKeys(this.oldData,this.schema),this.previousOldData=this.objectPool.use(),o.objectPool.removeUnusedKeys(this.previousOldData,this.schema),this.parsingAttrValue=this.objectPool.use(),o.objectPool.removeUnusedKeys(this.parsingAttrValue,this.schema)):(this.nextData=void 0,this.oldData=void 0,this.previousOldData=void 0,this.parsingAttrValue=void 0),this.throttledEmitComponentChanged=o.throttle(function(){t.emit("componentchanged",i.evtDetail,!1)},200),this.updateProperties(e)};if(_.prototype={schema:{},init:function(){},events:{},update:function(t){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(t,e){var n=this.schema;return this.isSingleProperty?c(t,n):l(f.parse(t),n,!0,this.name,e)},stringify:function(t){var e=this.schema;return"string"==typeof t?t:this.isSingleProperty?p(t,e):(t=d(t,e),f.stringify(t))},updateCachedAttrValue:function(t,e){var n,i,r;if(void 0!==t){if(null===t)return this.isObjectBased&&this.attrValue&&this.objectPool.recycle(this.attrValue),void(this.attrValue=void 0);if(t instanceof Object&&!(t instanceof window.HTMLElement)?(i=this.objectPool.use(),n=o.extend(i,t)):n=this.parseAttrValueForCache(t),this.isObjectBased&&!e&&this.attrValue)for(r in this.attrValue)void 0===n[r]&&(n[r]=this.attrValue[r]);this.isObjectBased&&!this.attrValue&&(this.attrValue=this.objectPool.use()),o.objectPool.clearObject(this.attrValue),this.attrValue=w(this.attrValue,n,this.isObjectBased),o.objectPool.clearObject(i)}},parseAttrValueForCache:function(t){var e;return"string"!=typeof t?t:(this.isSingleProperty?"string"==typeof(e=this.schema.parse(t))&&(e=t):(o.objectPool.clearObject(this.parsingAttrValue),e=f.parse(t,this.parsingAttrValue)),e)},flushToDOM:function(t){var e=t?this.data:this.attrValue;null!=e&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(e))},updateProperties:function(t,e){this.el.hasLoaded?(null!==t&&(t=this.parseAttrValueForCache(t)),this.updateCachedAttrValue(t,e),this.initialized?(this.updateComponent(t,e),this.callUpdateHandler()):this.initComponent()):this.updateCachedAttrValue(t)},initComponent:function(){var t,e=this.el;this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue),e.initializingComponents[this.name]||(e.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete e.initializingComponents[this.name],this.oldData=w(this.oldData,this.data,this.isObjectBased),t=this.isObjectBased?this.objectPool.use():void 0,this.update(t),this.isObjectBased&&this.objectPool.recycle(t),e.isPlaying&&this.play(),e.emit("componentinitialized",this.evtDetail,!1))},updateComponent:function(t,e){var n,i;if(e)return this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),void(this.data=this.buildData(this.attrValue,!0,!1));if(this.isSingleProperty)return this.isObjectBased&&c(t,this.schema),void(this.data=t);if(l(t,this.schema,!0,this.name),this.schemaChangeKeys.length)for(n in t)if(this.schema[n].schemaChange){i=!0;break}if(i)return this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),void(this.data=this.buildData(this.attrValue,!0,!1));for(n in t)void 0!==t[n]&&(this.data[n]=t[n])},callUpdateHandler:function(){var t;this.previousOldData instanceof Object&&o.objectPool.clearObject(this.previousOldData),this.isObjectBased?x(this.previousOldData,this.oldData):this.previousOldData=this.oldData,t=!o.deepEqual(this.oldData,this.data),(this.isPositionRotationScale||t)&&(this.oldData instanceof Object&&o.objectPool.clearObject(this.oldData),this.oldData=w(this.oldData,this.data,this.isObjectBased),this.update(this.previousOldData),this.throttledEmitComponentChanged())},handleMixinUpdate:function(){this.data=this.buildData(this.attrValue),this.callUpdateHandler()},resetProperty:function(t){if(this.isObjectBased){if(!(t in this.attrValue))return;delete this.attrValue[t],this.data[t]=this.schema[t].default}else this.attrValue=this.schema.default,this.data=this.schema.default;this.updateProperties(this.attrValue)},extendSchema:function(t){var e;e=o.extend({},a[this.name].schema),o.extend(e,t),this.schema=h(e),this.el.emit("schemachanged",this.evtDetail)},buildData:function(t,e,n){var i,r,s,a,h,u,d,p=this.nextData,f=this.schema,m=this.el.mixinEls;if(i=t&&t.constructor===Array?t.length:null!=t,this.isObjectBased&&o.objectPool.clearObject(p),this.isSingleProperty)r=this.isObjectBased?x(p,f.default):S(f.default)?o.clone(f.default):f.default;else for(a in r=(d=!e&&this.attrValue)instanceof Object?x(p,d):p,f)s=f[a].default,void 0===r[a]&&(r[a]=S(s)?o.clone(s):s);for(u=0;u<m.length;u++)(h=m[u].getAttribute(this.attrName))&&(r=w(r,h,this.isObjectBased));if(i){if(this.isSingleProperty)return E(t)?(x(this.parsingAttrValue,t),c(this.parsingAttrValue,f)):c(t,f);r=w(r,t,this.isObjectBased)}else if(this.isSingleProperty)return c(r,f);return l(r,f,void 0,this.name,n)},eventsAttach:function(){var t;for(t in this.eventsDetach(),this.events)this.el.addEventListener(t,this.events[t])},eventsDetach:function(){var t;for(t in this.events)this.el.removeEventListener(t,this.events[t])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.oldData),this.objectPool.recycle(this.parsingAttrValue),this.attrValue=this.oldData=this.parsingAttrValue=void 0}},window.debug)var b=e.exports.registrationOrderWarnings={};function x(t,e){var n,i;for(i in e)void 0!==e[i]&&(t[i]=S(n=e[i])?o.clone(n):n);return t}function w(t,e,n){var i;if(n&&e.constructor===Object){for(i in e)void 0!==e[i]&&(t[i]=e[i]&&e[i].constructor===Object?o.clone(e[i]):e[i]);return t}return e}function A(t){return t.tick||t.tock}function E(t){return t&&t.constructor===Object&&!(t instanceof window.HTMLElement)}function S(t){return t&&(t.constructor===Object||t.constructor===Array)&&!(t instanceof window.HTMLElement)}e.exports.registerComponent=function(t,e){var n,i,l,c,d,p,f={};if(document.currentScript&&document.currentScript!==g&&r.forEach(function(e){e.hasLoaded||document.currentScript.compareDocumentPosition(e)!==Node.DOCUMENT_POSITION_FOLLOWING&&(m("The component `"+t+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(b[t]=!0))}),!0===v.test(t)&&m("The component name `"+t+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+t.toLowerCase()+"`"),-1!==t.indexOf("__"))throw new Error("The component name `"+t+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(e).forEach(function(t){f[t]={value:e[t],writable:!0}}),a[t])throw new Error("The component `"+t+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");if(((n=function(t,e,n){_.call(this,t,e,n)}).prototype=Object.create(_.prototype,f)).name=t,n.prototype.isPositionRotationScale="position"===t||"rotation"===t||"scale"===t,n.prototype.constructor=n,n.prototype.system=s&&s.systems[t],n.prototype.play=(d=n.prototype.play,function(){var t=this.el.sceneEl;this.initialized&&this.el.isPlaying&&!this.isPlaying&&(d.call(this),this.isPlaying=!0,this.eventsAttach(),A(this)&&t.addBehavior(this))}),n.prototype.pause=(p=n.prototype.pause,function(){var t=this.el.sceneEl;this.isPlaying&&(p.call(this),this.isPlaying=!1,this.eventsDetach(),A(this)&&t.removeBehavior(this))}),l=o.extend(h(n.prototype.schema,n.prototype.name)),!(c=u(n.prototype.schema)))for(i in n.prototype.schemaChangeKeys=[],l)l[i].schemaChange&&n.prototype.schemaChangeKeys.push(i);return y[t]=o.objectPool.createPool(),a[t]={Component:n,dependencies:n.prototype.dependencies,isSingleProp:c,multiple:n.prototype.multiple,name:t,parse:n.prototype.parse,parseAttrValueForCache:n.prototype.parseAttrValueForCache,schema:l,stringify:n.prototype.stringify,type:n.prototype.type},n}},{"../utils/":176,"./scene/scenes":110,"./schema":112,"./system":114}],104:[function(t,e,n){var i=t("./schema").process,r=e.exports.geometries={},s=e.exports.geometryNames=[],o=t("../lib/three"),a=e.exports.Geometry=function(){};a.prototype={schema:{},init:function(t){return this.geometry=new o.Geometry,this.geometry},update:function(t){}},e.exports.registerGeometry=function(t,e){var n,o={};if(Object.keys(e).forEach(function(t){o[t]={value:e[t],writable:!0}}),r[t])throw new Error("The geometry `"+t+"` has been already registered");return((n=function(){a.call(this)}).prototype=Object.create(a.prototype,o)).name=t,n.prototype.constructor=n,r[t]={Geometry:n,schema:i(n.prototype.schema)},s.push(t),n}},{"../lib/three":151,"./schema":112}],105:[function(t,e,n){var i=t("../utils/coordinates"),r=t("debug"),s=r("core:propertyTypes:warn"),o=r("core:propertyTypes:warn"),a=e.exports.propertyTypes={},l=/[,> .[\]:]/,c=/\url\((.+)\)/;function h(t,e,n,i){"type"in a?s("Property type "+t+" is already registered."):a[t]={default:e,parse:n||d,stringify:i||p}}function u(t){var e,n;return"string"!=typeof t?t:(n=t.match(c))?n[1]:"#"===t.charAt(0)?(e=document.getElementById(t.substring(1)))?"CANVAS"===e.tagName||"VIDEO"===e.tagName||"IMG"===e.tagName?e:e.getAttribute("src"):void o('"'+t+'" asset not found.'):t}function d(t){return t}function p(t){return null===t?"null":t.toString()}function f(t){return parseInt(t,10)}function m(t){return i.parse(t,this.default)}function g(t,e){return!(null!==t&&("object"!=typeof t||Object.keys(t).length!==e||"number"!=typeof t.x||"number"!=typeof t.y||e>2&&"number"!=typeof t.z||e>3&&"number"!=typeof t.w))}h("audio","",u),h("array",[],function(t){return Array.isArray(t)?t:t&&"string"==typeof t?t.split(",").map(function(t){return t.trim()}):[]},function(t){return t.join(", ")}),h("asset","",u),h("boolean",!1,function(t){return"false"!==t&&!1!==t}),h("color","#FFF",d,p),h("int",0,f),h("number",0,function(t){return parseFloat(t,10)}),h("map","",u),h("model","",u),h("selector",null,function(t){return t?"string"!=typeof t?t:"#"!==t[0]||l.test(t)?document.querySelector(t):document.getElementById(t.substring(1)):null},function(t){return t.getAttribute?"#"+t.getAttribute("id"):p(t)}),h("selectorAll",null,function(t){return t?"string"!=typeof t?t:Array.prototype.slice.call(document.querySelectorAll(t),0):null},function(t){return t instanceof Array?t.map(function(t){return"#"+t.getAttribute("id")}).join(", "):p(t)}),h("src","",function(t){return o("`src` property type is deprecated. Use `asset` instead."),u(t)}),h("string","",d,p),h("time",0,f),h("vec2",{x:0,y:0},m,i.stringify),h("vec3",{x:0,y:0,z:0},m,i.stringify),h("vec4",{x:0,y:0,z:0,w:1},m,i.stringify),e.exports.registerPropertyType=h,e.exports.isValidDefaultValue=function(t,e){return("audio"!==t||"string"==typeof e)&&!("array"===t&&!Array.isArray(e))&&("asset"!==t||"string"==typeof e)&&("boolean"!==t||"boolean"==typeof e)&&("color"!==t||"string"==typeof e)&&("int"!==t||"number"==typeof e)&&("number"!==t||"number"==typeof e)&&("map"!==t||"string"==typeof e)&&("model"!==t||"string"==typeof e)&&("selector"!==t||"string"==typeof e||null===e)&&("selectorAll"!==t||"string"==typeof e||null===e)&&("src"!==t||"string"==typeof e)&&("string"!==t||"string"==typeof e)&&("time"!==t||"number"==typeof e)&&("vec2"===t?g(e,2):"vec3"===t?g(e,3):"vec4"!==t||g(e,4))},e.exports.isValidDefaultCoordinate=g},{"../utils/coordinates":171,debug:8}],106:[function(t,e,n){var i=t("./metaTags").inject,r=t("./wakelock"),s=t("./loadingScreen"),o=t("../a-register-element"),a=t("./scenes"),l=t("../system").systems,c=t("../../lib/three"),h=t("../../utils/"),u=t("../a-entity"),d=t("../a-node"),p=t("./postMessage"),f=h.bind,m=h.device.isIOS(),g=h.device.isMobile(),v=h.device.isWebXRAvailable,y=o.registerElement,_=h.debug("core:a-scene:warn");function b(t,e,n,i){return e?{height:t.parentElement.offsetHeight,width:t.parentElement.offsetWidth}:function(t,e){var n,i,r=window.devicePixelRatio;return i={height:document.body.offsetHeight,width:document.body.offsetWidth},!t||e||-1===t.width&&-1===t.height?i:i.width*r<t.width&&i.height*r<t.height?i:(n=i.width/i.height,i.width*r>t.width&&-1!==t.width&&(i.width=Math.round(t.width/r),i.height=Math.round(t.width/n/r)),i.height*r>t.height&&-1!==t.height&&(i.height=Math.round(t.height/r),i.width=Math.round(t.height*n/r)),i)}(n,i)}function x(t){var e;function n(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||t.exitVR(),document.activeElement.blur(),document.body.focus()}(e=document.createElement("canvas")).classList.add("a-canvas"),e.dataset.aframeCanvas=!0,t.appendChild(e),document.addEventListener("fullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),e.addEventListener("touchmove",function(t){t.preventDefault()}),t.canvas=e,t.emit("render-target-loaded",{target:e}),setTimeout(f(t.resize,t),0)}e.exports.AScene=y("a-scene",{prototype:Object.create(u.prototype,{createdCallback:{value:function(){this.clock=new c.Clock,this.isIOS=m,this.isMobile=g,this.hasWebXR=v,this.isScene=!0,this.object3D=new c.Scene;var t=this;this.object3D.onAfterRender=function(e,n,i){t.isPlaying&&t.tock(t.time,t.delta,i)},this.render=f(this.render,this),this.systems={},this.systemNames=[],this.time=this.delta=0,this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui","")}},addFullScreenStyles:{value:function(){document.documentElement.classList.add("a-fullscreen")}},removeFullScreenStyles:{value:function(){document.documentElement.classList.remove("a-fullscreen")}},attachedCallback:{value:function(){var t=this;x(this),this.setupRenderer(),this.resize(),this.addFullScreenStyles(),p(this),i(this),r(this),this.onVRPresentChangeBound=f(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){t.enterVR()},this.exitVRBound=function(){t.exitVR()},this.exitVRTrueBound=function(){t.exitVR(!0)},this.pointerRestrictedBound=function(){t.pointerRestricted()},this.pointerUnrestrictedBound=function(){t.pointerUnrestricted()},v||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),this.addEventListener("cameraready",function(){t.attachedCallbackPostCamera()}),this.initSystems()}},attachedCallbackPostCamera:{value:function(){var t,e=this;t=f(this.resize,this),window.addEventListener("load",t),window.addEventListener("resize",function(){e.isIOS?setTimeout(t,100):t()}),this.play(),a.push(this)},writable:window.debug},initSystems:{value:function(){var t;for(t in this.initSystem("camera"),l)"camera"!==t&&this.initSystem(t)}},initSystem:{value:function(t){this.systems[t]||(this.systems[t]=new l[t](this),this.systemNames.push(t))}},detachedCallback:{value:function(){var t=a.indexOf(this);a.splice(t,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)}},addBehavior:{value:function(t){var e,n,i=this.behaviors;for(n in i)t[n]&&-1===(e=this.behaviors[n]).indexOf(t)&&e.push(t)}},getPointerLockElement:{value:function(){return document.pointerLockElement},writable:window.debug},checkHeadsetConnected:{value:h.device.checkHeadsetConnected,writable:window.debug},enterVR:{value:function(){var t,e=this,n=e.renderer.vr;if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){if(t=h.device.getVRDisplay(),n.enabled=!0,n.setDevice(t),!this.hasWebXR){if(t.isPresenting&&!window.hasNativeWebVRImplementation)return r(),Promise.resolve();var i=this.getAttribute("renderer");return t.requestPresent([{source:this.canvas,attributes:{highRefreshRate:i.highRefreshRate,foveationLevel:i.foveationLevel}}]).then(r,function(t){throw t&&t.message?new Error("Failed to enter VR mode (`requestPresent`): "+t.message):new Error("Failed to enter VR mode (`requestPresent`).")})}return this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound),t.requestSession({immersive:!0,exclusive:!0}).then(function(t){e.xrSession=t,n.setSession(t),t.addEventListener("end",e.exitVRBound),t.requestFrameOfReference("stage").then(function(t){e.frameOfReference=t}),r()}),Promise.resolve()}return r(),Promise.resolve();function r(){var t;e.addState("vr-mode"),e.emit("enter-vr",{target:e}),e.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),e.addFullScreenStyles(),e.isMobile||e.checkHeadsetConnected()||((t=e.canvas).requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen).apply(t,[{navigationUI:"hide"}]),e.renderer.setAnimationLoop(e.render),e.resize()}},writable:!0},exitVR:{value:function(){var t,e=this,n=this.renderer.vr;if(!this.is("vr-mode"))return Promise.resolve("Not in VR.");if(this.checkHeadsetConnected()||this.isMobile){if(n.enabled=!1,t=h.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end(),n.setSession(null);else if(t.isPresenting)return t.exitPresent().then(i,function(t){throw t&&t.message?new Error("Failed to exit VR mode (`exitPresent`): "+t.message):new Error("Failed to exit VR mode (`exitPresent`).")})}else(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());return i(),Promise.resolve();function i(){e.removeState("vr-mode"),e.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.hasAttribute("embedded")&&e.removeFullScreenStyles(),e.resize(),e.isIOS&&h.forceCanvasResizeSafariMobile(e.canvas),e.emit("exit-vr",{target:e})}},writable:!0},pointerRestricted:{value:function(){if(this.canvas){var t=this.getPointerLockElement();t&&t!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}},pointerUnrestricted:{value:function(){var t=this.getPointerLockElement();t&&t===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}},onVRPresentChange:{value:function(t){(t.display||t.detail.display).isPresenting?this.enterVR():this.exitVR()}},getAttribute:{value:function(t){var e=this.systems[t];return e?e.data:u.prototype.getAttribute.call(this,t)}},getComputedAttribute:{value:function(t){_("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(t)}},getDOMAttribute:{value:function(t){var e=this.systems[t];return e?e.data:u.prototype.getDOMAttribute.call(this,t)}},setAttribute:{value:function(t,e,n){var i=this.systems[t];if(i)return d.prototype.setAttribute.call(this,t,e),void i.updateProperties(e);u.prototype.setAttribute.call(this,t,e,n)}},removeBehavior:{value:function(t){var e,n,i,r=this.behaviors;for(n in r)t[n]&&-1!==(i=(e=this.behaviors[n]).indexOf(t))&&e.splice(i,1)}},resize:{value:function(){var t,e,n,i=this.camera,r=this.canvas;n=this.renderer.vr.getDevice(),t=this.renderer.vr.enabled&&n&&n.isPresenting,!i||!r||this.is("vr-mode")&&(this.isMobile||t)||(e=b(r,this.getAttribute("embedded")&&!this.is("vr-mode"),this.maxCanvasSize,this.is("vr-mode")),i.aspect=e.width/e.height,i.updateProjectionMatrix(),this.renderer.setSize(e.width,e.height,!1),this.emit("rendererresize",null,!1))},writable:!0},setupRenderer:{value:function(){var t,e,n,i,r=this;i={alpha:!0,antialias:!g,canvas:this.canvas,logarithmicDepthBuffer:!1},this.maxCanvasSize={height:1920,width:1920},this.hasAttribute("renderer")&&(n=this.getAttribute("renderer"),(e=h.styleParser.parse(n)).precision&&(i.precision=e.precision+"p"),e.antialias&&"auto"!==e.antialias&&(i.antialias="true"===e.antialias),e.logarithmicDepthBuffer&&"auto"!==e.logarithmicDepthBuffer&&(i.logarithmicDepthBuffer="true"===e.logarithmicDepthBuffer),e.alpha&&(i.alpha="true"===e.alpha),this.maxCanvasSize={width:e.maxCanvasWidth?parseInt(e.maxCanvasWidth):this.maxCanvasSize.width,height:e.maxCanvasHeight?parseInt(e.maxCanvasHeight):this.maxCanvasSize.height}),(t=this.renderer=new c.WebGLRenderer(i)).setPixelRatio(window.devicePixelRatio),t.sortObjects=!1,this.camera&&t.vr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){t.vr.setPoseTarget(r.camera.el.object3D)}),s.setup(this,b)},writable:window.debug},play:{value:function(){var t=this,e=this;this.renderStarted?u.prototype.play.call(this):(this.addEventListener("loaded",function(){var t,n=this.renderer,i=this.renderer.vr;u.prototype.play.call(this),e.renderStarted||(e.resize(),e.renderer&&(window.performance&&window.performance.mark("render-started"),s.remove(),(t=h.device.getVRDisplay())&&t.isPresenting&&(i.setDevice(t),i.enabled=!0,e.enterVR()),n.setAnimationLoop(this.render),e.renderStarted=!0,e.emit("renderstart")))}),setTimeout(function(){u.prototype.load.call(t)}))}},updateComponent:{value:function(t){t in l||u.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(t,e){var n,i=this.systems;for(n=0;n<this.behaviors.tick.length;n++)this.behaviors.tick[n].el.isPlaying&&this.behaviors.tick[n].tick(t,e);for(n=0;n<this.systemNames.length;n++)i[this.systemNames[n]].tick&&i[this.systemNames[n]].tick(t,e)}},tock:{value:function(t,e,n){var i,r=this.systems;for(i=0;i<this.behaviors.tock.length;i++)this.behaviors.tock[i].el.isPlaying&&this.behaviors.tock[i].tock(t,e,n);for(i=0;i<this.systemNames.length;i++)r[this.systemNames[i]].tock&&r[this.systemNames[i]].tock(t,e,n)}},render:{value:function(t,e){var n=this.renderer;this.frame=e,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta),n.render(this.object3D,this.camera)},writable:!0}})}),e.exports.setupCanvas=x},{"../../lib/three":151,"../../utils/":176,"../a-entity":99,"../a-node":101,"../a-register-element":102,"../system":114,"./loadingScreen":107,"./metaTags":108,"./postMessage":109,"./scenes":110,"./wakelock":111}],107:[function(t,e,n){var i,r,s,o=t("../../utils/").styleParser;function a(t){var e=s(i.canvas,!1,i.maxCanvasSize,i.is("vr-mode"));t.aspect=e.width/e.height,t.updateProjectionMatrix(),i.renderer.setSize(e.width,e.height,!1)}e.exports.setup=function(t,e){s=e;var n,l,c,h,u,d,p,f,m,g,v=(i=t).hasAttribute("loading-screen")?o.parse(i.getAttribute("loading-screen")):void 0,y=v&&v.dotsColor||"white",_=v&&v.backgroundColor||"#24CAFF";(void 0===v||!0===v.enabled||void 0===v.enabled)&&(n=new THREE.Scene,l=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),c=new THREE.MeshBasicMaterial({color:y}),h=new THREE.Mesh(l,c),u=h.clone(),d=h.clone(),p=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),f=new THREE.Clock,m=0,g=function(){i.renderer.render(n,p),m=f.getElapsedTime()%4,h.visible=m>=1,u.visible=m>=2,d.visible=m>=3},n.background=new THREE.Color(_),n.add(p),h.position.set(-1,0,-15),u.position.set(0,0,-15),d.position.set(1,0,-15),p.add(h),p.add(u),p.add(d),(r=document.createElement("div")).className="a-loader-title",r.innerHTML=document.title,r.style.display="none",i.appendChild(r),setTimeout(function(){i.hasLoaded||(a(p),r.style.display="block",window.addEventListener("resize",function(){a(p)}),i.renderer.setAnimationLoop(g))},200))},e.exports.remove=function(){window.removeEventListener("resize",a),r&&(r.style.display="none")}},{"../../utils/":176}],108:[function(t,e,n){var i,r=t("../../constants/"),s=t("../../utils").extend,o=e.exports.MOBILE_HEAD_TAGS=[l({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),l({name:"mobile-web-app-capable",content:"yes"}),l({name:"theme-color",content:"black"})],a=[l({name:"apple-mobile-web-app-capable",content:"yes"}),l({name:"apple-mobile-web-app-status-bar-style",content:"black"}),(i={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},{tagName:"link",attributes:i,exists:function(){return document.querySelector('link[rel="'+i.rel+'"]')}})];function l(t){return{tagName:"meta",attributes:t,exists:function(){return document.querySelector('meta[name="'+t.name+'"]')}}}e.exports.inject=function(t){var e,n=document.head,i=n.querySelector("script"),l=[];return o.forEach(c),t.isIOS&&a.forEach(c),l;function c(t){t&&!t.exists()&&(e=function(t){if(t&&t.tagName){var e=document.createElement(t.tagName);return e.setAttribute(r.AFRAME_INJECTED,""),s(e,t.attributes)}}(t))&&(i?i.parentNode.insertBefore(e,i):n.appendChild(e),l.push(e))}}},{"../../constants/":95,"../../utils":176}],109:[function(t,e,n){var i=t("../../utils/bind"),r=t("../../utils/").isIframed;function s(t){if(t.data)switch(t.data.type){case"vr":switch(t.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}}e.exports=function(t){r()&&window.addEventListener("message",i(s,t))}},{"../../utils/":176,"../../utils/bind":170}],110:[function(t,e,n){e.exports=[]},{}],111:[function(t,e,n){var i=t("../../../vendor/wakelock/wakelock");e.exports=function(t){if(t.isMobile){var e=t.wakelock=new i;t.addEventListener("enter-vr",function(){e.request()}),t.addEventListener("exit-vr",function(){e.release()})}}},{"../../../vendor/wakelock/wakelock":189}],112:[function(t,e,n){var i,r=t("../utils/"),s=t("./propertyTypes"),o=s.isValidDefaultValue,a=s.propertyTypes,l=(0,r.debug)("core:schema:warn");function c(t){return"type"in t?"string"==typeof t.type:"default"in t}function h(t,e){var n,i,r=t.default,s=t.type;return t.type?"bool"===t.type?s="boolean":"float"===t.type&&(s="number"):s=void 0===r||"boolean"!=typeof r&&"number"!=typeof r?Array.isArray(r)?"array":"string":typeof r,(i=a[s])||l("Unknown property type for component `"+e+"`: "+s),n=!!t.parse,t.parse=t.parse||i.parse,t.stringify=t.stringify||i.stringify,t.type=s,"default"in t?n||o(s,r)||l("Default value `"+r+"` does not match type `"+s+"` in component `"+e+"`"):t.default=i.default,t}function u(t,e){return null!=t&&""!==t||(t=e.default,Array.isArray(t)&&(t=t.slice())),e.parse(t,e.default)}function d(t,e){return"object"!=typeof t?t:e&&null!==t?e.stringify(t):JSON.stringify(t)}e.exports.isSingleProperty=c,e.exports.process=function(t,e){var n;if(c(t))return h(t,e);for(n in t)t[n]=h(t[n],e);return t},e.exports.processPropertyDefinition=h,e.exports.parseProperties=(i=[],function(t,e,n,r,s){var o,a;for(a in i.length=0,n?t:e)n&&void 0===t[a]||i.push(a);if(null===t||"object"!=typeof t)return t;for(a in t)void 0===t[a]||e[a]||s||l("Unknown property `"+a+"` for component/system `"+r+"`.");for(o=0;o<i.length;o++){if(!e[a=i[o]])return;t[a]=u(t[a],e[a])}return t}),e.exports.parseProperty=u,e.exports.stringifyProperties=function(t,e){var n,i,r,s,o={};for(n in t)i=e[n],"object"==typeof(s=r=t[n])&&(s=d(r,i),i||l("Unknown component property: "+n)),o[n]=s;return o},e.exports.stringifyProperty=d},{"../utils/":176,"./propertyTypes":105}],113:[function(t,e,n){var i=t("./schema").process,r=e.exports.shaders={},s=e.exports.shaderNames=[],o=t("../lib/three"),a=t("../utils"),l={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},c=e.exports.Shader=function(){};c.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(t){return this.attributes=this.initVariables(t,"attribute"),this.uniforms=this.initVariables(t,"uniform"),this.material=new(this.raw?o.RawShaderMaterial:o.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(t,e){var n,i=this.schema,r={};for(n in i)i[n].is===e&&(r[n]={type:l[i[n].type],value:void 0});return r},update:function(t){this.updateVariables(t,"attribute"),this.updateVariables(t,"uniform")},updateVariables:function(t,e){var n,i,r,s=this.schema;for(n in r="uniform"===e?this.uniforms:this.attributes,t)if(s[n]&&s[n].is===e)if("map"!==s[n].type)r[n].value=this.parseValue(s[n].type,t[n]),r[n].needsUpdate=!0;else{if(!r[n]||r[n].value===t[n])continue;this.setMapOnTextureLoad(r,n,i="_texture_"+n),a.material.updateMapMaterialFromData(i,n,this,t)}},parseValue:function(t,e){var n;switch(t){case"vec2":return new o.Vector2(e.x,e.y);case"vec3":return new o.Vector3(e.x,e.y,e.z);case"vec4":return new o.Vector4(e.x,e.y,e.z,e.w);case"color":return n=new o.Color(e),new o.Vector3(n.r,n.g,n.b);case"map":return o.ImageUtils.loadTexture(e);default:return e}},setMapOnTextureLoad:function(t,e,n){var i=this;this.el.addEventListener("materialtextureloaded",function(){t[e].value=i.material[n],t[e].needsUpdate=!0})}},e.exports.registerShader=function(t,e){var n,o={};if(Object.keys(e).forEach(function(t){o[t]={value:e[t],writable:!0}}),r[t])throw new Error("The shader "+t+" has been already registered");return((n=function(){c.call(this)}).prototype=Object.create(c.prototype,o)).name=t,n.prototype.constructor=n,r[t]={Shader:n,schema:i(n.prototype.schema)},s.push(t),n}},{"../lib/three":151,"../utils":176,"./schema":112}],114:[function(t,e,n){var i=t("./component"),r=t("./schema"),s=t("../utils/"),o=r.parseProperties,a=r.parseProperty,l=r.process,c=r.isSingleProperty,h=s.styleParser,u=e.exports.systems={},d=e.exports.System=function(t){var e=i&&i.components[this.name];this.el=t,this.sceneEl=t,e&&(e.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};d.prototype={schema:{},init:function(){},update:function(t){},updateProperties:function(t){var e=this.data;Object.keys(r).length&&(this.buildData(t),this.update(e))},buildData:function(t){var e=this.schema;Object.keys(e).length&&(t=t||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),this.data=c(e)?a(t,e):o(h.parse(t)||{},e))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},e.exports.registerSystem=function(t,e){var n,i,r={},o=s.findAllScenes(document);if(Object.keys(e).forEach(function(t){r[t]={value:e[t],writable:!0}}),u[t])throw new Error("The system `"+t+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(((i=function(t){d.call(this,t)}).prototype=Object.create(d.prototype,r)).name=t,i.prototype.constructor=i,i.prototype.schema=s.extend(l(i.prototype.schema)),u[t]=i,n=0;n<o.length;n++)o[n].initSystem(t)}},{"../utils/":176,"./component":103,"./schema":112}],115:[function(t,e,n){t("./pivot")},{"./pivot":116}],116:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../lib/three"),s=new r.Vector3,o=new r.Vector3;i("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var t=this.data,e=this.el,n=e.object3D.parent,i=e.object3D,a=new r.Group;s.copy(i.position),o.copy(i.rotation),n.remove(i),a.add(i),n.add(a),e.object3D=a,i.position.set(-1*t.x,-1*t.y,-1*t.z),a.position.set(t.x+s.x,t.y+s.y,t.z+s.z),a.rotation.copy(i.rotation),i.rotation.set(0,0,0)}})},{"../../core/component":103,"../../lib/three":151}],117:[function(t,e,n){var i=t("../../core/component").components,r=t("../../core/shader").shaders,s=t("../../utils/"),o={};function a(t){var e=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===t&&(e="material-fog"),"visible"===t&&(e="material-visible"),o[e]="material."+t}Object.keys(i.material.schema).forEach(a),Object.keys(r.standard.schema).forEach(a),e.exports=function(){return{defaultComponents:{material:{}},mappings:s.extend({},o)}}},{"../../core/component":103,"../../core/shader":113,"../../utils/":176}],118:[function(t,e,n){t("./primitives/a-camera"),t("./primitives/a-cursor"),t("./primitives/a-curvedimage"),t("./primitives/a-gltf-model"),t("./primitives/a-image"),t("./primitives/a-light"),t("./primitives/a-link"),t("./primitives/a-obj-model"),t("./primitives/a-sky"),t("./primitives/a-sound"),t("./primitives/a-text"),t("./primitives/a-video"),t("./primitives/a-videosphere"),t("./primitives/meshPrimitives")},{"./primitives/a-camera":120,"./primitives/a-cursor":121,"./primitives/a-curvedimage":122,"./primitives/a-gltf-model":123,"./primitives/a-image":124,"./primitives/a-light":125,"./primitives/a-link":126,"./primitives/a-obj-model":127,"./primitives/a-sky":128,"./primitives/a-sound":129,"./primitives/a-text":130,"./primitives/a-video":131,"./primitives/a-videosphere":132,"./primitives/meshPrimitives":133}],119:[function(t,e,n){var i=t("../../core/a-entity"),r=t("../../core/component").components,s=t("../../core/a-register-element").registerElement,o=t("../../utils/"),a=o.debug,l=o.entity.setComponentProperty,c=a("extras:primitives:debug"),h=a("extras:primitives:warn"),u=e.exports.primitives={};e.exports.registerPrimitive=function(t,e){t=t.toLowerCase(),c("Registering <%s>",t),e.defaultAttributes&&h("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var n=s(t,{prototype:Object.create(i.prototype,{defaultComponentsFromPrimitive:{value:e.defaultComponents||e.defaultAttributes||{}},deprecated:{value:e.deprecated||null},deprecatedMappings:{value:e.deprecatedMappings||{}},mappings:{value:e.mappings||{}},createdCallback:{value:function(){e.deprecated&&console.warn(e.deprecated),this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var t=this.mappings,e=this;Object.keys(t).forEach(function(n){var i;n!==n.toLowerCase()&&h("Mapping keys should be specified in lower case. The mapping key "+n+" may not be recognized"),r[n]&&(i=t[n].replace(".","-"),t[i]=t[n],delete t[n],console.warn("The primitive "+e.tagName.toLowerCase()+" has a mapping collision. The attribute "+n+" has the same name as a registered component and has been renamed to "+i))})}},getExtraComponents:{value:function(){var t,e,n,i,r,s,a=this;for(e=o.clone(this.defaultComponentsFromPrimitive),(r=this.getAttribute("mixin"))&&(r=r.trim().split(" ")).forEach(function(t){var n=a.sceneEl.querySelector("#"+t).componentCache;Object.keys(n).forEach(function(t){var i,r;e[t]=(r=n[t],l(i=e[t])?c(r):l(r)?c(i):h(i)&&h(r)?o.extendDeep(i,r):c(r))})}),n=0;n<this.attributes.length;n++)(i=this.mappings[(t=this.attributes[n]).name])&&((s=o.entity.getComponentPropertyPath(i)).constructor===Array?(e[s[0]]=e[s[0]]||{},e[s[0]][s[1]]=t.value.trim()):e[s]=t.value.trim());return e;function l(t){return void 0===t}function c(t){return h(t)?o.extendDeep({},t):t}function h(t){return null!==t&&t.constructor===Object}}},attributeChangedCallback:{value:function(t,e,n){var i=this.mappings[t];t in this.deprecatedMappings&&console.warn(this.deprecatedMappings[t]),t&&i&&l(this,i,n)}}})});return u[t]=n,n},e.exports.definePrimitive=function(t,n,i){i=i||{},Object.keys(n).map(function(t){!function(t,e){Object.keys(r[t].schema).map(function(n){var i=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==e[i]&&(i=t+"-"+n),e[i]=t+"."+n})}(t,i)}),e.exports.registerPrimitive(t,o.extendDeep({},null,{defaultComponents:n,mappings:i}))}},{"../../core/a-entity":99,"../../core/a-register-element":102,"../../core/component":103,"../../utils/":176}],120:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},{"../primitives":119}],121:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-cursor",t("../../../utils/").extendDeep({},i(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],122:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-curvedimage",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],123:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":119}],124:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-image",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],125:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":119}],126:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":119}],127:[function(t,e,n){var i=t("../getMeshMixin")();(0,t("../primitives").registerPrimitive)("a-obj-model",t("../../../utils/").extendDeep({},i,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],128:[function(t,e,n){var i=t("../getMeshMixin"),r=t("../primitives").registerPrimitive,s=t("../../../utils/"),o=t("./meshPrimitives");r("a-sky",s.extendDeep({},i(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:s.extendDeep({},o["a-sphere"].prototype.mappings)}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119,"./meshPrimitives":133}],129:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":119}],130:[function(t,e,n){(0,t("../primitives").definePrimitive)("a-text",{text:{anchor:"align",width:5}})},{"../primitives":119}],131:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-video",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],132:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-videosphere",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],133:[function(t,e,n){var i=t("../getMeshMixin"),r=t("../../../core/geometry").geometries,s=t("../../../core/geometry").geometryNames,o=t("../primitives").registerPrimitive,a=t("../../../utils/"),l=e.exports={};function c(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}s.forEach(function(t){var e=r[t],n=c(t),s={};Object.keys(e.schema).forEach(function(t){s[c(t)]="geometry."+t});var h="a-"+n,u=o(h,a.extendDeep({},i(),{defaultComponents:{geometry:{primitive:t}},mappings:s}));l[h]=u})},{"../../../core/geometry":104,"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],134:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new r.BoxGeometry(t.width,t.height,t.depth,t.segmentsWidth,t.segmentsHeight,t.segmentsDepth)}})},{"../core/geometry":104,"../lib/three":151}],135:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),s=r.Math.degToRad;i("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.CircleGeometry(t.radius,t.segments,s(t.thetaStart),s(t.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],136:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),s=r.Math.degToRad;i("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,s(t.thetaStart),s(t.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],137:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),s=r.Math.degToRad;i("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.CylinderGeometry(t.radius,t.radius,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,s(t.thetaStart),s(t.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],138:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.DodecahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":104,"../lib/three":151}],139:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.IcosahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":104,"../lib/three":151}],140:[function(t,e,n){t("./box.js"),t("./circle.js"),t("./cone.js"),t("./cylinder.js"),t("./dodecahedron.js"),t("./icosahedron.js"),t("./octahedron.js"),t("./plane.js"),t("./ring.js"),t("./sphere.js"),t("./tetrahedron.js"),t("./torus.js"),t("./torusKnot.js"),t("./triangle.js")},{"./box.js":134,"./circle.js":135,"./cone.js":136,"./cylinder.js":137,"./dodecahedron.js":138,"./icosahedron.js":139,"./octahedron.js":141,"./plane.js":142,"./ring.js":143,"./sphere.js":144,"./tetrahedron.js":145,"./torus.js":146,"./torusKnot.js":147,"./triangle.js":148}],141:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.OctahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":104,"../lib/three":151}],142:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new r.PlaneGeometry(t.width,t.height,t.segmentsWidth,t.segmentsHeight)}})},{"../core/geometry":104,"../lib/three":151}],143:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),s=r.Math.degToRad;i("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.RingGeometry(t.radiusInner,t.radiusOuter,t.segmentsTheta,t.segmentsPhi,s(t.thetaStart),s(t.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],144:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),s=r.Math.degToRad;i("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(t){this.geometry=new r.SphereGeometry(t.radius,t.segmentsWidth,t.segmentsHeight,s(t.phiStart),s(t.phiLength),s(t.thetaStart),s(t.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],145:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.TetrahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":104,"../lib/three":151}],146:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),s=r.Math.degToRad;i("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(t){this.geometry=new r.TorusGeometry(t.radius,2*t.radiusTubular,t.segmentsRadial,t.segmentsTubular,s(t.arc))}})},{"../core/geometry":104,"../lib/three":151}],147:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(t){this.geometry=new r.TorusKnotGeometry(t.radius,2*t.radiusTubular,t.segmentsTubular,t.segmentsRadial,t.p,t.q)}})},{"../core/geometry":104,"../lib/three":151}],148:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),s=new r.Quaternion,o=new r.Vector3(0,0,1),a=new r.Vector2,l=new r.Vector2,c=new r.Vector2;i("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(t){var e,n,i,h,u,d;(i=new r.Triangle).a.set(t.vertexA.x,t.vertexA.y,t.vertexA.z),i.b.set(t.vertexB.x,t.vertexB.y,t.vertexB.z),i.c.set(t.vertexC.x,t.vertexC.y,t.vertexC.z),n=i.getNormal(new r.Vector3),s.setFromUnitVectors(n,o),h=i.a.clone().applyQuaternion(s),u=i.b.clone().applyQuaternion(s),d=i.c.clone().applyQuaternion(s),a.set(Math.min(h.x,u.x,d.x),Math.min(h.y,u.y,d.y)),l.set(Math.max(h.x,u.x,d.x),Math.max(h.y,u.y,d.y)),c.set(0,0).subVectors(l,a),h=(new r.Vector2).subVectors(h,a).divide(c),u=(new r.Vector2).subVectors(u,a).divide(c),d=(new r.Vector2).subVectors(d,a).divide(c),(e=this.geometry=new r.Geometry).vertices.push(i.a),e.vertices.push(i.b),e.vertices.push(i.c),e.faces.push(new r.Face3(0,1,2,n)),e.faceVertexUvs[0]=[[h,u,d]]}})},{"../core/geometry":104,"../lib/three":151}],149:[function(t,e,n){if(window.Promise=window.Promise||t("promise-polyfill"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=void 0!==navigator.xr,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var i=t("./utils/isIOSOlderThan10")(window.navigator.userAgent)?1/window.devicePixelRatio:1,r=t("webvr-polyfill");window.webvrpolyfill=new r({BUFFER_SCALE:i,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0})}var s=t("./utils/"),o=s.debug;s.isIE11&&(t("custom-event-polyfill"),t("../vendor/starts-with-polyfill"));var a=o("A-Frame:error"),l=o("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&l("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),"file:"===window.location.protocol&&a("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),t("present"),s.device.isBrowserEnvironment&&(t("./style/aframe.css"),t("./style/rStats.css"));var c=t("./core/scene/a-scene").AScene,h=t("./core/component").components,u=t("./core/component").registerComponent,d=t("./core/geometry").registerGeometry,p=t("./extras/primitives/primitives").registerPrimitive,f=t("./core/shader").registerShader,m=t("./core/system").registerSystem,g=t("./core/shader").shaders,v=t("./core/system").systems,y=window.THREE=t("./lib/three"),_=t("../package");t("./components/index"),t("./geometries/index"),t("./shaders/index"),t("./systems/index");var b=t("./core/a-node"),x=t("./core/a-entity");t("./core/a-assets"),t("./core/a-cubemap"),t("./core/a-mixin"),t("./extras/components/"),t("./extras/primitives/"),console.log("A-Frame Version: 0.9.2 (Date 2019-05-06, Commit #f57a1fa)"),console.log("three Version (https://github.com/supermedium/three.js):",_.dependencies["super-three"]),console.log("WebVR Polyfill Version:",_.dependencies["webvr-polyfill"]),e.exports=window.AFRAME={AComponent:t("./core/component").Component,AEntity:x,ANode:b,ANIME:t("super-animejs"),AScene:c,components:h,coreComponents:Object.keys(h),geometries:t("./core/geometry").geometries,registerComponent:u,registerElement:t("./core/a-register-element").registerElement,registerGeometry:d,registerPrimitive:p,registerShader:f,registerSystem:m,primitives:{getMeshMixin:t("./extras/primitives/getMeshMixin"),primitives:t("./extras/primitives/primitives").primitives},scenes:t("./core/scene/scenes"),schema:t("./core/schema"),shaders:g,systems:v,THREE:y,utils:s,version:_.version}},{"../package":51,"../vendor/starts-with-polyfill":187,"./components/index":60,"./core/a-assets":97,"./core/a-cubemap":98,"./core/a-entity":99,"./core/a-mixin":100,"./core/a-node":101,"./core/a-register-element":102,"./core/component":103,"./core/geometry":104,"./core/scene/a-scene":106,"./core/scene/scenes":110,"./core/schema":112,"./core/shader":113,"./core/system":114,"./extras/components/":115,"./extras/primitives/":118,"./extras/primitives/getMeshMixin":117,"./extras/primitives/primitives":119,"./geometries/index":140,"./lib/three":151,"./shaders/index":153,"./style/aframe.css":158,"./style/rStats.css":159,"./systems/index":163,"./utils/":176,"./utils/isIOSOlderThan10":178,"custom-event-polyfill":7,present:31,"promise-polyfill":33,"super-animejs":35,"webvr-polyfill":46}],150:[function(t,e,n){window.aframeStats=function(t){var e=null,n=t;return{update:function(){var t;e("te").set((t=n.querySelectorAll("*"),Array.prototype.slice.call(t).filter(function(t){return t.isEntity}),t.length)),window.performance.getEntriesByName&&e("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(t){e=t},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}},"object"==typeof e&&(e.exports={aframeStats:window.aframeStats})},{}],151:[function(t,e,n){(function(n){var i=n.THREE=t("super-three");i.TextureLoader&&(i.TextureLoader.prototype.crossOrigin="anonymous"),i.ImageLoader&&(i.ImageLoader.prototype.crossOrigin="anonymous"),i.Cache&&(i.Cache.enabled=!0),t("super-three/examples/js/loaders/DRACOLoader"),t("super-three/examples/js/loaders/GLTFLoader"),t("super-three/examples/js/loaders/OBJLoader"),t("super-three/examples/js/loaders/MTLLoader"),i.DRACOLoader.prototype.crossOrigin="anonymous",i.GLTFLoader.prototype.crossOrigin="anonymous",i.MTLLoader.prototype.crossOrigin="anonymous",i.OBJLoader.prototype.crossOrigin="anonymous",e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"super-three":36,"super-three/examples/js/loaders/DRACOLoader":37,"super-three/examples/js/loaders/GLTFLoader":38,"super-three/examples/js/loaders/MTLLoader":39,"super-three/examples/js/loaders/OBJLoader":40}],152:[function(t,e,n){var i=t("../core/shader").registerShader,r=t("../lib/three"),s=t("../utils/");function o(t,e){return e.color.set(t.color),e.fog=t.fog,e.wireframe=t.wireframe,e.wireframeLinewidth=t.wireframeLinewidth,e}e.exports.Shader=i("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new r.Color},this.textureSrc=null,o(t,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new r.MeshBasicMaterial(this.materialData),s.material.updateMap(this,t)},update:function(t){this.updateMaterial(t),s.material.updateMap(this,t)},updateMaterial:function(t){var e;for(e in o(t,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.materialData)this.material[e]=this.materialData[e]}})},{"../core/shader":113,"../lib/three":151,"../utils/":176}],153:[function(t,e,n){t("./flat"),t("./standard"),t("./sdf"),t("./msdf"),t("./ios10hls")},{"./flat":152,"./ios10hls":154,"./msdf":155,"./sdf":156,"./standard":157}],154:[function(t,e,n){var i=t("../core/shader").registerShader;e.exports.Shader=i("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join("\n")})},{"../core/shader":113}],155:[function(t,e,n){var i=t("../core/shader").registerShader;e.exports.Shader=i("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sample = texture2D(map, vUV).rgb;","  if (negate) { sample = 1.0 - sample; }","  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join("\n")})},{"../core/shader":113}],156:[function(t,e,n){var i=t("../core/shader").registerShader;e.exports.Shader=i("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture2D(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture2D(map, box.xy).a, width)","        + contour(texture2D(map, box.zw).a, width)","        + contour(texture2D(map, box.xw).a, width)","        + contour(texture2D(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture2D(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  gl_FragColor = vec4(color, opacity * alpha);","}"].join("\n")})},{"../core/shader":113}],157:[function(t,e,n){var i=t("../core/shader").registerShader,r=t("../lib/three"),s=t("../utils/"),o=new r.CubeTextureLoader,a={};function l(t,e){return e.color.set(t.color),e.emissive.set(t.emissive),e.emissiveIntensity=t.emissiveIntensity,e.fog=t.fog,e.metalness=t.metalness,e.roughness=t.roughness,e.wireframe=t.wireframe,e.wireframeLinewidth=t.wireframeLinewidth,t.normalMap&&(e.normalScale=t.normalScale),t.ambientOcclusionMap&&(e.aoMapIntensity=t.ambientOcclusionMapIntensity),t.displacementMap&&(e.displacementScale=t.displacementScale,e.displacementBias=t.displacementBias),e}e.exports.Shader=i("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new r.Color,emissive:new r.Color},l(t,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.material=new r.MeshStandardMaterial(this.materialData),s.material.updateMap(this,t),t.normalMap&&s.material.updateDistortionMap("normal",this,t),t.displacementMap&&s.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&s.material.updateDistortionMap("ambientOcclusion",this,t),t.metalnessMap&&s.material.updateDistortionMap("metalness",this,t),t.roughnessMap&&s.material.updateDistortionMap("roughness",this,t),this.updateEnvMap(t)},update:function(t){this.updateMaterial(t),s.material.updateMap(this,t),t.normalMap&&s.material.updateDistortionMap("normal",this,t),t.displacementMap&&s.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&s.material.updateDistortionMap("ambientOcclusion",this,t),t.metalnessMap&&s.material.updateDistortionMap("metalness",this,t),t.roughnessMap&&s.material.updateDistortionMap("roughness",this,t),this.updateEnvMap(t)},updateMaterial:function(t){var e,n=this.material;for(e in l(t,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.materialData)n[e]=this.materialData[e]},updateEnvMap:function(t){var e=this,n=this.material,i=t.envMap,l=t.sphericalEnvMap;if(!i&&!l||this.isLoadingEnvMap)return n.envMap=null,void(n.needsUpdate=!0);this.isLoadingEnvMap=!0,l?this.el.sceneEl.systems.material.loadTexture(l,{src:l},function(t){e.isLoadingEnvMap=!1,t.mapping=r.SphericalReflectionMapping,n.envMap=t,s.material.handleTextureEvents(e.el,t),n.needsUpdate=!0}):a[i]?a[i].then(function(t){e.isLoadingEnvMap=!1,n.envMap=t,s.material.handleTextureEvents(e.el,t),n.needsUpdate=!0}):a[i]=new Promise(function(t){s.srcLoader.validateCubemapSrc(i,function(i){o.load(i,function(i){e.isLoadingEnvMap=!1,n.envMap=i,s.material.handleTextureEvents(e.el,i),t(i)})})})}})},{"../core/shader":113,"../lib/three":151,"../utils/":176}],158:[function(t,e,n){var i="html.a-fullscreen{bottom:0;left:0;position:fixed;right:0;top:0}html.a-fullscreen body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}html.a-fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;position:fixed!important}html:not(.a-fullscreen) .a-enter-vr{right:5px;bottom:5px}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}canvas.a-canvas.a-mouse-cursor-hover:hover{cursor:pointer}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff}.a-enter-vr-button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E) 50% 50%/70% 70% no-repeat rgba(0,0,0,.35);border:0;bottom:0;cursor:pointer;min-width:50px;min-height:30px;padding-right:5%;padding-top:4%;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999}.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#666}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:\"Insert phone into Cardboard holder.\";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}.a-loader-title{background-color:rgba(0,0,0,.6);font-family:sans-serif,monospace;text-align:center;font-size:20px;height:50px;font-weight:300;line-height:50px;position:absolute;right:0;left:0;top:0;color:#fff}";t("browserify-css").createStyle(i,{href:"src/style/aframe.css"}),e.exports=i},{"browserify-css":4}],159:[function(t,e,n){var i=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";t("browserify-css").createStyle(i,{href:"src/style/rStats.css"}),e.exports=i},{"browserify-css":4}],160:[function(t,e,n){var i=t("../constants/"),r=t("../core/system").registerSystem;e.exports.System=r("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var t,e,n=this.sceneEl,i=this;if(!n.camera||n.camera.el.getAttribute("camera").spectator)if((t=n.querySelectorAll("a-camera, [camera]")).length)for(this.numUserCameras=t.length,e=0;e<t.length;e++)t[e].addEventListener("object3dset",function(t){"camera"===t.detail.type&&i.checkUserCamera(this)}),t[e].isNode?t[e].load():t[e].addEventListener("nodeready",function(){this.load()});else this.createDefaultCamera();else n.emit("cameraready",{cameraEl:n.camera.el})},checkUserCamera:function(t){var e,n=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||((e=t.getAttribute("camera")).active&&!e.spectator?(this.initialCameraFound=!0,n.camera=t.getObject3D("camera"),n.emit("cameraready",{cameraEl:t})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var t,e=this.sceneEl;(t=document.createElement("a-entity")).setAttribute("camera",{active:!0}),t.setAttribute("position",{x:0,y:i.DEFAULT_CAMERA_HEIGHT,z:0}),t.setAttribute("wasd-controls",""),t.setAttribute("look-controls",""),t.setAttribute(i.AFRAME_INJECTED,""),t.addEventListener("object3dset",function(n){"camera"===n.detail.type&&(e.camera=n.detail.object,e.emit("cameraready",{cameraEl:t}))}),e.appendChild(t)},disableActiveCamera:function(){var t;(t=this.sceneEl.querySelectorAll("[camera]"))[t.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(t){var e,n,i,r,s=this.activeCameraEl,o=this.sceneEl;if((r=t.getObject3D("camera"))&&t!==this.activeCameraEl){var a=o.querySelector("[data-aframe-default-camera]");for(t!==(a&&a.querySelector("[camera]"))&&function(t){var e;t.camera&&(e=t.querySelector("[data-aframe-default-camera]"))&&t.removeChild(e)}(o),this.activeCameraEl=t,this.activeCameraEl.play(),o.camera=r,s&&s.setAttribute("camera","active",!1),n=o.querySelectorAll("[camera]"),i=0;i<n.length;i++)(e=n[i]).isEntity&&t!==e&&(e.setAttribute("camera","active",!1),e.pause());o.emit("camera-set-active",{cameraEl:t})}},setSpectatorCamera:function(t){var e,n=this.spectatorCameraEl,i=this.sceneEl;t.getObject3D("camera")&&t!==this.spectatorCameraEl&&(n&&n.setAttribute("camera","spectator",!1),e=this.spectatorCameraEl=t,i.addEventListener("enter-vr",this.wrapRender),i.addEventListener("exit-vr",this.unwrapRender),e.setAttribute("camera","active",!1),e.play(),i.emit("camera-set-spectator",{cameraEl:t}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(t,e){var n,i,r=this.sceneEl;n=r.renderer.vr.enabled,this.originalRender.call(r.renderer,t,e),this.spectatorCameraEl&&!r.isMobile&&n&&(i=this.spectatorCameraEl.components.camera.camera,r.renderer.vr.enabled=!1,this.originalRender.call(r.renderer,t,i),r.renderer.vr.enabled=n)}})},{"../constants/":95,"../core/system":114}],161:[function(t,e,n){var i=t("../core/geometry").geometries,r=t("../core/system").registerSystem,s=t("../lib/three");function o(t){var e,n,r=t.primitive,o=i[r]&&i[r].Geometry,a=new o;if(!o)throw new Error("Unknown geometry `"+r+"`");return a.init(t),e=a.geometry,t.buffer?((n=(new s.BufferGeometry).fromGeometry(e)).metadata={type:e.type,parameters:e.parameters||{}},e.dispose(),n):e}e.exports.System=r("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(t){var e,n,i=this.cache;return t.skipCache?o(t):(e=i[n=this.hash(t)],function(t,e){t[e]=void 0===t[e]?1:t[e]+1}(this.cacheCount,n),e||(e=o(t),i[n]=e,e))},unuseGeometry:function(t){var e,n=this.cache,i=this.cacheCount;t.skipCache||n[e=this.hash(t)]&&(function(t,e){t[e]--}(i,e),i[e]>0||(n[e].dispose(),delete n[e],delete i[e]))},hash:function(t){return JSON.stringify(t)}})},{"../core/geometry":104,"../core/system":114,"../lib/three":151}],162:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../lib/three");e.exports.System=i("gltf-model",{schema:{dracoDecoderPath:{default:""}},init:function(){var t=this.data.dracoDecoderPath;r.DRACOLoader.setDecoderPath(t),this.dracoLoader=t?new r.DRACOLoader:null},update:function(){var t;this.dracoLoader||(r.DRACOLoader.setDecoderPath(t=this.data.dracoDecoderPath),this.dracoLoader=t?new r.DRACOLoader:null)},getDRACOLoader:function(){return this.dracoLoader}})},{"../core/system":114,"../lib/three":151}],163:[function(t,e,n){t("./camera"),t("./geometry"),t("./gltf-model"),t("./light"),t("./material"),t("./renderer"),t("./shadow"),t("./tracked-controls-webvr"),t("./tracked-controls-webxr")},{"./camera":160,"./geometry":161,"./gltf-model":162,"./light":164,"./material":165,"./renderer":166,"./shadow":167,"./tracked-controls-webvr":168,"./tracked-controls-webxr":169}],164:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils/bind"),s=t("../constants/");e.exports.System=i("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",r(this.setupDefaultLights,this))},registerLight:function(t){t.hasAttribute("data-aframe-default-light")||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var t,e=this.sceneEl;if(this.defaultLights){t=document.querySelectorAll("[data-aframe-default-light]");for(var n=0;n<t.length;n++)e.removeChild(t[n]);this.defaultLights=!1}},setupDefaultLights:function(){var t,e,n=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((t=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),t.setAttribute("data-aframe-default-light",""),t.setAttribute(s.AFRAME_INJECTED,""),n.appendChild(t),(e=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),e.setAttribute("position",{x:-.5,y:1,z:1}),e.setAttribute("data-aframe-default-light",""),e.setAttribute(s.AFRAME_INJECTED,""),n.appendChild(e),this.defaultLights=!0)}})},{"../constants/":95,"../core/system":114,"../utils/bind":170}],165:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../lib/three"),s=t("../utils/"),o=t("../utils/material").isHLS,a=s.bind,l=s.debug,c=l("components:texture:error"),h=new r.TextureLoader,u=l("components:texture:warn");function d(t,e){var n=e.offset||{x:0,y:0},i=e.repeat||{x:1,y:1};!!e.npot&&(t.wrapS=r.ClampToEdgeWrapping,t.wrapT=r.ClampToEdgeWrapping,t.magFilter=r.LinearFilter,t.minFilter=r.LinearFilter),1===i.x&&1===i.y||(t.wrapS=r.RepeatWrapping,t.wrapT=r.RepeatWrapping,t.repeat.set(i.x,i.y)),0===n.x&&0===n.y||t.offset.set(n.x,n.y)}h.setCrossOrigin("anonymous"),e.exports.System=i("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",a(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(t,e,n){var i=this;if("CANVAS"!==t.tagName){if("VIDEO"===t.tagName)return t.src||t.srcObject||t.childElementCount||u("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),void this.loadVideo(t,e,n);s.srcLoader.validateSrc(t,function(t){i.loadImage(t,e,n)},function(t){i.loadVideo(t,e,n)})}else this.loadCanvas(t,e,n)},loadImage:function(t,e,n){var i=this.hash(e),s=this.textureCache;s[i]?s[i].then(n):(s[i]=function(t,e){return new Promise(function(n,i){function s(t){d(t,e),t.needsUpdate=!0,n(t)}"string"==typeof t?h.load(t,s,function(){},function(t){c("`$s` could not be fetched (Error code: %s; Response: %s)",t.status,t.statusText)}):s(new r.Texture(t))})}(t,e),s[i].then(n))},loadCanvas:function(t,e,n){var i;d(i=new r.CanvasTexture(t),e),n(i)},loadVideo:function(t,e,n){var i,s,a,l,c=this.textureCache;function h(t){t.texture.needsUpdate=!0,n(t.texture,t.videoEl)}if("string"!=typeof t){if(c[i=this.hashVideo(e,a=t)])return void c[i].then(h);!function(t){t.autoplay=t.hasAttribute("autoplay")&&"false"!==t.getAttribute("autoplay"),t.controls=t.hasAttribute("controls")&&"false"!==t.getAttribute("controls"),"false"===t.getAttribute("loop")&&t.removeAttribute("loop"),"false"===t.getAttribute("preload")&&(t.preload="none"),t.crossOrigin=t.crossOrigin||"anonymous",t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")}(a)}a=a||function(t,e,n){var i=document.createElement("video");return i.width=e,i.height=n,i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),i.autoplay=!0,i.loop=!0,i.crossOrigin="anonymous",i.addEventListener("error",function(){u("`$s` is not a valid video",t)},!0),i.src=t,i}(t,e.width,e.height),c[i=this.hashVideo(e,a)]?c[i].then(h):((s=new r.VideoTexture(a)).minFilter=r.LinearFilter,d(s,e),this.sceneEl.isIOS&&o(a.src||a.getAttribute("src"),a.type||a.getAttribute("type"))&&(s.format=r.RGBAFormat,s.needsCorrectionBGRA=!0,s.flipY=!1,s.needsCorrectionFlipY=!0),l={texture:s,videoEl:a},c[i]=Promise.resolve(l),h(l))},hash:function(t){return t.src.tagName&&((t=s.extendDeep({},t)).src=t.src.src),JSON.stringify(t)},hashVideo:function(t,e){return function(t,e){var n,i,r,s=e.getAttribute("id");if(s)return s;for(i="",r=t||{},n=0;n<e.attributes.length;n++)r[e.attributes[n].name]=e.attributes[n].value;return Object.keys(r).sort().forEach(function(t){i+=t+":"+r[t]+";"}),i}(t,e)},registerMaterial:function(t){this.materials[t.uuid]=t},unregisterMaterial:function(t){delete this.materials[t.uuid];var e=this.textureCounts;Object.keys(t).filter(function(e){return t[e]&&t[e].isTexture}).forEach(function(n){e[t[n].uuid]--,e[t[n].uuid]<=0&&t[n].dispose()})},updateMaterials:function(t){var e=this.materials;Object.keys(e).forEach(function(t){e[t].needsUpdate=!0})},onMaterialTextureLoaded:function(t){this.textureCounts[t.detail.texture.uuid]||(this.textureCounts[t.detail.texture.uuid]=0),this.textureCounts[t.detail.texture.uuid]++}})},{"../core/system":114,"../lib/three":151,"../utils/":176,"../utils/material":179}],166:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils/"),s=t("../lib/three"),o=(0,r.debug)("components:renderer:warn");e.exports.System=i("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:!1},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:1920},maxCanvasHeight:{default:1920},physicallyCorrectLights:{default:!1},precision:{default:"high",oneOf:["high","medium","low"]},sortObjects:{default:!1},colorManagement:{default:!1},gammaOutput:{default:!1},alpha:{default:!0},foveationLevel:{default:0}},init:function(){var t=this.data,e=this.el,n=e.renderer;n.sortObjects=t.sortObjects,n.physicallyCorrectLights=t.physicallyCorrectLights,(t.colorManagement||t.gammaOutput)&&(n.gammaOutput=!0,n.gammaFactor=2.2,t.gammaOutput&&o('Property `gammaOutput` is deprecated. Use `renderer="colorManagement: true;"` instead.')),e.hasAttribute("antialias")&&o('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),e.hasAttribute("logarithmicDepthBuffer")&&o('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.')},applyColorCorrection:function(t){this.data.colorManagement&&t&&(t.isColor?t.convertSRGBToLinear():t.isTexture&&(t.encoding=s.sRGBEncoding))}})},{"../core/system":114,"../lib/three":151,"../utils/":176}],167:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../lib/three"),s={basic:r.BasicShadowMap,pcf:r.PCFShadowMap,pcfsoft:r.PCFSoftShadowMap};e.exports.System=i("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var t=this.sceneEl,e=this.data;this.shadowMapEnabled=!1,t.renderer&&(t.renderer.shadowMap.type=s[e.type],t.renderer.shadowMap.autoUpdate=e.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},update:function(t){t.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.data.enabled)},setShadowMapEnabled:function(t){var e=this.sceneEl.renderer;this.shadowMapEnabled=this.data.enabled&&t,e&&(e.shadowMap.enabled=this.shadowMapEnabled)}})},{"../core/system":114,"../lib/three":151}],168:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils");e.exports.System=i("tracked-controls-webvr",{init:function(){var t=this;this.controllers=[],this.isChrome=-1!==navigator.userAgent.indexOf("Chrome"),this.updateControllerList(),this.throttledUpdateControllerList=r.throttle(this.updateControllerList,500,this),navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(e){e.length&&(t.vrDisplay=e[0])})})},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var t,e,n,i,r=this.controllers;if(e=navigator.getGamepads&&navigator.getGamepads()){for(i=r.length,r.length=0,n=0;n<e.length;++n)(t=e[n])&&t.pose&&r.push(t);r.length!==i&&this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":114,"../utils":176}],169:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils");e.exports.System=i("tracked-controls-webxr",{init:function(){this.controllers=[],this.throttledUpdateControllerList=r.throttle(this.updateControllerList,500,this)},tick:function(){this.throttledUpdateControllerList()},updateControllerList:function(){var t=this.controllers.length;this.el.xrSession&&(this.controllers=this.el.xrSession.getInputSources(),t!==this.controllers.length&&this.el.emit("controllersupdated",void 0,!1))}})},{"../core/system":114,"../utils":176}],170:[function(t,e,n){e.exports=function(t,e){return n=Array.prototype.slice.call(arguments,2),function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return t.apply(e,i)};var n}},{}],171:[function(t,e,n){var i=t("./debug"),r=t("object-assign"),s=i("utils:coordinates:warn"),o=["x","y","z","w"],a=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;e.exports.regex=a;var l=/\s+/g;function c(t){return a.test(t)}function h(t){return null!=t&&t.constructor===String?parseFloat(t,10):t}e.exports.parse=function(t,e){var n,i,s,a,c,u,d,p,f;if(t&&t instanceof Object)return d=void 0===t.y?e&&e.y:t.y,p=void 0===t.z?e&&e.z:t.z,f=void 0===t.w?e&&e.w:t.w,null!=(u=void 0===t.x?e&&e.x:t.x)&&(t.x=h(u)),null!=d&&(t.y=h(d)),null!=p&&(t.z=h(p)),null!=f&&(t.w=h(f)),t;if(null==t)return"object"==typeof e?r({},e):e;for(n=t.trim().split(l),c={},a=0;a<o.length;a++)if(s=o[a],n[a])c[s]=parseFloat(n[a],10);else{if(void 0===(i=e&&e[s]))continue;c[s]=h(i)}return c},e.exports.stringify=function(t){var e;return"object"!=typeof t?t:(e=t.x+" "+t.y,null!=t.z&&(e+=" "+t.z),null!=t.w&&(e+=" "+t.w),e)},e.exports.isCoordinates=c,e.exports.isCoordinate=function(t){return s("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),c(t)},e.exports.toVector3=function(t){return new THREE.Vector3(t.x,t.y,t.z)}},{"./debug":172,"object-assign":25}],172:[function(t,n,i){(function(i){var r=t("debug"),s=t("object-assign"),o={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},a=function(t){var e=r(t);return e.color=function(t){var e=function(t){var e=t.split(":");return e[e.length-1]}(t);return o.colors&&o.colors[e]||null}(t),e};s(a,r);var l=function(){try{return window.localStorage}catch(e){}}();l&&(parseInt(l.logs,10)||"true"===l.logs)?a.enable("*"):a.enable("*:error,*:info,*:warn"),i.browser&&(window.logs=a),n.exports=a}).call(this,t("_process"))},{_process:32,debug:8,"object-assign":25}],173:[function(t,e,n){(function(n){var i,r=t("debug")("device:error");function s(){return i}window.addEventListener("vrdisplayactivate",function(t){var e;navigator.xr||(e=document.createElement("canvas"),(i=t.display).requestPresent([{source:e}]).then(function(){},function(){}))}),navigator.xr?navigator.xr.requestDevice().then(function(t){t&&t.supportsSession({immersive:!0,exclusive:!0}).then(function(){var e=document.querySelector("a-scene");i=t,e&&e.emit("displayconnected",{vrDisplay:i})})}).catch(function(t){r("WebXR Request Device: "+t.message)}):navigator.getVRDisplays&&navigator.getVRDisplays().then(function(t){var e=document.querySelector("a-scene");i=t.length&&t[0],e&&e.emit("displayconnected",{vrDisplay:i})}),e.exports.isWebXRAvailable=void 0!==navigator.xr,e.exports.getVRDisplay=s,e.exports.checkHeadsetConnected=function(){return!!s()};var o,a,l=(a=!1,o=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4)))&&(a=!0),(h()||c()||d())&&(a=!0),u()&&(a=!1),function(){return a});function c(t){var e=t||window.navigator.userAgent;return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(e)}function h(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function u(){return/(OculusBrowser)|(SamsungBrowser)|(Mobile VR)/i.test(window.navigator.userAgent)}function d(){return/R7 Build/.test(window.navigator.userAgent)}e.exports.isMobile=l,e.exports.isTablet=c,e.exports.isIOS=h,e.exports.isMobileVR=u,e.exports.isR7=d,e.exports.isLandscape=function(){var t=window.orientation;return d()&&(t+=90),90===t||-90===t},e.exports.isBrowserEnvironment=!(n&&!n.browser),e.exports.isNodeEnvironment=!e.exports.isBrowserEnvironment,e.exports.PolyfillControls=function(t){var e,n=window.webvrpolyfill&&window.webvrpolyfill.getPolyfillDisplays()[0];window.VRFrameData&&(e=new window.VRFrameData),this.update=function(){var i;n&&(n.getFrameData(e),null!==(i=e.pose).orientation&&t.quaternion.fromArray(i.orientation),null!==i.position?t.position.fromArray(i.position):t.position.set(0,0,0))}}}).call(this,t("_process"))},{_process:32,debug:8}],174:[function(t,e,n){var i={};function r(t,e){return i[e=e||"."]||(i[e]={}),i[e][t]=-1!==t.indexOf(e)?t.split(e):t,i[e][t]}e.exports.getComponentPropertyPath=r,e.exports.propertyPathCache=i,e.exports.getComponentProperty=function(t,e,n){var i;return-1!==e.indexOf(n=n||".")?(i=r(e,n)).constructor===String?t.getAttribute(i):t.getAttribute(i[0])[i[1]]:t.getAttribute(e)},e.exports.setComponentProperty=function(t,e,n,i){var s;-1===e.indexOf(i=i||".")?t.setAttribute(e,n):(s=r(e,i)).constructor===String?t.setAttribute(s,n):t.setAttribute(s[0],s[1],n)}},{}],175:[function(t,e,n){e.exports=function(t){var e=t.style.width,n=t.style.height;t.style.width=parseInt(e,10)+1+"px",t.style.height=parseInt(n,10)+1+"px",setTimeout(function(){t.style.width=e,t.style.height=n},200)}},{}],176:[function(t,e,n){var i=t("./debug"),r=t("deep-assign"),s=t("./device"),o=t("object-assign"),a=t("./object-pool"),l=i("utils:warn");e.exports.bind=t("./bind"),e.exports.coordinates=t("./coordinates"),e.exports.debug=i,e.exports.device=s,e.exports.entity=t("./entity"),e.exports.forceCanvasResizeSafariMobile=t("./forceCanvasResizeSafariMobile"),e.exports.isIE11=t("./is-ie11"),e.exports.material=t("./material"),e.exports.objectPool=a,e.exports.split=t("./split").split,e.exports.styleParser=t("./styleParser"),e.exports.trackedControls=t("./tracked-controls"),e.exports.checkHeadsetConnected=function(){return l("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),s.checkHeadsetConnected(arguments)},e.exports.isGearVR=e.exports.device.isGearVR=function(){l("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},e.exports.isIOS=function(){return l("`utils.isIOS` has moved to `utils.device.isIOS`"),s.isIOS(arguments)},e.exports.isOculusGo=e.exports.device.isOculusGo=function(){l("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},e.exports.isMobile=function(){return l("`utils.isMobile has moved to `utils.device.isMobile`"),s.isMobile(arguments)},e.exports.throttle=function(t,n,i){var r;return i&&(t=e.exports.bind(t,i)),function(){var e=Date.now(),i=void 0===r?n:e-r;(void 0===r||i>=n)&&(r=e,t.apply(null,arguments))}},e.exports.throttleTick=function(t,n,i){var r;return i&&(t=e.exports.bind(t,i)),function(e,i){var s=void 0===r?i:e-r;(void 0===r||s>=n)&&(r=e,t(e,s))}},e.exports.debounce=function(t,e,n){var i;return function(){var r=this,s=arguments,o=function(){i=null,n||t.apply(r,s)},a=n&&!i;clearTimeout(i),i=setTimeout(o,e),a&&t.apply(r,s)}},e.exports.extend=o,e.exports.extendDeep=r,e.exports.clone=function(t){return JSON.parse(JSON.stringify(t))};var c,h,u=(c=a.createPool(function(){return[]}),function(t,e){var n,i,r,s,o,a;if(void 0===t||void 0===e||null===t||null===e||!(t&&e&&t.constructor===Object&&e.constructor===Object||t.constructor===Array&&e.constructor===Array))return t===e;for(n in i=c.use(),r=c.use(),i.length=0,r.length=0,t)i.push(n);for(n in e)r.push(n);if(i.length!==r.length)return c.recycle(i),c.recycle(r),!1;for(s=0;s<i.length;++s)if(a=e[i[s]],"object"==typeof(o=t[i[s]])||"object"==typeof a||Array.isArray(o)&&Array.isArray(a)){if(o===a)continue;if(!u(o,a))return c.recycle(i),c.recycle(r),!1}else if(o!==a)return c.recycle(i),c.recycle(r),!1;return c.recycle(i),c.recycle(r),!0});e.exports.deepEqual=u,e.exports.diff=(h=[],function(t,e,n){var i,r,s,o,a,l,c;for(a in o=n||{},h.length=0,t)h.push(a);if(!e)return o;for(s in e)-1===h.indexOf(s)&&h.push(s);for(l=0;l<h.length;l++)r=e[a=h[l]],((c=(i=t[a])&&r&&i.constructor===Object&&r.constructor===Object)&&!u(i,r)||!c&&i!==r)&&(o[a]=r);return o}),e.exports.shouldCaptureKeyEvent=function(t){return!t.metaKey&&document.activeElement===document.body},e.exports.splitString=function(t,e){void 0===e&&(e=" ");var n=new RegExp(e,"g");return(t=(t||"").replace(n,e)).split(e)},e.exports.getElData=function(t,e){e=e||{};var n={};return Object.keys(e).forEach(function(e){t.hasAttribute(e)&&(n[e]=t.getAttribute(e))}),n},e.exports.getUrlParameter=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},e.exports.isIframed=function(){return window.top!==window.self},e.exports.findAllScenes=function(t){for(var e=[],n=t.getElementsByTagName("*"),i=0,r=n.length;i<r;i++)n[i].isScene&&e.push(n[i]);return e},e.exports.srcLoader=t("./src-loader")},{"./bind":170,"./coordinates":171,"./debug":172,"./device":173,"./entity":174,"./forceCanvasResizeSafariMobile":175,"./is-ie11":177,"./material":179,"./object-pool":180,"./split":181,"./src-loader":182,"./styleParser":183,"./tracked-controls":184,"deep-assign":10,"object-assign":25}],177:[function(t,e,n){var i,r;e.exports=11===(i=-1,r=navigator.userAgent,"Microsoft Internet Explorer"===navigator.appName?null!=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(r)&&(i=parseFloat(RegExp.$1)):"Netscape"===navigator.appName&&null!=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})").exec(r)&&(i=parseFloat(RegExp.$1)),i)},{}],178:[function(t,e,n){e.exports=function(t){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(t)}},{}],179:[function(t,e,n){var i=t("../lib/three"),r=["application/x-mpegurl","application/vnd.apple.mpegurl"],s=new Set(["emissiveMap","envMap","map","specularMap"]);function o(t,e){e&&(t.emit("materialtextureloaded",{src:e.image,texture:e}),e.image&&"VIDEO"===e.image.tagName&&(e.image.addEventListener("loadeddata",function(){t.components&&t.components.material&&(e.needsCorrectionBGRA&&e.needsCorrectionFlipY&&-1!==["standard","flat"].indexOf(t.components.material.data.shader)&&t.setAttribute("material","shader","ios10hls"),t.emit("materialvideoloadeddata",{src:e.image,texture:e}))}),e.image.addEventListener("ended",function(){t.emit("materialvideoended",{src:e.image,texture:e})})))}e.exports.updateMapMaterialFromData=function(t,e,n,r){var a=n.el,l=n.material,c=a.sceneEl.systems.renderer,h=r[e];if(n.materialSrcs||(n.materialSrcs={}),!h)return delete n.materialSrcs[t],void u(null);function u(e){l[t]=e,e&&s.has(t)&&c.applyColorCorrection(e),l.needsUpdate=!0,o(a,e)}h!==n.materialSrcs[t]&&(n.materialSrcs[t]=h,h instanceof i.Texture?u(h):a.sceneEl.systems.material.loadTexture(h,{src:h,repeat:r.repeat,offset:r.offset,npot:r.npot},function(e){n.materialSrcs[t]===h&&u(e)}))},e.exports.updateMap=function(t,n){return e.exports.updateMapMaterialFromData("map","src",t,n)},e.exports.updateDistortionMap=function(t,e,n){var i=t;"ambientOcclusion"===t&&(i="ao");var r=e.el,a=e.material,l=r.sceneEl.systems.renderer,c=n[t+"Map"],h={};if(h.src=c,h.offset=n[t+"TextureOffset"],h.repeat=n[t+"TextureRepeat"],h.wrap=n[t+"TextureWrap"],c){if(c===e[t+"TextureSrc"])return;return e[t+"TextureSrc"]=c,void r.sceneEl.systems.material.loadTexture(c,h,u)}function u(t){var e=i+"Map";a[e]=t,t&&s.has(e)&&l.applyColorCorrection(t),a.needsUpdate=!0,o(r,t)}a.map&&u(null)},e.exports.handleTextureEvents=o,e.exports.isHLS=function(t,e){return!(!e||!r.includes(e.toLowerCase()))||!!(t&&t.toLowerCase().indexOf(".m3u8")>0)}},{"../lib/three":151}],180:[function(t,e,n){var i=Object.freeze(Object.create(null));function r(){return{}}function s(t){var e;if(t&&t.constructor===Object)for(e in t)t[e]=void 0}e.exports.createPool=function(t){var e=[],n=null;function o(i){var r,s;if((i=void 0===i?e.length:i)>0&&null==n&&(n=0),i>0)for(r=e.length,e.length+=Number(i),s=r;s<e.length;s++)e[s]=t();return e.length}return t=t||r,{grow:o,pool:e,recycle:function(t){t instanceof Object&&(null!==n&&-1!==n?e[--n]=t:e[e.length]=t)},size:function(){return e.length},use:function(){var t;return null!==n&&n!==e.length||o(e.length||5),t=e[n],e[n++]=i,s(t),t}}},e.exports.clearObject=s,e.exports.removeUnusedKeys=function(t,e){var n;if(t&&t.constructor===Object)for(n in t)n in e||delete t[n]}},{}],181:[function(t,e,n){var i;e.exports.split=(i={},function(t,e){return e in i||(i[e]={}),t in i[e]?i[e][t]:(i[e][t]=t.split(e),i[e][t])})},{}],182:[function(t,n,i){var r=t("./debug")("utils:src-loader:warn");function s(t,e,n){!function(t,e){var n;t.tagName?e("IMG"===t.tagName):((n=new XMLHttpRequest).open("HEAD",t),n.addEventListener("load",function(i){var r;n.status>=200&&n.status<300?null==(r=n.getResponseHeader("Content-Type"))?a(t,e):r.startsWith("image")?e(!0):e(!1):a(t,e),n.abort()}),n.send())}(t,function(i){i?e(t):n(t)})}function o(t){var e=t.match(/\url\((.+)\)/);if(e)return e[1]}function a(t,e){var n=new Image;n.addEventListener("load",function(){e(!0)}),n.addEventListener("error",function(){e(!1)}),n.src=t}n.exports={parseUrl:o,validateSrc:s,validateCubemapSrc:function(t,n){var i,a,l,c="",h=[];for(a=0;a<5;a++)c+="(url\\((?:[^\\)]+)\\),\\s*)";function u(t){h.push(t),6===h.length&&n(h)}if(c+="(url\\((?:[^\\)]+)\\)\\s*)",l=t.match(new RegExp(c)))for(a=1;a<7;a++)s(o(l[a]),u);else if(i=function(t){try{var n=document.querySelector(t);return n||r('No element was found matching the selector: "%s"',t),n}catch(e){return void r('"%s" is not a valid selector',t)}}(t))return"A-CUBEMAP"===i.tagName&&i.srcs?n(i.srcs):void r('Selector "%s" does not point to <a-cubemap>',t)}}},{"./debug":172}],183:[function(t,e,n){var i=/-([a-z])/g;function r(t){return t.replace(i,c)}function s(t){var e,n;for(n in t)n!==(e=r(n))&&(t[e]=t[n],delete t[n]);return t}e.exports.parse=function(t,e){var n;return"string"!=typeof t?t:(n=function(e,n){var i,r,s,o,a,c;for(n=n||{},i=l(t),r=0;r<i.length;r++)(s=i[r])&&(o=s.indexOf(":"),a=s.substr(0,o).trim(),c=s.substr(o+1).trim(),n[a]=c);return n}(0,e))[""]?t:s(n)},e.exports.stringify=function(t){return"string"==typeof t?t:function(t){var e,n=0,i=0,r="";for(e in t)n++;for(e in t)r+=e+": "+t[e],i<n-1&&(r+="; "),i++;return r}(t)},e.exports.toCamelCase=r,e.exports.transformKeysToCamelCase=s;var o,a,l=(o=[],a=/url\([^)]+$/,function(t){var e,n="",i=0;for(o.length=0;i<t.length;)-1===(e=t.indexOf(";",i))&&(e=t.length),n+=t.substring(i,e),a.test(n)?(n+=";",i=e+1):(o.push(n.trim()),n="",i=e+1);return o});function c(t){return t[1].toUpperCase()}},{}],184:[function(t,e,n){var i=t("../constants").DEFAULT_HANDEDNESS,r=["x","y","z","w"],s=2;function o(t,e,n){var i,r,s=t.el.sceneEl;return!!(e&&(r=s&&s.systems["tracked-controls-webvr"])&&(i=r.controllers).length&&l(i,null,e,n.hand,n.index||0))}function a(t,e,n){var i,r=t.el.sceneEl,s=r&&r.systems["tracked-controls-webxr"];return!!s&&!(!(i=s.controllers)||!i.length)&&c(i,n.hand)}function l(t,e,n,r,o){var a,l,c=0,h=o||0;for(l=0;l<t.length;l++)if(a=t[l],(!n||a.id.startsWith(n))&&(n||a.id===e)&&(!r||!a.hand||r===a.hand)){if(r&&!a.hand&&(h=s*o+(r===i?0:1)),c===h)return a;++c}}function c(t,e){var n;for(n=0;n<t.length;n++)if(!e||""===t[n].handedness&&"right"===e||t[n].handedness===e)return t[n]}e.exports.checkControllerPresentAndSetup=function(t,e,n){var i,r=t.el,s=r.sceneEl.hasWebXR;if(i=!!(s?a:o)(t,e,n),!t.controllerPresent||t.controllerEventsActive||s||t.addEventListeners(),i===t.controllerPresent)return i;t.controllerPresent=i,i?(t.injectTrackedControls(),s||t.addEventListeners(),r.emit("controllerconnected",{name:t.name,component:t})):(t.removeEventListeners(),r.emit("controllerdisconnected",{name:t.name,component:t}))},e.exports.isControllerPresentWebVR=o,e.exports.isControllerPresentWebXR=a,e.exports.findMatchingControllerWebVR=l,e.exports.findMatchingControllerWebXR=c,e.exports.emitIfAxesChanged=function(t,e,n){var i,s,o,a,l;for(s in e){for(i=e[s],o=!1,l=0;l<i.length;l++)n.detail.changed[i[l]]&&(o=!0);if(o){for(a={},l=0;l<i.length;l++)a[r[l]]=n.detail.axis[i[l]];t.el.emit(s+"moved",a)}}},e.exports.onButtonEvent=function(t,e,n,i){var r=(i?n.mapping[i]:n.mapping).buttons[t];n.el.emit(r+e),n.updateModel&&n.updateModel(r,e)}},{"../constants":95}],185:[function(t,e,n){window.glStats=function(){var t=null,e=0,n=0,i=0,r=0,s=0,o=0,a=0;function l(t,e){return function(){e.apply(this,arguments),t.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=l(WebGLRenderingContext.prototype.drawArrays,function(){e++,arguments[0]==this.POINTS?o+=arguments[2]:s+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=l(WebGLRenderingContext.prototype.drawElements,function(){n++,r+=arguments[1]/3,s+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=l(WebGLRenderingContext.prototype.useProgram,function(){i++}),WebGLRenderingContext.prototype.bindTexture=l(WebGLRenderingContext.prototype.bindTexture,function(){a++}),{update:function(){t("allcalls").set(e+n),t("drawElements").set(n),t("drawArrays").set(e),t("bindTexture").set(a),t("useProgram").set(i),t("glfaces").set(r),t("glvertices").set(s),t("glpoints").set(o)},start:function(){e=0,n=0,i=0,r=0,s=0,o=0,a=0},end:function(){},attach:function(e){t=e},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(t){var e=null;return{update:function(){e("renderer.info.memory.geometries").set(t.info.memory.geometries),e("renderer.info.programs").set(t.info.programs.length),e("renderer.info.memory.textures").set(t.info.memory.textures),e("renderer.info.render.calls").set(t.info.render.calls),e("renderer.info.render.triangles").set(t.info.render.triangles),e("renderer.info.render.points").set(t.info.render.points)},start:function(){},end:function(){},attach:function(t){e=t},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],fractions:[]}},window.BrowserStats=function(){var t=null,e=0,n=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var i=Math.log(1024);function r(t){var e=Math.floor(Math.log(t)/i);return Math.round(100*t/Math.pow(1024,e))/100}return{update:function(){e=r(performance.memory.usedJSHeapSize),n=r(performance.memory.totalJSHeapSize),t("memory").set(e),t("total").set(n)},start:function(){e=0},end:function(){},attach:function(e){t=e},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},"object"==typeof e&&(e.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],186:[function(t,e,n){"use strict";!function(){"performance"in window==0&&(window.performance={});var t=window.performance;if("now"in t==0){var e=Date.now();t.timing&&t.timing.navigationStart&&(e=t.timing.navigationStart),t.now=function(){return Date.now()-e}}t.mark||(t.mark=function(){}),t.measure||(t.measure=function(){})}(),window.rStats=function(t){function e(t,e){for(var n=Object.keys(t),i=0,r=n.length;i<r;i++)e(n[i])}var n=t||{},i=n.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"];(n.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",(n.CSSPath?n.CSSPath:"")+"rStats.css"]).forEach(function(t){var e,n;e=t,(n=document.createElement("link")).href=e,n.rel="stylesheet",n.type="text/css",document.getElementsByTagName("head")[0].appendChild(n)}),n.values||(n.values={});var r,s,o=10,a=200,l={};function c(t,e,n){var i=n||{},r=document.createElement("canvas"),s=r.getContext("2d"),l=0,c=0,h=i.color?i.color:"#666666",u=document.createElement("canvas"),d=u.getContext("2d");u.width=1,u.height=2*o,d.fillStyle="#444444",d.fillRect(0,0,1,2*o),d.fillStyle=h,d.fillRect(0,o,1,o),d.fillStyle="#ffffff",d.globalAlpha=.5,d.fillRect(0,o,1,1),d.globalAlpha=1;var p=document.createElement("canvas"),f=p.getContext("2d");return p.width=1,p.height=2*o,f.fillStyle="#444444",f.fillRect(0,0,1,2*o),f.fillStyle="#b70000",f.fillRect(0,o,1,o),f.globalAlpha=.5,f.fillStyle="#ffffff",f.fillRect(0,o,1,1),f.globalAlpha=1,r.width=a,r.height=o,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",t.appendChild(r),s.fillStyle="#444444",s.fillRect(0,0,r.width,r.height),{draw:function(t,e){(c+=.1*(t-c))>(l*=.99)&&(l=c),s.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height),s.drawImage(e?p:u,r.width-1,r.height-c*r.height/l-o)}}}function h(t,n){var r=document.createElement("canvas"),s=r.getContext("2d");return r.width=a,r.height=o*n,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",t.appendChild(r),s.fillStyle="#444444",s.fillRect(0,0,r.width,r.height),{draw:function(t){s.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height);var n=0;e(t,function(e){var o=t[e]*r.height;s.fillStyle=i[e],s.fillRect(r.width-1,n,1,o),n+=o})}}}function u(t,e){var i,r=t,o=0,a=0,l=0,h=0,u=performance.now(),d=0,p=document.createElement("div"),f=document.createElement("span"),m=document.createElement("div"),g=document.createTextNode(""),v=n?n.values[r.toLowerCase()]:null,y=new c(p,r,v),_=!1;function b(t){if(v&&v.average){h+=t,d++;var e=performance.now();e-u>=(v.avgMs||1e3)&&(l=h/d,h=0,u=e,d=0)}}function x(){i=performance.now(),n.userTimingAPI&&performance.mark(r+"-start"),_=!0}function w(){o=performance.now()-i,n.userTimingAPI&&(performance.mark(r+"-end"),_&&performance.measure(r,r+"-start",r+"-end")),b(o)}return f.className="rs-counter-id",f.textContent=v&&v.caption?v.caption:r,m.className="rs-counter-value",m.appendChild(g),p.appendChild(f),p.appendChild(m),e?e.div.appendChild(p):s.appendChild(p),i=performance.now(),{set:function(t){b(o=t)},start:x,tick:function(){w(),x()},end:w,frame:function(){var t=performance.now(),e=t-i;a++,e>1e3&&(o=v&&!1===v.interpolate?a:1e3*a/e,a=0,i=t,b(o))},value:function(){return o},draw:function(){g.nodeValue=Math.round(100*(v&&v.average?l:o))/100;var t=v&&(v.below&&o<v.below||v.over&&o>v.over);y.draw(o,t),p.className=t?"rs-counter-base alarm":"rs-counter-base"}}}function d(t){var i=t.toLowerCase();if(void 0===i&&(i="default"),l[i])return l[i];var r=null;n&&n.groups&&e(n.groups,function(t){var e=n.groups[parseInt(t,10)];r||-1===e.values.indexOf(i.toLowerCase())||(r=e)});var s=new u(i,r);return l[i]=s,s}function p(){e(n.plugins,function(t){n.plugins[t].update()}),e(l,function(t){l[t].draw()}),n&&n.fractions&&e(n.fractions,function(t){var i=n.fractions[parseInt(t,10)],r=[],s=l[i.base.toLowerCase()];s&&(s=s.value(),e(n.fractions[t].steps,function(e){var i=n.fractions[t].steps[parseInt(e,10)].toLowerCase(),o=l[i];o&&r.push(o.value()/s)})),i.graph.draw(r)})}return function(){if(n.plugins){n.values||(n.values={}),n.groups||(n.groups=[]),n.fractions||(n.fractions=[]);for(var t=0;t<n.plugins.length;t++)n.plugins[t].attach(d),e(n.plugins[t].values,function(e){n.values[e]=n.plugins[t].values[e]}),n.groups=n.groups.concat(n.plugins[t].groups),n.fractions=n.fractions.concat(n.plugins[t].fractions)}else n.plugins={};(r=document.createElement("div")).className="rs-base",(s=document.createElement("div")).className="rs-container",s.style.height="auto",r.appendChild(s),document.body.appendChild(r),n&&(n.groups&&e(n.groups,function(t){var e=n.groups[parseInt(t,10)],i=document.createElement("div");i.className="rs-group",e.div=i;var r=document.createElement("h1");r.textContent=e.caption,r.addEventListener("click",(function(t){this.classList.toggle("hidden"),t.preventDefault()}).bind(i)),s.appendChild(r),s.appendChild(i)}),n.fractions&&e(n.fractions,function(t){var r=n.fractions[parseInt(t,10)],a=document.createElement("div");a.className="rs-fraction";var l=document.createElement("div");l.className="rs-legend";var c=0;e(n.fractions[t].steps,function(e){var r=document.createElement("p");r.textContent=n.fractions[t].steps[e],r.style.color=i[c],l.appendChild(r),c++}),a.appendChild(l),a.style.height=c*o+"px",r.div=a;var u=new h(a,c);r.graph=u,s.appendChild(a)}))}(),function(t){return t?d(t):{element:r,update:p}}},"object"==typeof e&&(e.exports=window.rStats)},{}],187:[function(t,e,n){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e=e||0,t.length)===t})},{}],188:[function(t,n,i){n.exports={base64:function(t,e){return"data:"+t+";base64,"+e},isMobile:function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch(e){return!0}},appendQueryParameter:function(t,e,n){var i=t.indexOf("?")<0?"?":"&";return t+(i+e+"=")+n},getQueryParameter:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},isLandscapeMode:function(){return 90==window.orientation||-90==window.orientation}}},{}],189:[function(t,e,n){var i,r=t("./util.js");e.exports=(i=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||i.match(/iPod/i)?function(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){t&&(clearInterval(t),t=null)}}:function(){var t=document.createElement("video");t.addEventListener("ended",function(){t.play()}),this.request=function(){t.paused&&(t.src=r.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),t.play())},this.release=function(){t.pause(),t.src=""}}},{"./util.js":188}]},{},[149])(149)},sOAE:function(t,n,i){"use strict";i.r(n),i.d(n,"Node",function(){return at}),i.d(n,"Parser",function(){return G}),i.d(n,"Position",function(){return k}),i.d(n,"SourceLocation",function(){return N}),i.d(n,"TokContext",function(){return ht}),i.d(n,"Token",function(){return Lt}),i.d(n,"TokenType",function(){return v}),i.d(n,"defaultOptions",function(){return F}),i.d(n,"getLineInfo",function(){return B}),i.d(n,"isIdentifierChar",function(){return g}),i.d(n,"isIdentifierStart",function(){return m}),i.d(n,"isNewLine",function(){return M}),i.d(n,"keywordTypes",function(){return x}),i.d(n,"lineBreak",function(){return E}),i.d(n,"lineBreakG",function(){return S}),i.d(n,"nonASCIIwhitespace",function(){return T}),i.d(n,"parse",function(){return Dt}),i.d(n,"parseExpressionAt",function(){return kt}),i.d(n,"tokContexts",function(){return ut}),i.d(n,"tokTypes",function(){return A}),i.d(n,"tokenizer",function(){return Nt}),i.d(n,"version",function(){return It});var r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},s="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",o={5:s,"5module":s+" export import",6:s+" const class extends export import super"},a=/^in(stanceof)?$/,l="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",c="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",h=new RegExp("["+l+"]"),u=new RegExp("["+l+c+"]");l=c=null;var d=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],p=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function f(t,e){for(var n=65536,i=0;i<e.length;i+=2){if((n+=e[i])>t)return!1;if((n+=e[i+1])>=t)return!0}}function m(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&h.test(String.fromCharCode(t)):!1!==e&&f(t,d)))}function g(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&(f(t,d)||f(t,p)))))}var v=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function y(t,e){return new v(t,{beforeExpr:!0,binop:e})}var _={beforeExpr:!0},b={startsExpr:!0},x={};function w(t,e){return void 0===e&&(e={}),e.keyword=t,x[t]=new v(t,e)}var A={num:new v("num",b),regexp:new v("regexp",b),string:new v("string",b),name:new v("name",b),eof:new v("eof"),bracketL:new v("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new v("]"),braceL:new v("{",{beforeExpr:!0,startsExpr:!0}),braceR:new v("}"),parenL:new v("(",{beforeExpr:!0,startsExpr:!0}),parenR:new v(")"),comma:new v(",",_),semi:new v(";",_),colon:new v(":",_),dot:new v("."),question:new v("?",_),arrow:new v("=>",_),template:new v("template"),invalidTemplate:new v("invalidTemplate"),ellipsis:new v("...",_),backQuote:new v("`",b),dollarBraceL:new v("${",{beforeExpr:!0,startsExpr:!0}),eq:new v("=",{beforeExpr:!0,isAssign:!0}),assign:new v("_=",{beforeExpr:!0,isAssign:!0}),incDec:new v("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new v("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:y("||",1),logicalAND:y("&&",2),bitwiseOR:y("|",3),bitwiseXOR:y("^",4),bitwiseAND:y("&",5),equality:y("==/!=/===/!==",6),relational:y("</>/<=/>=",7),bitShift:y("<</>>/>>>",8),plusMin:new v("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:y("%",10),star:y("*",10),slash:y("/",10),starstar:new v("**",{beforeExpr:!0}),_break:w("break"),_case:w("case",_),_catch:w("catch"),_continue:w("continue"),_debugger:w("debugger"),_default:w("default",_),_do:w("do",{isLoop:!0,beforeExpr:!0}),_else:w("else",_),_finally:w("finally"),_for:w("for",{isLoop:!0}),_function:w("function",b),_if:w("if"),_return:w("return",_),_switch:w("switch"),_throw:w("throw",_),_try:w("try"),_var:w("var"),_const:w("const"),_while:w("while",{isLoop:!0}),_with:w("with"),_new:w("new",{beforeExpr:!0,startsExpr:!0}),_this:w("this",b),_super:w("super",b),_class:w("class",b),_extends:w("extends",_),_export:w("export"),_import:w("import",b),_null:w("null",b),_true:w("true",b),_false:w("false",b),_in:w("in",{beforeExpr:!0,binop:7}),_instanceof:w("instanceof",{beforeExpr:!0,binop:7}),_typeof:w("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:w("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:w("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},E=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(E.source,"g");function M(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,C=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,L=Object.prototype,P=L.hasOwnProperty,R=L.toString;function O(t,e){return P.call(t,e)}var I=Array.isArray||function(t){return"[object Array]"===R.call(t)};function D(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var k=function(t,e){this.line=t,this.column=e};k.prototype.offset=function(t){return new k(this.line,this.column+t)};var N=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function B(t,e){for(var n=1,i=0;;){S.lastIndex=i;var r=S.exec(t);if(!(r&&r.index<e))return new k(n,e-i);++n,i=r.index+r[0].length}}var F={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},z=2,U=1|z,j=4,H=8;function V(t,e){return z|(t?j:0)|(e?H:0)}var G=function(t,e,n){this.options=t=function(t){var e={};for(var n in F)e[n]=t&&O(t,n)?t[n]:F[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),I(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return I(e.onComment)&&(e.onComment=function(t,e){return function(n,i,r,s,o,a){var l={type:n?"Block":"Line",value:i,start:r,end:s};t.locations&&(l.loc=new N(this,o,a)),t.ranges&&(l.range=[r,s]),e.push(l)}}(e,e.onComment)),e}(t),this.sourceFile=t.sourceFile,this.keywords=D(o[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";if(!0!==t.allowReserved){for(var s=t.ecmaVersion;!(i=r[s]);s--);"module"===t.sourceType&&(i+=" await")}this.reservedWords=D(i);var a=(i?i+" ":"")+r.strict;this.reservedWordsStrict=D(a),this.reservedWordsStrictBind=D(a+" "+r.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(E).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=A.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},W={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};G.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},W.inFunction.get=function(){return(this.currentVarScope().flags&z)>0},W.inGenerator.get=function(){return(this.currentVarScope().flags&H)>0},W.inAsync.get=function(){return(this.currentVarScope().flags&j)>0},W.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},W.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},W.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},G.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&z)>0},G.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,i=0;i<t.length;i++)n=t[i](n);return n},G.parse=function(t,e){return new this(e,t).parse()},G.parseExpressionAt=function(t,e,n){var i=new this(n,t,e);return i.nextToken(),i.parseExpression()},G.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(G.prototype,W);var q=G.prototype,X=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function Y(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}q.strictDirective=function(t){for(;;){C.lastIndex=t,t+=C.exec(this.input)[0].length;var e=X.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;C.lastIndex=t+=e[0].length,t+=C.exec(this.input)[0].length,";"===this.input[t]&&t++}},q.eat=function(t){return this.type===t&&(this.next(),!0)},q.isContextual=function(t){return this.type===A.name&&this.value===t&&!this.containsEsc},q.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},q.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},q.canInsertSemicolon=function(){return this.type===A.eof||this.type===A.braceR||E.test(this.input.slice(this.lastTokEnd,this.start))},q.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},q.semicolon=function(){this.eat(A.semi)||this.insertSemicolon()||this.unexpected()},q.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},q.expect=function(t){this.eat(t)||this.unexpected()},q.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},q.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},q.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},q.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},q.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var Q=G.prototype;Q.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==A.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var Z={kind:"loop"},K={kind:"switch"};Q.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;C.lastIndex=this.pos;var e=C.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(91===i)return!0;if(t)return!1;if(123===i)return!0;if(m(i,!0)){for(var r=n+1;g(this.input.charCodeAt(r),!0);)++r;var s=this.input.slice(n,r);if(!a.test(s))return!0}return!1},Q.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;C.lastIndex=this.pos;var t=C.exec(this.input),e=this.pos+t[0].length;return!(E.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&g(this.input.charAt(e+8)))},Q.parseStatement=function(t,e,n){var i,r=this.type,s=this.startNode();switch(this.isLet(t)&&(r=A._var,i="let"),r){case A._break:case A._continue:return this.parseBreakContinueStatement(s,r.keyword);case A._debugger:return this.parseDebuggerStatement(s);case A._do:return this.parseDoStatement(s);case A._for:return this.parseForStatement(s);case A._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case A._class:return t&&this.unexpected(),this.parseClass(s,!0);case A._if:return this.parseIfStatement(s);case A._return:return this.parseReturnStatement(s);case A._switch:return this.parseSwitchStatement(s);case A._throw:return this.parseThrowStatement(s);case A._try:return this.parseTryStatement(s);case A._const:case A._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(s,i);case A._while:return this.parseWhileStatement(s);case A._with:return this.parseWithStatement(s);case A.braceL:return this.parseBlock(!0,s);case A.semi:return this.parseEmptyStatement(s);case A._export:case A._import:if(this.options.ecmaVersion>10&&r===A._import){C.lastIndex=this.pos;var o=C.exec(this.input);if(40===this.input.charCodeAt(this.pos+o[0].length))return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===A._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var a=this.value,l=this.parseExpression();return r===A.name&&"Identifier"===l.type&&this.eat(A.colon)?this.parseLabeledStatement(s,a,l,t):this.parseExpressionStatement(s,l)}},Q.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(A.semi)||this.insertSemicolon()?t.label=null:this.type!==A.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(t.label&&n)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},Q.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},Q.parseDoStatement=function(t){return this.next(),this.labels.push(Z),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(A._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(A.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},Q.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Z),this.enterScope(0),this.expect(A.parenL),this.type===A.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===A._var||this.type===A._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===A._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===A._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=new Y,o=this.parseExpression(!0,s);return this.type===A._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===A._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,s),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(s,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},Q.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,$|(n?0:tt),!1,e)},Q.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(A._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},Q.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(A.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},Q.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(A.braceL),this.labels.push(K),this.enterScope(0);for(var n=!1;this.type!==A.braceR;)if(this.type===A._case||this.type===A._default){var i=this.type===A._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(A.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},Q.parseThrowStatement=function(t){return this.next(),E.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var J=[];Q.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===A._catch){var e=this.startNode();if(this.next(),this.eat(A.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?32:0),this.checkLVal(e.param,n?4:2),this.expect(A.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(A._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},Q.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},Q.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(Z),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},Q.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},Q.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},Q.parseLabeledStatement=function(t,e,n,i){for(var r=0,s=this.labels;r<s.length;r+=1)s[r].name===e&&this.raise(n.start,"Label '"+e+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===A._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var l=this.labels[a];if(l.statementStart!==t.start)break;l.statementStart=this.start,l.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},Q.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},Q.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(A.braceL),t&&this.enterScope(0);!this.eat(A.braceR);){var n=this.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},Q.parseFor=function(t,e){return t.init=e,this.expect(A.semi),t.test=this.type===A.semi?null:this.parseExpression(),this.expect(A.semi),t.update=this.type===A.parenR?null:this.parseExpression(),this.expect(A.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},Q.parseForIn=function(t,e){var n=this.type===A._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(A.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},Q.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(A.eq)?i.init=this.parseMaybeAssign(e):"const"!==n||this.type===A._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===i.id.type||e&&(this.type===A._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(A.comma))break}return t},Q.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var $=1,tt=2;Q.parseFunction=function(t,e,n,i){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===A.star&&e&tt&&this.unexpected(),t.generator=this.eat(A.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&$&&(t.id=4&e&&this.type!==A.name?null:this.parseIdent(),!t.id||e&tt||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(V(t.async,t.generator)),e&$||(t.id=this.type===A.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(t,e&$?"FunctionDeclaration":"FunctionExpression")},Q.parseFunctionParams=function(t){this.expect(A.parenL),t.params=this.parseBindingList(A.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Q.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.startNode(),r=!1;for(i.body=[],this.expect(A.braceL);!this.eat(A.braceR);){var s=this.parseClassElement(null!==t.superClass);s&&(i.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(r&&this.raise(s.start,"Duplicate constructor in the same class"),r=!0))}return t.body=this.finishNode(i,"ClassBody"),this.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},Q.parseClassElement=function(t){var e=this;if(this.eat(A.semi))return null;var n=this.startNode(),i=function(t,i){void 0===i&&(i=!1);var r=e.start,s=e.startLoc;return!(!e.eatContextual(t)||(e.type===A.parenL||i&&e.canInsertSemicolon())&&(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(r,s),n.key.name=t,e.finishNode(n.key,"Identifier"),1))};n.kind="method",n.static=i("static");var r=this.eat(A.star),s=!1;r||(this.options.ecmaVersion>=8&&i("async",!0)?(s=!0,r=this.options.ecmaVersion>=9&&this.eat(A.star)):i("get")?n.kind="get":i("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,a=!1;return n.computed||n.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?n.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),r&&this.raise(o.start,"Constructor can't be a generator"),s&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",a=t),this.parseClassMethod(n,r,s,a),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},Q.parseClassMethod=function(t,e,n,i){return t.value=this.parseMethod(e,n,i),this.finishNode(t,"MethodDefinition")},Q.parseClassId=function(t,e){this.type===A.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},Q.parseClassSuper=function(t){t.superClass=this.eat(A._extends)?this.parseExprSubscripts():null},Q.parseExport=function(t,e){if(this.next(),this.eat(A.star))return this.expectContextual("from"),this.type!==A.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(A._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===A._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(i,4|$,!1,n)}else if(this.type===A._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==A.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,o=t.specifiers;s<o.length;s+=1){var a=o[s];this.checkUnreserved(a.local),this.checkLocalExport(a.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},Q.checkExport=function(t,e,n){t&&(O(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},Q.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var i=0,r=e.properties;i<r.length;i+=1)this.checkPatternExport(t,r[i]);else if("ArrayPattern"===n)for(var s=0,o=e.elements;s<o.length;s+=1){var a=o[s];a&&this.checkPatternExport(t,a)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},Q.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1)this.checkPatternExport(t,i[n].id)},Q.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Q.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(A.braceL);!this.eat(A.braceR);){if(n)n=!1;else if(this.expect(A.comma),this.afterTrailingComma(A.braceR))break;var i=this.startNode();i.local=this.parseIdent(!0),i.exported=this.eatContextual("as")?this.parseIdent(!0):i.local,this.checkExport(t,i.exported.name,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e},Q.parseImport=function(t){return this.next(),this.type===A.string?(t.specifiers=J,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===A.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},Q.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===A.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(A.comma))return t}if(this.type===A.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(A.braceL);!this.eat(A.braceR);){if(e)e=!1;else if(this.expect(A.comma),this.afterTrailingComma(A.braceR))break;var r=this.startNode();r.imported=this.parseIdent(!0),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportSpecifier"))}return t},Q.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},Q.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var et=G.prototype;et.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},et.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var s=t[n-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},et.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},et.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==A.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},et.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case A.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(A.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case A.braceL:return this.parseObj(!0)}return this.parseIdent()},et.parseBindingList=function(t,e,n){for(var i=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(A.comma),e&&this.type===A.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===A.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===A.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),i.push(o)}return i},et.parseBindingListItem=function(t){return t},et.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(A.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},et.checkLVal=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Identifier":2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(O(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var i=0,r=t.properties;i<r.length;i+=1)this.checkLVal(r[i],e,n);break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var s=0,o=t.elements;s<o.length;s+=1){var a=o[s];a&&this.checkLVal(a,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var nt=G.prototype;nt.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,r=t.key;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===s&&(e.proto&&(n&&n.doubleProto<0?n.doubleProto=r.start:this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var o=e[i="$"+i];o?("init"===s?this.strict&&o.init||o.get||o.set:o.init||o[s])&&this.raiseRecoverable(r.start,"Redefinition of property"):o=e[i]={init:!1,get:!1,set:!1},o[s]=!0}}},nt.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===A.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(A.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r},nt.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,s=-1,o=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,o=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new Y,i=!0);var a=this.start,l=this.startLoc;this.type!==A.parenL&&this.type!==A.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(t,e);if(n&&(c=n.call(this,c,a,l)),this.type.isAssign){var h=this.startNodeAt(a,l);return h.operator=this.value,h.left=this.type===A.eq?this.toAssignable(c,!1,e):c,i||Y.call(e),e.shorthandAssign=-1,this.checkLVal(c),this.next(),h.right=this.parseMaybeAssign(t),this.finishNode(h,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),o>-1&&(e.shorthandAssign=o),c},nt.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(A.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(A.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},nt.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?r:r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,t)},nt.parseExprOp=function(t,e,n,i,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==A._in)&&s>i){var o=this.type===A.logicalOR||this.type===A.logicalAND,a=this.value;this.next();var l=this.start,c=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,s,r),u=this.buildBinary(e,n,t,h,a,o);return this.parseExprOp(u,e,n,i,r)}return t},nt.buildBinary=function(t,e,n,i,r,s){var o=this.startNodeAt(t,e);return o.left=n,o.operator=r,o.right=i,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")},nt.parseMaybeUnary=function(t,e){var n,i=this.start,r=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var s=this.startNode(),o=this.type===A.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(s,o?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var a=this.startNodeAt(i,r);a.operator=this.value,a.prefix=!1,a.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(a,"UpdateExpression")}}return!e&&this.eat(A.starstar)?this.buildBinary(i,r,n,this.parseMaybeUnary(null,!1),"**",!1):n},nt.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,i=this.parseExprAtom(t),r="ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||r)return i;var s=this.parseSubscripts(i,e,n);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1)),s},nt.parseSubscripts=function(t,e,n,i){for(var r=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var s=this.parseSubscript(t,e,n,i,r);if(s===t||"ArrowFunctionExpression"===s.type)return s;t=s}},nt.parseSubscript=function(t,e,n,i,r){var s=this.eat(A.bracketL);if(s||this.eat(A.dot)){var o=this.startNodeAt(e,n);o.object=t,o.property=s?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),o.computed=!!s,s&&this.expect(A.bracketR),t=this.finishNode(o,"MemberExpression")}else if(!i&&this.eat(A.parenL)){var a=new Y,l=this.yieldPos,c=this.awaitPos,h=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var u=this.parseExprList(A.parenR,this.options.ecmaVersion>=8&&"Import"!==t.type,!1,a);if(r&&!this.canInsertSemicolon()&&this.eat(A.arrow))return this.checkPatternErrors(a,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=c,this.awaitIdentPos=h,this.parseArrowExpression(this.startNodeAt(e,n),u,!0);this.checkExpressionErrors(a,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos,this.awaitIdentPos=h||this.awaitIdentPos;var d=this.startNodeAt(e,n);if(d.callee=t,d.arguments=u,"Import"===d.callee.type){1!==d.arguments.length&&this.raise(d.start,"import() requires exactly one argument");var p=d.arguments[0];p&&"SpreadElement"===p.type&&this.raise(p.start,"... is not allowed in import()")}t=this.finishNode(d,"CallExpression")}else if(this.type===A.backQuote){var f=this.startNodeAt(e,n);f.tag=t,f.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(f,"TaggedTemplateExpression")}return t},nt.parseExprAtom=function(t){this.type===A.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case A._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==A.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==A.dot&&this.type!==A.bracketL&&this.type!==A.parenL&&this.unexpected(),this.finishNode(e,"Super");case A._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case A.name:var i=this.start,r=this.startLoc,s=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(A._function))return this.parseFunction(this.startNodeAt(i,r),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(A.arrow))return this.parseArrowExpression(this.startNodeAt(i,r),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===A.name&&!s)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(A.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,r),[o],!0)}return o;case A.regexp:var a=this.value;return(e=this.parseLiteral(a.value)).regex={pattern:a.pattern,flags:a.flags},e;case A.num:case A.string:return this.parseLiteral(this.value);case A._null:case A._true:case A._false:return(e=this.startNode()).value=this.type===A._null?null:this.type===A._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case A.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),c;case A.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(A.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case A.braceL:return this.parseObj(!1,t);case A._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case A._class:return this.parseClass(this.startNode(),!1);case A._new:return this.parseNew();case A.backQuote:return this.parseTemplate();case A._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},nt.parseDynamicImport=function(){var t=this.startNode();return this.next(),this.type!==A.parenL&&this.unexpected(),this.finishNode(t,"Import")},nt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal")},nt.parseParenExpression=function(){this.expect(A.parenL);var t=this.parseExpression();return this.expect(A.parenR),t},nt.parseParenAndDistinguishExpression=function(t){var e,n=this.start,i=this.startLoc,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,o=this.start,a=this.startLoc,l=[],c=!0,h=!1,u=new Y,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==A.parenR;){if(c?c=!1:this.expect(A.comma),r&&this.afterTrailingComma(A.parenR,!0)){h=!0;break}if(this.type===A.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===A.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,u,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(A.parenR),t&&!this.canInsertSemicolon()&&this.eat(A.arrow))return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(n,i,l);l.length&&!h||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(u,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,l.length>1?((e=this.startNodeAt(o,a)).expressions=l,this.finishNodeAt(e,"SequenceExpression",f,m)):e=l[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,i);return g.expression=e,this.finishNode(g,"ParenthesizedExpression")}return e},nt.parseParenItem=function(t){return t},nt.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var it=[];nt.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(A.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0),this.options.ecmaVersion>10&&"Import"===t.callee.type&&this.raise(t.callee.start,"Cannot use new with import(...)"),t.arguments=this.eat(A.parenL)?this.parseExprList(A.parenR,this.options.ecmaVersion>=8&&"Import"!==t.callee.type,!1):it,this.finishNode(t,"NewExpression")},nt.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===A.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===A.backQuote,this.finishNode(n,"TemplateElement")},nt.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===A.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(A.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(A.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},nt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===A.name||this.type===A.num||this.type===A.string||this.type===A.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===A.star)&&!E.test(this.input.slice(this.lastTokEnd,this.start))},nt.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(A.braceR);){if(i)i=!1;else if(this.expect(A.comma),this.afterTrailingComma(A.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),n.properties.push(s)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},nt.parseProperty=function(t,e){var n,i,r,s,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(A.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===A.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===A.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===A.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(r=this.start,s=this.startLoc),t||(n=this.eat(A.star)));var a=this.containsEsc;return this.parsePropertyName(o),!t&&!a&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(A.star),this.parsePropertyName(o,e)):i=!1,this.parsePropertyValue(o,t,n,i,r,s,e,a),this.finishNode(o,"Property")},nt.parsePropertyValue=function(t,e,n,i,r,s,o,a){(n||i)&&this.type===A.colon&&this.unexpected(),this.eat(A.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init"):this.options.ecmaVersion>=6&&this.type===A.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i)):e||a||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===A.comma||this.type===A.braceR?this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,t.key):this.type===A.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected():((n||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1),t.value.params.length!==("get"===t.kind?0:1)?this.raiseRecoverable(t.value.start,"get"===t.kind?"getter should have no params":"setter should have exactly one param"):"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params"))},nt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(A.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(A.bracketR),t.key;t.computed=!1}return t.key=this.type===A.num||this.type===A.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},nt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},nt.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|V(e,i.generator)|(n?128:0)),this.expect(A.parenL),i.params=this.parseBindingList(A.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(i,"FunctionExpression")},nt.parseArrowExpression=function(t,e,n){var i=this.yieldPos,r=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|V(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=i,this.awaitPos=r,this.awaitIdentPos=s,this.finishNode(t,"ArrowFunctionExpression")},nt.parseFunctionBody=function(t,e,n){var i=this.strict,r=!1;if(e&&this.type!==A.braceL)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!s||(r=this.strictDirective(this.end))&&s&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],r&&(this.strict=!0),this.checkParams(t,!i&&!r&&!e&&!n&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=o}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=i},nt.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1)if("Identifier"!==n[e].type)return!1;return!0},nt.checkParams=function(t,e){for(var n={},i=0,r=t.params;i<r.length;i+=1)this.checkLVal(r[i],1,e?null:n)},nt.parseExprList=function(t,e,n,i){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(A.comma),e&&this.afterTrailingComma(t))break;var o=void 0;n&&this.type===A.comma?o=null:this.type===A.ellipsis?(o=this.parseSpread(i),i&&this.type===A.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):o=this.parseMaybeAssign(!1,i),r.push(o)}return r},nt.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},nt.parseIdent=function(t,e){var n=this.startNode();return this.type===A.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},nt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===A.semi||this.canInsertSemicolon()||this.type!==A.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(A.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},nt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var rt=G.prototype;rt.raise=function(t,e){var n=B(this.input,t),i=new SyntaxError(e+=" ("+n.line+":"+n.column+")");throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i},rt.raiseRecoverable=rt.raise,rt.curPosition=function(){if(this.options.locations)return new k(this.curLine,this.pos-this.lineStart)};var st=G.prototype,ot=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};st.enterScope=function(t){this.scopeStack.push(new ot(t))},st.exitScope=function(){this.scopeStack.pop()},st.treatFunctionsAsVarInScope=function(t){return t.flags&z||!this.inModule&&1&t.flags},st.declareName=function(t,e,n){var i=!1;if(2===e){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var s=this.currentScope();i=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var a=this.scopeStack[o];if(a.lexical.indexOf(t)>-1&&!(32&a.flags&&a.lexical[0]===t)||!this.treatFunctionsAsVarInScope(a)&&a.functions.indexOf(t)>-1){i=!0;break}if(a.var.push(t),this.inModule&&1&a.flags&&delete this.undefinedExports[t],a.flags&U)break}i&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},st.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},st.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},st.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&U)return e}},st.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&U&&!(16&e.flags))return e}};var at=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new N(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},lt=G.prototype;function ct(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}lt.startNode=function(){return new at(this,this.start,this.startLoc)},lt.startNodeAt=function(t,e){return new at(this,t,e)},lt.finishNode=function(t,e){return ct.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},lt.finishNodeAt=function(t,e,n,i){return ct.call(this,t,e,n,i)};var ht=function(t,e,n,i,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=i,this.generator=!!r},ut={b_stat:new ht("{",!1),b_expr:new ht("{",!0),b_tmpl:new ht("${",!1),p_stat:new ht("(",!1),p_expr:new ht("(",!0),q_tmpl:new ht("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new ht("function",!1),f_expr:new ht("function",!0),f_expr_gen:new ht("function",!0,!1,null,!0),f_gen:new ht("function",!1,!1,null,!0)},dt=G.prototype;dt.initialContext=function(){return[ut.b_stat]},dt.braceIsBlock=function(t){var e=this.curContext();return e===ut.f_expr||e===ut.f_stat||(t!==A.colon||e!==ut.b_stat&&e!==ut.b_expr?t===A._return||t===A.name&&this.exprAllowed?E.test(this.input.slice(this.lastTokEnd,this.start)):t===A._else||t===A.semi||t===A.eof||t===A.parenR||t===A.arrow||(t===A.braceL?e===ut.b_stat:t!==A._var&&t!==A._const&&t!==A.name&&!this.exprAllowed):!e.isExpr)},dt.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},dt.updateContext=function(t){var e,n=this.type;n.keyword&&t===A.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},A.parenR.updateContext=A.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===ut.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},A.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ut.b_stat:ut.b_expr),this.exprAllowed=!0},A.dollarBraceL.updateContext=function(){this.context.push(ut.b_tmpl),this.exprAllowed=!0},A.parenL.updateContext=function(t){this.context.push(t===A._if||t===A._for||t===A._with||t===A._while?ut.p_stat:ut.p_expr),this.exprAllowed=!0},A.incDec.updateContext=function(){},A._function.updateContext=A._class.updateContext=function(t){!t.beforeExpr||t===A.semi||t===A._else||t===A._return&&E.test(this.input.slice(this.lastTokEnd,this.start))||(t===A.colon||t===A.braceL)&&this.curContext()===ut.b_stat?this.context.push(ut.f_stat):this.context.push(ut.f_expr),this.exprAllowed=!1},A.backQuote.updateContext=function(){this.curContext()===ut.q_tmpl?this.context.pop():this.context.push(ut.q_tmpl),this.exprAllowed=!1},A.star.updateContext=function(t){if(t===A._function){var e=this.context.length-1;this.context[e]=this.context[e]===ut.f_expr?ut.f_expr_gen:ut.f_gen}this.exprAllowed=!0},A.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==A.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var pt={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic"},ft="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",mt={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},gt={};function vt(t){var e=gt[t]={binary:D(pt[t]+" "+ft),nonBinary:{General_Category:D(ft),Script:D(mt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}vt(9),vt(10),vt(11);var yt=G.prototype,_t=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=gt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function bt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function xt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function wt(t){return t>=65&&t<=90||t>=97&&t<=122}function At(t){return wt(t)||95===t}function Et(t){return At(t)||St(t)}function St(t){return t>=48&&t<=57}function Mt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Tt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Ct(t){return t>=48&&t<=55}_t.prototype.reset=function(t,e,n){var i=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},_t.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},_t.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n?i:(i<<10)+e.charCodeAt(t+1)-56613888},_t.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n?t+1:t+2},_t.prototype.current=function(){return this.at(this.pos)},_t.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},_t.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},_t.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},yt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=0;i<n.length;i++){var r=n.charAt(i);-1===e.indexOf(r)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},yt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},yt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1)-1===t.groupNames.indexOf(n[e])&&t.raise("Invalid named capture referenced")},yt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},yt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},yt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},yt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},yt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},yt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},yt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},yt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},yt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},yt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},yt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},yt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},yt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},yt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!xt(e)&&(t.lastIntValue=e,t.advance(),!0)},yt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!xt(n);)t.advance();return t.pos!==e},yt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},yt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},yt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},yt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=bt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=bt(t.lastIntValue);return!0}return!1},yt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return m(t,!0)||36===t||95===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},yt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return g(t,!0)||36===t||95===t||8204===t||8205===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},yt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},yt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},yt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},yt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},yt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},yt.regexp_eatZero=function(t){return 48===t.current()&&!St(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},yt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},yt.regexp_eatControlLetter=function(t){var e=t.current();return!!wt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},yt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,n=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(t.switchU&&i>=55296&&i<=56319){var r=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(s>=56320&&s<=57343)return t.lastIntValue=1024*(i-55296)+(s-56320)+65536,!0}t.pos=r,t.lastIntValue=i}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&(e=t.lastIntValue)>=0&&e<=1114111)return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=n}return!1},yt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},yt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},yt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},yt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t))return this.regexp_validateUnicodePropertyNameAndValue(t,n,t.lastStringValue),!0}return t.pos=e,!!this.regexp_eatLoneUnicodePropertyNameOrValue(t)&&(this.regexp_validateUnicodePropertyNameOrValue(t,t.lastStringValue),!0)},yt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){O(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},yt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},yt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";At(e=t.current());)t.lastStringValue+=bt(e),t.advance();return""!==t.lastStringValue},yt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Et(e=t.current());)t.lastStringValue+=bt(e),t.advance();return""!==t.lastStringValue},yt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},yt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},yt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},yt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Ct(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},yt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},yt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!St(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},yt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},yt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;St(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},yt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Mt(n=t.current());)t.lastIntValue=16*t.lastIntValue+Tt(n),t.advance();return t.pos!==e},yt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;t.lastIntValue=e<=3&&this.regexp_eatOctalDigit(t)?64*e+8*n+t.lastIntValue:8*e+n}else t.lastIntValue=e;return!0}return!1},yt.regexp_eatOctalDigit=function(t){var e=t.current();return Ct(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},yt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!Mt(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Tt(r),t.advance()}return!0};var Lt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new N(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Pt=G.prototype;function Rt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Pt.next=function(){this.options.onToken&&this.options.onToken(new Lt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Pt.getToken=function(){return this.next(),new Lt(this)},"undefined"!=typeof Symbol&&(Pt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===A.eof,value:e}}}}),Pt.curContext=function(){return this.context[this.context.length-1]},Pt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(A.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Pt.readToken=function(t){return m(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Pt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Pt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(S.lastIndex=n;(t=S.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,i),n,this.pos,e,this.curPosition())},Pt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!M(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},Pt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&T.test(String.fromCharCode(t))))break t;++this.pos}}},Pt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Pt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(A.ellipsis)):(++this.pos,this.finishToken(A.dot))},Pt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(A.assign,2):this.finishOp(A.slash,1)},Pt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=42===t?A.star:A.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,i=A.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(A.assign,n+1):this.finishOp(i,n)},Pt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?A.logicalOR:A.logicalAND,2):61===e?this.finishOp(A.assign,2):this.finishOp(124===t?A.bitwiseOR:A.bitwiseAND,1)},Pt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(A.assign,2):this.finishOp(A.bitwiseXOR,1)},Pt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!E.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(A.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(A.assign,2):this.finishOp(A.plusMin,1)},Pt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(A.assign,n+1):this.finishOp(A.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(A.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Pt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(A.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(A.arrow)):this.finishOp(61===t?A.eq:A.prefix,1)},Pt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(A.parenL);case 41:return++this.pos,this.finishToken(A.parenR);case 59:return++this.pos,this.finishToken(A.semi);case 44:return++this.pos,this.finishToken(A.comma);case 91:return++this.pos,this.finishToken(A.bracketL);case 93:return++this.pos,this.finishToken(A.bracketR);case 123:return++this.pos,this.finishToken(A.braceL);case 125:return++this.pos,this.finishToken(A.braceR);case 58:return++this.pos,this.finishToken(A.colon);case 63:return++this.pos,this.finishToken(A.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(A.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(A.prefix,1)}this.raise(this.pos,"Unexpected character '"+Rt(t)+"'")},Pt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},Pt.readRegexp=function(){for(var t,n,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(E.test(r)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===r)n=!0;else if("]"===r&&n)n=!1;else if("/"===r&&!n)break;t="\\"===r}++this.pos}var s=this.input.slice(i,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var l=this.regexpState||(this.regexpState=new _t(this));l.reset(i,s,a),this.validateRegExpFlags(l),this.validateRegExpPattern(l);var c=null;try{c=new RegExp(s,a)}catch(e){}return this.finishToken(A.regexp,{pattern:s,flags:a,value:c})},Pt.readInt=function(t,e){for(var n=this.pos,i=0,r=0,s=null==e?1/0:e;r<s;++r){var o,a=this.input.charCodeAt(this.pos);if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++this.pos,i=i*t+o}return this.pos===n||null!=e&&this.pos-n!==e?null:i},Pt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!=typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):m(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(A.num,n)},Pt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number"),n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1);var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===i){var r=this.input.slice(e,this.pos),s="undefined"!=typeof BigInt?BigInt(r):null;return++this.pos,m(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(A.num,s)}46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),m(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(e,this.pos),a=n?parseInt(o,8):parseFloat(o);return this.finishToken(A.num,a)},Pt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Pt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(M(i,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(A.string,e)};var Ot={};Pt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Ot)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Pt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ot;this.raise(t,e)},Pt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==A.template&&this.type!==A.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(A.template,t)):36===n?(this.pos+=2,this.finishToken(A.dollarBraceL)):(++this.pos,this.finishToken(A.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(M(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Pt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(A.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Pt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Rt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(n,8);return i>255&&(n=n.slice(0,-1),i=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),"0"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return M(e)?"":String.fromCharCode(e)}},Pt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},Pt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(g(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?m:g)(o,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=Rt(o),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},Pt.readWord=function(){var t=this.readWord1(),e=A.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=x[t]),this.finishToken(e,t)};var It="6.3.0";function Dt(t,e){return G.parse(t,e)}function kt(t,e,n){return G.parseExpressionAt(t,e,n)}function Nt(t,e){return G.tokenizer(t,e)}},zUnb:function(t,n,i){"use strict";function r(t){return"function"==typeof t}i.r(n);let s=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function a(t){setTimeout(()=>{throw t},0)}const l={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete(){}},c=Array.isArray||(t=>t&&"number"==typeof t.length);function h(t){return null!==t&&"object"==typeof t}function u(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}u.prototype=Object.create(Error.prototype);const d=u;let p=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:i,_unsubscribe:s,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(let t=0;t<i.length;++t)i[t].remove(this);if(r(s))try{s.call(this)}catch(e){n=e instanceof d?f(e.errors):[e]}if(c(o)){let t=-1,i=o.length;for(;++t<i;){const i=o[t];if(h(i))try{i.unsubscribe()}catch(e){n=n||[],e instanceof d?n=n.concat(f(e.errors)):n.push(e)}}}if(n)throw new d(n)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;(n=new t)._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof d?e.errors:e),[])}const m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class g extends p{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!t){this.destination=l;break}if("object"==typeof t){t instanceof g?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new v(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new v(this,t,e,n)}}[m](){return this}static create(t,e,n){const i=new g(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class v extends g{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let o=this;r(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==l&&(r((o=Object.create(e)).unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;a(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;a(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(a(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const y="function"==typeof Symbol&&Symbol.observable||"@@observable";function _(){}function b(...t){return x(t)}function x(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:_}let w=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:i}=this,r=function(t,e,n){if(t){if(t instanceof g)return t;if(t[m])return t[m]()}return t||e||n?new g(t,e,n):new g(l)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),o.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof g?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=A(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[y](){return this}pipe(...t){return 0===t.length?this:x(t)(this)}toPromise(t){return new(t=A(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function A(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function E(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}E.prototype=Object.create(Error.prototype);const S=E;class M extends p{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class T extends g{constructor(t){super(t),this.destination=t}}let C=(()=>{class t extends w{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[m](){return new T(this)}lift(t){const e=new L(this,this);return e.operator=t,e}next(t){if(this.closed)throw new S;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new S;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new S;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new S;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new S;return this.hasError?(t.error(this.thrownError),p.EMPTY):this.isStopped?(t.complete(),p.EMPTY):(this.observers.push(t),new M(this,t))}asObservable(){const t=new w;return t.source=this,t}}return t.create=(t,e)=>new L(t,e),t})();class L extends C{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):p.EMPTY}}function P(t){return t&&"function"==typeof t.schedule}class R extends g{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const O=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()};function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const D=I(),k=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function N(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const B=t=>{if(t&&"function"==typeof t[y])return(t=>e=>{const n=t[y]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(k(t))return O(t);if(N(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,a),e))(t);if(t&&"function"==typeof t[D])return(t=>e=>{const n=t[D]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const e=h(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function F(t,e,n,i,r=new R(t,n,i)){if(!r.closed)return e instanceof w?e.subscribe(r):B(e)(r)}class z extends g{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function U(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new j(t,e))}}class j{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new H(t,this.project,this.thisArg))}}class H extends g{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function V(t,e){return new w(n=>{const i=new p;let r=0;return i.add(e.schedule(function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function G(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new w(n=>{const i=new p;return i.add(e.schedule(()=>{const r=t[y]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if(N(t))return function(t,e){return new w(n=>{const i=new p;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i})}(t,e);if(k(t))return V(t,e);if(function(t){return t&&"function"==typeof t[D]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new w(n=>{const i=new p;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[D](),i.add(e.schedule(function(){if(n.closed)return;let t,e;try{const s=r.next();t=s.value,e=s.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof w?t:new w(B(t))}function W(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(W((n,i)=>G(t(n,i)).pipe(U((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new X(t,this.project,this.concurrent))}}class X extends z{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new R(this,void 0,void 0);this.destination.add(i),F(this,t,e,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,i,r){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Y(t){return t}function Q(t=Number.POSITIVE_INFINITY){return W(Y,t)}function Z(t,e){return e?V(t,e):new w(O(t))}function K(){return function(t){return t.lift(new J(t))}}class J{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new $(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class $ extends g{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}const tt=class extends w{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new p).add(this.source.subscribe(new nt(this.getSubject(),this))),t.closed&&(this._connection=null,t=p.EMPTY)),t}refCount(){return K()(this)}}.prototype,et={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:tt._subscribe},_isComplete:{value:tt._isComplete,writable:!0},getSubject:{value:tt.getSubject},connect:{value:tt.connect},refCount:{value:tt.refCount}};class nt extends T{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function it(){return new C}const rt="__parameters__";function st(t,e,n){const i=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty(rt)?t[rt]:Object.defineProperty(t,rt,{value:[]})[rt];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r}const ot=st("Inject",t=>({token:t})),at=st("Optional"),lt=st("Self"),ct=st("SkipSelf");var ht=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function ut(t){for(let e in t)if(t[e]===ut)return e;throw Error("Could not find renamed property on target object.")}function dt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function pt(t){const e=t[ft];return e&&e.token===t?e:null}const ft=ut({ngInjectableDef:ut});function mt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(mt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const gt=ut({__forward_ref__:ut});function vt(t){return t.__forward_ref__=vt,t.toString=function(){return mt(this())},t}function yt(t){return"function"==typeof(e=t)&&e.hasOwnProperty(gt)&&e.__forward_ref__===vt?t():t;var e}const _t="undefined"!=typeof globalThis&&globalThis,bt="undefined"!=typeof window&&window,xt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wt="undefined"!=typeof global&&global,At=_t||wt||bt||xt;class Et{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=dt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const St=new Et("INJECTOR",-1),Mt=new Object,Tt="ngTempTokenPath",Ct="ngTokenPath",Lt=/\n/gm,Pt="\u0275",Rt="__source",Ot=ut({provide:String,useValue:ut});let It,Dt=void 0;function kt(t){const e=Dt;return Dt=t,e}function Nt(t,e=ht.Default){return(It||function(t,e=ht.Default){if(void 0===Dt)throw new Error("inject() must be called from an injection context");return null===Dt?function(t,e,n){const i=pt(t);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&ht.Optional)return null;throw new Error(`Injector: NOT_FOUND [${mt(t)}]`)}(t,0,e):Dt.get(t,e&ht.Optional?null:void 0,e)})(t,e)}const Bt=Nt;class Ft{get(t,e=Mt){if(e===Mt){const e=new Error(`NullInjectorError: No provider for ${mt(t)}!`);throw e.name="NullInjectorError",e}return e}}function zt(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Pt?t.substr(2):t;let r=mt(e);if(e instanceof Array)r=e.map(mt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):mt(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Lt,"\n  ")}`}class Ut{}class jt{}function Ht(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Vt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Gt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),Wt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(At))(),qt="ngDebugContext",Xt="ngOriginalError",Yt="ngErrorLogger";function Qt(t){return t[qt]}function Zt(t){return t[Xt]}function Kt(t,...e){t.error(...e)}class Jt{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t[Yt]||Kt}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Qt(t)?Qt(t):this._findContext(Zt(t)):null}_findOriginalError(t){let e=Zt(t);for(;e&&Zt(e);)e=Zt(e);return e}}let $t=!0,te=!1;function ee(){return te=!0,$t}class ne{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(i){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const n=(new window.DOMParser).parseFromString(t,"text/html").body;return n.removeChild(n.firstChild),n}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(t){const e=t.attributes;for(let i=e.length-1;0<i;i--){const n=e.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const ie=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,re=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function se(t){return(t=String(t)).match(ie)||t.match(re)?t:(ee()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function oe(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ae(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const le=oe("area,br,col,hr,img,wbr"),ce=oe("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),he=oe("rp,rt"),ue=ae(he,ce),de=ae(le,ae(ce,oe("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ae(he,oe("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ue),pe=oe("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fe=oe("srcset"),me=ae(pe,fe,oe("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),oe("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ge=oe("script,style,template");class ve{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!de.hasOwnProperty(e))return this.sanitizedSomething=!0,!ge.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,s=e.toLowerCase();if(!me.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;pe[s]&&(o=se(o)),fe[s]&&(i=o,o=(i=String(i)).split(",").map(t=>se(t.trim())).join(", ")),this.buf.push(" ",e,'="',be(o),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();de.hasOwnProperty(e)&&!le.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(be(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ye=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_e=/([^\#-~ |!])/g;function be(t){return t.replace(/&/g,"&amp;").replace(ye,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(_e,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xe;function we(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const Ae=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class Ee{}const Se=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Me=/^url\(([^)]+)\)$/,Te=/([A-Z])/g;function Ce(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}let Le=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Pe(),t})();const Pe=(...t)=>{},Re=new Et("The presence of this token marks an injector as being the root injector."),Oe=function(t,e,n){return new ze(t,e,n)};let Ie=(()=>{class t{static create(t,e){return Array.isArray(t)?Oe(t,e,""):Oe(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Mt,t.NULL=new Ft,t.ngInjectableDef=dt({token:t,providedIn:"any",factory:()=>Nt(St)}),t.__NG_ELEMENT_ID__=-1,t})();const De=function(t){return t},ke=[],Ne=De,Be=function(){return Array.prototype.slice.call(arguments)},Fe="\u0275";class ze{constructor(t,e=Ie.NULL,n=null){this.parent=e,this.source=n;const i=this._records=new Map;i.set(Ie,{token:Ie,fn:De,deps:ke,value:this,useNew:!1}),i.set(St,{token:St,fn:De,deps:ke,value:this,useNew:!1}),function t(e,n){if(n)if((n=yt(n))instanceof Array)for(let i=0;i<n.length;i++)t(e,n[i]);else{if("function"==typeof n)throw je("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw je("Unexpected provider",n);{let t=yt(n.provide);const i=function(t){const e=function(t){let e=ke;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let i=6,r=yt(n[t]);if(r instanceof Array)for(let t=0,e=r;t<e.length;t++){const n=e[t];n instanceof at||n==at?i|=1:n instanceof ct||n==ct?i&=-3:n instanceof lt||n==lt?i&=-5:r=n instanceof ot?n.token:yt(n)}e.push({token:r,options:i})}}else if(t.useExisting)e=[{token:yt(t.useExisting),options:6}];else if(!(n||Ot in t))throw je("'deps' required",t);return e}(t);let n=De,i=ke,r=!1,s=yt(t.provide);if(Ot in t)i=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)r=!0,n=yt(t.useClass);else{if("function"!=typeof s)throw je("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);r=!0,n=s}return{deps:e,fn:n,useNew:r,value:i}}(n);if(!0===n.multi){let i=e.get(t);if(i){if(i.fn!==Be)throw Ue(t)}else e.set(t,i={token:n.provide,deps:[],useNew:!1,fn:Be,value:ke});i.deps.push({token:t=n,options:6})}const r=e.get(t);if(r&&r.fn==Be)throw Ue(t);e.set(t,i)}}}(i,t)}get(t,n,i=ht.Default){const r=this._records.get(t);try{return function t(n,i,r,s,o,a){try{return function(e,n,i,r,s,o){let a;if(!n||o&ht.SkipSelf)o&ht.Self||(a=r.get(e,s,ht.Default));else{if((a=n.value)==Ne)throw Error(Fe+"Circular dependency");if(a===ke){n.value=Ne;let e=void 0,s=n.useNew,o=n.fn,l=n.deps,c=ke;if(l.length){c=[];for(let e=0;e<l.length;e++){const n=l[e],s=n.options,o=2&s?i.get(n.token):void 0;c.push(t(n.token,o,i,o||4&s?r:Ie.NULL,1&s?null:Ie.THROW_IF_NOT_FOUND,ht.Default))}}n.value=a=s?new o(...c):o.apply(e,c)}}return a}(n,i,r,s,o,a)}catch(e){throw e instanceof Error||(e=new Error(e)),(e[Tt]=e[Tt]||[]).unshift(n),i&&i.value==Ne&&(i.value=ke),e}}(t,r,this._records,this.parent,n,i)}catch(e){return function(t,e,n,i){const r=t[Tt];throw e[Rt]&&r.unshift(e[Rt]),t.message=zt("\n"+t.message,r,"StaticInjectorError",i),t[Ct]=r,t[Tt]=null,t}(e,t,0,this.source)}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(mt(n))),`StaticInjector[${t.join(", ")}]`}}function Ue(t){return je("Cannot mix multi providers and regular providers",t)}function je(t,e){return new Error(zt(t,e,"StaticInjectorError"))}const He=new Et("AnalyzeForEntryComponents");let Ve=null;function Ge(){if(!Ve){const t=At.Symbol;if(t&&t.iterator)Ve=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ve=n)}}}return Ve}function We(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function qe(t,e){const n=Ye(t),i=Ye(e);if(n&&i)return function(t,e,n){const i=t[Ge()](),r=e[Ge()]();for(;;){const t=i.next(),e=r.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,qe);{const r=t&&("object"==typeof t||"function"==typeof t),s=e&&("object"==typeof e||"function"==typeof e);return!(n||!r||i||!s)||We(t,e)}}class Xe{constructor(t){this.wrapped=t}static wrap(t){return new Xe(t)}static unwrap(t){return Xe.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Xe}}function Ye(t){return!!Qe(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ge()in t)}function Qe(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ze(t){return!!t&&"function"==typeof t.then}function Ke(t){return!!t&&"function"==typeof t.subscribe}class Je{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}class $e{}class tn{}function en(t){const e=Error(`No component factory found for ${mt(t)}. Did you add it to @NgModule.entryComponents?`);return e[nn]=t,e}const nn="ngComponent";class rn{resolveComponentFactory(t){throw en(t)}}let sn=(()=>{class t{}return t.NULL=new rn,t})();class on{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let i=0;i<t.length;i++){const e=t[i];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw en(t);return new an(e,this._ngModule)}}class an extends tn{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,i){return this.factory.create(t,e,n,i||this.ngModule)}}function ln(...t){}let cn=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>hn(t),t})();const hn=ln;class un{}class dn{}const pn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let fn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>mn(),t})();const mn=ln;class gn{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const vn=new gn("9.0.0-next.2");class yn{constructor(){}supports(t){return Ye(t)}create(t){return new bn(t)}}const _n=(t,e)=>e;class bn{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||_n}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const s=!n||e&&e.currentIndex<En(n,i,r)?e:n,o=En(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{r||(r=[]);const t=o-i,e=a-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;e<=s&&s<t&&(r[n]=i+1)}r[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ye(t))throw new Error(`Error trying to diff '${mt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)i=this._trackByFn(e,n=t[e]),null!==r&&We(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,e)),We(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),s=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ge()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&We(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,t,i,e)),We(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),s=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(We(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(We(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new xn(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new An),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new An),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class xn{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wn{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&We(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class An{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new wn,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function En(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class Sn{constructor(){}supports(t){return t instanceof Map||Qe(t)}create(){return new Mn}}class Mn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Qe(t)))throw new Error(`Error trying to diff '${mt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new Tn(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){We(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Tn{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Cn=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ct,new at]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.ngInjectableDef=dt({token:t,providedIn:"root",factory:()=>new t([new yn])}),t})(),Ln=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ct,new at]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.ngInjectableDef=dt({token:t,providedIn:"root",factory:()=>new t([new Sn])}),t})();const Pn=[new Sn],Rn=new Cn([new yn]),On=new Ln(Pn);let In=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Dn(t,cn),t})();const Dn=ln;let kn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Nn(t,cn),t})();const Nn=ln;function Bn(t,e,n,i){let r=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return i&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Fn(n,e),n}(r,t)}function Fn(t,e){t[qt]=e,t[Yt]=e.logError.bind(e)}function zn(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function Un(t,e,n){const i=t.state,r=1792&i;return r===e?(t.state=-1793&i|n,t.initIndex=-1,!0):r===n}function jn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Hn(t,e){return t.nodes[e]}function Vn(t,e){return t.nodes[e]}function Gn(t,e){return t.nodes[e]}function Wn(t,e){return t.nodes[e]}function qn(t,e){return t.nodes[e]}const Xn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Yn=()=>{},Qn=new Map;function Zn(t){let e=Qn.get(t);return e||(e=mt(t)+"_"+Qn.size,Qn.set(t,e)),e}const Kn="$$undefined",Jn="$$empty";function $n(t){return{id:Kn,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let ti=0;function ei(t,e,n,i){return!(!(2&t.state)&&We(t.oldValues[e.bindingIndex+n],i))}function ni(t,e,n,i){return!!ei(t,e,n,i)&&(t.oldValues[e.bindingIndex+n]=i,!0)}function ii(t,e,n,i){const r=t.oldValues[e.bindingIndex+n];if(1&t.state||!qe(r,i)){const s=e.bindings[n].name;throw Bn(Xn.createDebugContext(t,e.nodeIndex),`${s}: ${r}`,`${s}: ${i}`,0!=(1&t.state))}}function ri(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function si(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function oi(t,n,i,r){try{return ri(33554432&t.def.nodes[n].flags?Vn(t,n).componentView:t),Xn.handleEvent(t,n,i,r)}catch(e){t.root.errorHandler.handleError(e)}}function ai(t){return t.parent?Vn(t.parent,t.parentNodeDef.nodeIndex):null}function li(t){return t.parent?t.parentNodeDef.parent:null}function ci(t,e){switch(201347067&e.flags){case 1:return Vn(t,e.nodeIndex).renderElement;case 2:return Hn(t,e.nodeIndex).renderText}}function hi(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function ui(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function di(t){return 1<<t%32}function pi(t){const e={};let n=0;const i={};return t&&t.forEach(([t,r])=>{"number"==typeof t?(e[t]=r,n|=di(t)):i[t]=r}),{matchedQueries:e,references:i,matchedQueryIds:n}}function fi(t,e){return t.map(t=>{let n,i;return Array.isArray(t)?[i,n]=t:(i=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,Rt,{value:e,configurable:!0}),{flags:i,token:n,tokenKey:Zn(n)}})}function mi(t,e,n){let i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===Gt.Native?Vn(t,n.renderParent.nodeIndex).renderElement:void 0:e}const gi=new WeakMap;function vi(t){let e=gi.get(t);return e||((e=t(()=>Yn)).factory=t,gi.set(t,e)),e}function yi(t,e,n,i,r){3===e&&(n=t.renderer.parentNode(ci(t,t.def.lastRenderRootNode))),_i(t,e,0,t.def.nodes.length-1,n,i,r)}function _i(t,e,n,i,r,s,o){for(let a=n;a<=i;a++){const n=t.def.nodes[a];11&n.flags&&xi(t,n,e,r,s,o),a+=n.childCount}}function bi(t,e,n,i,r,s){let o=t;for(;o&&!hi(o);)o=o.parent;const a=o.parent,l=li(o),c=l.nodeIndex+l.childCount;for(let h=l.nodeIndex+1;h<=c;h++){const t=a.def.nodes[h];t.ngContentIndex===e&&xi(a,t,n,i,r,s),h+=t.childCount}if(!a.parent){const o=t.root.projectableNodes[e];if(o)for(let e=0;e<o.length;e++)wi(t,o[e],n,i,r,s)}}function xi(t,e,n,i,r,s){if(8&e.flags)bi(t,e.ngContent.index,n,i,r,s);else{const o=ci(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&wi(t,o,n,i,r,s),32&e.bindingFlags&&wi(Vn(t,e.nodeIndex).componentView,o,n,i,r,s)):wi(t,o,n,i,r,s),16777216&e.flags){const o=Vn(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<o.length;t++)yi(o[t],n,i,r,s)}1&e.flags&&!e.element.name&&_i(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,i,r,s)}}function wi(t,e,n,i,r,s){const o=t.renderer;switch(n){case 1:o.appendChild(i,e);break;case 2:o.insertBefore(i,e,r);break;case 3:o.removeChild(i,e);break;case 0:s.push(e)}}const Ai=/^:([^:]+):(.+)$/;function Ei(t){if(":"===t[0]){const e=t.match(Ai);return[e[1],e[2]]}return["",t]}function Si(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}const Mi=new Object,Ti=Zn(Ie),Ci=Zn(St),Li=Zn(Ut);function Pi(t,e,n,i){return n=yt(n),{index:-1,deps:fi(i,mt(e)),flags:t,token:e,value:n}}function Ri(t,e,n=Ie.THROW_IF_NOT_FOUND){const i=kt(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const o=e.tokenKey;switch(o){case Ti:case Ci:case Li:return t}const a=t._def.providersByKey[o];let l;if(a){let e=t._providers[a.index];return void 0===e&&(e=t._providers[a.index]=Oi(t,a)),e===Mi?void 0:e}if((l=pt(e.token))&&(r=t,null!=(s=l).providedIn&&(function(t,e){return t._def.modules.indexOf(s.providedIn)>-1}(r)||"root"===s.providedIn&&r._def.isRoot))){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:l.factory,deps:[],index:n,token:e.token},t._providers[n]=Mi,t._providers[n]=Oi(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{kt(i)}var r,s}function Oi(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const i=n.length;switch(i){case 0:return new e;case 1:return new e(Ri(t,n[0]));case 2:return new e(Ri(t,n[0]),Ri(t,n[1]));case 3:return new e(Ri(t,n[0]),Ri(t,n[1]),Ri(t,n[2]));default:const r=new Array(i);for(let e=0;e<i;e++)r[e]=Ri(t,n[e]);return new e(...r)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const i=n.length;switch(i){case 0:return e();case 1:return e(Ri(t,n[0]));case 2:return e(Ri(t,n[0]),Ri(t,n[1]));case 3:return e(Ri(t,n[0]),Ri(t,n[1]),Ri(t,n[2]));default:const r=Array(i);for(let e=0;e<i;e++)r[e]=Ri(t,n[e]);return e(...r)}}(t,e.value,e.deps);break;case 2048:n=Ri(t,e.deps[0]);break;case 256:n=e.value}return n===Mi||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Mi:n}function Ii(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const i=n[e];return i.viewContainerParent=null,Vt(n,e),Xn.dirtyParentQueries(i),ki(i),i}function Di(t,e,n){const i=e?ci(e,e.def.lastRenderRootNode):t.renderElement,r=n.renderer.parentNode(i),s=n.renderer.nextSibling(i);yi(n,2,r,s,void 0)}function ki(t){yi(t,3,null,null,void 0)}const Ni=new Object;function Bi(t,e,n,i,r,s){return new Fi(t,e,n,i,r,s)}class Fi extends tn{constructor(t,e,n,i,r,s){super(),this.selector=t,this.componentType=e,this._inputs=i,this._outputs=r,this.ngContentSelectors=s,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,i){if(!i)throw new Error("ngModule should be provided");const r=vi(this.viewDefFactory),s=r.nodes[0].element.componentProvider.nodeIndex,o=Xn.createRootView(t,e||[],n,r,i,Ni),a=Gn(o,s).instance;return n&&o.renderer.setAttribute(Vn(o,0).renderElement,"ng-version",vn.full),new zi(o,new Vi(o),a)}}class zi extends $e{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new cn(Vn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Xi(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function Ui(t,e,n){return new ji(t,e,n)}class ji{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new cn(this._data.renderElement)}get injector(){return new Xi(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=li(t),t=t.parent;return t?new Xi(t,e):new Xi(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Ii(this._data,t);Xn.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new Vi(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const s=n||this.parentInjector;r||t instanceof an||(r=s.get(Ut));const o=t.create(s,i,void 0,r);return this.insert(o.hostView,e),o}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,i){let r=e.viewContainer._embeddedViews;null==n&&(n=r.length),i.viewContainerParent=t,Ht(r,n,i),function(t,e){const n=ai(e);if(!n||n===t||16&e.state)return;e.state|=16;let i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(e),function(t,n){if(4&n.flags)return;e.parent.def.nodeFlags|=4,n.flags|=4;let i=n.parent;for(;i;)i.childFlags|=4,i=i.parent}(0,e.parentNodeDef)}(e,i),Xn.dirtyParentQueries(i),Di(e,n>0?r[n-1]:null,i)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,i){const r=t.viewContainer._embeddedViews,s=r[n];Vt(r,n),null==i&&(i=r.length),Ht(r,i,s),Xn.dirtyParentQueries(s),ki(s),Di(t,i>0?r[i-1]:null,s)}(this._data,0,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Ii(this._data,t);e&&Xn.destroyView(e)}detach(t){const e=Ii(this._data,t);return e?new Vi(e):null}}function Hi(t){return new Vi(t)}class Vi{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return yi(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){ri(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{Xn.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){Xn.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Xn.destroyView(this._view)}detachFromAppRef(){this._appRef=null,ki(this._view),Xn.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function Gi(t,e){return new Wi(t,e)}class Wi extends In{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new Vi(Xn.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new cn(Vn(this._parentView,this._def.nodeIndex).renderElement)}}function qi(t,e){return new Xi(t,e)}class Xi{constructor(t,e){this.view=t,this.elDef=e}get(t,e=Ie.THROW_IF_NOT_FOUND){return Xn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Zn(t)},e)}}function Yi(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=Vn(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return Hn(t,n.nodeIndex).renderText;if(20240&n.flags)return Gn(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function Qi(t){return new Zi(t.renderer)}class Zi{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,i]=Ei(e),r=this.delegate.createElement(i,n);return t&&this.delegate.appendChild(t,r),r}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),i=this.delegate.nextSibling(t);for(let r=0;r<e.length;r++)this.delegate.insertBefore(n,e[r],i)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[i,r]=Ei(e);null!=n?this.delegate.setAttribute(t,r,n,i):this.delegate.removeAttribute(t,r,i)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Ki(t,e,n,i){return new Ji(t,e,n,i)}class Ji{constructor(t,e,n,i){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let i=0;i<e.providers.length;i++){const r=e.providers[i];4096&r.flags||void 0===n[i]&&(n[i]=Oi(t,r))}}(this)}get(t,e=Ie.THROW_IF_NOT_FOUND,n=ht.Default){let i=0;return n&ht.SkipSelf?i|=1:n&ht.Self&&(i|=4),Ri(this,{token:t,tokenKey:Zn(t),flags:i},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(sn)}destroy(){if(this._destroyed)throw new Error(`The ng module ${mt(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,i=new Set;for(let r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){const e=t._providers[r];if(e&&e!==Mi){const t=e.ngOnDestroy;"function"!=typeof t||i.has(e)||(t.apply(e),i.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const $i=Zn(un),tr=Zn(fn),er=Zn(cn),nr=Zn(kn),ir=Zn(In),rr=Zn(Le),sr=Zn(Ie),or=Zn(St);function ar(t,e,n,i,r,s,o,a){const l=[];if(o)for(let h in o){const[t,e]=o[h];l[t]={flags:8,name:h,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const c=[];if(a)for(let h in a)c.push({type:1,propName:h,target:null,eventName:a[h]});return lr(t,e|=16384,n,i,r,r,s,l,c)}function lr(t,e,n,i,r,s,o,a,l){const{matchedQueries:c,references:h,matchedQueryIds:u}=pi(n);l||(l=[]),a||(a=[]),s=yt(s);const d=fi(o,mt(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:u,references:h,ngContentIndex:-1,childCount:i,bindings:a,bindingFlags:Si(a),outputs:l,element:null,provider:{token:r,value:s,deps:d},text:null,query:null,ngContent:null}}function cr(t,e){return pr(t,e)}function hr(t,e){let n=t;for(;n.parent&&!hi(n);)n=n.parent;return fr(n.parent,li(n),!0,e.provider.value,e.provider.deps)}function ur(t,e){const n=fr(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let i=0;i<e.outputs.length;i++){const r=e.outputs[i],s=n[r.propName];if(!Ke(s))throw new Error(`@Output ${r.propName} not initialized in '${n.constructor.name}'.`);{const n=s.subscribe(dr(t,e.parent.nodeIndex,r.eventName));t.disposables[e.outputIndex+i]=n.unsubscribe.bind(n)}}return n}function dr(t,e,n){return i=>oi(t,e,n,i)}function pr(t,e){const n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return fr(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,r){const s=r.length;switch(s){case 0:return i();case 1:return i(gr(t,e,n,r[0]));case 2:return i(gr(t,e,n,r[0]),gr(t,e,n,r[1]));case 3:return i(gr(t,e,n,r[0]),gr(t,e,n,r[1]),gr(t,e,n,r[2]));default:const o=Array(s);for(let i=0;i<s;i++)o[i]=gr(t,e,n,r[i]);return i(...o)}}(t,e.parent,n,i.value,i.deps);case 2048:return gr(t,e.parent,n,i.deps[0]);case 256:return i.value}}function fr(t,e,n,i,r){const s=r.length;switch(s){case 0:return new i;case 1:return new i(gr(t,e,n,r[0]));case 2:return new i(gr(t,e,n,r[0]),gr(t,e,n,r[1]));case 3:return new i(gr(t,e,n,r[0]),gr(t,e,n,r[1]),gr(t,e,n,r[2]));default:const o=new Array(s);for(let i=0;i<s;i++)o[i]=gr(t,e,n,r[i]);return new i(...o)}}const mr={};function gr(t,e,n,i,r=Ie.THROW_IF_NOT_FOUND){if(8&i.flags)return i.token;const s=t;2&i.flags&&(r=null);const o=i.tokenKey;o===rr&&(n=!(!e||!e.element.componentView)),e&&1&i.flags&&(n=!1,e=e.parent);let a=t;for(;a;){if(e)switch(o){case $i:return Qi(vr(a,e,n));case tr:return vr(a,e,n).renderer;case er:return new cn(Vn(a,e.nodeIndex).renderElement);case nr:return Vn(a,e.nodeIndex).viewContainer;case ir:if(e.element.template)return Vn(a,e.nodeIndex).template;break;case rr:return Hi(vr(a,e,n));case sr:case or:return qi(a,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[o];if(t){let e=Gn(a,t.nodeIndex);return e||(e={instance:pr(a,t)},a.nodes[t.nodeIndex]=e),e.instance}}n=hi(a),e=li(a),a=a.parent,4&i.flags&&(a=null)}const l=s.root.injector.get(i.token,mr);return l!==mr||r===mr?l:s.root.ngModule.injector.get(i.token,r)}function vr(t,e,n){let i;if(n)i=Vn(t,e.nodeIndex).componentView;else for(i=t;i.parent&&!hi(i);)i=i.parent;return i}function yr(t,e,n,i,r,s){if(32768&n.flags){const e=Vn(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[i].name]=r,524288&n.flags){s=s||{};const e=Xe.unwrap(t.oldValues[n.bindingIndex+i]);s[n.bindings[i].nonMinifiedName]=new Je(e,r,0!=(2&t.state))}return t.oldValues[n.bindingIndex+i]=r,s}function _r(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let i=0;for(let r=0;r<n.length;r++){const s=n[r];let o=s.parent;for(!o&&s.flags&e&&xr(t,r,s.flags&e,i++),0==(s.childFlags&e)&&(r+=s.childCount);o&&1&o.flags&&r===o.nodeIndex+o.childCount;)o.directChildFlags&e&&(i=br(t,o,e,i)),o=o.parent}}function br(t,e,n,i){for(let r=e.nodeIndex+1;r<=e.nodeIndex+e.childCount;r++){const e=t.def.nodes[r];e.flags&n&&xr(t,r,e.flags&n,i++),r+=e.childCount}return i}function xr(t,e,n,i){const r=Gn(t,e);if(!r)return;const s=r.instance;s&&(Xn.setCurrentNode(t,e),1048576&n&&jn(t,512,i)&&s.ngAfterContentInit(),2097152&n&&s.ngAfterContentChecked(),4194304&n&&jn(t,768,i)&&s.ngAfterViewInit(),8388608&n&&s.ngAfterViewChecked(),131072&n&&s.ngOnDestroy())}const wr=new Et("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Wt}),Ar={},Er=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),Sr=void 0;var Mr=["en",[["a","p"],["AM","PM"],Sr],[["AM","PM"],Sr,Sr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sr,"{1} 'at' {0}",Sr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];const Tr="en-US";let Cr=Tr;function Lr(t){var e;e="Expected localeId to be defined",null==t&&function(t){throw new Error(`ASSERTION ERROR: ${t}`)}(e),"string"==typeof t&&(Cr=t.toLowerCase().replace(/_/g,"-"))}class Pr extends C{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let i,r=t=>null,s=()=>null;t&&"object"==typeof t?(i=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(r=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(i,r,s);return t instanceof p&&t.add(o),o}}function Rr(){return this._results[Ge()]()}class Or{constructor(){this.dirty=!0,this._results=[],this.changes=new Pr,this.length=0;const t=Ge(),e=Or.prototype;e[t]||(e[t]=Rr)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?(n===e&&(n=e.slice(0,i)),t(r,n)):n!==e&&n.push(r)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Ir=new Et("Application Initializer");class Dr{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ze(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}const kr=new Et("AppId");function Nr(){return`${Br()}${Br()}${Br()}`}function Br(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fr=new Et("Platform Initializer"),zr=new Et("Platform ID"),Ur=new Et("appBootstrapListener");class jr{log(t){console.log(t)}warn(t){console.warn(t)}}const Hr=new Et("LocaleId"),Vr=!1;function Gr(){throw new Error("Runtime compiler is not loaded")}const Wr=Gr,qr=Gr,Xr=Gr,Yr=Gr;class Qr{constructor(){this.compileModuleSync=Wr,this.compileModuleAsync=qr,this.compileModuleAndAllComponentsSync=Xr,this.compileModuleAndAllComponentsAsync=Yr}clearCache(){}clearCacheFor(t){}getModuleId(t){}}class Zr{}let Kr,Jr;function $r(){const t=At.wtf;return!(!t||!(Kr=t.trace)||(Jr=Kr.events,0))}const ts=$r(),es=ts?function(t,e=null){return Jr.createScope(t,e)}:(t,e)=>(function(t,e){return null}),ns=ts?function(t,e){return Kr.leaveScope(t,e),e}:(t,e)=>e,is=(()=>Promise.resolve(0))();function rs(t){"undefined"==typeof Zone?is.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ss{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pr(!1),this.onMicrotaskEmpty=new Pr(!1),this.onStable=new Pr(!1),this.onError=new Pr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,i,r,s,o)=>{try{return cs(e),t.invokeTask(i,r,s,o)}finally{hs(e)}},onInvoke:(t,n,i,r,s,o,a)=>{try{return cs(e),t.invoke(i,r,s,o,a)}finally{hs(e)}},onHasTask:(t,n,i,r)=>{t.hasTask(i,r),n===i&&("microTask"==r.change?(e.hasPendingMicrotasks=r.microTask,ls(e)):"macroTask"==r.change&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,n,i,r)=>(t.handleError(i,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ss.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ss.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,t,as,os,os);try{return r.runTask(s,e,n)}finally{r.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function os(){}const as={};function ls(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cs(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function hs(t){t._nesting--,ls(t)}class us{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pr,this.onMicrotaskEmpty=new Pr,this.onStable=new Pr,this.onError=new Pr}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}class ds{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ss.assertNotInAngularZone(),rs(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rs(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}let ps=(()=>{class t{constructor(){this._applications=new Map,gs.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return gs.findTestabilityInTree(this,t,e)}}return t.ctorParameters=()=>[],t})();class fs{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let ms,gs=new fs,vs=function(t,e,n){return t.get(Zr).createCompiler([e]).compileModuleAsync(n)},ys=function(t){return t instanceof an};const _s=new Et("AllowMultipleToken");class bs{constructor(t,e){this.name=t,this.token=e}}function xs(t,e,n=[]){const i=`Platform: ${e}`,r=new Et(i);return(e=[])=>{let s=ws();if(!s||s.injector.get(_s,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0});!function(t){if(ms&&!ms.destroyed&&!ms.injector.get(_s,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ms=t.get(As);const e=t.get(Fr,null);e&&e.forEach(t=>t())}(Ie.create({providers:t,name:i}))}return function(t){const e=ws();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function ws(){return ms&&!ms.destroyed?ms:null}class As{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const i="noop"===(s=n?n.ngZone:void 0)?new us:("zone.js"===s?void 0:s)||new ss({enableLongStackTrace:ee()}),r=[{provide:ss,useValue:i}];var s;return i.run(()=>{const n=Ie.create({providers:r,parent:this.injector,name:t.moduleType.name}),s=t.create(n),o=s.injector.get(Jt,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return Vr&&Lr(s.injector.get(Hr,Tr)||Tr),s.onDestroy(()=>Ms(this._modules,s)),i.runOutsideAngular(()=>i.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,n,i){try{const r=i();return Ze(r)?r.catch(e=>{throw n.runOutsideAngular(()=>t.handleError(e)),e}):r}catch(e){throw n.runOutsideAngular(()=>t.handleError(e)),e}}(o,i,()=>{const t=s.injector.get(Dr);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,e=[]){const n=Es({},e);return vs(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ss);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${mt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}function Es(t,e){return Array.isArray(e)?e.reduce(Es,t):Object.assign({},t,e)}let Ss=(()=>{class t{constructor(t,e,n,i,r,s){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=ee(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new w(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new w(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ss.assertNotInAngularZone(),rs(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return P(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof w?t[0]:Q(e)(Z(t,n))}(o,a.pipe(t=>K()(function(t,e){return function(e){let n;n="function"==typeof t?t:function(){return t};const i=Object.create(e,et);return i.source=e,i.subjectFactory=n,i}}(it)(t))))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof tn?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=ys(n)?null:this._injector.get(Ut),r=n.create(Ie.NULL,[],e||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const s=r.injector.get(ds,null);return s&&r.injector.get(ps).registerApplication(r.location.nativeElement,s),this._loadComponent(r),ee()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const n=t._tickScope();try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1,ns(n)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ms(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ur,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Ms(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t._tickScope=es("ApplicationRef#tick()"),t})();function Ms(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ts{}const Cs="#",Ls="NgFactory";class Ps{}const Rs={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class Os{constructor(t,e){this._compiler=t,this._config=e||Rs}load(t){return!Vr&&this._compiler instanceof Qr?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,n]=t.split(Cs);return void 0===n&&(n="default"),i("zn8P")(e).then(t=>t[n]).then(t=>Is(t,e,n)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,n]=t.split(Cs),r=Ls;return void 0===n&&(n="default",r=""),i("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[n+r]).then(t=>Is(t,e,n))}}function Is(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class Ds{constructor(t,e){this.name=t,this.callback=e}}class ks{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof Ns&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Ns extends ks{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,i){e.childNodes.forEach(e=>{e instanceof Ns&&(n(e)&&i.push(e),t(e,n,i))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,i){e instanceof Ns&&e.childNodes.forEach(e=>{n(e)&&i.push(e),e instanceof Ns&&t(e,n,i)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof Ns)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const Bs=new Map,Fs=function(t){return Bs.get(t)||null};function zs(t){Bs.set(t.nativeNode,t)}const Us=xs(null,"core",[{provide:zr,useValue:"unknown"},{provide:As,deps:[Ie]},{provide:ps,deps:[]},{provide:jr,deps:[]}]);function js(){return Rn}function Hs(){return On}function Vs(t){return t?(Vr&&Lr(t),t):Tr}function Gs(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}class Ws{constructor(t){}}function qs(t,e,n,i,r,s){t|=1;const{matchedQueries:o,references:a,matchedQueryIds:l}=pi(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:l,references:a,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:s?vi(s):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||Yn},provider:null,text:null,query:null,ngContent:null}}function Xs(t,e,n,i,r,s,o=[],a,l,c,h,u){c||(c=Yn);const{matchedQueries:d,references:p,matchedQueryIds:f}=pi(n);let m=null,g=null;s&&([m,g]=Ei(s)),a=a||[];const v=new Array(a.length);for(let b=0;b<a.length;b++){const[t,e,n]=a[b],[i,r]=Ei(e);let s=void 0,o=void 0;switch(15&t){case 4:o=n;break;case 1:case 8:s=n}v[b]={flags:t,ns:i,name:r,nonMinifiedName:r,securityContext:s,suffix:o}}l=l||[];const y=new Array(l.length);for(let b=0;b<l.length;b++){const[t,e]=l[b];y[b]={type:0,target:t,eventName:e,propName:null}}const _=(o=o||[]).map(([t,e])=>{const[n,i]=Ei(t);return[n,i,e]});return u=function(t){if(t&&t.id===Kn){const e=null!=t.encapsulation&&t.encapsulation!==Gt.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${ti++}`:Jn}return t&&t.id===Jn&&(t=null),t||null}(u),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:i,childCount:r,bindings:v,bindingFlags:Si(v),outputs:y,element:{ns:m,name:g,attrs:_,template:null,componentProvider:null,componentView:h||null,componentRendererType:u,publicProviders:null,allProviders:null,handleEvent:c||Yn},provider:null,text:null,query:null,ngContent:null}}function Ys(t,e,n){const i=n.element,r=t.root.selectorOrNode,s=t.renderer;let o;if(t.parent||!r){o=i.name?s.createElement(i.name,i.ns):s.createComment("");const r=mi(t,e,n);r&&s.appendChild(r,o)}else o=s.selectRootElement(r,!!i.componentRendererType&&i.componentRendererType.encapsulation===Gt.ShadowDom);if(i.attrs)for(let a=0;a<i.attrs.length;a++){const[t,e,n]=i.attrs[a];s.setAttribute(o,e,n,t)}return o}function Qs(t,e,n,i){for(let o=0;o<n.outputs.length;o++){const a=n.outputs[o],l=Zs(t,n.nodeIndex,(s=a.eventName,(r=a.target)?`${r}:${s}`:s));let c=a.target,h=t;"component"===a.target&&(c=null,h=e);const u=h.renderer.listen(c||i,a.eventName,l);t.disposables[n.outputIndex+o]=u}var r,s}function Zs(t,e,n){return i=>oi(t,e,n,i)}function Ks(t,e,n,i){if(!ni(t,e,n,i))return!1;const r=e.bindings[n],s=Vn(t,e.nodeIndex),o=s.renderElement,a=r.name;switch(15&r.flags){case 1:!function(t,e,n,i,r,s){const o=e.securityContext;let a=o?t.root.sanitizer.sanitize(o,s):s;a=null!=a?a.toString():null;const l=t.renderer;null!=s?l.setAttribute(n,r,a,i):l.removeAttribute(n,r,i)}(t,r,o,r.ns,a,i);break;case 2:!function(t,e,n,i){const r=t.renderer;i?r.addClass(e,n):r.removeClass(e,n)}(t,o,a,i);break;case 4:!function(t,e,n,i,r){let s=t.root.sanitizer.sanitize(Ae.STYLE,r);if(null!=s){s=s.toString();const t=e.suffix;null!=t&&(s+=t)}else s=null;const o=t.renderer;null!=s?o.setStyle(n,i,s):o.removeStyle(n,i)}(t,r,o,a,i);break;case 8:!function(t,e,n,i,r){const s=e.securityContext;let o=s?t.root.sanitizer.sanitize(s,r):r;t.renderer.setProperty(n,i,o)}(33554432&e.flags&&32&r.flags?s.componentView:t,r,o,a,i)}return!0}function Js(t,e,n){let i=[];for(let r in n)i.push({propName:r,bindingType:n[r]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:di(e),bindings:i},ngContent:null}}function $s(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&ui(t);){let n=t.parentNodeDef;t=t.parent;const i=n.nodeIndex+n.childCount;for(let r=0;r<=i;r++){const i=t.def.nodes[r];67108864&i.flags&&536870912&i.flags&&(i.query.filterId&e)===i.query.filterId&&qn(t,r).setDirty(),!(1&i.flags&&r+i.childCount<n.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(r+=i.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&qn(t,n).setDirty(),n+=e.childCount}}function to(t,e){const n=qn(t,e.nodeIndex);if(!n.dirty)return;let i,r=void 0;if(67108864&e.flags){const n=e.parent.parent;r=eo(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),i=Gn(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(r=eo(t,0,t.def.nodes.length-1,e.query,[]),i=t.component);n.reset(r);const s=e.query.bindings;let o=!1;for(let a=0;a<s.length;a++){const t=s[a];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,o=!0}i[t.propName]=e}o&&n.notifyOnChanges()}function eo(t,e,n,i,r){for(let s=e;s<=n;s++){const e=t.def.nodes[s],n=e.matchedQueries[i.id];if(null!=n&&r.push(no(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&i.filterId)===i.filterId){const n=Vn(t,s);if((e.childMatchedQueries&i.filterId)===i.filterId&&(eo(t,s+1,s+e.childCount,i,r),s+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const s=t[e],o=ai(s);o&&o===n&&eo(s,0,s.def.nodes.length-1,i,r)}}const o=n.template._projectedViews;if(o)for(let t=0;t<o.length;t++){const e=o[t];eo(e,0,e.def.nodes.length-1,i,r)}}(e.childMatchedQueries&i.filterId)!==i.filterId&&(s+=e.childCount)}return r}function no(t,e,n){if(null!=n)switch(n){case 1:return Vn(t,e.nodeIndex).renderElement;case 0:return new cn(Vn(t,e.nodeIndex).renderElement);case 2:return Vn(t,e.nodeIndex).template;case 3:return Vn(t,e.nodeIndex).viewContainer;case 4:return Gn(t,e.nodeIndex).instance}}function io(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function ro(t,e,n){const i=mi(t,e,n);i&&bi(t,n.ngContent.index,1,i,null,void 0)}function so(t,e,n){const i=new Array(n.length);for(let r=0;r<n.length;r++){const t=n[r];i[r]={flags:8,name:t,ns:null,nonMinifiedName:t,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:i,bindingFlags:Si(i),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function oo(t,e,n){const i=new Array(n.length-1);for(let r=1;r<n.length;r++)i[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function ao(t,e,n){let i;const r=t.renderer;i=r.createText(n.text.prefix);const s=mi(t,e,n);return s&&r.appendChild(s,i),{renderText:i}}function lo(t,e){return(null!=t?t.toString():"")+e.suffix}function co(t,e,n,i){let r=0,s=0,o=0,a=0,l=0,c=null,h=null,u=!1,d=!1,p=null;for(let f=0;f<e.length;f++){const t=e[f];if(t.nodeIndex=f,t.parent=c,t.bindingIndex=r,t.outputIndex=s,t.renderParent=h,o|=t.flags,l|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=c?c.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,u=!1,d=!1,t.element.template&&(l|=t.element.template.nodeMatchedQueries)}if(uo(c,t,e.length),r+=t.bindings.length,s+=t.outputs.length,!h&&3&t.flags&&(p=t),20224&t.flags){u||(u=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?c.element.publicProviders[Zn(t.provider.token)]=t:(d||(d=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[Zn(t.provider.token)]=t),e&&(c.element.componentProvider=t)}if(c?(c.childFlags|=t.flags,c.directChildFlags|=t.flags,c.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(c.childMatchedQueries|=t.element.template.nodeMatchedQueries)):a|=t.flags,t.childCount>0)c=t,ho(t)||(h=t);else for(;c&&f===c.nodeIndex+c.childCount;){const t=c.parent;t&&(t.childFlags|=c.childFlags,t.childMatchedQueries|=c.childMatchedQueries),h=(c=t)&&ho(c)?c.renderParent:c}}return{factory:null,nodeFlags:o,rootNodeFlags:a,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:n||Yn,updateRenderer:i||Yn,handleEvent:(t,n,i,r)=>e[n].element.handleEvent(t,i,r),bindingCount:r,outputCount:s,lastRenderRootNode:p}}function ho(t){return 0!=(1&t.flags)&&null===t.element.name}function uo(t,e,n){const i=e.element&&e.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function po(t,e,n,i){const r=go(t.root,t.renderer,t,e,n);return vo(r,t.component,i),yo(r),r}function fo(t,e,n){const i=go(t,t.renderer,null,null,e);return vo(i,n,n),yo(i),i}function mo(t,e,n,i){const r=e.element.componentRendererType;let s;return s=r?t.root.rendererFactory.createRenderer(i,r):t.root.renderer,go(t.root,s,t,e.element.componentProvider,n)}function go(t,e,n,i,r){const s=new Array(r.nodes.length),o=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:s,state:13,root:t,renderer:e,oldValues:new Array(r.bindingCount),disposables:o,initIndex:-1}}function vo(t,e,n){t.component=e,t.context=n}function yo(t){let e;hi(t)&&(e=Vn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,i=t.nodes;for(let r=0;r<n.nodes.length;r++){const s=n.nodes[r];let o;switch(Xn.setCurrentNode(t,r),201347067&s.flags){case 1:const n=Ys(t,e,s);let a=void 0;if(33554432&s.flags){const e=vi(s.element.componentView);a=Xn.createComponentView(t,s,e,n)}Qs(t,a,s,n),o={renderElement:n,componentView:a,viewContainer:null,template:s.element.template?Gi(t,s):void 0},16777216&s.flags&&(o.viewContainer=Ui(t,s,o));break;case 2:o=ao(t,e,s);break;case 512:case 1024:case 2048:case 256:(o=i[r])||4096&s.flags||(o={instance:cr(t,s)});break;case 16:o={instance:hr(t,s)};break;case 16384:(o=i[r])||(o={instance:ur(t,s)}),32768&s.flags&&vo(Vn(t,s.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new Or;break;case 8:ro(t,e,s),o=void 0}i[r]=o}To(t,Mo.CreateViewNodes),Ro(t,201326592,268435456,0)}function _o(t){wo(t),Xn.updateDirectives(t,1),Co(t,Mo.CheckNoChanges),Xn.updateRenderer(t,1),To(t,Mo.CheckNoChanges),t.state&=-97}function bo(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Un(t,0,256),wo(t),Xn.updateDirectives(t,0),Co(t,Mo.CheckAndUpdate),Ro(t,67108864,536870912,0);let e=Un(t,256,512);_r(t,2097152|(e?1048576:0)),Xn.updateRenderer(t,0),To(t,Mo.CheckAndUpdate),Ro(t,134217728,536870912,0),_r(t,8388608|((e=Un(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Un(t,768,1024)}function xo(t,e,n,i,r,s,o,a,l,c,h,u,d){return 0===n?function(t,e,n,i,r,s,o,a,l,c,h,u){switch(201347067&e.flags){case 1:return function(t,e,n,i,r,s,o,a,l,c,h,u){const d=e.bindings.length;let p=!1;return d>0&&Ks(t,e,0,n)&&(p=!0),d>1&&Ks(t,e,1,i)&&(p=!0),d>2&&Ks(t,e,2,r)&&(p=!0),d>3&&Ks(t,e,3,s)&&(p=!0),d>4&&Ks(t,e,4,o)&&(p=!0),d>5&&Ks(t,e,5,a)&&(p=!0),d>6&&Ks(t,e,6,l)&&(p=!0),d>7&&Ks(t,e,7,c)&&(p=!0),d>8&&Ks(t,e,8,h)&&(p=!0),d>9&&Ks(t,e,9,u)&&(p=!0),p}(t,e,n,i,r,s,o,a,l,c,h,u);case 2:return function(t,e,n,i,r,s,o,a,l,c,h,u){let d=!1;const p=e.bindings,f=p.length;if(f>0&&ni(t,e,0,n)&&(d=!0),f>1&&ni(t,e,1,i)&&(d=!0),f>2&&ni(t,e,2,r)&&(d=!0),f>3&&ni(t,e,3,s)&&(d=!0),f>4&&ni(t,e,4,o)&&(d=!0),f>5&&ni(t,e,5,a)&&(d=!0),f>6&&ni(t,e,6,l)&&(d=!0),f>7&&ni(t,e,7,c)&&(d=!0),f>8&&ni(t,e,8,h)&&(d=!0),f>9&&ni(t,e,9,u)&&(d=!0),d){let d=e.text.prefix;f>0&&(d+=lo(n,p[0])),f>1&&(d+=lo(i,p[1])),f>2&&(d+=lo(r,p[2])),f>3&&(d+=lo(s,p[3])),f>4&&(d+=lo(o,p[4])),f>5&&(d+=lo(a,p[5])),f>6&&(d+=lo(l,p[6])),f>7&&(d+=lo(c,p[7])),f>8&&(d+=lo(h,p[8])),f>9&&(d+=lo(u,p[9]));const m=Hn(t,e.nodeIndex).renderText;t.renderer.setValue(m,d)}return d}(t,e,n,i,r,s,o,a,l,c,h,u);case 16384:return function(t,e,n,i,r,s,o,a,l,c,h,u){const d=Gn(t,e.nodeIndex),p=d.instance;let f=!1,m=void 0;const g=e.bindings.length;return g>0&&ei(t,e,0,n)&&(f=!0,m=yr(t,d,e,0,n,m)),g>1&&ei(t,e,1,i)&&(f=!0,m=yr(t,d,e,1,i,m)),g>2&&ei(t,e,2,r)&&(f=!0,m=yr(t,d,e,2,r,m)),g>3&&ei(t,e,3,s)&&(f=!0,m=yr(t,d,e,3,s,m)),g>4&&ei(t,e,4,o)&&(f=!0,m=yr(t,d,e,4,o,m)),g>5&&ei(t,e,5,a)&&(f=!0,m=yr(t,d,e,5,a,m)),g>6&&ei(t,e,6,l)&&(f=!0,m=yr(t,d,e,6,l,m)),g>7&&ei(t,e,7,c)&&(f=!0,m=yr(t,d,e,7,c,m)),g>8&&ei(t,e,8,h)&&(f=!0,m=yr(t,d,e,8,h,m)),g>9&&ei(t,e,9,u)&&(f=!0,m=yr(t,d,e,9,u,m)),m&&p.ngOnChanges(m),65536&e.flags&&jn(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),f}(t,e,n,i,r,s,o,a,l,c,h,u);case 32:case 64:case 128:return function(t,e,n,i,r,s,o,a,l,c,h,u){const d=e.bindings;let p=!1;const f=d.length;if(f>0&&ni(t,e,0,n)&&(p=!0),f>1&&ni(t,e,1,i)&&(p=!0),f>2&&ni(t,e,2,r)&&(p=!0),f>3&&ni(t,e,3,s)&&(p=!0),f>4&&ni(t,e,4,o)&&(p=!0),f>5&&ni(t,e,5,a)&&(p=!0),f>6&&ni(t,e,6,l)&&(p=!0),f>7&&ni(t,e,7,c)&&(p=!0),f>8&&ni(t,e,8,h)&&(p=!0),f>9&&ni(t,e,9,u)&&(p=!0),p){const p=Wn(t,e.nodeIndex);let m;switch(201347067&e.flags){case 32:m=new Array(d.length),f>0&&(m[0]=n),f>1&&(m[1]=i),f>2&&(m[2]=r),f>3&&(m[3]=s),f>4&&(m[4]=o),f>5&&(m[5]=a),f>6&&(m[6]=l),f>7&&(m[7]=c),f>8&&(m[8]=h),f>9&&(m[9]=u);break;case 64:m={},f>0&&(m[d[0].name]=n),f>1&&(m[d[1].name]=i),f>2&&(m[d[2].name]=r),f>3&&(m[d[3].name]=s),f>4&&(m[d[4].name]=o),f>5&&(m[d[5].name]=a),f>6&&(m[d[6].name]=l),f>7&&(m[d[7].name]=c),f>8&&(m[d[8].name]=h),f>9&&(m[d[9].name]=u);break;case 128:const t=n;switch(f){case 1:m=t.transform(n);break;case 2:m=t.transform(i);break;case 3:m=t.transform(i,r);break;case 4:m=t.transform(i,r,s);break;case 5:m=t.transform(i,r,s,o);break;case 6:m=t.transform(i,r,s,o,a);break;case 7:m=t.transform(i,r,s,o,a,l);break;case 8:m=t.transform(i,r,s,o,a,l,c);break;case 9:m=t.transform(i,r,s,o,a,l,c,h);break;case 10:m=t.transform(i,r,s,o,a,l,c,h,u)}}p.value=m}return p}(t,e,n,i,r,s,o,a,l,c,h,u);default:throw"unreachable"}}(t,e,i,r,s,o,a,l,c,h,u,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let i=!1;for(let r=0;r<n.length;r++)Ks(t,e,r,n[r])&&(i=!0);return i}(t,e,n);case 2:return function(t,e,n){const i=e.bindings;let r=!1;for(let s=0;s<n.length;s++)ni(t,e,s,n[s])&&(r=!0);if(r){let r="";for(let t=0;t<n.length;t++)r+=lo(n[t],i[t]);r=e.text.prefix+r;const s=Hn(t,e.nodeIndex).renderText;t.renderer.setValue(s,r)}return r}(t,e,n);case 16384:return function(t,e,n){const i=Gn(t,e.nodeIndex),r=i.instance;let s=!1,o=void 0;for(let a=0;a<n.length;a++)ei(t,e,a,n[a])&&(s=!0,o=yr(t,i,e,a,n[a],o));return o&&r.ngOnChanges(o),65536&e.flags&&jn(t,256,e.nodeIndex)&&r.ngOnInit(),262144&e.flags&&r.ngDoCheck(),s}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const i=e.bindings;let r=!1;for(let s=0;s<n.length;s++)ni(t,e,s,n[s])&&(r=!0);if(r){const r=Wn(t,e.nodeIndex);let s;switch(201347067&e.flags){case 32:s=n;break;case 64:s={};for(let e=0;e<n.length;e++)s[i[e].name]=n[e];break;case 128:const t=n[0],r=n.slice(1);s=t.transform(...r)}r.value=s}return r}(t,e,n);default:throw"unreachable"}}(t,e,i)}function wo(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const i=e.nodes[n];if(4&i.flags){const e=Vn(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const i=e[n];i.state|=32,si(i,t)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function Ao(t,e,n,i,r,s,o,a,l,c,h,u,d){return 0===n?function(t,e,n,i,r,s,o,a,l,c,h,u){const d=e.bindings.length;d>0&&ii(t,e,0,n),d>1&&ii(t,e,1,i),d>2&&ii(t,e,2,r),d>3&&ii(t,e,3,s),d>4&&ii(t,e,4,o),d>5&&ii(t,e,5,a),d>6&&ii(t,e,6,l),d>7&&ii(t,e,7,c),d>8&&ii(t,e,8,h),d>9&&ii(t,e,9,u)}(t,e,i,r,s,o,a,l,c,h,u,d):function(t,e,n){for(let i=0;i<n.length;i++)ii(t,e,i,n[i])}(t,e,i),!1}function Eo(t,e){if(qn(t,e.nodeIndex).dirty)throw Bn(Xn.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function So(t){if(!(128&t.state)){if(Co(t,Mo.Destroy),To(t,Mo.Destroy),_r(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=ai(t);if(e){const n=e.template._projectedViews;n&&(Vt(n,n.indexOf(t)),Xn.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(Vn(t,n).renderElement):2&e.flags?t.renderer.destroyNode(Hn(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&qn(t,n).destroy()}}(t),hi(t)&&t.renderer.destroy(),t.state|=128}}const Mo=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function To(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const r=n.nodes[i];33554432&r.flags?Lo(Vn(t,i).componentView,e):0==(33554432&r.childFlags)&&(i+=r.childCount)}}function Co(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const r=n.nodes[i];if(16777216&r.flags){const n=Vn(t,i).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)Lo(n[t],e)}else 0==(16777216&r.childFlags)&&(i+=r.childCount)}}function Lo(t,e){const n=t.state;switch(e){case Mo.CheckNoChanges:0==(128&n)&&(12==(12&n)?_o(t):64&n&&Po(t,Mo.CheckNoChangesProjectedViews));break;case Mo.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?_o(t):64&n&&Po(t,e));break;case Mo.CheckAndUpdate:0==(128&n)&&(12==(12&n)?bo(t):64&n&&Po(t,Mo.CheckAndUpdateProjectedViews));break;case Mo.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?bo(t):64&n&&Po(t,e));break;case Mo.Destroy:So(t);break;case Mo.CreateViewNodes:yo(t)}}function Po(t,e){Co(t,e),To(t,e)}function Ro(t,e,n,i){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const r=t.def.nodes.length;for(let s=0;s<r;s++){const r=t.def.nodes[s];if(r.flags&e&&r.flags&n)switch(Xn.setCurrentNode(t,r.nodeIndex),i){case 0:to(t,r);break;case 1:Eo(t,r)}r.childFlags&e&&r.childFlags&n||(s+=r.childCount)}}let Oo=!1;function Io(t,e,n,i,r,s){const o=r.injector.get(dn);return fo(ko(t,r,o,e,n),i,s)}function Do(t,e,n,i,r,s){const o=r.injector.get(dn),a=ko(t,r,new pa(o),e,n),l=Wo(i);return ua(Ko.create,fo,null,[a,l,s])}function ko(t,e,n,i,r){const s=e.injector.get(Ee),o=e.injector.get(Jt),a=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:i,selectorOrNode:r,sanitizer:s,rendererFactory:n,renderer:a,errorHandler:o}}function No(t,e,n,i){const r=Wo(n);return ua(Ko.create,po,null,[t,e,r,i])}function Bo(t,e,n,i){return n=jo.get(e.element.componentProvider.provider.token)||Wo(n),ua(Ko.create,mo,null,[t,e,n,i])}function Fo(t,e,n,i){return Ki(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===zo.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const i=zo.get(t.token);3840&t.flags&&i&&(e=!0,n=n||i.deprecatedBehavior)}),t.modules.forEach(t=>{Uo.forEach((i,r)=>{pt(r).providedIn===t&&(e=!0,n=n||i.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const i=t.providers[e];n&&(i.flags|=4096);const r=zo.get(i.token);r&&(i.flags=-3841&i.flags|r.flags,i.deps=fi(r.deps),i.value=r.value)}if(Uo.size>0){let e=new Set(t.modules);Uo.forEach((i,r)=>{if(e.has(pt(r).providedIn)){let e={token:r,flags:i.flags|(n?4096:0),deps:fi(i.deps),value:i.value,index:t.providers.length};t.providers.push(e),t.providersByKey[Zn(r)]=e}})}}(t=t.factory(()=>Yn)),t):t}(i))}const zo=new Map,Uo=new Map,jo=new Map;function Ho(t){let e;zo.set(t.token,t),"function"==typeof t.token&&(e=pt(t.token))&&"function"==typeof e.providedIn&&Uo.set(t.token,t)}function Vo(t,e){const n=vi(e.viewDefFactory),i=vi(n.nodes[0].element.componentView);jo.set(t,i)}function Go(){zo.clear(),Uo.clear(),jo.clear()}function Wo(t){if(0===zo.size)return t;const e=function(t){const e=[];let n=null;for(let i=0;i<t.nodes.length;i++){const r=t.nodes[i];1&r.flags&&(n=r),n&&3840&r.flags&&zo.has(r.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>Yn);for(let i=0;i<e.length;i++)n(t,e[i]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=zo.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=fi(n.deps),t.value=n.value)}}}}function qo(t,e,n,i,r,s,o,a,l,c,h,u,d){const p=t.def.nodes[e];return xo(t,p,n,i,r,s,o,a,l,c,h,u,d),224&p.flags?Wn(t,e).value:void 0}function Xo(t,e,n,i,r,s,o,a,l,c,h,u,d){const p=t.def.nodes[e];return Ao(t,p,n,i,r,s,o,a,l,c,h,u,d),224&p.flags?Wn(t,e).value:void 0}function Yo(t){return ua(Ko.detectChanges,bo,null,[t])}function Qo(t){return ua(Ko.checkNoChanges,_o,null,[t])}function Zo(t){return ua(Ko.destroy,So,null,[t])}const Ko=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let Jo,$o,ta;function ea(t,e){$o=t,ta=e}function na(t,e,n,i){return ea(t,e),ua(Ko.handleEvent,t.def.handleEvent,null,[t,e,n,i])}function ia(t,e){if(128&t.state)throw zn(Ko[Jo]);return ea(t,aa(t,0)),t.def.updateDirectives(function(t,n,i,...r){const s=t.def.nodes[n];return 0===e?sa(t,s,i,r):oa(t,s,i,r),16384&s.flags&&ea(t,aa(t,n)),224&s.flags?Wn(t,s.nodeIndex).value:void 0},t)}function ra(t,e){if(128&t.state)throw zn(Ko[Jo]);return ea(t,la(t,0)),t.def.updateRenderer(function(t,n,i,...r){const s=t.def.nodes[n];return 0===e?sa(t,s,i,r):oa(t,s,i,r),3&s.flags&&ea(t,la(t,n)),224&s.flags?Wn(t,s.nodeIndex).value:void 0},t)}function sa(t,e,n,i){if(xo(t,e,n,...i)){const o=1===n?i[0]:i;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const i=e.bindings[t],a=o[t];8&i.flags&&(n[(r=i.nonMinifiedName,s=void 0,s=r.replace(/[$@]/g,"_"),`ng-reflect-${r=s.replace(Te,(...t)=>"-"+t[1].toLowerCase())}`)]=Ce(a))}const i=e.parent,a=Vn(t,i.nodeIndex).renderElement;if(i.element.name)for(let e in n){const i=n[e];null!=i?t.renderer.setAttribute(a,e,i):t.renderer.removeAttribute(a,e)}else t.renderer.setValue(a,`bindings=${JSON.stringify(n,null,2)}`)}}var r,s}function oa(t,e,n,i){Ao(t,e,n,...i)}function aa(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function la(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class ca{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,i=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=li(i),i=i.parent;this.elDef=n,this.elView=i}get elOrCompView(){return Vn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return qi(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){ha(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&ha(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!hi(t);)t=t.parent;return t.parent?Vn(t.parent,li(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?ci(this.view,this.nodeDef):ci(this.elView,this.elDef)}logError(t,...e){let n,i;2&this.nodeDef.flags?(n=this.view.def,i=this.nodeDef.nodeIndex):(n=this.elView.def,i=this.elDef.nodeIndex);const r=function(t,e){let n=-1;for(let i=0;i<=e;i++)3&t.nodes[i].flags&&n++;return n}(n,i);let s=-1;n.factory(()=>++s===r?t.error.bind(t,...e):Yn),s<r&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function ha(t,e,n){for(let i in e.references)n[i]=no(t,e,e.references[i])}function ua(t,n,i,r){const s=Jo,o=$o,a=ta;try{Jo=t;const l=n.apply(i,r);return $o=o,ta=a,Jo=s,l}catch(e){if(Qt(e)||!$o)throw e;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Fn(t,e),t}(e,da())}}function da(){return $o?new ca($o,ta):null}class pa{constructor(t){this.delegate=t}createRenderer(t,e){return new fa(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class fa{constructor(t){this.delegate=t,this.debugContextFactory=da,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){const e=Fs(t);Bs.delete(e.nativeNode),e instanceof ks&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),i=this.createDebugContext(n);if(i){const e=new Ns(n,null,i);e.name=t,zs(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&zs(new ks(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&zs(new ks(e,null,n)),e}appendChild(t,e){const n=Fs(t),i=Fs(e);n&&i&&n instanceof Ns&&n.addChild(i),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const i=Fs(t),r=Fs(e),s=Fs(n);i&&r&&i instanceof Ns&&i.insertBefore(s,r),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Fs(t),i=Fs(e);n&&i&&n instanceof Ns&&n.removeChild(i),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),i=da();return i&&zs(new Ns(n,null,i)),n}setAttribute(t,e,n,i){const r=Fs(t);r&&r instanceof Ns&&(r.attributes[i?i+":"+e:e]=n),this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){const i=Fs(t);i&&i instanceof Ns&&(i.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Fs(t);n&&n instanceof Ns&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Fs(t);n&&n instanceof Ns&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,i){const r=Fs(t);r&&r instanceof Ns&&(r.styles[e]=n),this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){const i=Fs(t);i&&i instanceof Ns&&(i.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const i=Fs(t);i&&i instanceof Ns&&(i.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const i=Fs(t);i&&i.listeners.push(new Ds(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function ma(t,e,n){return new ga(t,e,n)}class ga extends jt{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(Oo)return;Oo=!0;const t=ee()?{setCurrentNode:ea,createRootView:Do,createEmbeddedView:No,createComponentView:Bo,createNgModuleRef:Fo,overrideProvider:Ho,overrideComponentView:Vo,clearOverrides:Go,checkAndUpdateView:Yo,checkNoChangesView:Qo,destroyView:Zo,createDebugContext:(t,e)=>new ca(t,e),handleEvent:na,updateDirectives:ia,updateRenderer:ra}:{setCurrentNode:()=>{},createRootView:Io,createEmbeddedView:po,createComponentView:mo,createNgModuleRef:Ki,overrideProvider:Yn,overrideComponentView:Yn,clearOverrides:Yn,checkAndUpdateView:bo,checkNoChangesView:_o,destroyView:So,createDebugContext:(t,e)=>new ca(t,e),handleEvent:(t,e,n,i)=>t.def.handleEvent(t,e,n,i),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?qo:Xo,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?qo:Xo,t)};Xn.setCurrentNode=t.setCurrentNode,Xn.createRootView=t.createRootView,Xn.createEmbeddedView=t.createEmbeddedView,Xn.createComponentView=t.createComponentView,Xn.createNgModuleRef=t.createNgModuleRef,Xn.overrideProvider=t.overrideProvider,Xn.overrideComponentView=t.overrideComponentView,Xn.clearOverrides=t.clearOverrides,Xn.checkAndUpdateView=t.checkAndUpdateView,Xn.checkNoChangesView=t.checkNoChangesView,Xn.destroyView=t.destroyView,Xn.resolveDep=gr,Xn.createDebugContext=t.createDebugContext,Xn.handleEvent=t.handleEvent,Xn.updateDirectives=t.updateDirectives,Xn.updateRenderer=t.updateRenderer,Xn.dirtyParentQueries=$s}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),i={};for(const r in t.providersByKey)i[r]=t.providersByKey[r];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:i}}(vi(this._ngModuleDefFactory));return Xn.createNgModuleRef(this.moduleType,t||Ie.NULL,this._bootstrapComponents,e)}}class va{}var ya=i("EQhZ");class _a{constructor(){this.title="[Dev] Shujath Khan"}ngOnInit(){"landscape-primary"===window.screen.orientation.type&&ya.init()}}class ba{}const xa=new Et("Location Initialized");class wa{}const Aa=new Et("appBaseHref");class Ea{constructor(t,e){this._subject=new Pr,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Ea.stripTrailingSlash(Sa(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Ea.normalizeQueryParams(e))}normalize(t){return Ea.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Sa(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ea.normalizeQueryParams(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ea.normalizeQueryParams(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}static normalizeQueryParams(t){return t&&"?"!==t[0]?"?"+t:t}static joinWithSlash(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}static stripTrailingSlash(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}function Sa(t){return t.replace(/\/index.html$/,"")}class Ma extends wa{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Ea.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+Ea.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+Ea.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class Ta extends wa{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ea.joinWithSlash(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Ea.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+Ea.normalizeQueryParams(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+Ea.normalizeQueryParams(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}const Ca=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),La=function(t){return function(t){const e=t.toLowerCase().replace(/_/g,"-");let n=Ar[e];if(n)return n;const i=e.split("-")[0];if(n=Ar[i])return n;if("en"===i)return Mr;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Er.PluralCase]},Pa=new Et("UseV4Plurals");class Ra{}class Oa extends Ra{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):La(e||this.locale)(t)){case Ca.Zero:return"zero";case Ca.One:return"one";case Ca.Two:return"two";case Ca.Few:return"few";case Ca.Many:return"many";default:return"other"}}}class Ia{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class Da{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){ee()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Ia(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new ka(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new ka(t,r);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}class ka{constructor(t,e){this.record=t,this.view=e}}class Na{}const Ba=new Et("DocumentToken"),Fa="server";let za=(()=>{class t{}return t.ngInjectableDef=dt({token:t,providedIn:"root",factory:()=>new Ua(Nt(Ba),window,Nt(Jt))}),t})();class Ua{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const n=this.document.querySelector(`#${t}`);if(n)return void this.scrollToElement(n);const i=this.document.querySelector(`[name='${t}']`);if(i)return void this.scrollToElement(i)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}function ja(...t){let e=t[t.length-1];return P(e)?(t.pop(),V(t,e)):Z(t)}class Ha extends C{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value}next(t){super.next(this._value=t)}}function Va(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Va.prototype=Object.create(Error.prototype);const Ga=Va,Wa={};class qa{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Xa(t,this.resultSelector))}}class Xa extends z{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Wa),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(F(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,i,r){const s=this.values,o=this.toRespond?s[n]===Wa?--this.toRespond:this.toRespond:0;s[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ya=new w(t=>t.complete());function Qa(t){return t?function(t){return new w(e=>t.schedule(()=>e.complete()))}(t):Ya}function Za(t){return new w(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?G(n):Qa()).subscribe(e)})}function Ka(){return Q(1)}function Ja(t,e){return function(n){return n.lift(new $a(t,e))}}class $a{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new tl(t,this.predicate,this.thisArg))}}class tl extends g{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function el(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}el.prototype=Object.create(Error.prototype);const nl=el;function il(t){return function(e){return 0===t?Qa():e.lift(new rl(t))}}class rl{constructor(t){if(this.total=t,this.total<0)throw new nl}call(t,e){return e.subscribe(new sl(t,this.total))}}class sl extends g{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function ol(t=function(){return new Ga}){return e=>e.lift(new al(t))}class al{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ll(t,this.errorFactory))}}class ll extends g{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function cl(t=null){return e=>e.lift(new hl(t))}class hl{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ul(t,this.defaultValue))}}class ul extends g{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function dl(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Ja((e,n)=>t(e,n,i)):Y,il(1),n?cl(e):ol(()=>new Ga))}function pl(t){return function(e){const n=new fl(t),i=e.lift(n);return n.caught=i}}class fl{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ml(t,this.selector,this.caught))}}class ml extends z{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new R(this,void 0,void 0);this.add(i),F(this,n,void 0,void 0,i)}}}function gl(t){return e=>0===t?Qa():e.lift(new vl(t))}class vl{constructor(t){if(this.total=t,this.total<0)throw new nl}call(t,e){return e.subscribe(new yl(t,this.total))}}class yl extends g{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function _l(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Ja((e,n)=>t(e,n,i)):Y,gl(1),n?cl(e):ol(()=>new Ga))}class bl{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new xl(t,this.predicate,this.thisArg,this.source))}}class xl extends g{constructor(t,e,n,i){super(t),this.predicate=e,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function wl(t,e){return"function"==typeof e?n=>n.pipe(wl((n,i)=>G(t(n,i)).pipe(U((t,r)=>e(n,t,i,r))))):e=>e.lift(new Al(t))}class Al{constructor(t){this.project=t}call(t,e){return e.subscribe(new El(t,this.project))}}class El extends z{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e,t,n)}_innerSub(t,e,n){const i=this.innerSubscription;i&&i.unsubscribe();const r=new R(this,void 0,void 0);this.destination.add(r),this.innerSubscription=F(this,t,e,n,r)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,i,r){this.destination.next(e)}}function Sl(...t){return Ka()(ja(...t))}function Ml(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new Tl(t,e,n))}}class Tl{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Cl(t,this.accumulator,this.seed,this.hasSeed))}}class Cl extends g{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function Ll(t,e){return W(t,e,1)}function Pl(t,e,n){return function(i){return i.lift(new Rl(t,e,n))}}class Rl{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Ol(t,this.nextOrObserver,this.error,this.complete))}}class Ol extends g{constructor(t,e,n,i){super(t),this._tapNext=_,this._tapError=_,this._tapComplete=_,this._tapError=n||_,this._tapComplete=i||_,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||_,this._tapError=e.error||_,this._tapComplete=e.complete||_)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Il{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Dl(t,this.callback))}}class Dl extends g{constructor(t,e){super(t),this.add(new p(e))}}let kl=null;function Nl(){return kl}class Bl{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}class Fl extends Bl{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const e=this.createElement("div",document);if(null!=this.getStyle(e,"animationName"))this._animationPrefix="";else{const t=["Webkit","Moz","O","ms"];for(let n=0;n<t.length;n++)if(null!=this.getStyle(e,t[n]+"AnimationName")){this._animationPrefix="-"+t[n].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(t=>{null!=this.getStyle(e,t)&&(this._transitionEnd=n[t])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const zl={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Ul=3,jl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Vl=(()=>{if(At.Node)return At.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}})();class Gl extends Fl{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new Gl,kl||(kl=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return zl}contains(t,e){return Vl.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=e[i];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(t,e),i}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const i=this.getStyle(t,e)||"";return n?i==n:i.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,i){t.setAttributeNS(e,n,i)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),t.location===Ul&&Hl.hasOwnProperty(e)&&(e=Hl[e]))}return jl[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=ql||(ql=document.querySelector("base"))?ql.getAttribute("href"):null;return null==e?null:(n=e,Wl||(Wl=document.createElement("a")),Wl.setAttribute("href",n),"/"===Wl.pathname.charAt(0)?Wl.pathname:"/"+Wl.pathname);var n}resetBaseElement(){ql=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let Wl,ql=null;function Xl(){return!!window.history.pushState}let Yl=(()=>{class t extends ba{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Nl().getLocation(),this._history=Nl().getHistory()}getBaseHrefFromDOM(){return Nl().getBaseHref(this._doc)}onPopState(t){Nl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Nl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Xl()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Xl()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.ctorParameters=()=>[{type:void 0,decorators:[{type:ot,args:[Ba]}]}],t})();const Ql=new Et("TRANSITION_ID"),Zl=[{provide:Ir,useFactory:function(t,e,n){return()=>{n.get(Dr).donePromise.then(()=>{const n=Nl();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Ql,Ba,Ie],multi:!0}];class Kl{static init(){var t;t=new Kl,gs=t}addToWindow(t){At.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},At.getAllAngularTestabilities=()=>t.getAllTestabilities(),At.getAllAngularRootElements=()=>t.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(t=>{const e=At.getAllAngularTestabilities();let n=e.length,i=!1;const r=function(e){i=i||e,0==--n&&t(i)};e.forEach(function(t){t.whenStable(r)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?Nl().isShadowRoot(e)?this.findTestabilityInTree(t,Nl().getHost(e),!0):this.findTestabilityInTree(t,Nl().parentElement(e),!0):null}}function Jl(t,e){"undefined"!=typeof COMPILED&&COMPILED||((At.ng=At.ng||{})[t]=e)}const $l=(()=>({ApplicationRef:Ss,NgZone:ss}))();function tc(t){return Fs(t)}const ec=new Et("EventManagerPlugins");class nc{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}class ic{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=Nl().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}class rc{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}class sc extends rc{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Nl().remove(t))}}const oc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ac=/%COMP%/g,lc="_nghost-%COMP%",cc="_ngcontent-%COMP%";function hc(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?hc(t,r,n):(r=r.replace(ac,t),n.push(r))}return n}function uc(t){return e=>{if(e===Function)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}class dc{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new pc(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Gt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new gc(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case Gt.Native:case Gt.ShadowDom:return new vc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=hc(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class pc{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(oc[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=oc[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=oc[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&pn.DashCase?t.style.setProperty(e,n,i&pn.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&pn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){mc(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return mc(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,uc(n)):this.eventManager.addEventListener(t,e,uc(n))}}const fc=(()=>"@".charCodeAt(0))();function mc(t,e){if(t.charCodeAt(0)===fc)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class gc extends pc{constructor(t,e,n,i){super(t),this.component=n;const r=hc(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr=cc.replace(ac,i+"-"+n.id),this.hostAttr=lc.replace(ac,i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class vc extends pc{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===Gt.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=hc(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const t=document.createElement("style");t.textContent=r[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const yc=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t})(),_c=yc("addEventListener"),bc=yc("removeEventListener"),xc={},wc="FALSE",Ac="ANGULAR",Ec="addEventListener",Sc="removeEventListener",Mc="__zone_symbol__propagationStopped",Tc="__zone_symbol__stopImmediatePropagation",Cc=(()=>{const t="undefined"!=typeof Zone&&Zone[yc("BLACK_LISTED_EVENTS")];if(t){const e={};return t.forEach(t=>{e[t]=t}),e}})(),Lc=function(t){return!!Cc&&Cc.hasOwnProperty(t)},Pc=function(t){const e=xc[t.type];if(!e)return;const n=this[e];if(!n)return;const i=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,i):t.handler.apply(this,i)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[Mc];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,i):t.handler.apply(this,i)}}};class Rc extends ic{constructor(t,e,n){super(t),this.ngZone=e,n&&function(t){return t===Fa}(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[Tc])return;const t=Event.prototype[Tc]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Mc]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let i=n;if(!t[_c]||ss.isInAngularZone()&&!Lc(e))t[Ec](e,i,!1);else{let n=xc[e];n||(n=xc[e]=yc(Ac+e+wc));let r=t[n];const s=r&&r.length>0;r||(r=t[n]=[]);const o=Lc(e)?Zone.root:Zone.current;if(0===r.length)r.push({zone:o,handler:i});else{let t=!1;for(let e=0;e<r.length;e++)if(r[e].handler===i){t=!0;break}t||r.push({zone:o,handler:i})}s||t[_c](e,Pc,!1)}return()=>this.removeEventListener(t,e,i)}removeEventListener(t,e,n){let i=t[bc];if(!i)return t[Sc].apply(t,[e,n,!1]);let r=xc[e],s=r&&t[r];if(!s)return t[Sc].apply(t,[e,n,!1]);let o=!1;for(let a=0;a<s.length;a++)if(s[a].handler===n){o=!0,s.splice(a,1);break}o?0===s.length&&i.apply(t,[e,Pc,!1]):t[Sc].apply(t,[e,n,!1])}}const Oc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Ic=new Et("HammerGestureConfig"),Dc=new Et("HammerLoader");class kc{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}class Nc extends ic{constructor(t,e,n,i){super(t),this._config=e,this.console=n,this.loader=i}supports(t){return!(!Oc.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let i=!1,r=()=>{i=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(r=()=>{});i||(r=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),r=()=>{}}),()=>{r()}}return i.runOutsideAngular(()=>{const r=this._config.buildHammer(t),s=function(t){i.runGuarded(function(){n(t)})};return r.on(e,s),()=>{r.off(e,s),"function"==typeof r.destroy&&r.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}const Bc=["alt","control","meta","shift"],Fc={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};class zc extends ic{constructor(t){super(t)}supports(t){return null!=zc.parseEventName(t)}addEventListener(t,e,n){const i=zc.parseEventName(e),r=zc.eventCallback(i.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nl().onAndCancel(t,i.domEventName,r))}static parseEventName(t){const e=t.toLowerCase().split("."),n=e.shift();if(0===e.length||"keydown"!==n&&"keyup"!==n)return null;const i=zc._normalizeKey(e.pop());let r="";if(Bc.forEach(t=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r+=t+".")}),r+=i,0!=e.length||0===i.length)return null;const s={};return s.domEventName=n,s.fullKey=r,s}static getEventFullKey(t){let e="",n=Nl().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Bc.forEach(i=>{i!=n&&(0,Fc[i])(t)&&(e+=i+".")}),e+=n}static eventCallback(t,e,n){return i=>{zc.getEventFullKey(i)===t&&n.runGuarded(()=>e(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}class Uc{}class jc extends Uc{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Ae.NONE:return e;case Ae.HTML:return e instanceof Vc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){let n=null;try{xe=xe||new ne(t);let i=e?String(e):"";n=xe.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=xe.getInertBodyElement(i)}while(i!==s);const o=new ve,a=o.sanitizeChildren(we(n)||n);return ee()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=we(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e)));case Ae.STYLE:return e instanceof Gc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";const e=t.match(Me);return e&&se(e[1])===e[1]||t.match(Se)&&function(t){let e=!0,n=!0;for(let i=0;i<t.length;i++){const r=t.charAt(i);"'"===r&&n?e=!e:'"'===r&&e&&(n=!n)}return e&&n}(t)?t:(ee()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}(e));case Ae.SCRIPT:if(e instanceof Wc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case Ae.URL:return e instanceof Xc||e instanceof qc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),se(String(e)));case Ae.RESOURCE_URL:if(e instanceof Xc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof Hc)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(t){return new Vc(t)}bypassSecurityTrustStyle(t){return new Gc(t)}bypassSecurityTrustScript(t){return new Wc(t)}bypassSecurityTrustUrl(t){return new qc(t)}bypassSecurityTrustResourceUrl(t){return new Xc(t)}}class Hc{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class Vc extends Hc{getTypeName(){return"HTML"}}class Gc extends Hc{getTypeName(){return"Style"}}class Wc extends Hc{getTypeName(){return"Script"}}class qc extends Hc{getTypeName(){return"URL"}}class Xc extends Hc{getTypeName(){return"ResourceURL"}}const Yc=xs(Us,"browser",[{provide:zr,useValue:"browser"},{provide:Fr,useValue:function(){Gl.makeCurrent(),Kl.init()},multi:!0},{provide:ba,useClass:Yl,deps:[Ba]},{provide:Ba,useFactory:function(){return document},deps:[]}]);function Qc(){return new Jt}class Zc{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:Zc,providers:[{provide:kr,useValue:t.appId},{provide:Ql,useExisting:kr},Zl]}}}"undefined"!=typeof window&&window;class Kc{constructor(t,e){this.id=t,this.url=e}}class Jc extends Kc{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $c extends Kc{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class th extends Kc{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class eh extends Kc{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nh extends Kc{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ih extends Kc{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rh extends Kc{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sh extends Kc{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oh extends Kc{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ah{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lh{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ch{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hh{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uh{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dh{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ph{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class fh{}const mh="primary";class gh{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function vh(t){return new gh(t)}const yh="ngNavigationCancelingError";function _h(t){const e=Error("NavigationCancelingError: "+t);return e[yh]=!0,e}function bh(t,e,n){const i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const e=i[s],n=t[s];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}class xh{constructor(t,e){this.routes=t,this.module=e}}function wh(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];Ah(i,Eh(e,i))}}function Ah(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==mh)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&wh(t.children,e)}function Eh(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Sh(t){const e=t.children&&t.children.map(Sh),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==mh&&(n.component=fh),n}function Mh(t,e){const n=Object.keys(t),i=Object.keys(e);if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(t[r=n[s]]!==e[r])return!1;return!0}function Th(t){return Array.prototype.concat.apply([],t)}function Ch(t){return t.length>0?t[t.length-1]:null}function Lh(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ph(t){return Ke(t)?t:Ze(t)?G(Promise.resolve(t)):ja(t)}function Rh(t,e,n){return n?function(t,e){return Mh(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!kh(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e[n]===t[n])}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,i,r){if(n.segments.length>r.length){return!!kh(n.segments.slice(0,r.length),r)&&!i.hasChildren()}if(n.segments.length===r.length){if(!kh(n.segments,r))return!1;for(const e in i.children){if(!n.children[e])return!1;if(!t(n.children[e],i.children[e]))return!1}return!0}{const t=r.slice(0,n.segments.length),s=r.slice(n.segments.length);return!!kh(n.segments,t)&&!!n.children[mh]&&e(n.children[mh],i,s)}}(e,n,n.segments)}(t.root,e.root)}class Oh{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vh(this.queryParams)),this._queryParamMap}toString(){return zh.serialize(this)}}class Ih{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Lh(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uh(this)}}class Dh{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=vh(this.parameters)),this._parameterMap}toString(){return qh(this)}}function kh(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Nh(t,e){let n=[];return Lh(t.children,(t,i)=>{i===mh&&(n=n.concat(e(t,i)))}),Lh(t.children,(t,i)=>{i!==mh&&(n=n.concat(e(t,i)))}),n}class Bh{}class Fh{parse(t){const e=new Kh(t);return new Oh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return Uh(e);if(n){const n=e.children[mh]?t(e.children[mh],!1):"",i=[];return Lh(e.children,(e,n)=>{n!==mh&&i.push(`${n}:${t(e,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=Nh(e,(n,i)=>i===mh?[t(e.children[mh],!1)]:[`${i}:${t(n,!1)}`]);return`${Uh(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Hh(e)}=${Hh(t)}`).join("&"):`${Hh(e)}=${Hh(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const zh=new Fh;function Uh(t){return t.segments.map(t=>qh(t)).join("/")}function jh(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hh(t){return jh(t).replace(/%3B/gi,";")}function Vh(t){return jh(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gh(t){return decodeURIComponent(t)}function Wh(t){return Gh(t.replace(/\+/g,"%20"))}function qh(t){return`${Vh(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Vh(t)}=${Vh(e[t])}`).join("")}`;var e}const Xh=/^[^\/()?;=#]+/;function Yh(t){const e=t.match(Xh);return e?e[0]:""}const Qh=/^[^=?&#]+/,Zh=/^[^?&#]+/;class Kh{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ih([],{}):new Ih([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[mh]=new Ih(t,e)),n}parseSegment(){const t=Yh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Dh(Gh(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Yh(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Yh(this.remaining);t&&this.capture(n=t)}t[Gh(e)]=Gh(n)}parseQueryParam(t){const e=function(t){const e=t.match(Qh);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Zh);return e?e[0]:""}(this.remaining);t&&this.capture(n=t)}const i=Wh(e),r=Wh(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(t[i]=e=[e]),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Yh(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=mh);const s=this.parseChildren();e[r]=1===Object.keys(s).length?s[mh]:new Ih([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Jh{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=$h(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=$h(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=tu(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return tu(t,this._root).map(t=>t.value)}}function $h(t,e){if(t===e.value)return e;for(const n of e.children){const e=$h(t,n);if(e)return e}return null}function tu(t,e){if(t===e.value)return[e];for(const n of e.children){const i=tu(t,n);if(i.length)return i.unshift(e),i}return[]}class eu{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function nu(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class iu extends Jh{constructor(t,e){super(t),this.snapshot=e,cu(this,t)}toString(){return this.snapshot.toString()}}function ru(t,e){const n=function(t,e){const n=new au([],{},{},"",{},mh,e,null,t.root,-1,{});return new lu("",new eu(n,[]))}(t,e),i=new Ha([new Dh("",{})]),r=new Ha({}),s=new Ha({}),o=new Ha({}),a=new Ha(""),l=new su(i,r,o,a,s,mh,e,n.root);return l.snapshot=n.root,new iu(new eu(l,[]),n)}class su{constructor(t,e,n,i,r,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(U(t=>vh(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(U(t=>vh(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ou(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class au{constructor(t,e,n,i,r,s,o,a,l,c,h){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lu extends Jh{constructor(t,e){super(e),this.url=t,cu(this,e)}toString(){return hu(this._root)}}function cu(t,e){e.value._routerState=t,e.children.forEach(e=>cu(t,e))}function hu(t){const e=t.children.length>0?` { ${t.children.map(hu).join(", ")} } `:"";return`${t.value}${e}`}function uu(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Mh(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Mh(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Mh(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Mh(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function du(t,e){var n,i;return Mh(t.params,e.params)&&kh(n=t.url,i=e.url)&&n.every((t,e)=>Mh(t.parameters,i[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||du(t.parent,e.parent))}function pu(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function fu(t,e,n,i,r){let s={};return i&&Lh(i,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Oh(n.root===t?e:function t(e,n,i){const r={};return Lh(e.children,(e,s)=>{r[s]=e===n?i:t(e,n,i)}),new Ih(e.segments,r)}(n.root,t,e),s,r)}class mu{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&pu(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(i&&i!==Ch(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gu{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function vu(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[mh]:`${t}`}function yu(t,e,n){if(t||(t=new Ih([],{})),0===t.segments.length&&t.hasChildren())return _u(t,e,n);const i=function(t,e,n){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;const e=t.segments[r],o=vu(n[i]),a=i<n.length-1?n[i+1]:null;if(r>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!Au(o,a,e))return s;i+=2}else{if(!Au(o,{},e))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new Ih(t.segments.slice(0,i.pathIndex),{});return e.children[mh]=new Ih(t.segments.slice(i.pathIndex),t.children),_u(e,0,r)}return i.match&&0===r.length?new Ih(t.segments,{}):i.match&&!t.hasChildren()?bu(t,e,n):i.match?_u(t,0,r):bu(t,e,n)}function _u(t,e,n){if(0===n.length)return new Ih(t.segments,{});{const i=function(t){return"object"!=typeof t[0]?{[mh]:t}:void 0===t[0].outlets?{[mh]:t}:t[0].outlets}(n),r={};return Lh(i,(n,i)=>{null!==n&&(r[i]=yu(t.children[i],e,n))}),Lh(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new Ih(t.segments,r)}}function bu(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){if("object"==typeof n[r]&&void 0!==n[r].outlets){const t=xu(n[r].outlets);return new Ih(i,t)}if(0===r&&pu(n[0])){i.push(new Dh(t.segments[e].path,n[0])),r++;continue}const s=vu(n[r]),o=r<n.length-1?n[r+1]:null;s&&o&&pu(o)?(i.push(new Dh(s,wu(o))),r+=2):(i.push(new Dh(s,{})),r++)}return new Ih(i,{})}function xu(t){const e={};return Lh(t,(t,n)=>{null!==t&&(e[n]=bu(new Ih([],{}),0,t))}),e}function wu(t){const e={};return Lh(t,(t,n)=>e[n]=`${t}`),e}function Au(t,e,n){return t==n.path&&Mh(e,n.parameters)}const Eu=(t,e,n)=>U(i=>(new Su(e,i.targetRouterState,i.currentRouterState,n).activate(t),i));class Su{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),uu(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=nu(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),Lh(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const i=nu(t),r=t.value.component?n.children:e;Lh(i,(t,e)=>this.deactivateRouteAndItsChildren(t,r)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const i=nu(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new dh(t.value.snapshot))}),t.children.length&&this.forwardEvent(new hh(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(uu(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Mu(t.route)}else{const n=function(t){for(let e=i.snapshot.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Mu(t){uu(t.value),t.children.forEach(Mu)}function Tu(t){return"function"==typeof t}function Cu(t){return t instanceof Oh}class Lu{constructor(t){this.segmentGroup=t||null}}class Pu{constructor(t){this.urlTree=t}}function Ru(t){return new w(e=>e.error(new Lu(t)))}function Ou(t){return new w(e=>e.error(new Pu(t)))}function Iu(t){return new w(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Du{constructor(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(Ut)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,mh).pipe(U(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(pl(t=>{if(t instanceof Pu)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Lu)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,mh).pipe(U(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(pl(t=>{if(t instanceof Lu)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new Ih([],{[mh]:t}):t;return new Oh(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(U(t=>new Ih([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return ja({});const n=[],i=[],r={};return Lh(t,(t,s)=>{const o=e(s,t).pipe(U(t=>r[s]=t));s===mh?n.push(o):i.push(o)}),ja.apply(null,n.concat(i)).pipe(Ka(),dl(),U(()=>r))}(n.children,(n,i)=>this.expandSegmentGroup(t,e,i,n))}expandSegment(t,e,n,i,r,s){return ja(...n).pipe(U(o=>this.expandSegmentAgainstRoute(t,e,n,o,i,r,s).pipe(pl(t=>{if(t instanceof Lu)return ja(null);throw t}))),Ka(),_l(t=>!!t),pl((t,n)=>{if(t instanceof Ga||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,i,r))return ja(new Ih([],{}));throw new Lu(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,i,r,s,o){return Fu(i)!==s?Ru(e):void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s):Ru(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ou(r):this.lineralizeSegments(n,r).pipe(W(n=>{const r=new Ih(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:c}=ku(e,i,r);if(!o)return Ru(e);const h=this.applyRedirectCommands(a,i.redirectTo,c);return i.redirectTo.startsWith("/")?Ou(h):this.lineralizeSegments(i,h).pipe(W(i=>this.expandSegment(t,e,n,i.concat(r.slice(l)),s,!1)))}matchSegmentAgainstRoute(t,e,n,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(U(t=>(n._loadedConfig=t,new Ih(i,{})))):ja(new Ih(i,{}));const{matched:r,consumedSegments:s,lastChild:o}=ku(e,n,i);if(!r)return Ru(e);const a=i.slice(o);return this.getChildConfig(t,n,i).pipe(W(t=>{const n=t.module,i=t.routes,{segmentGroup:r,slicedSegments:o}=function(t,e,n,i){return n.length>0&&function(t,e,n){return i.some(n=>Bu(t,e,n)&&Fu(n)!==mh)}(t,n)?{segmentGroup:Nu(new Ih(e,function(t,e){const n={};n[mh]=e;for(const i of t)""===i.path&&Fu(i)!==mh&&(n[Fu(i)]=new Ih([],{}));return n}(i,new Ih(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return i.some(n=>Bu(t,e,n))}(t,n)?{segmentGroup:Nu(new Ih(t.segments,function(t,e,n,i){const r={};for(const s of n)Bu(t,e,s)&&!i[Fu(s)]&&(r[Fu(s)]=new Ih([],{}));return Object.assign({},i,r)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,a,i);return 0===o.length&&r.hasChildren()?this.expandChildren(n,i,r).pipe(U(t=>new Ih(s,t))):0===i.length&&0===o.length?ja(new Ih(s,{})):this.expandSegment(n,r,i,o,mh,!0).pipe(U(t=>new Ih(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?ja(new xh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?ja(e._loadedConfig):function(t,e,n){const i=e.canLoad;return i&&0!==i.length?G(i).pipe(U(i=>{const r=t.get(i);let s;if(function(t){return t&&Tu(t.canLoad)}(r))s=r.canLoad(e,n);else{if(!Tu(r))throw new Error("Invalid CanLoad guard");s=r(e,n)}return Ph(s)})).pipe(Ka(),(r=t=>!0===t,t=>t.lift(new bl(r,void 0,t)))):ja(!0);var r}(t.injector,e,n).pipe(W(n=>n?this.configLoader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,t))):function(t){return new w(e=>e.error(_h(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):ja(new xh([],t))}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return ja(n);if(i.numberOfChildren>1||!i.children[mh])return Iu(t.redirectTo);i=i.children[mh]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new Oh(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Lh(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let s={};return Lh(e.children,(e,r)=>{s[r]=this.createSegmentGroup(t,e,n,i)}),new Ih(r,s)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function ku(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const i=(e.matcher||bh)(n,t,e);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Nu(t){if(1===t.numberOfChildren&&t.children[mh]){const e=t.children[mh];return new Ih(t.segments.concat(e.segments),e.children)}return t}function Bu(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Fu(t){return t.outlet||mh}class zu{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Uu{constructor(t,e){this.component=t,this.route=e}}function ju(t,e,n){const i=t._root;return function t(e,n,i,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=nu(n);return e.children.forEach(e=>{!function(e,n,i,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,l=i?i.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!kh(t.url,e.url);case"pathParamsOrQueryParamsChange":return!kh(t.url,e.url)||!Mh(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!du(t,e)||!Mh(t.queryParams,e.queryParams);case"paramsChange":default:return!du(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new zu(r)):(o.data=a.data,o._resolvedData=a._resolvedData),t(e,n,o.component?l?l.children:null:i,r,s),c&&s.canDeactivateChecks.push(new Uu(l&&l.outlet&&l.outlet.component||null,a))}else a&&Vu(n,l,s),s.canActivateChecks.push(new zu(r)),t(e,null,o.component?l?l.children:null:i,r,s)}(e,o[e.value.outlet],i,r.concat([e.value]),s),delete o[e.value.outlet]}),Lh(o,(t,e)=>Vu(t,i.getContext(e),s)),s}(i,e?e._root:null,n,[i.value])}function Hu(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function Vu(t,e,n){const i=nu(t),r=t.value;Lh(i,(t,i)=>{Vu(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new Uu(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}const Gu=Symbol("INITIAL_VALUE");function Wu(){return wl(t=>(function(...t){let e=null,n=null;return P(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&c(t[0])&&(t=t[0]),Z(t,n).lift(new qa(e))})(...t.map(t=>t.pipe(gl(1),function(...t){const e=t[t.length-1];return P(e)?(t.pop(),n=>Sl(t,n,e)):e=>Sl(t,e)}(Gu)))).pipe(Ml((t,e)=>{let n=!1;return e.reduce((t,i,r)=>{if(t!==Gu)return t;if(i===Gu&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||Cu(i))return i}return t},t)},Gu),Ja(t=>t!==Gu),U(t=>Cu(t)?t:!0===t),gl(1)))}function qu(t,e){return null!==t&&e&&e(new uh(t)),ja(!0)}function Xu(t,e){return null!==t&&e&&e(new ch(t)),ja(!0)}function Yu(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?ja(i.map(i=>Za(()=>{const r=Hu(i,e,n);let s;if(function(t){return t&&Tu(t.canActivate)}(r))s=Ph(r.canActivate(e,t));else{if(!Tu(r))throw new Error("Invalid CanActivate guard");s=Ph(r(e,t))}return s.pipe(_l())}))).pipe(Wu()):ja(!0)}function Qu(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>(function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null})(t)).filter(t=>null!==t).map(e=>Za(()=>ja(e.guards.map(r=>{const s=Hu(r,e.node,n);let o;if(function(t){return t&&Tu(t.canActivateChild)}(s))o=Ph(s.canActivateChild(i,t));else{if(!Tu(s))throw new Error("Invalid CanActivateChild guard");o=Ph(s(i,t))}return o.pipe(_l())})).pipe(Wu())));return ja(r).pipe(Wu())}class Zu{}class Ku{constructor(t,e,n,i,r,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=s}recognize(){try{const t=td(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,mh),i=new au([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},mh,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new eu(i,n),s=new lu(this.url,r);return this.inheritParamsAndData(s._root),ja(s)}catch(e){return new w(n=>n.error(e))}}inheritParamsAndData(t){const e=t.value,n=ou(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Nh(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};n.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),i=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${i}'.`)}e[t.value.outlet]=t.value})}(),n.sort((t,e)=>t.value.outlet===mh?-1:e.value.outlet===mh?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,n,i,r){for(const s of t)try{return this.processSegmentAgainstRoute(s,n,i,r)}catch(e){if(!(e instanceof Zu))throw e}if(this.noLeftoversInUrl(n,i,r))return[];throw new Zu}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo)throw new Zu;if((t.outlet||mh)!==i)throw new Zu;let r,s=[],o=[];if("**"===t.path){const s=n.length>0?Ch(n).parameters:{};r=new au(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,id(t),i,t.component,t,Ju(e),$u(e)+n.length,rd(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Zu;return{consumedSegments:[],lastChild:0,parameters:{}}}const i=(e.matcher||bh)(n,t,e);if(!i)throw new Zu;const r={};Lh(i.posParams,(t,e)=>{r[e]=t.path});const s=i.consumed.length>0?Object.assign({},r,i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s}}(e,t,n);s=a.consumedSegments,o=n.slice(a.lastChild),r=new au(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,id(t),i,t.component,t,Ju(e),$u(e)+s.length,rd(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:c}=td(e,s,o,a,this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const t=this.processChildren(a,l);return[new eu(r,t)]}if(0===a.length&&0===c.length)return[new eu(r,[])];const h=this.processSegment(a,l,c,mh);return[new eu(r,h)]}}function Ju(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function $u(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function td(t,e,n,i,r){if(n.length>0&&function(t,e,n){return i.some(n=>ed(t,e,n)&&nd(n)!==mh)}(t,n)){const r=new Ih(e,function(t,e,n,i){const r={};r[mh]=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&nd(s)!==mh){const n=new Ih([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[nd(s)]=n}return r}(t,e,i,new Ih(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return i.some(n=>ed(t,e,n))}(t,n)){const s=new Ih(t.segments,function(t,e,n,i,r,s){const o={};for(const a of i)if(ed(t,n,a)&&!r[nd(a)]){const n=new Ih([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[nd(a)]=n}return Object.assign({},r,o)}(t,e,n,i,t.children,r));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Ih(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function ed(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function nd(t){return t.outlet||mh}function id(t){return t.data||{}}function rd(t){return t.resolve||{}}function sd(t,e,n,i){const r=Hu(t,e,i);return Ph(r.resolve?r.resolve(e,n):r(e,n))}function od(t){return function(e){return e.pipe(wl(e=>{const n=t(e);return n?G(n).pipe(U(()=>e)):G([e])}))}}class ad{}class ld{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const cd=new Et("ROUTES");class hd{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(U(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new xh(Th(i.injector.get(cd)).map(Sh),i)}))}loadModuleFactory(t){return"string"==typeof t?G(this.loader.load(t)):Ph(t()).pipe(W(t=>t instanceof jt?ja(t):G(this.compiler.compileModuleAsync(t))))}}class ud{}class dd{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function pd(t){throw t}function fd(t,e,n){return e.parse("/")}function md(t,e){return ja(null)}class gd{constructor(t,e,n,i,r,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new C,this.errorHandler=pd,this.malformedUriErrorHandler=fd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:md,afterPreactivation:md},this.urlHandlingStrategy=new dd,this.routeReuseStrategy=new ld,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get(Ut),this.console=r.get(jr);const l=r.get(ss);this.isNgZoneEnabled=l instanceof ss,this.resetConfig(a),this.currentUrlTree=new Oh(new Ih([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hd(s,o,t=>this.triggerEvent(new ah(t)),t=>this.triggerEvent(new lh(t))),this.routerState=ru(this.currentUrlTree,this.rootComponentType),this.transitions=new Ha({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Ja(t=>0!==t.id),U(t=>Object.assign({},t,{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),wl(t=>{let n=!1,i=!1;return ja(t).pipe(Pl(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),wl(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return ja(t).pipe(wl(t=>{const n=this.transitions.getValue();return e.next(new Jc(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Ya:[t]}),wl(t=>Promise.resolve(t)),function(t,e,n,i){return function(r){return r.pipe(wl(r=>(function(t,e,n,i,s){return new Du(t,e,n,r.extractedUrl,s).apply()})(t,e,n,0,i).pipe(U(t=>Object.assign({},r,{urlAfterRedirects:t})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Pl(t=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,e,n,i,r){return function(s){return s.pipe(W(s=>(function(t,e,n,i,r="emptyOnly",s="legacy"){return new Ku(t,e,n,i,r,s).recognize()})(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),i,r).pipe(U(t=>Object.assign({},s,{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Pl(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Pl(t=>{const n=new nh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:s,extras:o}=t,a=new Jc(n,this.serializeUrl(i),r,s);e.next(a);const l=ru(i,this.rootComponentType).snapshot;return ja(Object.assign({},t,{targetSnapshot:l,urlAfterRedirects:i,extras:Object.assign({},o,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Ya}),od(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),Pl(t=>{const e=new ih(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),U(t=>Object.assign({},t,{guards:ju(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(W(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?ja(Object.assign({},n,{guardsResult:!0})):function(t,e,n,i){return G(o).pipe(W(t=>(function(t,e,n,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ja(s.map(s=>{const o=Hu(s,e,r);let a;if(function(t){return t&&Tu(t.canDeactivate)}(o))a=Ph(o.canDeactivate(t,e,n,i));else{if(!Tu(o))throw new Error("Invalid CanDeactivate guard");a=Ph(o(t,e,n,i))}return a.pipe(_l())})).pipe(Wu()):ja(!0)})(t.component,t.route,n,e,i)),_l(t=>!0!==t,!0))}(0,i,r,t).pipe(W(n=>n&&function(t){return"boolean"==typeof n}()?function(t,e,n,i){return G(s).pipe(Ll(e=>G([Xu(e.route.parent,i),qu(e.route,i),Qu(t,e.path,n),Yu(t,e.route,n)]).pipe(Ka(),_l(t=>!0!==t,!0))),_l(t=>!0!==t,!0))}(i,0,t,e):ja(n)),U(t=>Object.assign({},n,{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Pl(t=>{if(Cu(t.guardsResult)){const e=_h(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Pl(t=>{const e=new rh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ja(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new th(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),od(t=>{if(t.guards.canActivateChecks.length)return ja(t).pipe(Pl(t=>{const e=new sh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),function(t,e){return function(n){return n.pipe(W(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;return r.length?G(r).pipe(Ll(n=>(function(t,e,n,r){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return ja({});if(1===r.length){const s=r[0];return sd(t[s],e,n,i).pipe(U(t=>({[s]:t})))}const s={};return G(r).pipe(W(r=>sd(t[r],e,n,i).pipe(U(t=>(s[r]=t,t))))).pipe(dl(),U(()=>s))}(t._resolve,t,i,r).pipe(U(e=>(t._resolvedData=e,t.data=Object.assign({},t.data,ou(t,n).resolve),null)))})(n.route,0,t,e)),function(t,e){return arguments.length>=2?function(n){return b(Ml(t,e),il(1),cl(e))(n)}:function(e){return b(Ml((e,n,i)=>t(e,n,i+1)),il(1))(e)}}((t,e)=>t),U(t=>n)):ja(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),Pl(t=>{const e=new oh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),od(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),U(t=>{const e=function(t,e,n){const i=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){const r=i.value;r._futureSnapshot=n.value;const s=function(e,n,i){return n.children.map(n=>{for(const r of i.children)if(e.shouldReuseRoute(r.value.snapshot,n.value))return t(e,n,r);return t(e,n)})}(e,n,i);return new eu(r,s)}{const i=e.retrieve(n.value);if(i){const t=i.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let i=0;i<e.children.length;++i)t(e.children[i],n.children[i])}(n,t),t}{const i=new su(new Ha((r=n.value).url),new Ha(r.params),new Ha(r.queryParams),new Ha(r.fragment),new Ha(r.data),r.outlet,r.component,r),s=n.children.map(n=>t(e,n));return new eu(i,s)}}var r}(t,e._root,n?n._root:void 0);return new iu(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:e})}),Pl(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Eu(this.rootContexts,this.routeReuseStrategy,t=>this.triggerEvent(t)),Pl({next(){n=!0},complete(){n=!0}}),function(t){return e=>e.lift(new Il(t))}(()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new th(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),pl(n=>{if(i=!0,function(t){return n&&n[yh]}()){const i=Cu(n.url);i||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const r=new th(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),t.resolve(!1),i&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const i=new eh(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(r){t.reject(r)}}return Ya}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign({},this.getTransition(),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,i,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){wh(t),this.config=t.map(Sh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,preserveQueryParams:s,queryParamsHandling:o,preserveFragment:a}=e;ee()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,c=a?this.currentUrlTree.fragment:r;let h=null;if(o)switch(o){case"merge":h=Object.assign({},this.currentUrlTree.queryParams,i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,i,r){if(0===n.length)return fu(e.root,e.root,e,i,r);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new mu(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return Lh(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new mu(n,e,i)}(n);if(s.toRoot())return fu(e.root,new Ih([],{}),e,i,r);const o=function(t,n,i){if(t.isAbsolute)return new gu(e.root,!0,0);if(-1===i.snapshot._lastPathIndex)return new gu(i.snapshot._urlSegment,!0,0);const r=pu(t.commands[0])?0:1;return function(e,n,s){let o=i.snapshot._urlSegment,a=i.snapshot._lastPathIndex+r,l=t.numberOfDoubleDots;for(;l>a;){if(l-=a,!(o=o.parent))throw new Error("Invalid number of '../'");a=o.segments.length}return new gu(o,!1,a-l)}()}(s,0,t),a=o.processChildren?_u(o.segmentGroup,o.index,s.commands):yu(o.segmentGroup,o.index,s.commands);return fu(o.segmentGroup,a,e,i,r)}(l,this.currentUrlTree,t,h,c)}navigateByUrl(t,e={skipLocationChange:!1}){ee()&&this.isNgZoneEnabled&&!ss.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Cu(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(e){n=this.malformedUriErrorHandler(e,this.urlSerializer,t)}return n}isActive(t,e){if(Cu(t))return Rh(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Rh(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new $c(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,i){const r=this.getTransition();if(r&&"imperative"!==e&&"imperative"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"hashchange"==e&&"popstate"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"popstate"==e&&"hashchange"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s=null,o=null;const a=new Promise((t,e)=>{s=t,o=e}),l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:s,reject:o,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,i){const r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign({},i,{navigationId:n})):this.location.go(r,"",Object.assign({},i,{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class vd{constructor(t,e,n,i,r){this.router=t,this.route=e,this.commands=[],null==n&&i.setAttribute(r.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){ee()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:_d(this.skipLocationChange),replaceUrl:_d(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:_d(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:_d(this.preserveFragment)})}}class yd{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof $c&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){ee()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,i){if(0!==t||e||n||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const r={skipLocationChange:_d(this.skipLocationChange),replaceUrl:_d(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:_d(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:_d(this.preserveFragment)})}}function _d(t){return""===t||!!t}class bd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xd,this.attachRef=null}}class xd{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new bd,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class wd{constructor(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new Pr,this.deactivateEvents=new Pr,this.name=i||mh,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new Ad(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class Ad{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===su?this.route:t===xd?this.childContexts:this.parent.get(t,e)}}class Ed{}class Sd{preload(t,e){return e().pipe(pl(()=>ja(null)))}}class Md{preload(t,e){return ja(null)}}class Td{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new hd(e,n,e=>t.triggerEvent(new ah(e)),e=>t.triggerEvent(new lh(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ja(t=>t instanceof $c),Ll(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Ut);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return G(n).pipe(Q(),U(t=>void 0))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(W(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}class Cd{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $c&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ph&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new ph(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const Ld=new Et("ROUTER_CONFIGURATION"),Pd=new Et("ROUTER_FORROOT_GUARD"),Rd=[Ea,{provide:Bh,useClass:Fh},{provide:gd,useFactory:Fd,deps:[Ss,Bh,xd,Ea,Ie,Ts,Qr,cd,Ld,[ud,new at],[ad,new at]]},xd,{provide:su,useFactory:zd,deps:[gd]},{provide:Ts,useClass:Os},Td,Md,Sd,{provide:Ld,useValue:{enableTracing:!1}}];function Od(){return new bs("Router",gd)}class Id{constructor(t,e){}static forRoot(t,e){return{ngModule:Id,providers:[Rd,Bd(t),{provide:Pd,useFactory:Nd,deps:[[gd,new at,new ct]]},{provide:Ld,useValue:e||{}},{provide:wa,useFactory:kd,deps:[ba,[new ot(Aa),new at],Ld]},{provide:Cd,useFactory:Dd,deps:[gd,za,Ld]},{provide:Ed,useExisting:e&&e.preloadingStrategy?e.preloadingStrategy:Md},{provide:bs,multi:!0,useFactory:Od},[Ud,{provide:Ir,multi:!0,useFactory:jd,deps:[Ud]},{provide:Vd,useFactory:Hd,deps:[Ud]},{provide:Ur,multi:!0,useExisting:Vd}]]}}static forChild(t){return{ngModule:Id,providers:[Bd(t)]}}}function Dd(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Cd(t,e,n)}function kd(t,e,n={}){return n.useHash?new Ma(t,e):new Ta(t,e)}function Nd(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Bd(t){return[{provide:He,multi:!0,useValue:t},{provide:cd,multi:!0,useValue:t}]}function Fd(t,e,n,i,r,s,o,a,l={},c,h){const u=new gd(null,e,n,i,r,s,o,Th(a));if(c&&(u.urlHandlingStrategy=c),h&&(u.routeReuseStrategy=h),l.errorHandler&&(u.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(u.malformedUriErrorHandler=l.malformedUriErrorHandler),l.enableTracing){const t=Nl();u.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return l.onSameUrlNavigation&&(u.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.urlUpdateStrategy&&(u.urlUpdateStrategy=l.urlUpdateStrategy),l.relativeLinkResolution&&(u.relativeLinkResolution=l.relativeLinkResolution),u}function zd(t){return t.routerState.root}class Ud{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new C}appInitializer(){return this.injector.get(xa,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(gd),i=this.injector.get(Ld);if(this.isLegacyDisabled(i)||this.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error(`Invalid initialNavigation options: '${i.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?ja(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Ld),n=this.injector.get(Td),i=this.injector.get(Cd),r=this.injector.get(gd),s=this.injector.get(Ss);t===s.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}function jd(t){return t.appInitializer.bind(t)}function Hd(t){return t.bootstrapListener.bind(t)}const Vd=new Et("Router Initializer");var Gd=$n({encapsulation:2,styles:[],data:{}});function Wd(t){return co(0,[(t()(),Xs(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ar(1,212992,null,0,wd,[xd,kn,sn,[8,null],Le],null,null)],function(t,e){t(e,1,0)},null)}function qd(t){return co(0,[(t()(),Xs(0,0,null,null,1,"ng-component",[],null,null,null,Wd,Gd)),ar(1,49152,null,0,fh,[],null,null)],null,null)}var Xd=Bi("ng-component",fh,qd,{},{},[]);class Yd{constructor(t){this.engServ=t,this.canEleId="renderCanvas"}ngOnInit(){this.engServ.createScene(this.canEleId),this.engServ.animate()}}function Qd(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),Object.assign(Qd.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});for(var Zd=0,Kd=1,Jd=2,$d=1,tp=2,ep=3,np=0,ip=1,rp=2,sp=0,op=1,ap=2,lp=0,cp=1,hp=2,up=3,dp=4,pp=5,fp=100,mp=101,gp=102,vp=103,yp=104,_p=200,bp=201,xp=202,wp=203,Ap=204,Ep=205,Sp=206,Mp=207,Tp=208,Cp=209,Lp=210,Pp=0,Rp=1,Op=2,Ip=3,Dp=4,kp=5,Np=6,Bp=7,Fp=0,zp=1,Up=2,jp=0,Hp=1,Vp=2,Gp=3,Wp=4,qp=5,Xp=301,Yp=302,Qp=303,Zp=304,Kp=305,Jp=306,$p=307,tf=1e3,ef=1001,nf=1002,rf=1003,sf=1004,of=1005,af=1006,lf=1007,cf=1008,hf=1009,uf=1010,df=1011,pf=1012,ff=1013,mf=1014,gf=1015,vf=1016,yf=1017,_f=1018,bf=1019,xf=1020,wf=1021,Af=1022,Ef=1023,Sf=1024,Mf=1025,Tf=1026,Cf=1027,Lf=1028,Pf=33776,Rf=33777,Of=33778,If=33779,Df=35840,kf=35841,Nf=35842,Bf=35843,Ff=36196,zf=37808,Uf=37809,jf=37810,Hf=37811,Vf=37812,Gf=37813,Wf=37814,qf=37815,Xf=37816,Yf=37817,Qf=37818,Zf=37819,Kf=37820,Jf=37821,$f=2201,tm=2400,em=0,nm=1,im=2,rm=3e3,sm=3001,om=3007,am=3002,lm=3003,cm=3004,hm=3005,um=3006,dm=3200,pm=3201,fm=0,mm=1,gm=7680,vm=519,ym=[],_m=0;_m<256;_m++)ym[_m]=(_m<16?"0":"")+_m.toString(16);var bm={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ym[255&t]+ym[t>>8&255]+ym[t>>16&255]+ym[t>>24&255]+"-"+ym[255&e]+ym[e>>8&255]+"-"+ym[e>>16&15|64]+ym[e>>24&255]+"-"+ym[63&n|128]+ym[n>>8&255]+"-"+ym[n>>16&255]+ym[n>>24&255]+ym[255&i]+ym[i>>8&255]+ym[i>>16&255]+ym[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*bm.DEG2RAD},radToDeg:function(t){return t*bm.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function xm(t,e){this.x=t||0,this.y=e||0}function wm(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}Object.defineProperties(xm.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(xm.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}}),Object.assign(wm,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,s,o){var a=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3],u=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(h!==f||a!==u||l!==d||c!==p){var m=1-o,g=a*u+l*d+c*p+h*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,g*v);m=Math.sin(m*b)/_,o=Math.sin(o*b)/_}var x=o*v;if(a=a*m+u*x,l=l*m+d*x,c=c*m+p*x,h=h*m+f*x,m===1-o){var w=1/Math.sqrt(a*a+l*l+c*c+h*h);a*=w,l*=w,c*=w,h*=w}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=h}}),Object.defineProperties(wm.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(wm.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,s=t.order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),h=o(r/2),u=a(n/2),d=a(i/2),p=a(r/2);return"XYZ"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p):"YXZ"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p):"ZXY"===s?(this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p):"ZYX"===s?(this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p):"YZX"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p):"XZY"===s&&(this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],h=n[6],u=n[10],d=i+a+u;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(h-l)*e,this._y=(s-c)*e,this._z=(o-r)*e):i>a&&i>u?(e=2*Math.sqrt(1+i-a-u),this._w=(h-l)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(s+c)/e):a>u?(e=2*Math.sqrt(1+a-i-u),this._w=(s-c)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(l+h)/e):(e=2*Math.sqrt(1+u-i-a),this._w=(o-r)/e,this._x=(s+c)/e,this._y=(l+h)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(bm.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,s=this._w,o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;var a=1-o*o;if(a<=Number.EPSILON){var l=1-e;return this._w=l*s+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(a),h=Math.atan2(c,o),u=Math.sin((1-e)*h)/c,d=Math.sin(e*h)/c;return this._w=s*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Am=new Sm,Em=new wm;function Sm(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(Sm.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Em.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(Em.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,c=a*n+o*e-r*i,h=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+c*-o-h*-s,this.y=c*a+u*-s+h*-r-l*-o,this.z=h*a+u*-o+l*-s-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(t){return Am.copy(this).projectOnVector(t),this.sub(Am)},reflect:function(t){return this.sub(Am.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(bm.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var Mm,Tm=new Sm;function Cm(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Cm.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,s,o,a,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)Tm.x=t.getX(e),Tm.y=t.getY(e),Tm.z=t.getZ(e),Tm.applyMatrix3(this),t.setXYZ(e,Tm.x,Tm.y,Tm.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],_=i[7],b=i[2],x=i[5],w=i[8];return r[0]=s*f+o*v+a*b,r[3]=s*m+o*y+a*x,r[6]=s*g+o*_+a*w,r[1]=l*f+c*v+h*b,r[4]=l*m+c*y+h*x,r[7]=l*g+c*_+h*w,r[2]=u*f+d*v+p*b,r[5]=u*m+d*y+p*x,r[8]=u*g+d*_+p*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*s*c-e*o*l-n*r*c+n*o*a+i*r*l-i*s*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],h=n[6],u=n[7],d=n[8],p=d*l-c*u,f=c*h-d*a,m=u*a-l*h,g=r*p+s*f+o*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return i[0]=p*y,i[1]=(o*u-d*s)*y,i[2]=(c*s-o*l)*y,i[3]=f*y,i[4]=(d*r-o*h)*y,i[5]=(o*a-c*r)*y,i[6]=m*y,i[7]=(s*h-u*r)*y,i[8]=(l*r-s*a)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,s,o){var a=Math.cos(r),l=Math.sin(r);this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],s=i[3],o=i[6],a=i[1],l=i[4],c=i[7];return i[0]=e*r+n*a,i[3]=e*s+n*l,i[6]=e*o+n*c,i[1]=-n*r+e*a,i[4]=-n*s+e*l,i[7]=-n*o+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Lm={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Mm&&(Mm=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Mm.width=t.width,Mm.height=t.height;var n=Mm.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Mm}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Pm=0;function Rm(t,e,n,i,r,s,o,a,l,c){Object.defineProperty(this,"id",{value:Pm++}),this.uuid=bm.generateUUID(),this.name="",this.image=void 0!==t?t:Rm.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:Rm.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ef,this.wrapT=void 0!==i?i:ef,this.magFilter=void 0!==r?r:af,this.minFilter=void 0!==s?s:cf,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:Ef,this.type=void 0!==a?a:hf,this.offset=new xm(0,0),this.repeat=new xm(1,1),this.center=new xm(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Cm,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:rm,this.version=0,this.onUpdate=null}function Om(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function Im(t,e,n){this.width=t,this.height=e,this.scissor=new Om(0,0,t,e),this.scissorTest=!1,this.viewport=new Om(0,0,t,e),this.texture=new Rm(void 0,void 0,(n=n||{}).wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:af,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Dm(t,e,n){Im.call(this,t,e,n),this.samples=4}Rm.DEFAULT_IMAGE=void 0,Rm.DEFAULT_MAPPING=300,Rm.prototype=Object.assign(Object.create(Qd.prototype),{constructor:Rm,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=bm.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var s=0,o=i.length;s<o;s++)r.push(Lm.getDataURL(i[s]))}else r=Lm.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case tf:t.x=t.x-Math.floor(t.x);break;case ef:t.x=t.x<0?0:1;break;case nf:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case tf:t.y=t.y-Math.floor(t.y);break;case ef:t.y=t.y<0?0:1;break;case nf:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Rm.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(Om.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(Om.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],u=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-d)<.01&&Math.abs(u-p)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+d)<.1&&Math.abs(u+p)<.1&&Math.abs(o+h+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(h+1)/2,v=(f+1)/2,y=(a+c)/4,_=(l+d)/4,b=(u+p)/4;return m>g&&m>v?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=_/n):g>v?g<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(g)),r=b/i):v<.01?(n=.707106781,i=.707106781,r=0):(n=_/(r=Math.sqrt(v)),i=b/r),this.set(n,i,r,e),this}var x=Math.sqrt((p-u)*(p-u)+(l-d)*(l-d)+(c-a)*(c-a));return Math.abs(x)<.001&&(x=1),this.x=(p-u)/x,this.y=(l-d)/x,this.z=(c-a)/x,this.w=Math.acos((o+h+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Im.prototype=Object.assign(Object.create(Qd.prototype),{constructor:Im,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Dm.prototype=Object.assign(Object.create(Im.prototype),{constructor:Dm,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Im.prototype.copy.call(this,t),this.samples=t.samples,this}});var km=new Sm,Nm=new Hm,Bm=new Sm(0,0,0),Fm=new Sm(1,1,1),zm=new Sm,Um=new Sm,jm=new Sm;function Hm(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Hm.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,s,o,a,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Hm).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/km.setFromMatrixColumn(t,0).length(),r=1/km.setFromMatrixColumn(t,1).length(),s=1/km.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){var u=s*c,d=s*h,p=o*c,f=o*h;e[0]=a*c,e[4]=-a*h,e[8]=l,e[1]=d+p*l,e[5]=u-f*l,e[9]=-o*a,e[2]=f-u*l,e[6]=p+d*l,e[10]=s*a}else if("YXZ"===t.order){var m=a*h,g=l*c;e[0]=(v=a*c)+(y=l*h)*o,e[4]=g*o-m,e[8]=s*l,e[1]=s*h,e[5]=s*c,e[9]=-o,e[2]=m*o-g,e[6]=y+v*o,e[10]=s*a}else if("ZXY"===t.order){var v,y;m=a*h,g=l*c,e[0]=(v=a*c)-(y=l*h)*o,e[4]=-s*h,e[8]=g+m*o,e[1]=m+g*o,e[5]=s*c,e[9]=y-v*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order)u=s*c,d=s*h,p=o*c,f=o*h,e[0]=a*c,e[4]=p*l-d,e[8]=u*l+f,e[1]=a*h,e[5]=f*l+u,e[9]=d*l-p,e[2]=-l,e[6]=o*a,e[10]=s*a;else if("YZX"===t.order){var _=s*a,b=s*l,x=o*a,w=o*l;e[0]=a*c,e[4]=w-_*h,e[8]=x*h+b,e[1]=h,e[5]=s*c,e[9]=-o*c,e[2]=-l*c,e[6]=b*h+x,e[10]=_-w*h}else"XZY"===t.order&&(_=s*a,b=s*l,x=o*a,w=o*l,e[0]=a*c,e[4]=-h,e[8]=l*c,e[1]=_*h+w,e[5]=s*c,e[9]=b*h-x,e[2]=x*h-b,e[6]=o*c,e[10]=w*h+_);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(Bm,t,Fm)},lookAt:function(t,e,n){var i=this.elements;return jm.subVectors(t,e),0===jm.lengthSq()&&(jm.z=1),jm.normalize(),zm.crossVectors(n,jm),0===zm.lengthSq()&&(1===Math.abs(n.z)?jm.x+=1e-4:jm.z+=1e-4,jm.normalize(),zm.crossVectors(n,jm)),zm.normalize(),Um.crossVectors(jm,zm),i[0]=zm.x,i[4]=Um.x,i[8]=jm.x,i[1]=zm.y,i[5]=Um.y,i[9]=jm.y,i[2]=zm.z,i[6]=Um.z,i[10]=jm.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],x=i[0],w=i[4],A=i[8],E=i[12],S=i[1],M=i[5],T=i[9],C=i[13],L=i[2],P=i[6],R=i[10],O=i[14],I=i[3],D=i[7],k=i[11],N=i[15];return r[0]=s*x+o*S+a*L+l*I,r[4]=s*w+o*M+a*P+l*D,r[8]=s*A+o*T+a*R+l*k,r[12]=s*E+o*C+a*O+l*N,r[1]=c*x+h*S+u*L+d*I,r[5]=c*w+h*M+u*P+d*D,r[9]=c*A+h*T+u*R+d*k,r[13]=c*E+h*C+u*O+d*N,r[2]=p*x+f*S+m*L+g*I,r[6]=p*w+f*M+m*P+g*D,r[10]=p*A+f*T+m*R+g*k,r[14]=p*E+f*C+m*O+g*N,r[3]=v*x+y*S+_*L+b*I,r[7]=v*w+y*M+_*P+b*D,r[11]=v*A+y*T+_*R+b*k,r[15]=v*E+y*C+_*O+b*N,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)km.x=t.getX(e),km.y=t.getY(e),km.z=t.getZ(e),km.applyMatrix4(this),t.setXYZ(e,km.x,km.y,km.z);return t},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*a*h-i*l*h-r*o*u+n*l*u+i*o*d-n*a*d)+t[7]*(+e*a*d-e*l*u+r*s*u-i*s*d+i*l*c-r*a*c)+t[11]*(+e*l*h-e*o*d-r*s*h+n*s*d+r*o*c-n*l*c)+t[15]*(-i*o*c-e*a*h+e*o*u+i*s*h-n*s*u+n*a*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],_=i[15],b=p*y*u-v*f*u+v*h*m-c*y*m-p*h*_+c*f*_,x=g*f*u-d*y*u-g*h*m+l*y*m+d*h*_-l*f*_,w=d*v*u-g*p*u+g*c*m-l*v*m-d*c*_+l*p*_,A=g*p*h-d*v*h-g*c*f+l*v*f+d*c*y-l*p*y,E=r*b+s*x+o*w+a*A;if(0===E){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var M=1/E;return n[0]=b*M,n[1]=(v*f*a-p*y*a-v*o*m+s*y*m+p*o*_-s*f*_)*M,n[2]=(c*y*a-v*h*a+v*o*u-s*y*u-c*o*_+s*h*_)*M,n[3]=(p*h*a-c*f*a-p*o*u+s*f*u+c*o*m-s*h*m)*M,n[4]=x*M,n[5]=(d*y*a-g*f*a+g*o*m-r*y*m-d*o*_+r*f*_)*M,n[6]=(g*h*a-l*y*a-g*o*u+r*y*u+l*o*_-r*h*_)*M,n[7]=(l*f*a-d*h*a+d*o*u-r*f*u-l*o*m+r*h*m)*M,n[8]=w*M,n[9]=(g*p*a-d*v*a-g*s*m+r*v*m+d*s*_-r*p*_)*M,n[10]=(l*v*a-g*c*a+g*s*u-r*v*u-l*s*_+r*c*_)*M,n[11]=(d*c*a-l*p*a-d*s*u+r*p*u+l*s*m-r*c*m)*M,n[12]=A*M,n[13]=(d*v*o-g*p*o+g*s*f-r*v*f-d*s*y+r*p*y)*M,n[14]=(g*c*o-l*v*o-g*s*h+r*v*h+l*s*y-r*c*y)*M,n[15]=(l*p*o-d*c*o+d*s*h-r*p*h-l*s*f+r*c*f)*M,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,c=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+n,c*a-i*s,0,l*a-i*o,c*a+i*s,r*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,c=s+s,h=o+o,u=r*l,d=r*c,p=r*h,f=s*c,m=s*h,g=o*h,v=a*l,y=a*c,_=a*h,b=n.x,x=n.y,w=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+_)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-_)*x,i[5]=(1-(u+g))*x,i[6]=(m+v)*x,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(u+f))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var i=this.elements,r=km.set(i[0],i[1],i[2]).length(),s=km.set(i[4],i[5],i[6]).length(),o=km.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Nm.copy(this);var a=1/r,l=1/s,c=1/o;return Nm.elements[0]*=a,Nm.elements[1]*=a,Nm.elements[2]*=a,Nm.elements[4]*=l,Nm.elements[5]*=l,Nm.elements[6]*=l,Nm.elements[8]*=c,Nm.elements[9]*=c,Nm.elements[10]*=c,e.setFromRotationMatrix(Nm),n.x=r,n.y=s,n.z=o,this},makePerspective:function(t,e,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*r/(n-i),l=(e+t)/(e-t),c=(n+i)/(n-i),h=-(s+r)/(s-r),u=-2*s*r/(s-r);return o[0]=2*r/(e-t),o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=a,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=u,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,s){var o=this.elements,a=1/(e-t),l=1/(n-i),c=1/(s-r),h=(e+t)*a,u=(n+i)*l,d=(s+r)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var Vm=new Hm,Gm=new wm;function Wm(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||Wm.DefaultOrder}function qm(){this.mask=1}Wm.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Wm.DefaultOrder="XYZ",Object.defineProperties(Wm.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(Wm.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=bm.clamp,r=t.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],p=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s))):"ZYX"===e?(this._y=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,p))):"XZY"===e?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return Vm.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Vm,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return Gm.setFromEuler(this),this.setFromQuaternion(Gm,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Sm(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(qm.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var Xm=0,Ym=new Sm,Qm=new wm,Zm=new Hm,Km=new Sm,Jm=new Sm,$m=new Sm,tg=new wm,eg=new Sm(1,0,0),ng=new Sm(0,1,0),ig=new Sm(0,0,1),rg={type:"added"},sg={type:"removed"};function og(){Object.defineProperty(this,"id",{value:Xm++}),this.uuid=bm.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=og.DefaultUp.clone();var t=new Sm,e=new Wm,n=new wm,i=new Sm(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Hm},normalMatrix:{value:new Cm}}),this.matrix=new Hm,this.matrixWorld=new Hm,this.matrixAutoUpdate=og.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function ag(){og.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}og.DefaultUp=new Sm(0,1,0),og.DefaultMatrixAutoUpdate=!0,og.prototype=Object.assign(Object.create(Qd.prototype),{constructor:og,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Qm.setFromAxisAngle(t,e),this.quaternion.multiply(Qm),this},rotateOnWorldAxis:function(t,e){return Qm.setFromAxisAngle(t,e),this.quaternion.premultiply(Qm),this},rotateX:function(t){return this.rotateOnAxis(eg,t)},rotateY:function(t){return this.rotateOnAxis(ng,t)},rotateZ:function(t){return this.rotateOnAxis(ig,t)},translateOnAxis:function(t,e){return Ym.copy(t).applyQuaternion(this.quaternion),this.position.add(Ym.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(eg,t)},translateY:function(t){return this.translateOnAxis(ng,t)},translateZ:function(t){return this.translateOnAxis(ig,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Zm.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Km.copy(t):Km.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Jm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Zm.lookAt(Jm,Km,this.up):Zm.lookAt(Km,Jm,this.up),this.quaternion.setFromRotationMatrix(Zm),i&&(Zm.extractRotation(i.matrixWorld),Qm.setFromRotationMatrix(Zm),this.quaternion.premultiply(Qm.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(rg)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(sg)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),Zm.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Zm.multiply(t.parent.matrixWorld)),t.applyMatrix(Zm),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Sm),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new wm),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Jm,t,$m),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Sm),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Jm,tg,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Sm),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,s=i.length;r<s;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==em&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var o=s.shapes;if(Array.isArray(o))for(var a=0,l=o.length;a<l;a++)r(t.shapes,o[a]);else r(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(a=0,l=this.material.length;a<l;a++)c.push(r(t.materials,this.material[a]));i.material=c}else i.material=r(t.materials,this.material);if(this.children.length>0)for(i.children=[],a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(t).object);if(e){var h=f(t.geometries),u=f(t.materials),d=f(t.textures),p=f(t.images);o=f(t.shapes),h.length>0&&(n.geometries=h),u.length>0&&(n.materials=u),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=i,n;function f(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}}),ag.prototype=Object.assign(Object.create(og.prototype),{constructor:ag,isScene:!0,copy:function(t,e){return og.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=og.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var lg=[new Sm,new Sm,new Sm,new Sm,new Sm,new Sm,new Sm,new Sm],cg=new Sm,hg=new Sm,ug=new Sm,dg=new Sm,pg=new Sm,fg=new Sm,mg=new Sm,gg=new Sm,vg=new Sm,yg=new Sm,_g=new Sm;function bg(t,e){this.min=void 0!==t?t:new Sm(1/0,1/0,1/0),this.max=void 0!==e?e:new Sm(-1/0,-1/0,-1/0)}function xg(t,e,n,i,r){var s,o;for(s=0,o=t.length-3;s<=o;s+=3){_g.fromArray(t,s);var a=r.x*Math.abs(_g.x)+r.y*Math.abs(_g.y)+r.z*Math.abs(_g.z),l=e.dot(_g),c=n.dot(_g),h=i.dot(_g);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}Object.assign(bg.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0,a=0,l=t.length;a<l;a+=3){var c=t[a],h=t[a+1],u=t[a+2];c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0,a=0,l=t.count;a<l;a++){var c=t.getX(a),h=t.getY(a),u=t.getZ(a);c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=cg.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Sm),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Sm),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){var e,n;t.updateWorldMatrix(!1,!1);var i=t.geometry;if(void 0!==i)if(i.isGeometry){var r=i.vertices;for(e=0,n=r.length;e<n;e++)cg.copy(r[e]),cg.applyMatrix4(t.matrixWorld),this.expandByPoint(cg)}else if(i.isBufferGeometry){var s=i.attributes.position;if(void 0!==s)for(e=0,n=s.count;e<n;e++)cg.fromBufferAttribute(s,e).applyMatrix4(t.matrixWorld),this.expandByPoint(cg)}var o=t.children;for(e=0,n=o.length;e<n;e++)this.expandByObject(o[e]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Sm),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,cg),cg.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(gg),vg.subVectors(this.max,gg),hg.subVectors(t.a,gg),ug.subVectors(t.b,gg),dg.subVectors(t.c,gg),pg.subVectors(ug,hg),fg.subVectors(dg,ug),mg.subVectors(hg,dg);var e=[0,-pg.z,pg.y,0,-fg.z,fg.y,0,-mg.z,mg.y,pg.z,0,-pg.x,fg.z,0,-fg.x,mg.z,0,-mg.x,-pg.y,pg.x,0,-fg.y,fg.x,0,-mg.y,mg.x,0];return!!xg(e,hg,ug,dg,vg)&&!!xg(e=[1,0,0,0,1,0,0,0,1],hg,ug,dg,vg)&&(yg.crossVectors(pg,fg),xg(e=[yg.x,yg.y,yg.z],hg,ug,dg,vg))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Sm),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return cg.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(cg).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(lg[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),lg[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),lg[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),lg[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),lg[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),lg[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),lg[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),lg[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(lg),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var wg=new bg;function Ag(t,e){this.center=void 0!==t?t:new Sm,this.radius=void 0!==e?e:0}Object.assign(Ag.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):wg.setFromPoints(t).getCenter(n);for(var i=0,r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Sm),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new bg),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var Eg=new Sm,Sg=new Sm,Mg=new Sm,Tg=new Sm,Cg=new Sm,Lg=new Sm,Pg=new Sm;function Rg(t,e){this.origin=void 0!==t?t:new Sm,this.direction=void 0!==e?e:new Sm}Object.assign(Rg.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Sm),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,Eg)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Sm),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=Eg.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Eg.copy(this.direction).multiplyScalar(e).add(this.origin),Eg.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,i){Sg.copy(t).add(e).multiplyScalar(.5),Mg.copy(e).sub(t).normalize(),Tg.copy(this.origin).sub(Sg);var r,s,o,a,l=.5*t.distanceTo(e),c=-this.direction.dot(Mg),h=Tg.dot(this.direction),u=-Tg.dot(Mg),d=Tg.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(s=c*h-u,a=l*p,(r=c*u-h)>=0)if(s>=-a)if(s<=a){var f=1/p;o=(r*=f)*(r+c*(s*=f)+2*h)+s*(c*r+s+2*u)+d}else s=l,o=-(r=Math.max(0,-(c*s+h)))*r+s*(s+2*u)+d;else s=-l,o=-(r=Math.max(0,-(c*s+h)))*r+s*(s+2*u)+d;else s<=-a?o=-(r=Math.max(0,-(-c*l+h)))*r+(s=r>0?-l:Math.min(Math.max(-l,-u),l))*(s+2*u)+d:s<=a?(r=0,o=(s=Math.min(Math.max(-l,-u),l))*(s+2*u)+d):o=-(r=Math.max(0,-(c*l+h)))*r+(s=r>0?l:Math.min(Math.max(-l,-u),l))*(s+2*u)+d;else s=c>0?-l:l,o=-(r=Math.max(0,-(c*s+h)))*r+s*(s+2*u)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Mg).multiplyScalar(s).add(Sg),o},intersectSphere:function(t,e){Eg.subVectors(t.center,this.origin);var n=Eg.dot(this.direction),i=Eg.dot(Eg)-n*n,r=t.radius*t.radius;if(i>r)return null;var s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:this.at(o<0?a:o,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,s,o,a,l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,s=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,s=(t.min.y-u.y)*c),n>s||r>i?null:((r>n||n!=n)&&(n=r),(s<i||i!=i)&&(i=s),h>=0?(o=(t.min.z-u.z)*h,a=(t.max.z-u.z)*h):(o=(t.max.z-u.z)*h,a=(t.min.z-u.z)*h),n>a||o>i?null:((o>n||n!=n)&&(n=o),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,Eg)},intersectTriangle:function(t,e,n,i,r){Cg.subVectors(e,t),Lg.subVectors(n,t),Pg.crossVectors(Cg,Lg);var s,o=this.direction.dot(Pg);if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}Tg.subVectors(this.origin,t);var a=s*this.direction.dot(Lg.crossVectors(Tg,Lg));if(a<0)return null;var l=s*this.direction.dot(Cg.cross(Tg));if(l<0)return null;if(a+l>o)return null;var c=-s*Tg.dot(Pg);return c<0?null:this.at(c/o,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Og=new Sm,Ig=new Sm,Dg=new Sm,kg=new Sm,Ng=new Sm,Bg=new Sm,Fg=new Sm,zg=new Sm,Ug=new Sm,jg=new Sm;function Hg(t,e,n){this.a=void 0!==t?t:new Sm,this.b=void 0!==e?e:new Sm,this.c=void 0!==n?n:new Sm}Object.assign(Hg,{getNormal:function(t,e,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Sm),i.subVectors(n,e),Og.subVectors(t,e),i.cross(Og);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(t,e,n,i,r){Og.subVectors(i,e),Ig.subVectors(n,e),Dg.subVectors(t,e);var s=Og.dot(Og),o=Og.dot(Ig),a=Og.dot(Dg),l=Ig.dot(Ig),c=Ig.dot(Dg),h=s*l-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Sm),0===h)return r.set(-2,-1,-1);var u=1/h,d=(l*a-o*c)*u,p=(s*c-o*a)*u;return r.set(1-d-p,p,d)},containsPoint:function(t,e,n,i){return Hg.getBarycoord(t,e,n,i,kg),kg.x>=0&&kg.y>=0&&kg.x+kg.y<=1},getUV:function(t,e,n,i,r,s,o,a){return this.getBarycoord(t,e,n,i,kg),a.set(0,0),a.addScaledVector(r,kg.x),a.addScaledVector(s,kg.y),a.addScaledVector(o,kg.z),a},isFrontFacing:function(t,e,n,i){return Og.subVectors(n,e),Ig.subVectors(t,e),Og.cross(Ig).dot(i)<0}}),Object.assign(Hg.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Og.subVectors(this.c,this.b),Ig.subVectors(this.a,this.b),.5*Og.cross(Ig).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Sm),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Hg.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Sm),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Hg.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return Hg.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return Hg.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Hg.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Sm);var n,i,r=this.a,s=this.b,o=this.c;Ng.subVectors(s,r),Bg.subVectors(o,r),zg.subVectors(t,r);var a=Ng.dot(zg),l=Bg.dot(zg);if(a<=0&&l<=0)return e.copy(r);Ug.subVectors(t,s);var c=Ng.dot(Ug),h=Bg.dot(Ug);if(c>=0&&h<=c)return e.copy(s);var u=a*h-c*l;if(u<=0&&a>=0&&c<=0)return n=a/(a-c),e.copy(r).addScaledVector(Ng,n);jg.subVectors(t,o);var d=Ng.dot(jg),p=Bg.dot(jg);if(p>=0&&d<=p)return e.copy(o);var f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return i=l/(l-p),e.copy(r).addScaledVector(Bg,i);var m=c*p-d*h;if(m<=0&&h-c>=0&&d-p>=0)return Fg.subVectors(o,s),i=(h-c)/(h-c+(d-p)),e.copy(s).addScaledVector(Fg,i);var g=1/(m+f+u);return n=f*g,i=u*g,e.copy(r).addScaledVector(Ng,n).addScaledVector(Bg,i)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Vg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gg={h:0,s:0,l:0},Wg={h:0,s:0,l:0};function qg(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function Xg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Yg(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Qg(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function Zg(t,e,n,i,r,s){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new Sm,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new qg,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==s?s:0}Object.assign(qg.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=bm.euclideanModulo(t,1),e=bm.clamp(e,0,1),n=bm.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=Xg(r,i,t+1/3),this.g=Xg(r,i,t),this.b=Xg(r,i,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[2];switch(n[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var s=parseFloat(i[1])/360,o=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(s,o,a)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l,c=(l=n[1]).length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0&&(void 0!==(l=Vg[t])?this.setHex(l):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Yg(t.r),this.g=Yg(t.g),this.b=Yg(t.b),this},copyLinearToSRGB:function(t){return this.r=Qg(t.r),this.g=Qg(t.g),this.b=Qg(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,s=this.b,o=Math.max(i,r,s),a=Math.min(i,r,s),l=(a+o)/2;if(a===o)e=0,n=0;else{var c=o-a;switch(n=l<=.5?c/(o+a):c/(2-o-a),o){case i:e=(r-s)/c+(r<s?6:0);break;case r:e=(s-i)/c+2;break;case s:e=(i-r)/c+4}e/=6}return t.h=e,t.s=n,t.l=l,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(Gg),Gg.h+=t,Gg.s+=e,Gg.l+=n,this.setHSL(Gg.h,Gg.s,Gg.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Gg),t.getHSL(Wg);var n=bm.lerp(Gg.h,Wg.h,e),i=bm.lerp(Gg.s,Wg.s,e),r=bm.lerp(Gg.l,Wg.l,e);return this.setHSL(n,i,r),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Object.assign(Zg.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Kg=0;function Jg(){Object.defineProperty(this,"id",{value:Kg++}),this.uuid=bm.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=cp,this.side=np,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=sp,this.opacity=1,this.transparent=!1,this.blendSrc=Ap,this.blendDst=Ep,this.blendEquation=fp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ip,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=vm,this.stencilRef=0,this.stencilMask=255,this.stencilFail=gm,this.stencilZFail=gm,this.stencilZPass=gm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}function $g(t){Jg.call(this),this.type="MeshBasicMaterial",this.color=new qg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function tv(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ev(t,e,n){tv.call(this,new Int8Array(t),e,n)}function nv(t,e,n){tv.call(this,new Uint8Array(t),e,n)}function iv(t,e,n){tv.call(this,new Uint8ClampedArray(t),e,n)}function rv(t,e,n){tv.call(this,new Int16Array(t),e,n)}function sv(t,e,n){tv.call(this,new Uint16Array(t),e,n)}function ov(t,e,n){tv.call(this,new Int32Array(t),e,n)}function av(t,e,n){tv.call(this,new Uint32Array(t),e,n)}function lv(t,e,n){tv.call(this,new Float32Array(t),e,n)}function cv(t,e,n){tv.call(this,new Float64Array(t),e,n)}function hv(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function uv(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}Jg.prototype=Object.assign(Object.create(Qd.prototype),{constructor:Jg,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==cp&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==np&&(n.side=this.side),this.vertexColors!==sp&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var r=i(t.textures),s=i(t.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWrite=t.stencilWrite,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilMask=t.stencilMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),($g.prototype=Object.create(Jg.prototype)).constructor=$g,$g.prototype.isMeshBasicMaterial=!0,$g.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.defineProperty(tv.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(tv.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new qg),e[n++]=s.r,e[n++]=s.g,e[n++]=s.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new xm),e[n++]=s.x,e[n++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new Sm),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Om),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z,e[n++]=s.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(ev.prototype=Object.create(tv.prototype)).constructor=ev,(nv.prototype=Object.create(tv.prototype)).constructor=nv,(iv.prototype=Object.create(tv.prototype)).constructor=iv,(rv.prototype=Object.create(tv.prototype)).constructor=rv,(sv.prototype=Object.create(tv.prototype)).constructor=sv,(ov.prototype=Object.create(tv.prototype)).constructor=ov,(av.prototype=Object.create(tv.prototype)).constructor=av,(lv.prototype=Object.create(tv.prototype)).constructor=lv,(cv.prototype=Object.create(tv.prototype)).constructor=cv,Object.assign(hv.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,s=0;s<r.length;s++){var o=r[s];o.materialIndex!==i&&(i=o.materialIndex,void 0!==e&&(e.count=3*s-e.start,n.push(e)),e={start:3*s,materialIndex:i})}void 0!==e&&(e.count=3*s-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,s=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=t.morphTargets,l=a.length;if(l>0){e=[];for(var c=0;c<l;c++)e[c]={name:a[c].name,data:[]};this.morphTargets.position=e}var h,u=t.morphNormals,d=u.length;if(d>0){for(h=[],c=0;c<d;c++)h[c]={name:u[c].name,data:[]};this.morphTargets.normal=h}var p=t.skinIndices,f=t.skinWeights,m=p.length===i.length,g=f.length===i.length;for(i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),c=0;c<n.length;c++){var v=n[c];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=v.normal;this.normals.push(_,_,_)}var b,x=v.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=v.color;this.colors.push(w,w,w)}!0===s&&(void 0!==(b=r[0][c])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new xm,new xm,new xm))),!0===o&&(void 0!==(b=r[1][c])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new xm,new xm,new xm)));for(var A=0;A<l;A++){var E=a[A].vertices;e[A].data.push(E[v.a],E[v.b],E[v.c])}for(A=0;A<d;A++){var S=u[A].vertexNormals[c];h[A].data.push(S.a,S.b,S.c)}m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var dv=1,pv=new Hm,fv=new og,mv=new Sm,gv=new bg,vv=new bg,yv=new Sm;function _v(){Object.defineProperty(this,"id",{value:dv+=2}),this.uuid=bm.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}_v.prototype=Object.assign(Object.create(Qd.prototype),{constructor:_v,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=Array.isArray(t)?new(uv(t)>65535?av:sv)(t,1):t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new tv(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Cm).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.tangent;return void 0!==i&&((new Cm).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return pv.makeRotationX(t),this.applyMatrix(pv),this},rotateY:function(t){return pv.makeRotationY(t),this.applyMatrix(pv),this},rotateZ:function(t){return pv.makeRotationZ(t),this.applyMatrix(pv),this},translate:function(t,e,n){return pv.makeTranslation(t,e,n),this.applyMatrix(pv),this},scale:function(t,e,n){return pv.makeScale(t,e,n),this.applyMatrix(pv),this},lookAt:function(t){return fv.lookAt(t),fv.updateMatrix(),this.applyMatrix(fv.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(mv).negate(),this.translate(mv.x,mv.y,mv.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new lv(3*e.vertices.length,3),i=new lv(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new lv(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new lv(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new hv).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new tv(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new tv(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new tv(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new tv(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var s=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new tv(s,2).copyVector2sArray(t.uvs2))}for(var o in this.groups=t.groups,t.morphTargets){for(var a=[],l=t.morphTargets[o],c=0,h=l.length;c<h;c++){var u=l[c],d=new lv(3*u.data.length,3);d.name=u.name,a.push(d.copyVector3sArray(u.data))}this.morphAttributes[o]=a}if(t.skinIndices.length>0){var p=new lv(4*t.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new lv(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new bg);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++)gv.setFromBufferAttribute(e[n]),this.boundingBox.expandByPoint(gv.min),this.boundingBox.expandByPoint(gv.max)}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ag);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(gv.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++)vv.setFromBufferAttribute(o=e[i]),gv.expandByPoint(vv.min),gv.expandByPoint(vv.max);gv.getCenter(n);var s=0;for(i=0,r=t.count;i<r;i++)yv.fromBufferAttribute(t,i),s=Math.max(s,n.distanceToSquared(yv));if(e)for(i=0,r=e.length;i<r;i++)for(var o,a=0,l=(o=e[i]).count;a<l;a++)yv.fromBufferAttribute(o,a),s=Math.max(s,n.distanceToSquared(yv));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new tv(new Float32Array(n.length),3));else for(var i=e.normal.array,r=0,s=i.length;r<s;r++)i[r]=0;var o,a,l,c=e.normal.array,h=new Sm,u=new Sm,d=new Sm,p=new Sm,f=new Sm;if(t){var m=t.array;for(r=0,s=t.count;r<s;r+=3)a=3*m[r+1],l=3*m[r+2],h.fromArray(n,o=3*m[r+0]),u.fromArray(n,a),d.fromArray(n,l),p.subVectors(d,u),f.subVectors(h,u),p.cross(f),c[o]+=p.x,c[o+1]+=p.y,c[o+2]+=p.z,c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z}else for(r=0,s=n.length;r<s;r+=9)h.fromArray(n,r),u.fromArray(n,r+3),d.fromArray(n,r+6),p.subVectors(d,u),f.subVectors(h,u),p.cross(f),c[r]=p.x,c[r+1]=p.y,c[r+2]=p.z,c[r+3]=p.x,c[r+4]=p.y,c[r+5]=p.z,c[r+6]=p.x,c[r+7]=p.y,c[r+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,s=t.attributes[i],o=s.array,a=s.itemSize*e,l=Math.min(o.length,r.length-a),c=0,h=a;c<l;c++,h++)r[h]=o[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)yv.x=t.getX(e),yv.y=t.getY(e),yv.z=t.getZ(e),yv.normalize(),t.setXYZ(e,yv.x,yv.y,yv.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=new n.constructor(e.length*i),s=0,o=0,a=0,l=e.length;a<l;a++){s=e[a]*i;for(var c=0;c<i;c++)r[o++]=n[s++]}return new tv(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new _v,n=this.index.array,i=this.attributes;for(var r in i){var s=t(i[r],n);e.addAttribute(r,s)}var o=this.morphAttributes;for(r in o){for(var a=[],l=o[r],c=0,h=l.length;c<h;c++)s=t(l[c],n),a.push(s);e.morphAttributes[r]=a}for(var u=this.groups,d=(c=0,u.length);c<d;c++){var p=u[c];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var s=(d=r[n]).toJSON();""!==d.name&&(s.name=d.name),t.data.attributes[n]=s}var o={},a=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],c=[],h=0,u=l.length;h<u;h++){var d;s=(d=l[h]).toJSON(),""!==d.name&&(s.name=d.name),c.push(s)}c.length>0&&(o[n]=c,a=!0)}a&&(t.data.morphAttributes=o);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(t.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),t},clone:function(){return(new _v).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var s=t.attributes;for(e in s)this.addAttribute(e,s[e].clone());var o=t.morphAttributes;for(e in o){var a=[],l=o[e];for(n=0,i=l.length;n<i;n++)a.push(l[n].clone());this.morphAttributes[e]=a}var c=t.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var u=t.boundingBox;null!==u&&(this.boundingBox=u.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var bv=new Hm,xv=new Rg,wv=new Ag,Av=new Sm,Ev=new Sm,Sv=new Sm,Mv=new Sm,Tv=new Sm,Cv=new Sm,Lv=new Sm,Pv=new Sm,Rv=new Sm,Ov=new xm,Iv=new xm,Dv=new xm,kv=new Sm,Nv=new Sm;function Bv(t,e){og.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new _v,this.material=void 0!==e?e:new $g({color:16777215*Math.random()}),this.drawMode=em,this.updateMorphTargets()}function Fv(t,e,n,i,r,s,o,a){if(null===(e.side===ip?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,e.side!==rp,a)))return null;Nv.copy(a),Nv.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(Nv);return l<n.near||l>n.far?null:{distance:l,point:Nv.clone(),object:t}}function zv(t,e,n,i,r,s,o,a,l,c,h){Av.fromBufferAttribute(r,l),Ev.fromBufferAttribute(r,c),Sv.fromBufferAttribute(r,h);var u=t.morphTargetInfluences;if(e.morphTargets&&s&&u){Lv.set(0,0,0),Pv.set(0,0,0),Rv.set(0,0,0);for(var d=0,p=s.length;d<p;d++){var f=u[d],m=s[d];0!==f&&(Mv.fromBufferAttribute(m,l),Tv.fromBufferAttribute(m,c),Cv.fromBufferAttribute(m,h),Lv.addScaledVector(Mv.sub(Av),f),Pv.addScaledVector(Tv.sub(Ev),f),Rv.addScaledVector(Cv.sub(Sv),f))}Av.add(Lv),Ev.add(Pv),Sv.add(Rv)}var g=Fv(t,e,n,i,Av,Ev,Sv,kv);if(g){o&&(Ov.fromBufferAttribute(o,l),Iv.fromBufferAttribute(o,c),Dv.fromBufferAttribute(o,h),g.uv=Hg.getUV(kv,Av,Ev,Sv,Ov,Iv,Dv,new xm)),a&&(Ov.fromBufferAttribute(a,l),Iv.fromBufferAttribute(a,c),Dv.fromBufferAttribute(a,h),g.uv2=Hg.getUV(kv,Av,Ev,Sv,Ov,Iv,Dv,new xm));var v=new Zg(l,c,h);Hg.getNormal(Av,Ev,Sv,v.normal),g.face=v}return g}Bv.prototype=Object.assign(Object.create(og.prototype),{constructor:Bv,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return og.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,s=Object.keys(r);if(s.length>0){var o=r[s[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var a=i.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),wv.copy(i.boundingSphere),wv.applyMatrix4(s),!1!==t.ray.intersectsSphere(wv)&&(bv.getInverse(s),xv.copy(t.ray).applyMatrix4(bv),null===i.boundingBox||!1!==xv.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o,a,l,c,h,u,d,p,f,m=i.index,g=i.attributes.position,v=i.morphAttributes.position,y=i.attributes.uv,_=i.attributes.uv2,b=i.groups,x=i.drawRange;if(null!==m)if(Array.isArray(r))for(c=0,u=b.length;c<u;c++)for(f=r[(p=b[c]).materialIndex],h=Math.max(p.start,x.start),d=Math.min(p.start+p.count,x.start+x.count);h<d;h+=3)o=m.getX(h),a=m.getX(h+1),l=m.getX(h+2),(n=zv(this,f,t,xv,g,v,y,_,o,a,l))&&(n.faceIndex=Math.floor(h/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(c=Math.max(0,x.start),u=Math.min(m.count,x.start+x.count);c<u;c+=3)o=m.getX(c),a=m.getX(c+1),l=m.getX(c+2),(n=zv(this,r,t,xv,g,v,y,_,o,a,l))&&(n.faceIndex=Math.floor(c/3),e.push(n));else if(void 0!==g)if(Array.isArray(r))for(c=0,u=b.length;c<u;c++)for(f=r[(p=b[c]).materialIndex],h=Math.max(p.start,x.start),d=Math.min(p.start+p.count,x.start+x.count);h<d;h+=3)(n=zv(this,f,t,xv,g,v,y,_,o=h,a=h+1,l=h+2))&&(n.faceIndex=Math.floor(h/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(c=Math.max(0,x.start),u=Math.min(g.count,x.start+x.count);c<u;c+=3)(n=zv(this,r,t,xv,g,v,y,_,o=c,a=c+1,l=c+2))&&(n.faceIndex=Math.floor(c/3),e.push(n))}else if(i.isGeometry){var w,A,E,S,M=Array.isArray(r),T=i.vertices,C=i.faces,L=i.faceVertexUvs[0];L.length>0&&(S=L);for(var P=0,R=C.length;P<R;P++){var O=C[P],I=M?r[O.materialIndex]:r;if(void 0!==I&&(n=Fv(this,I,t,xv,w=T[O.a],A=T[O.b],E=T[O.c],kv))){if(S&&S[P]){var D=S[P];Ov.copy(D[0]),Iv.copy(D[1]),Dv.copy(D[2]),n.uv=Hg.getUV(kv,w,A,E,Ov,Iv,Dv,new xm)}n.face=O,n.faceIndex=P,e.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Uv=0,jv=new Hm,Hv=new og,Vv=new Sm;function Gv(){Object.defineProperty(this,"id",{value:Uv+=2}),this.uuid=bm.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Wv(t,e,n,i,r,s){Gv.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s},this.fromBufferGeometry(new qv(t,e,n,i,r,s)),this.mergeVertices()}function qv(t,e,n,i,r,s){_v.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};var o=this;t=t||1,e=e||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,s=Math.floor(s)||1;var a=[],l=[],c=[],h=[],u=0,d=0;function p(t,e,n,i,r,s,p,f,m,g,v){var y,_,b=s/m,x=p/g,w=s/2,A=p/2,E=f/2,S=m+1,M=g+1,T=0,C=0,L=new Sm;for(_=0;_<M;_++){var P=_*x-A;for(y=0;y<S;y++)L[t]=(y*b-w)*i,L[e]=P*r,L[n]=E,l.push(L.x,L.y,L.z),L[t]=0,L[e]=0,L[n]=f>0?1:-1,c.push(L.x,L.y,L.z),h.push(y/m),h.push(1-_/g),T+=1}for(_=0;_<g;_++)for(y=0;y<m;y++){var R=u+y+S*(_+1),O=u+(y+1)+S*(_+1),I=u+(y+1)+S*_;a.push(u+y+S*_,R,I),a.push(R,O,I),C+=6}o.addGroup(d,C,v),d+=C,u+=T}p("z","y","x",-1,-1,n,e,t,s,r,0),p("z","y","x",1,-1,n,e,-t,s,r,1),p("x","z","y",1,1,t,n,e,i,s,2),p("x","z","y",1,-1,t,n,-e,i,s,3),p("x","y","z",1,-1,t,e,n,i,r,4),p("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.addAttribute("position",new lv(l,3)),this.addAttribute("normal",new lv(c,3)),this.addAttribute("uv",new lv(h,2))}function Xv(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];e[n][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?r.clone():Array.isArray(r)?r.slice():r}return e}function Yv(t){for(var e={},n=0;n<t.length;n++){var i=Xv(t[n]);for(var r in i)e[r]=i[r]}return e}Gv.prototype=Object.assign(Object.create(Qd.prototype),{constructor:Gv,isGeometry:!0,applyMatrix:function(t){for(var e=(new Cm).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return jv.makeRotationX(t),this.applyMatrix(jv),this},rotateY:function(t){return jv.makeRotationY(t),this.applyMatrix(jv),this},rotateZ:function(t){return jv.makeRotationZ(t),this.applyMatrix(jv),this},translate:function(t,e,n){return jv.makeTranslation(t,e,n),this.applyMatrix(jv),this},scale:function(t,e,n){return jv.makeScale(t,e,n),this.applyMatrix(jv),this},lookAt:function(t){return Hv.lookAt(t),Hv.updateMatrix(),this.applyMatrix(Hv.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,i=t.attributes,r=i.position.array,s=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,a=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=0;c<r.length;c+=3)e.vertices.push((new Sm).fromArray(r,c)),void 0!==o&&e.colors.push((new qg).fromArray(o,c));function h(t,n,i,r){var c=void 0===o?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()],h=new Zg(t,n,i,void 0===s?[]:[(new Sm).fromArray(s,3*t),(new Sm).fromArray(s,3*n),(new Sm).fromArray(s,3*i)],c,r);e.faces.push(h),void 0!==a&&e.faceVertexUvs[0].push([(new xm).fromArray(a,2*t),(new xm).fromArray(a,2*n),(new xm).fromArray(a,2*i)]),void 0!==l&&e.faceVertexUvs[1].push([(new xm).fromArray(l,2*t),(new xm).fromArray(l,2*n),(new xm).fromArray(l,2*i)])}var u=t.groups;if(u.length>0)for(c=0;c<u.length;c++)for(var d=u[c],p=d.start,f=p,m=p+d.count;f<m;f+=3)void 0!==n?h(n[f],n[f+1],n[f+2],d.materialIndex):h(f,f+1,f+2,d.materialIndex);else if(void 0!==n)for(c=0;c<n.length;c+=3)h(n[c],n[c+1],n[c+2]);else for(c=0;c<r.length/3;c+=3)h(c,c+1,c+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vv).negate(),this.translate(Vv.x,Vv.y,Vv.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new Hm;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new Sm,e=new Sm,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],s=this.vertices[r.a],o=this.vertices[r.b];t.subVectors(this.vertices[r.c],o),e.subVectors(s,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,s,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)o[e]=new Sm;if(t){var a,l,c=new Sm,h=new Sm;for(i=0,r=this.faces.length;i<r;i++)a=this.vertices[(s=this.faces[i]).a],c.subVectors(this.vertices[s.c],l=this.vertices[s.b]),h.subVectors(a,l),c.cross(h),o[s.a].add(c),o[s.b].add(c),o[s.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(s=this.faces[i]).a].add(s.normal),o[s.b].add(s.normal),o[s.c].add(s.normal);for(e=0,n=this.vertices.length;e<n;e++)o[e].normalize();for(i=0,r=this.faces.length;i<r;i++){var u=(s=this.faces[i]).vertexNormals;3===u.length?(u[0].copy(o[s.a]),u[1].copy(o[s.b]),u[2].copy(o[s.c])):(u[0]=o[s.a].clone(),u[1]=o[s.b].clone(),u[2]=o[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i=(n=this.faces[t]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var s=new Gv;for(s.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,a=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new Sm,c={a:new Sm,b:new Sm,c:new Sm},o.push(l),a.push(c)}var l,c,h=this.morphNormals[t];for(s.vertices=this.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)c=h.vertexNormals[n],(l=h.faceNormals[n]).copy((r=this.faces[n]).normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new bg),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ag),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,s=this.vertices,o=t.vertices,a=this.faces,l=t.faces,c=this.colors,h=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new Cm).getNormalMatrix(e));for(var u=0,d=o.length;u<d;u++){var p=o[u].clone();void 0!==e&&p.applyMatrix4(e),s.push(p)}for(u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(u=0,d=l.length;u<d;u++){var f,m,g=l[u],v=g.vertexNormals,y=g.vertexColors;(f=new Zg(g.a+r,g.b+r,g.c+r)).normal.copy(g.normal),void 0!==i&&f.normal.applyMatrix3(i).normalize();for(var _=0,b=v.length;_<b;_++)m=v[_].clone(),void 0!==i&&m.applyMatrix3(i).normalize(),f.vertexNormals.push(m);for(f.color.copy(g.color),_=0,b=y.length;_<b;_++)f.vertexColors.push(y[_].clone());f.materialIndex=g.materialIndex+n,a.push(f)}for(u=0,d=t.faceVertexUvs.length;u<d;u++){var x=t.faceVertexUvs[u];for(void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]),_=0,b=x.length;_<b;_++){for(var w=x[_],A=[],E=0,S=w.length;E<S;E++)A.push(w[E].clone());this.faceVertexUvs[u].push(A)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,i,r,s,o,a,l={},c=[],h=[],u=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],void 0===l[e=Math.round(t.x*u)+"_"+Math.round(t.y*u)+"_"+Math.round(t.z*u)]?(l[e]=n,c.push(this.vertices[n]),h[n]=c.length-1):h[n]=h[l[e]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=h[r.a],r.b=h[r.b],r.c=h[r.c],s=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(s[p]===s[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),o=0,a=this.faceVertexUvs.length;o<a;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new Sm(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var i,r,s=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(s&&s.length===e&&(i=[]),o&&o.length===e&&(r=[]),n=0;n<e;n++){var a=t[n]._id;i&&i.push(s[a]),r&&r.push(o[a])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var s=this.vertices[r];i.push(s.x,s.y,s.z)}var o=[],a=[],l={},c=[],h={},u=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,g=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,_=0;if(_=A(_,0,0),_=A(_,1,!0),_=A(_,2,!1),_=A(_,3,f),_=A(_,4,m),_=A(_,5,g),_=A(_,6,v),_=A(_,7,y),o.push(_),o.push(p.a,p.b,p.c),o.push(p.materialIndex),f){var b=this.faceVertexUvs[0][r];o.push(M(b[0]),M(b[1]),M(b[2]))}if(m&&o.push(E(p.normal)),g){var x=p.vertexNormals;o.push(E(x[0]),E(x[1]),E(x[2]))}if(v&&o.push(S(p.color)),y){var w=p.vertexColors;o.push(S(w[0]),S(w[1]),S(w[2]))}}function A(t,e,n){return n?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=a.length/3,a.push(t.x,t.y,t.z),l[e])}function S(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==h[e]?h[e]:(h[e]=c.length,c.push(t.getHex()),h[e])}function M(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]?d[e]:(d[e]=u.length/2,u.push(t.x,t.y),d[e])}return t.data={},t.data.vertices=i,t.data.normals=a,c.length>0&&(t.data.colors=c),u.length>0&&(t.data.uvs=[u]),t.data.faces=o,t},clone:function(){return(new Gv).copy(this)},copy:function(t){var e,n,i,r,s,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var a=t.vertices;for(e=0,n=a.length;e<n;e++)this.vertices.push(a[e].clone());var l=t.colors;for(e=0,n=l.length;e<n;e++)this.colors.push(l[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var h=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=h.length;i<r;i++){var u=h[i],d=[];for(s=0,o=u.length;s<o;s++)d.push(u[s].clone());this.faceVertexUvs[e].push(d)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var f={};if(f.name=p[e].name,void 0!==p[e].vertices)for(f.vertices=[],i=0,r=p[e].vertices.length;i<r;i++)f.vertices.push(p[e].vertices[i].clone());if(void 0!==p[e].normals)for(f.normals=[],i=0,r=p[e].normals.length;i<r;i++)f.normals.push(p[e].normals[i].clone());this.morphTargets.push(f)}var m=t.morphNormals;for(e=0,n=m.length;e<n;e++){var g={};if(void 0!==m[e].vertexNormals)for(g.vertexNormals=[],i=0,r=m[e].vertexNormals.length;i<r;i++){var v=m[e].vertexNormals[i],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),g.vertexNormals.push(y)}if(void 0!==m[e].faceNormals)for(g.faceNormals=[],i=0,r=m[e].faceNormals.length;i<r;i++)g.faceNormals.push(m[e].faceNormals[i].clone());this.morphNormals.push(g)}var _=t.skinWeights;for(e=0,n=_.length;e<n;e++)this.skinWeights.push(_[e].clone());var b=t.skinIndices;for(e=0,n=b.length;e<n;e++)this.skinIndices.push(b[e].clone());var x=t.lineDistances;for(e=0,n=x.length;e<n;e++)this.lineDistances.push(x[e]);var w=t.boundingBox;null!==w&&(this.boundingBox=w.clone());var A=t.boundingSphere;return null!==A&&(this.boundingSphere=A.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(Wv.prototype=Object.create(Gv.prototype)).constructor=Wv,(qv.prototype=Object.create(_v.prototype)).constructor=qv;var Qv="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Zv="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function Kv(t){Jg.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Qv,this.fragmentShader=Zv,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Jv(){og.call(this),this.type="Camera",this.matrixWorldInverse=new Hm,this.projectionMatrix=new Hm,this.projectionMatrixInverse=new Hm}function $v(t,e,n,i){Jv.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}(Kv.prototype=Object.create(Jg.prototype)).constructor=Kv,Kv.prototype.isShaderMaterial=!0,Kv.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Xv(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Kv.prototype.toJSON=function(t){var e=Jg.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n].value;e.uniforms[n]=i&&i.isTexture?{type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?{type:"c",value:i.getHex()}:i&&i.isVector2?{type:"v2",value:i.toArray()}:i&&i.isVector3?{type:"v3",value:i.toArray()}:i&&i.isVector4?{type:"v4",value:i.toArray()}:i&&i.isMatrix3?{type:"m3",value:i.toArray()}:i&&i.isMatrix4?{type:"m4",value:i.toArray()}:{value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(var s in this.extensions)!0===this.extensions[s]&&(r[s]=!0);return Object.keys(r).length>0&&(e.extensions=r),e},Jv.prototype=Object.assign(Object.create(og.prototype),{constructor:Jv,isCamera:!0,copy:function(t,e){return og.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Sm),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){og.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),$v.prototype=Object.assign(Object.create(Jv.prototype),{constructor:$v,isPerspectiveCamera:!0,copy:function(t,e){return Jv.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*bm.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*bm.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*bm.RAD2DEG*Math.atan(Math.tan(.5*bm.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*bm.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,s=this.view;if(null!==this.view&&this.view.enabled){var o=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/o,e-=s.offsetY*n/a,i*=s.width/o,n*=s.height/a}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=og.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var ty=90,ey=1;function ny(t,e,n,i){og.call(this),this.type="CubeCamera";var r=new $v(ty,ey,t,e);r.up.set(0,-1,0),r.lookAt(new Sm(1,0,0)),this.add(r);var s=new $v(ty,ey,t,e);s.up.set(0,-1,0),s.lookAt(new Sm(-1,0,0)),this.add(s);var o=new $v(ty,ey,t,e);o.up.set(0,0,1),o.lookAt(new Sm(0,1,0)),this.add(o);var a=new $v(ty,ey,t,e);a.up.set(0,0,-1),a.lookAt(new Sm(0,-1,0)),this.add(a);var l=new $v(ty,ey,t,e);l.up.set(0,-1,0),l.lookAt(new Sm(0,0,1)),this.add(l);var c=new $v(ty,ey,t,e);c.up.set(0,-1,0),c.lookAt(new Sm(0,0,-1)),this.add(c),this.renderTarget=new iy(n,n,i=i||{format:Af,magFilter:af,minFilter:af}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),i=this.renderTarget,h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,s),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=h,t.setRenderTarget(i,5),t.render(e,c),t.setRenderTarget(n)},this.clear=function(t,e,n,i){for(var r=t.getRenderTarget(),s=this.renderTarget,o=0;o<6;o++)t.setRenderTarget(s,o),t.clear(e,n,i);t.setRenderTarget(r)}}function iy(t,e,n){Im.call(this,t,e,n)}function ry(t,e,n,i,r,s,o,a,l,c,h,u){Rm.call(this,null,s,o,a,l,c,i,r,h,u),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:rf,this.minFilter=void 0!==c?c:rf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}(ny.prototype=Object.create(og.prototype)).constructor=ny,(iy.prototype=Object.create(Im.prototype)).constructor=iy,iy.prototype.isWebGLRenderTargetCube=!0,iy.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new ag,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},r=new Kv({type:"CubemapFromEquirect",uniforms:Xv(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ip,blending:lp});r.uniforms.tEquirect.value=e;var s=new Bv(new qv(5,5,5),r);n.add(s);var o=new ny(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(t,n),s.geometry.dispose(),s.material.dispose(),this},(ry.prototype=Object.create(Rm.prototype)).constructor=ry,ry.prototype.isDataTexture=!0;var sy=new Sm,oy=new Sm,ay=new Cm;function ly(t,e){this.normal=void 0!==t?t:new Sm(1,0,0),this.constant=void 0!==e?e:0}Object.assign(ly.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var i=sy.subVectors(n,e).cross(oy.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Sm),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Sm);var n=t.delta(sy),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:e.copy(n).multiplyScalar(r).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Sm),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||ay.getNormalMatrix(t),i=this.coplanarPoint(sy).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var cy=new Ag,hy=new Sm;function uy(t,e,n,i,r,s){this.planes=[void 0!==t?t:new ly,void 0!==e?e:new ly,void 0!==n?n:new ly,void 0!==i?i:new ly,void 0!==r?r:new ly,void 0!==s?s:new ly]}Object.assign(uy.prototype,{set:function(t,e,n,i,r,s){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(o-i,h-a,f-u,y-m).normalize(),e[1].setComponents(o+i,h+a,f+u,y+m).normalize(),e[2].setComponents(o+r,h+l,f+d,y+g).normalize(),e[3].setComponents(o-r,h-l,f-d,y-g).normalize(),e[4].setComponents(o-s,h-c,f-p,y-v).normalize(),e[5].setComponents(o+s,h+c,f+p,y+v).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),cy.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(cy)},intersectsSprite:function(t){return cy.center.set(0,0,0),cy.radius=.7071067811865476,cy.applyMatrix4(t.matrixWorld),this.intersectsSphere(cy)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(hy.x=i.normal.x>0?t.max.x:t.min.x,hy.y=i.normal.y>0?t.max.y:t.min.y,hy.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(hy)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var dy={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvec3 NfromST = cross( S, T );\n\t\t\tif( dot( NfromST, N ) > 0.0 ) {\n\t\t\t\tS *= -1.0;\n\t\t\t\tT *= -1.0;\n\t\t\t}\n\t\t#else\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\treturn encoded;\n}\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},py={common:{diffuse:{value:new qg(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Cm},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new xm(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new qg(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Cm}},sprite:{diffuse:{value:new qg(15658734)},opacity:{value:1},center:{value:new xm(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Cm}}},fy={basic:{uniforms:Yv([py.common,py.specularmap,py.envmap,py.aomap,py.lightmap,py.fog]),vertexShader:dy.meshbasic_vert,fragmentShader:dy.meshbasic_frag},lambert:{uniforms:Yv([py.common,py.specularmap,py.envmap,py.aomap,py.lightmap,py.emissivemap,py.fog,py.lights,{emissive:{value:new qg(0)}}]),vertexShader:dy.meshlambert_vert,fragmentShader:dy.meshlambert_frag},phong:{uniforms:Yv([py.common,py.specularmap,py.envmap,py.aomap,py.lightmap,py.emissivemap,py.bumpmap,py.normalmap,py.displacementmap,py.gradientmap,py.fog,py.lights,{emissive:{value:new qg(0)},specular:{value:new qg(1118481)},shininess:{value:30}}]),vertexShader:dy.meshphong_vert,fragmentShader:dy.meshphong_frag},standard:{uniforms:Yv([py.common,py.envmap,py.aomap,py.lightmap,py.emissivemap,py.bumpmap,py.normalmap,py.displacementmap,py.roughnessmap,py.metalnessmap,py.fog,py.lights,{emissive:{value:new qg(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:dy.meshphysical_vert,fragmentShader:dy.meshphysical_frag},matcap:{uniforms:Yv([py.common,py.bumpmap,py.normalmap,py.displacementmap,py.fog,{matcap:{value:null}}]),vertexShader:dy.meshmatcap_vert,fragmentShader:dy.meshmatcap_frag},points:{uniforms:Yv([py.points,py.fog]),vertexShader:dy.points_vert,fragmentShader:dy.points_frag},dashed:{uniforms:Yv([py.common,py.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:dy.linedashed_vert,fragmentShader:dy.linedashed_frag},depth:{uniforms:Yv([py.common,py.displacementmap]),vertexShader:dy.depth_vert,fragmentShader:dy.depth_frag},normal:{uniforms:Yv([py.common,py.bumpmap,py.normalmap,py.displacementmap,{opacity:{value:1}}]),vertexShader:dy.normal_vert,fragmentShader:dy.normal_frag},sprite:{uniforms:Yv([py.sprite,py.fog]),vertexShader:dy.sprite_vert,fragmentShader:dy.sprite_frag},background:{uniforms:{uvTransform:{value:new Cm},t2D:{value:null}},vertexShader:dy.background_vert,fragmentShader:dy.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:dy.cube_vert,fragmentShader:dy.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:dy.equirect_vert,fragmentShader:dy.equirect_frag},distanceRGBA:{uniforms:Yv([py.common,py.displacementmap,{referencePosition:{value:new Sm},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:dy.distanceRGBA_vert,fragmentShader:dy.distanceRGBA_frag},shadow:{uniforms:Yv([py.lights,py.fog,{color:{value:new qg(0)},opacity:{value:1}}]),vertexShader:dy.shadow_vert,fragmentShader:dy.shadow_frag}};function my(){var t=null,e=!1,n=null;function i(r,s){!1!==e&&(n(r,s),t.requestAnimationFrame(i))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(i),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function gy(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);i&&(t.deleteBuffer(i.buffer),e.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);void 0===r?e.set(n,function(e,n){var i=e.array,r=e.dynamic?35048:35044,s=t.createBuffer();t.bindBuffer(n,s),t.bufferData(n,i,r),e.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:s,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(n,i)):r.version<n.version&&(function(e,n,i){var s=n.array,o=n.updateRange;t.bindBuffer(i,r.buffer),!1===n.dynamic?t.bufferData(i,s,35044):-1===o.count?t.bufferSubData(i,0,s):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(0,n,i),r.version=n.version)}}}function vy(t,e,n,i){Gv.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new yy(t,e,n,i)),this.mergeVertices()}function yy(t,e,n,i){_v.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r,s,o=(t=t||1)/2,a=(e=e||1)/2,l=Math.floor(n)||1,c=Math.floor(i)||1,h=l+1,u=c+1,d=t/l,p=e/c,f=[],m=[],g=[],v=[];for(s=0;s<u;s++){var y=s*p-a;for(r=0;r<h;r++)m.push(r*d-o,-y,0),g.push(0,0,1),v.push(r/l),v.push(1-s/c)}for(s=0;s<c;s++)for(r=0;r<l;r++){var _=r+h*(s+1),b=r+1+h*(s+1),x=r+1+h*s;f.push(r+h*s,_,x),f.push(_,b,x)}this.setIndex(f),this.addAttribute("position",new lv(m,3)),this.addAttribute("normal",new lv(g,3)),this.addAttribute("uv",new lv(v,2))}function _y(t,e,n,i){var r,s,o=new qg(0),a=0,l=null,c=0;function h(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),h(o,a=void 0!==e?e:1)},getClearAlpha:function(){return a},setClearAlpha:function(t){h(o,a=t)},render:function(e,i,u,d){var p=i.background,f=t.vr,m=f.getSession&&f.getSession();if(m&&"additive"===m.environmentBlendMode&&(p=null),null===p?(h(o,a),l=null,c=0):p&&p.isColor&&(h(p,1),d=!0,l=null,c=0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===s&&((s=new Bv(new qv(1,1,1),new Kv({type:"BackgroundCubeMaterial",uniforms:Xv(fy.cube.uniforms),vertexShader:fy.cube.vertexShader,fragmentShader:fy.cube.fragmentShader,side:ip,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(s));var g=p.isWebGLRenderTargetCube?p.texture:p;s.material.uniforms.tCube.value=g,s.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,l===p&&c===g.version||(s.material.needsUpdate=!0,l=p,c=g.version),e.unshift(s,s.geometry,s.material,0,0,null)}else p&&p.isTexture&&(void 0===r&&((r=new Bv(new yy(2,2),new Kv({type:"BackgroundMaterial",uniforms:Xv(fy.background.uniforms),vertexShader:fy.background.vertexShader,fragmentShader:fy.background.fragmentShader,side:np,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),r.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version||(r.material.needsUpdate=!0,l=p,c=p.version),e.unshift(r,r.geometry,r.material,0,0,null))}}}function by(t,e,n,i){var r;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r)},this.renderInstances=function(s,o,a){var l,c;if(i.isWebGL2)l=t,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](r,o,a,s.maxInstancedCount),n.update(a,r,s.maxInstancedCount)}}function xy(t,e,n){var i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var s="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),u=t.getParameter(3379),d=t.getParameter(34076),p=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=h>0,y=s||!!e.get("OES_texture_float");return{isWebGL2:s,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:s?t.getParameter(36183):0}}function wy(){var t=this,e=null,n=0,i=!1,r=!1,s=new ly,o=new Cm,a={value:null,needsUpdate:!1};function l(){a.value!==e&&(a.value=e,a.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function c(e,n,i,r){var l=null!==e?e.length:0,c=null;if(0!==l){if(c=a.value,!0!==r||null===c){var h=i+4*l,u=n.matrixWorldInverse;o.getNormalMatrix(u),(null===c||c.length<h)&&(c=new Float32Array(h));for(var d=0,p=i;d!==l;++d,p+=4)s.copy(e[d]).applyMatrix4(u,o),s.normal.toArray(c,p),c[p+3]=s.constant}a.value=c,a.needsUpdate=!0}return t.numPlanes=l,c}this.uniform=a,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,s){var o=0!==t.length||r||0!==n||i;return i=r,e=c(t,s,0),n=t.length,o},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(t,s,o,h,u,d){if(!i||null===t||0===t.length||r&&!o)r?c(null):l();else{var p=r?0:n,f=4*p,m=u.clippingState||null;a.value=m,m=c(t,h,f,d);for(var g=0;g!==f;++g)m[g]=e[g];u.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=p}}}function Ay(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function Ey(t,e,n){var i=new WeakMap,r=new WeakMap;function s(t){var o=t.target,a=i.get(o);for(var l in null!==a.index&&e.remove(a.index),a.attributes)e.remove(a.attributes[l]);o.removeEventListener("dispose",s),i.delete(o);var c=r.get(a);c&&(e.remove(c),r.delete(a)),n.memory.geometries--}function o(t){var n=[],i=t.index,s=t.attributes.position,o=0;if(null!==i){o=i.version;for(var a=0,l=(c=i.array).length;a<l;a+=3)n.push(h=c[a+0],u=c[a+1],u,d=c[a+2],d,h)}else{var c;for(o=s.version,a=0,l=(c=s.array).length/3-1;a<l;a+=3){var h,u,d;n.push(h=a+0,u=a+1,u,d=a+2,d,h)}}var p=new(uv(n)>65535?av:sv)(n,1);p.version=o,e.update(p,34963);var f=r.get(t);f&&e.remove(f),r.set(t,p)}return{get:function(t,e){var r=i.get(e);return r||(e.addEventListener("dispose",s),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new _v).setFromObject(t)),r=e._bufferGeometry),i.set(e,r),n.memory.geometries++,r)},update:function(t){var n=t.index,i=t.attributes;for(var r in null!==n&&e.update(n,34963),i)e.update(i[r],34962);var s=t.morphAttributes;for(var r in s)for(var o=s[r],a=0,l=o.length;a<l;a++)e.update(o[a],34962)},getWireframeAttribute:function(t){var e=r.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return r.get(t)}}}function Sy(t,e,n,i){var r,s,o;this.setMode=function(t){r=t},this.setIndex=function(t){s=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,s,e*o),n.update(i,r)},this.renderInstances=function(a,l,c){var h,u;if(i.isWebGL2)h=t,u="drawElementsInstanced";else if(u="drawElementsInstancedANGLE",null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[u](r,c,s,l*o,a.maxInstancedCount),n.update(c,r,a.maxInstancedCount)}}function My(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(i=i||1,e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 5:case 6:e.triangles+=i*(t-2);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ty(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Cy(t){var e={},n=new Float32Array(8);return{update:function(i,r,s,o){var a=i.morphTargetInfluences,l=a.length,c=e[r.id];if(void 0===c){c=[];for(var h=0;h<l;h++)c[h]=[h,0];e[r.id]=c}var u=s.morphTargets&&r.morphAttributes.position,d=s.morphNormals&&r.morphAttributes.normal;for(h=0;h<l;h++)0!==(p=c[h])[1]&&(u&&r.removeAttribute("morphTarget"+h),d&&r.removeAttribute("morphNormal"+h));for(h=0;h<l;h++)(p=c[h])[0]=h,p[1]=a[h];for(c.sort(Ty),h=0;h<8;h++){var p;if(p=c[h]){var f=p[0],m=p[1];if(m){u&&r.addAttribute("morphTarget"+h,u[f]),d&&r.addAttribute("morphNormal"+h,d[f]),n[h]=m;continue}}n[h]=0}o.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function Ly(t,e){var n={};return{update:function(i){var r=e.render.frame,s=i.geometry,o=t.get(i,s);return n[o.id]!==r&&(s.isGeometry&&o.updateFromObject(i),t.update(o),n[o.id]=r),o},dispose:function(){n={}}}}function Py(t,e,n,i,r,s,o,a,l,c){Rm.call(this,t=void 0!==t?t:[],e=void 0!==e?e:Xp,n,i,r,s,o=void 0!==o?o:Af,a,l,c),this.flipY=!1}function Ry(t,e,n,i){Rm.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=rf,this.minFilter=rf,this.wrapR=ef,this.generateMipmaps=!1,this.flipY=!1}function Oy(t,e,n,i){Rm.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=rf,this.minFilter=rf,this.wrapR=ef,this.generateMipmaps=!1,this.flipY=!1}fy.physical={uniforms:Yv([fy.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new qg(0)},clearcoatNormalScale:{value:new xm(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:dy.meshphysical_vert,fragmentShader:dy.meshphysical_frag},(vy.prototype=Object.create(Gv.prototype)).constructor=vy,(yy.prototype=Object.create(_v.prototype)).constructor=yy,(Py.prototype=Object.create(Rm.prototype)).constructor=Py,Py.prototype.isCubeTexture=!0,Object.defineProperty(Py.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),(Ry.prototype=Object.create(Rm.prototype)).constructor=Ry,Ry.prototype.isDataTexture2DArray=!0,(Oy.prototype=Object.create(Rm.prototype)).constructor=Oy,Oy.prototype.isDataTexture3D=!0;var Iy=new Rm,Dy=new Ry,ky=new Oy,Ny=new Py,By=[],Fy=[],zy=new Float32Array(16),Uy=new Float32Array(9),jy=new Float32Array(4);function Hy(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,s=By[r];if(void 0===s&&(s=new Float32Array(r),By[r]=s),0!==e){i.toArray(s,0);for(var o=1,a=0;o!==e;++o)t[o].toArray(s,a+=n)}return s}function Vy(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Gy(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function Wy(t,e){var n=Fy[e];void 0===n&&(n=new Int32Array(e),Fy[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function qy(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Xy(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Vy(n,e))return;t.uniform2fv(this.addr,e),Gy(n,e)}}function Yy(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Vy(n,e))return;t.uniform3fv(this.addr,e),Gy(n,e)}}function Qy(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Vy(n,e))return;t.uniform4fv(this.addr,e),Gy(n,e)}}function Zy(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Vy(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Gy(n,e)}else{if(Vy(n,i))return;jy.set(i),t.uniformMatrix2fv(this.addr,!1,jy),Gy(n,i)}}function Ky(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Vy(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Gy(n,e)}else{if(Vy(n,i))return;Uy.set(i),t.uniformMatrix3fv(this.addr,!1,Uy),Gy(n,i)}}function Jy(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Vy(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Gy(n,e)}else{if(Vy(n,i))return;zy.set(i),t.uniformMatrix4fv(this.addr,!1,zy),Gy(n,i)}}function $y(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||Iy,r)}function t_(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Dy,r)}function e_(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||ky,r)}function n_(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Ny,r)}function i_(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function r_(t,e){var n=this.cache;Vy(n,e)||(t.uniform2iv(this.addr,e),Gy(n,e))}function s_(t,e){var n=this.cache;Vy(n,e)||(t.uniform3iv(this.addr,e),Gy(n,e))}function o_(t,e){var n=this.cache;Vy(n,e)||(t.uniform4iv(this.addr,e),Gy(n,e))}function a_(t,e){t.uniform1fv(this.addr,e)}function l_(t,e){t.uniform1iv(this.addr,e)}function c_(t,e){t.uniform2iv(this.addr,e)}function h_(t,e){t.uniform3iv(this.addr,e)}function u_(t,e){t.uniform4iv(this.addr,e)}function d_(t,e){var n=Hy(e,this.size,2);t.uniform2fv(this.addr,n)}function p_(t,e){var n=Hy(e,this.size,3);t.uniform3fv(this.addr,n)}function f_(t,e){var n=Hy(e,this.size,4);t.uniform4fv(this.addr,n)}function m_(t,e){var n=Hy(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function g_(t,e){var n=Hy(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function v_(t,e){var n=Hy(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function y_(t,e,n){var i=e.length,r=Wy(n,i);t.uniform1iv(this.addr,r);for(var s=0;s!==i;++s)n.safeSetTexture2D(e[s]||Iy,r[s])}function __(t,e,n){var i=e.length,r=Wy(n,i);t.uniform1iv(this.addr,r);for(var s=0;s!==i;++s)n.safeSetTextureCube(e[s]||Ny,r[s])}function b_(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(e.type){case 5126:return qy;case 35664:return Xy;case 35665:return Yy;case 35666:return Qy;case 35674:return Zy;case 35675:return Ky;case 35676:return Jy;case 35678:case 36198:return $y;case 35679:return e_;case 35680:return n_;case 36289:return t_;case 5124:case 35670:return i_;case 35667:case 35671:return r_;case 35668:case 35672:return s_;case 35669:case 35673:return o_}}()}function x_(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(e.type){case 5126:return a_;case 35664:return d_;case 35665:return p_;case 35666:return f_;case 35674:return m_;case 35675:return g_;case 35676:return v_;case 35678:return y_;case 35680:return __;case 5124:case 35670:return l_;case 35667:case 35671:return c_;case 35668:case 35672:return h_;case 35669:case 35673:return u_}}()}function w_(t){this.id=t,this.seq=[],this.map={}}x_.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Gy(e,t)},w_.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,s=i.length;r!==s;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var A_=/([\w\d_]+)(\])?(\[|\.)?/g;function E_(t,e){t.seq.push(e),t.map[e.id]=e}function S_(t,e,n){var i=t.name,r=i.length;for(A_.lastIndex=0;;){var s=A_.exec(i),o=s[1],a=s[3];if("]"===s[2]&&(o|=0),void 0===a||"["===a&&A_.lastIndex+2===r){E_(n,void 0===a?new b_(o,t,e):new x_(o,t,e));break}var l=n.map[o];void 0===l&&E_(n,l=new w_(o)),n=l}}function M_(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);S_(r,t.getUniformLocation(e,r.name),this)}}function T_(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}M_.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},M_.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},M_.upload=function(t,e,n,i){for(var r=0,s=e.length;r!==s;++r){var o=e[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,i)}},M_.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var s=t[i];s.id in e&&n.push(s)}return n};var C_=0;function L_(t){switch(t){case rm:return["Linear","( value )"];case sm:return["sRGB","( value )"];case am:return["RGBE","( value )"];case cm:return["RGBM","( value, 7.0 )"];case hm:return["RGBM","( value, 16.0 )"];case um:return["RGBD","( value, 256.0 )"];case om:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case lm:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function P_(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(n){for(var i=t.getShaderSource(e).split("\n"),r=0;r<i.length;r++)i[r]=r+1+": "+i[r];return i.join("\n")}()}function R_(t,e){var n=L_(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function O_(t,e){var n;switch(e){case Hp:n="Linear";break;case Vp:n="Reinhard";break;case Gp:n="Uncharted2";break;case Wp:n="OptimizedCineon";break;case qp:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function I_(t){return""!==t}function D_(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function k_(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function N_(t){return t.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(t,e){var n=dy[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return N_(n)})}function B_(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,n,i){for(var r="",s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[ i \]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r})}function F_(t,e,n,i,r,s,o){var a=t.getContext(),l=i.defines,c=r.vertexShader,h=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";s.shadowMapType===$d?u="SHADOWMAP_TYPE_PCF":s.shadowMapType===tp?u="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===ep&&(u="SHADOWMAP_TYPE_VSM");var d="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(s.envMap){switch(i.envMap.mapping){case Xp:case Yp:d="ENVMAP_TYPE_CUBE";break;case Jp:case $p:d="ENVMAP_TYPE_CUBE_UV";break;case Qp:case Zp:d="ENVMAP_TYPE_EQUIREC";break;case Kp:d="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case Yp:case Zp:p="ENVMAP_MODE_REFRACTION"}switch(i.combine){case Fp:f="ENVMAP_BLENDING_MULTIPLY";break;case zp:f="ENVMAP_BLENDING_MIX";break;case Up:f="ENVMAP_BLENDING_ADD"}}var m,g,v,y,_=t.gammaFactor>0?t.gammaFactor:1,b=o.isWebGL2?"":function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(I_).join("\n")}(i.extensions,s,e),x=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(l),w=a.createProgram();if(i.isRawShaderMaterial?((m=[x].filter(I_).join("\n")).length>0&&(m+="\n"),(g=[b,x].filter(I_).join("\n")).length>0&&(g+="\n")):(m=["precision "+s.precision+" float;","precision "+s.precision+" int;","highp"===s.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,x,s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+s.maxBones,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+p:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexUvs?"#define USE_UV":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+u:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(I_).join("\n"),g=[b,"precision "+s.precision+" float;","precision "+s.precision+" int;","highp"===s.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,x,s.alphaTest?"#define ALPHATEST "+s.alphaTest+(s.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+_,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+d:"",s.envMap?"#define "+p:"",s.envMap?"#define "+f:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.sheen?"#define USE_SHEEN":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexUvs?"#define USE_UV":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+u:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensions&&i.extensions.shaderTextureLOD||s.envMap)&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",s.toneMapping!==jp?"#define TONE_MAPPING":"",s.toneMapping!==jp?dy.tonemapping_pars_fragment:"",s.toneMapping!==jp?O_("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.outputEncoding||s.mapEncoding||s.matcapEncoding||s.envMapEncoding||s.emissiveMapEncoding?dy.encodings_pars_fragment:"",s.mapEncoding?R_("mapTexelToLinear",s.mapEncoding):"",s.matcapEncoding?R_("matcapTexelToLinear",s.matcapEncoding):"",s.envMapEncoding?R_("envMapTexelToLinear",s.envMapEncoding):"",s.emissiveMapEncoding?R_("emissiveMapTexelToLinear",s.emissiveMapEncoding):"",s.outputEncoding?(v=s.outputEncoding,y=L_(v),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+y[0]+y[1]+"; }"):"",s.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(I_).join("\n")),c=k_(c=D_(c=N_(c),s),s),h=k_(h=D_(h=N_(h),s),s),c=B_(c),h=B_(h),o.isWebGL2&&!i.isRawShaderMaterial){var A=!1,E=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==c.match(E)&&null!==h.match(E)&&(A=!0,c=c.replace(E,""),h=h.replace(E,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#version 300 es\n","#define varying in",A?"":"out highp vec4 pc_fragColor;",A?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var S,M,T=g+h,C=T_(a,35633,m+c),L=T_(a,35632,T);if(a.attachShader(w,C),a.attachShader(w,L),void 0!==i.index0AttributeName?a.bindAttribLocation(w,0,i.index0AttributeName):!0===s.morphTargets&&a.bindAttribLocation(w,0,"position"),a.linkProgram(w),t.debug.checkShaderErrors){var P=a.getProgramInfoLog(w).trim(),R=a.getShaderInfoLog(C).trim(),O=a.getShaderInfoLog(L).trim(),I=!0,D=!0;if(!1===a.getProgramParameter(w,35714)){I=!1;var k=P_(a,C,"vertex"),N=P_(a,L,"fragment");console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(w,35715),"gl.getProgramInfoLog",P,k,N)}else""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==R&&""!==O||(D=!1);D&&(this.diagnostics={runnable:I,material:i,programLog:P,vertexShader:{log:R,prefix:m},fragmentShader:{log:O,prefix:g}})}return a.deleteShader(C),a.deleteShader(L),this.getUniforms=function(){return void 0===S&&(S=new M_(a,w)),S},this.getAttributes=function(){return void 0===M&&(M=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var s=t.getActiveAttrib(e,r).name;n[s]=t.getAttribLocation(e,s)}return n}(a,w)),M},this.destroy=function(){a.deleteProgram(w),this.program=void 0},this.name=r.name,this.id=C_++,this.code=n,this.usedTimes=1,this.program=w,this.vertexShader=C,this.fragmentShader=L,this}function z_(t,e,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function o(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=rm,n===rm&&e&&(n=om),n}this.getParameters=function(e,i,s,a,l,c,h){var u=r[e.type],d=h.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=Math.floor((n.maxVertexUniforms-20)/4),r=Math.min(i,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}(h):0,p=n.precision;null!==e.precision&&(p=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead.");var f=t.getRenderTarget();return{shaderID:u,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:o(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:o(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:o(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:o(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===Jp||e.envMap.mapping===$p),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:o(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===mm,tangentSpaceNormalMap:e.normalMapType===fm,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap),fog:!!a,useFog:e.fog,fogExp2:a&&a.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:l,numClipIntersection:c,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&s.length>0,shadowMapType:t.shadowMap.type,toneMapping:e.toneMapped?t.toneMapping:jp,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===rp,flipSided:e.side===ip,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var o=0;o<s.length;o++)i.push(n[s[o]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.push(t.gammaFactor),i.join()},this.acquireProgram=function(r,s,o,a){for(var l,c=0,h=i.length;c<h;c++){var u=i[c];if(u.code===a){++(l=u).usedTimes;break}}return void 0===l&&(l=new F_(t,e,a,r,s,o,n),i.push(l)),l},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function U_(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&t.set(e,n={}),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function j_(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function H_(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function V_(){var t=[],e=0,n=[],i=[],r={id:-1};function s(n,i,s,o,a,l){var c=t[e];return void 0===c?t[e]=c={id:n.id,object:n,geometry:i,material:s,program:s.program||r,groupOrder:o,renderOrder:n.renderOrder,z:a,group:l}:(c.id=n.id,c.object=n,c.geometry=i,c.material=s,c.program=s.program||r,c.groupOrder=o,c.renderOrder=n.renderOrder,c.z=a,c.group=l),e++,c}return{opaque:n,transparent:i,init:function(){e=0,n.length=0,i.length=0},push:function(t,e,r,o,a,l){var c=s(t,e,r,o,a,l);(!0===r.transparent?i:n).push(c)},unshift:function(t,e,r,o,a,l){var c=s(t,e,r,o,a,l);(!0===r.transparent?i:n).unshift(c)},sort:function(){n.length>1&&n.sort(j_),i.length>1&&i.sort(H_)}}}function G_(){var t=new WeakMap;function e(n){var i=n.target;i.removeEventListener("dispose",e),t.delete(i)}return{get:function(n,i){var r,s=t.get(n);return void 0===s?(r=new V_,t.set(n,new WeakMap),t.get(n).set(i,r),n.addEventListener("dispose",e)):void 0===(r=s.get(i))&&(r=new V_,s.set(i,r)),r},dispose:function(){t=new WeakMap}}}function W_(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new Sm,color:new qg,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new xm};break;case"SpotLight":n={position:new Sm,direction:new Sm,color:new qg,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new xm};break;case"PointLight":n={position:new Sm,color:new qg,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new xm,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Sm,skyColor:new qg,groundColor:new qg};break;case"RectAreaLight":n={color:new qg,position:new Sm,halfWidth:new Sm,halfHeight:new Sm}}return t[e.id]=n,n}}}var q_=0;function X_(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Y_(){for(var t=new W_,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)e.probe.push(new Sm);var i=new Sm,r=new Hm,s=new Hm;return{setup:function(n,o,a){for(var l=0,c=0,h=0,u=0;u<9;u++)e.probe[u].set(0,0,0);var d=0,p=0,f=0,m=0,g=0,v=0,y=0,_=0,b=a.matrixWorldInverse;n.sort(X_),u=0;for(var x=n.length;u<x;u++){var w=n[u],A=w.color,E=w.intensity,S=w.distance,M=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=A.r*E,c+=A.g*E,h+=A.b*E;else if(w.isLightProbe)for(var T=0;T<9;T++)e.probe[T].addScaledVector(w.sh.coefficients[T],E);else if(w.isDirectionalLight)(L=t.get(w)).color.copy(w.color).multiplyScalar(w.intensity),L.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),L.direction.sub(i),L.direction.transformDirection(b),L.shadow=w.castShadow,w.castShadow&&(L.shadowBias=(C=w.shadow).bias,L.shadowRadius=C.radius,L.shadowMapSize=C.mapSize,e.directionalShadowMap[d]=M,e.directionalShadowMatrix[d]=w.shadow.matrix,v++),e.directional[d]=L,d++;else if(w.isSpotLight)(L=t.get(w)).position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(b),L.color.copy(A).multiplyScalar(E),L.distance=S,L.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),L.direction.sub(i),L.direction.transformDirection(b),L.coneCos=Math.cos(w.angle),L.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),L.decay=w.decay,L.shadow=w.castShadow,w.castShadow&&(L.shadowBias=(C=w.shadow).bias,L.shadowRadius=C.radius,L.shadowMapSize=C.mapSize,e.spotShadowMap[f]=M,e.spotShadowMatrix[f]=w.shadow.matrix,_++),e.spot[f]=L,f++;else if(w.isRectAreaLight)(L=t.get(w)).color.copy(A).multiplyScalar(E),L.position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(b),s.identity(),r.copy(w.matrixWorld),r.premultiply(b),s.extractRotation(r),L.halfWidth.set(.5*w.width,0,0),L.halfHeight.set(0,.5*w.height,0),L.halfWidth.applyMatrix4(s),L.halfHeight.applyMatrix4(s),e.rectArea[m]=L,m++;else if(w.isPointLight){var C;(L=t.get(w)).position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(b),L.color.copy(w.color).multiplyScalar(w.intensity),L.distance=w.distance,L.decay=w.decay,L.shadow=w.castShadow,w.castShadow&&(L.shadowBias=(C=w.shadow).bias,L.shadowRadius=C.radius,L.shadowMapSize=C.mapSize,L.shadowCameraNear=C.camera.near,L.shadowCameraFar=C.camera.far,e.pointShadowMap[p]=M,e.pointShadowMatrix[p]=w.shadow.matrix,y++),e.point[p]=L,p++}else if(w.isHemisphereLight){var L;(L=t.get(w)).direction.setFromMatrixPosition(w.matrixWorld),L.direction.transformDirection(b),L.direction.normalize(),L.skyColor.copy(w.color).multiplyScalar(E),L.groundColor.copy(w.groundColor).multiplyScalar(E),e.hemi[g]=L,g++}}e.ambient[0]=l,e.ambient[1]=c,e.ambient[2]=h;var P=e.hash;P.directionalLength===d&&P.pointLength===p&&P.spotLength===f&&P.rectAreaLength===m&&P.hemiLength===g&&P.numDirectionalShadows===v&&P.numPointShadows===y&&P.numSpotShadows===_||(e.directional.length=d,e.spot.length=f,e.rectArea.length=m,e.point.length=p,e.hemi.length=g,e.directionalShadowMap.length=v,e.pointShadowMap.length=y,e.spotShadowMap.length=_,e.directionalShadowMatrix.length=v,e.pointShadowMatrix.length=y,e.spotShadowMatrix.length=_,P.directionalLength=d,P.pointLength=p,P.spotLength=f,P.rectAreaLength=m,P.hemiLength=g,P.numDirectionalShadows=v,P.numPointShadows=y,P.numSpotShadows=_,e.version=q_++)},state:e}}function Q_(){var t=new Y_,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(i){t.setup(e,n,i)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function Z_(){var t=new WeakMap;function e(n){var i=n.target;i.removeEventListener("dispose",e),t.delete(i)}return{get:function(n,i){var r;return!1===t.has(n)?(r=new Q_,t.set(n,new WeakMap),t.get(n).set(i,r),n.addEventListener("dispose",e)):!1===t.get(n).has(i)?(r=new Q_,t.get(n).set(i,r)):r=t.get(n).get(i),r},dispose:function(){t=new WeakMap}}}function K_(t){Jg.call(this),this.type="MeshDepthMaterial",this.depthPacking=dm,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function J_(t){Jg.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Sm,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}(K_.prototype=Object.create(Jg.prototype)).constructor=K_,K_.prototype.isMeshDepthMaterial=!0,K_.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},(J_.prototype=Object.create(Jg.prototype)).constructor=J_,J_.prototype.isMeshDistanceMaterial=!0,J_.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var $_="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n}",tb="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function eb(t,e,n){var i=new uy,r=new xm,s=new xm,o=new Om,a=1,l=2,c=1+(a|l),h=new Array(c),u=new Array(c),d={},p={0:ip,1:np,2:rp},f=new Kv({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new xm},radius:{value:4}},vertexShader:tb,fragmentShader:$_}),m=f.clone();m.defines.HORIZONAL_PASS=1;var g=new _v;g.addAttribute("position",new tv(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));for(var v=new Bv(g,f),y=0;y!==c;++y){var _=0!=(y&a),b=0!=(y&l),x=new K_({depthPacking:pm,morphTargets:_,skinning:b});h[y]=x;var w=new J_({morphTargets:_,skinning:b});u[y]=w}var A=this;function E(n,i){var r=e.update(v);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,f,v,null),m.uniforms.shadow_pass.value=n.mapPass.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,m,v,null)}function S(e,n,i,r,s,o){var c=e.geometry,f=null,m=h,g=e.customDepthMaterial;if(i.isPointLight&&(m=u,g=e.customDistanceMaterial),g)f=g;else{var v=!1;n.morphTargets&&(c&&c.isBufferGeometry?v=c.morphAttributes&&c.morphAttributes.position&&c.morphAttributes.position.length>0:c&&c.isGeometry&&(v=c.morphTargets&&c.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var y=0;v&&(y|=a),e.isSkinnedMesh&&n.skinning&&(y|=l),f=m[y]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var _=f.uuid,b=n.uuid,x=d[_];void 0===x&&(d[_]=x={});var w=x[b];void 0===w&&(w=f.clone(),x[b]=w),f=w}return f.visible=n.visible,f.wireframe=n.wireframe,f.side=o===ep?null!=n.shadowSide?n.shadowSide:n.side:null!=n.shadowSide?n.shadowSide:p[n.side],f.clipShadows=n.clipShadows,f.clippingPlanes=n.clippingPlanes,f.clipIntersection=n.clipIntersection,f.wireframeLinewidth=n.wireframeLinewidth,f.linewidth=n.linewidth,i.isPointLight&&f.isMeshDistanceMaterial&&(f.referencePosition.setFromMatrixPosition(i.matrixWorld),f.nearDistance=r,f.farDistance=s),f}function M(n,r,s,o,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===ep)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);var l=e.update(n),c=n.material;if(Array.isArray(c))for(var h=l.groups,u=0,d=h.length;u<d;u++){var p=h[u],f=c[p.materialIndex];if(f&&f.visible){var m=S(n,f,o,s.near,s.far,a);t.renderBufferDirect(s,null,l,m,n,p)}}else c.visible&&(m=S(n,c,o,s.near,s.far,a),t.renderBufferDirect(s,null,l,m,n,null))}for(var g=n.children,v=0,y=g.length;v<y;v++)M(g[v],r,s,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$d,this.render=function(e,a,l){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==e.length){var c=t.getRenderTarget(),h=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),d=t.state;d.setBlending(lp),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=e.length;p<f;p++){var m=e[p],g=m.shadow;if(void 0!==g){r.copy(g.mapSize);var v,y=g.getFrameExtents();r.multiply(y),s.copy(g.mapSize),(r.x>n||r.y>n)&&(console.warn("THREE.WebGLShadowMap:",m,"has shadow exceeding max texture size, reducing"),r.x>n&&(s.x=Math.floor(n/y.x),r.x=s.x*y.x,g.mapSize.x=s.x),r.y>n&&(s.y=Math.floor(n/y.y),r.y=s.y*y.y,g.mapSize.y=s.y)),null!==g.map||g.isPointLightShadow||this.type!==ep||(g.map=new Im(r.x,r.y,v={minFilter:af,magFilter:af,format:Ef}),g.map.texture.name=m.name+".shadowMap",g.mapPass=new Im(r.x,r.y,v),g.camera.updateProjectionMatrix()),null===g.map&&(g.map=new Im(r.x,r.y,v={minFilter:rf,magFilter:rf,format:Ef}),g.map.texture.name=m.name+".shadowMap",g.camera.updateProjectionMatrix()),t.setRenderTarget(g.map),t.clear();for(var _=g.getViewportCount(),b=0;b<_;b++){var x=g.getViewport(b);o.set(s.x*x.x,s.y*x.y,s.x*x.z,s.y*x.w),d.viewport(o),g.updateMatrices(m,l,b),i=g.getFrustum(),M(a,l,g.camera,m,this.type)}g.isPointLightShadow||this.type!==ep||E(g,l)}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}A.needsUpdate=!1,t.setRenderTarget(c,h,u)}}}function nb(t,e,n,i){var r=new function(){var e=!1,n=new Om,i=null,r=new Om(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,o,a){!0===a&&(e*=o,i*=o,s*=o),n.set(e,i,s,o),!1===r.equals(n)&&(t.clearColor(e,i,s,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?z(2929):U(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case Pp:t.depthFunc(512);break;case Rp:t.depthFunc(519);break;case Op:t.depthFunc(513);break;case Ip:t.depthFunc(515);break;case Dp:t.depthFunc(514);break;case kp:t.depthFunc(518);break;case Np:t.depthFunc(516);break;case Bp:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){var e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null;return{setTest:function(t){e||(t?z(2960):U(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&s===o||(t.stencilFunc(e,n,o),i=e,r=n,s=o)},setOp:function(e,n,i){o===e&&a===n&&l===i||(t.stencilOp(e,n,i),o=e,a=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null}}},a=t.getParameter(34921),l=new Uint8Array(a),c=new Uint8Array(a),h=new Uint8Array(a),u={},d=null,p=null,f=null,m=null,g=null,v=null,y=null,_=null,b=null,x=null,w=!1,A=null,E=null,S=null,M=null,T=null,C=t.getParameter(35661),L=!1,P=0,R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(P=parseFloat(/^WebGL\ ([0-9])/.exec(R)[1]),L=P>=1):-1!==R.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(R)[1]),L=P>=2);var O=null,I={},D=new Om,k=new Om;function N(e,n,i){var r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<i;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return s}var B={};function F(n,r){l[n]=1,0===c[n]&&(t.enableVertexAttribArray(n),c[n]=1),h[n]!==r&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),h[n]=r)}function z(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function U(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}function j(e,i,r,s,o,a,l,c){if(e!==lp){if(f||(z(3042),f=!0),e===pp)o=o||i,a=a||r,l=l||s,i===g&&o===_||(t.blendEquationSeparate(n.convert(i),n.convert(o)),g=i,_=o),r===v&&s===y&&a===b&&l===x||(t.blendFuncSeparate(n.convert(r),n.convert(s),n.convert(a),n.convert(l)),v=r,y=s,b=a,x=l),m=e,w=null;else if(e!==m||c!==w){if(g===fp&&_===fp||(t.blendEquation(32774),g=fp,_=fp),c)switch(e){case cp:t.blendFuncSeparate(1,771,1,771);break;case hp:t.blendFunc(1,1);break;case up:t.blendFuncSeparate(0,0,769,771);break;case dp:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case cp:t.blendFuncSeparate(770,771,1,771);break;case hp:t.blendFunc(770,1);break;case up:t.blendFunc(0,769);break;case dp:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}v=null,y=null,b=null,x=null,m=e,w=c}}else f&&(U(3042),f=!1)}function H(e){A!==e&&(t.frontFace(e?2304:2305),A=e)}function V(e){e!==Zd?(z(2884),e!==E&&t.cullFace(e===Kd?1029:e===Jd?1028:1032)):U(2884),E=e}function G(e,n,i){e?(z(32823),M===n&&T===i||(t.polygonOffset(n,i),M=n,T=i)):U(32823)}function W(e){void 0===e&&(e=33984+C-1),O!==e&&(t.activeTexture(e),O=e)}return B[3553]=N(3553,3553,1),B[34067]=N(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),z(2929),s.setFunc(Ip),H(!1),V(Kd),z(2884),j(lp),{buffers:{color:r,depth:s,stencil:o},initAttributes:function(){for(var t=0,e=l.length;t<e;t++)l[t]=0},enableAttribute:function(t){F(t,0)},enableAttributeAndDivisor:F,disableUnusedAttributes:function(){for(var e=0,n=c.length;e!==n;++e)c[e]!==l[e]&&(t.disableVertexAttribArray(e),c[e]=0)},enable:z,disable:U,getCompressedTextureFormats:function(){if(null===d&&(d=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(34467),i=0;i<n.length;i++)d.push(n[i]);return d},useProgram:function(e){return p!==e&&(t.useProgram(e),p=e,!0)},setBlending:j,setMaterial:function(t,e){t.side===rp?U(2884):z(2884);var n=t.side===ip;e&&(n=!n),H(n),t.blending===cp&&!1===t.transparent?j(lp):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),r.setMask(t.colorWrite);var i=t.stencilWrite;o.setTest(i),i&&(o.setFunc(t.stencilFunc,t.stencilRef,t.stencilMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),G(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:H,setCullFace:V,setLineWidth:function(e){e!==S&&(L&&t.lineWidth(e),S=e)},setPolygonOffset:G,setScissorTest:function(t){t?z(3089):U(3089)},activeTexture:W,bindTexture:function(e,n){null===O&&W();var i=I[O];void 0===i&&(I[O]=i={type:void 0,texture:void 0}),i.type===e&&i.texture===n||(t.bindTexture(e,n||B[e]),i.type=e,i.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===D.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),D.copy(e))},viewport:function(e){!1===k.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),k.copy(e))},reset:function(){for(var e=0;e<c.length;e++)1===c[e]&&(t.disableVertexAttribArray(e),c[e]=0);u={},d=null,O=null,I={},p=null,m=null,A=null,E=null,r.reset(),s.reset(),o.reset()}}}function ib(t,e,n,i,r,s,o){var a,l=new WeakMap,c="undefined"!=typeof OffscreenCanvas;function h(t,e){return c?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function u(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var s=e?bm.floorPowerOfTwo:Math.floor,o=s(r*t.width),l=s(r*t.height);void 0===a&&(a=h(o,l));var c=n?h(o,l):a;return c.width=o,c.height=l,c.getContext("2d").drawImage(t,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+l+")."),c}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function d(t){return bm.isPowerOfTwo(t.width)&&bm.isPowerOfTwo(t.height)}function p(t,e){return t.generateMipmaps&&e&&t.minFilter!==rf&&t.minFilter!==af}function f(e,n,r,s){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,s))*Math.LOG2E}function m(t,n){if(!r.isWebGL2)return t;var i=t;return 6403===t&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===t&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===t&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325===i||33326===i||34842===i||34836===i?e.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function g(t){return t===rf||t===sf||t===of?9728:9729}function v(e){var n=e.target;n.removeEventListener("dispose",v),function(e){var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}(n),n.isVideoTexture&&l.delete(n),o.memory.textures--}function y(e){var n=e.target;n.removeEventListener("dispose",y),function(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var s=0;s<6;s++)t.deleteFramebuffer(n.__webglFramebuffer[s]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[s]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e)}}(n),o.memory.textures--}var _=0;function b(t,e){var r=i.get(t);if(t.isVideoTexture&&function(t){var e=o.render.frame;l.get(t)!==e&&(l.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){var s=t.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==s.complete)return void S(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function x(e,o){if(6===e.image.length){var a=i.get(e);if(e.version>0&&a.__version!==e.version){E(a,e),n.activeTexture(33984+o),n.bindTexture(34067,a.__webglTexture),t.pixelStorei(37440,e.flipY);for(var l=e&&e.isCompressedTexture,c=e.image[0]&&e.image[0].isDataTexture,h=[],g=0;g<6;g++)h[g]=l||c?c?e.image[g].image:e.image[g]:u(e.image[g],!1,!0,r.maxCubemapSize);var v,y=h[0],_=d(y)||r.isWebGL2,b=s.convert(e.format),x=s.convert(e.type),w=m(b,x);if(A(34067,e,_),l){for(g=0;g<6;g++){v=h[g].mipmaps;for(var S=0;S<v.length;S++){var M=v[S];e.format!==Ef&&e.format!==Af?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(34069+g,S,w,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+g,S,w,M.width,M.height,0,b,x,M.data)}}a.__maxMipLevel=v.length-1}else{for(v=e.mipmaps,g=0;g<6;g++)if(c)for(n.texImage2D(34069+g,0,w,h[g].width,h[g].height,0,b,x,h[g].data),S=0;S<v.length;S++){var T=(M=v[S]).image[g].image;n.texImage2D(34069+g,S+1,w,T.width,T.height,0,b,x,T.data)}else for(n.texImage2D(34069+g,0,w,b,x,h[g]),S=0;S<v.length;S++)n.texImage2D(34069+g,S+1,w,b,x,(M=v[S]).image[g]);a.__maxMipLevel=v.length}p(e,_)&&f(34067,e,y.width,y.height),a.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+o),n.bindTexture(34067,a.__webglTexture)}}function w(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}function A(n,o,a){var l;if(a?(t.texParameteri(n,10242,s.convert(o.wrapS)),t.texParameteri(n,10243,s.convert(o.wrapT)),32879!==n&&35866!==n||t.texParameteri(n,32882,s.convert(o.wrapR)),t.texParameteri(n,10240,s.convert(o.magFilter)),t.texParameteri(n,10241,s.convert(o.minFilter))):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===ef&&o.wrapT===ef||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,g(o.magFilter)),t.texParameteri(n,10241,g(o.minFilter)),o.minFilter!==rf&&o.minFilter!==af&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=e.get("EXT_texture_filter_anisotropic")){if(o.type===gf&&null===e.get("OES_texture_float_linear"))return;if(o.type===vf&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function E(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",v),e.__webglTexture=t.createTexture(),o.memory.textures++)}function S(e,i,o){var a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),E(e,i),n.activeTexture(33984+o),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var l=function(t){return!r.isWebGL2&&(t.wrapS!==ef||t.wrapT!==ef||t.minFilter!==rf&&t.minFilter!==af)}(i)&&!1===d(i.image),c=u(i.image,l,!1,r.maxTextureSize),h=d(c)||r.isWebGL2,g=s.convert(i.format),v=s.convert(i.type),y=m(g,v);A(a,i,h);var _,b=i.mipmaps;if(i.isDepthTexture){if(y=6402,i.type===gf){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");y=36012}else r.isWebGL2&&(y=33189);i.format===Tf&&6402===y&&i.type!==pf&&i.type!==mf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=pf,v=s.convert(i.type)),i.format===Cf&&(y=34041,i.type!==xf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=xf,v=s.convert(i.type))),n.texImage2D(3553,0,y,c.width,c.height,0,g,v,null)}else if(i.isDataTexture)if(b.length>0&&h){for(var x=0,w=b.length;x<w;x++)n.texImage2D(3553,x,y,(_=b[x]).width,_.height,0,g,v,_.data);i.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,y,c.width,c.height,0,g,v,c.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(x=0,w=b.length;x<w;x++)_=b[x],i.format!==Ef&&i.format!==Af?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(3553,x,y,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,x,y,_.width,_.height,0,g,v,_.data);e.__maxMipLevel=b.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,y,c.width,c.height,c.depth,0,g,v,c.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,y,c.width,c.height,c.depth,0,g,v,c.data),e.__maxMipLevel=0;else if(b.length>0&&h){for(x=0,w=b.length;x<w;x++)n.texImage2D(3553,x,y,g,v,_=b[x]);i.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,y,g,v,c),e.__maxMipLevel=0;p(i,h)&&f(3553,i,c.width,c.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function M(e,r,o,a){var l=s.convert(r.texture.format),c=s.convert(r.texture.type),h=m(l,c);n.texImage2D(a,0,h,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,a,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function T(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(i){var r=C(n);t.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer)i?(r=C(n),t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height)):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e);else{var o=m(s.convert(n.texture.format),s.convert(n.texture.type));i?(r=C(n),t.renderbufferStorageMultisample(36161,r,o,n.width,n.height)):t.renderbufferStorage(36161,o,n.width,n.height)}t.bindRenderbuffer(36161,null)}function C(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}var L=!1,P=!1;this.allocateTextureUnit=function(){var t=_;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),_+=1,t},this.resetTextureUnits=function(){_=0},this.setTexture2D=b,this.setTexture2DArray=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?S(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?S(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=x,this.setTextureCubeDynamic=w,this.setupRenderTarget=function(e){var a=i.get(e),l=i.get(e.texture);e.addEventListener("dispose",y),l.__webglTexture=t.createTexture(),o.memory.textures++;var c=!0===e.isWebGLRenderTargetCube,h=!0===e.isWebGLMultisampleRenderTarget,u=d(e)||r.isWebGL2;if(c){a.__webglFramebuffer=[];for(var g=0;g<6;g++)a.__webglFramebuffer[g]=t.createFramebuffer()}else if(a.__webglFramebuffer=t.createFramebuffer(),h)if(r.isWebGL2){a.__webglMultisampledFramebuffer=t.createFramebuffer(),a.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,a.__webglColorRenderbuffer);var v=m(s.convert(e.texture.format),s.convert(e.texture.type)),_=C(e);t.renderbufferStorageMultisample(36161,_,v,e.width,e.height),t.bindFramebuffer(36160,a.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,a.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(a.__webglDepthRenderbuffer=t.createRenderbuffer(),T(a.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){for(n.bindTexture(34067,l.__webglTexture),A(34067,e.texture,u),g=0;g<6;g++)M(a.__webglFramebuffer[g],e,36064,34069+g);p(e.texture,u)&&f(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),A(3553,e.texture,u),M(a.__webglFramebuffer,e,36064,3553),p(e.texture,u)&&f(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&function(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),b(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Tf)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==Cf)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var s=0;s<6;s++)t.bindFramebuffer(36160,n.__webglFramebuffer[s]),n.__webglDepthbuffer[s]=t.createRenderbuffer(),T(n.__webglDepthbuffer[s],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),T(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(p(e,d(t)||r.isWebGL2)){var s=t.isWebGLRenderTargetCube?34067:3553,o=i.get(e).__webglTexture;n.bindTexture(s,o),f(s,e,t.width,t.height),n.bindTexture(s,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var s=e.width,o=e.height,a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,s,o,0,0,s,o,a,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),t=t.texture),b(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===P&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),P=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?x(t,e):w(t,e)}}function rb(t,e,n){return{convert:function(t){var i;if(t===tf)return 10497;if(t===ef)return 33071;if(t===nf)return 33648;if(t===rf)return 9728;if(t===sf)return 9984;if(t===of)return 9986;if(t===af)return 9729;if(t===lf)return 9985;if(t===cf)return 9987;if(t===hf)return 5121;if(t===yf)return 32819;if(t===_f)return 32820;if(t===bf)return 33635;if(t===uf)return 5120;if(t===df)return 5122;if(t===pf)return 5123;if(t===ff)return 5124;if(t===mf)return 5125;if(t===gf)return 5126;if(t===vf){if(n.isWebGL2)return 5131;if(null!==(i=e.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(t===wf)return 6406;if(t===Af)return 6407;if(t===Ef)return 6408;if(t===Sf)return 6409;if(t===Mf)return 6410;if(t===Tf)return 6402;if(t===Cf)return 34041;if(t===Lf)return 6403;if(t===fp)return 32774;if(t===mp)return 32778;if(t===gp)return 32779;if(t===_p)return 0;if(t===bp)return 1;if(t===xp)return 768;if(t===wp)return 769;if(t===Ap)return 770;if(t===Ep)return 771;if(t===Sp)return 772;if(t===Mp)return 773;if(t===Tp)return 774;if(t===Cp)return 775;if(t===Lp)return 776;if((t===Pf||t===Rf||t===Of||t===If)&&null!==(i=e.get("WEBGL_compressed_texture_s3tc"))){if(t===Pf)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Rf)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Of)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===If)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===Df||t===kf||t===Nf||t===Bf)&&null!==(i=e.get("WEBGL_compressed_texture_pvrtc"))){if(t===Df)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===kf)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Nf)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Bf)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Ff&&null!==(i=e.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((t===zf||t===Uf||t===jf||t===Hf||t===Vf||t===Gf||t===Wf||t===qf||t===Xf||t===Yf||t===Qf||t===Zf||t===Kf||t===Jf)&&null!==(i=e.get("WEBGL_compressed_texture_astc")))return t;if(t===vp||t===yp){if(n.isWebGL2){if(t===vp)return 32775;if(t===yp)return 32776}if(null!==(i=e.get("EXT_blend_minmax"))){if(t===vp)return i.MIN_EXT;if(t===yp)return i.MAX_EXT}}if(t===xf){if(n.isWebGL2)return 34042;if(null!==(i=e.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function sb(){og.call(this),this.type="Group"}function ob(t){$v.call(this),this.cameras=t||[]}sb.prototype=Object.assign(Object.create(og.prototype),{constructor:sb,isGroup:!0}),ob.prototype=Object.assign(Object.create($v.prototype),{constructor:ob,isArrayCamera:!0});var ab,lb=new Sm,cb=new Sm;function hb(t,e,n){lb.setFromMatrixPosition(e.matrixWorld),cb.setFromMatrixPosition(n.matrixWorld);var i=lb.distanceTo(cb),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(s[8]+1)/s[0],d=o*h,p=o*u,f=i/(-h+u),m=f*-h;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var g=o+f,v=a+f;t.projectionMatrix.makePerspective(d-m,p+(i-m),l*a/v*g,c*a/v*g,g,v)}function ub(t){var e,n,i=this,r=null,s=null,o=null,a=[],l=new Hm,c=new Hm,h=1,u="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(s=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",x,!1));var d=new Hm,p=new wm,f=new Sm,m=new $v;m.viewport=new Om,m.layers.enable(1);var g=new $v;g.viewport=new Om,g.layers.enable(2);var v=new ob([m,g]);function y(){return null!==r&&!0===r.isPresenting}v.layers.enable(1),v.layers.enable(2);var _,b=new xm;function x(){if(y()){var s=r.getEyeParameters("left");e=2*s.renderWidth*h,n=s.renderHeight*h,_=t.getPixelRatio(),t.getSize(b),t.setDrawingBufferSize(e,n,1),m.viewport.set(0,0,e/2,n),g.viewport.set(e/2,0,e/2,n),S.start(),i.dispatchEvent({type:"sessionstart"})}else i.enabled&&t.setDrawingBufferSize(b.width,b.height,_),S.stop(),i.dispatchEvent({type:"sessionend"})}var w=[];function A(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=e.length;n<r;n++){var s=e[n];if(s&&("Daydream Controller"===s.id||"Gear VR Controller"===s.id||"Oculus Go Controller"===s.id||"OpenVR Gamepad"===s.id||s.id.startsWith("Oculus Touch")||s.id.startsWith("HTC Vive Focus")||s.id.startsWith("Spatial Controller"))){if(i===t)return s;i++}}}function E(t,i){null!==i&&4===i.length&&t.set(i[0]*e,i[1]*n,i[2]*e,i[3]*n)}this.enabled=!1,this.getController=function(t){var e=a[t];return void 0===e&&((e=new sb).matrixAutoUpdate=!1,e.visible=!1,a[t]=e),e},this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t),S.setContext(t)},this.setFramebufferScaleFactor=function(t){h=t},this.setReferenceSpaceType=function(t){u=t},this.setPoseTarget=function(t){void 0!==t&&(o=t)},this.getCamera=function(t){var e="local-floor"===u?1.6:0;if(!1===y())return t.position.set(0,e,0),t.rotation.set(0,0,0),t;if(r.depthNear=t.near,r.depthFar=t.far,r.getFrameData(s),"local-floor"===u){var n=r.stageParameters;n?l.fromArray(n.sittingToStandingTransform):l.makeTranslation(0,e,0)}var i=s.pose,h=null!==o?o:t;h.matrix.copy(l),h.matrix.decompose(h.position,h.quaternion,h.scale),null!==i.orientation&&(p.fromArray(i.orientation),h.quaternion.multiply(p)),null!==i.position&&(p.setFromRotationMatrix(l),f.fromArray(i.position),f.applyQuaternion(p),h.position.add(f)),h.updateMatrixWorld(),m.near=t.near,g.near=t.near,m.far=t.far,g.far=t.far,m.matrixWorldInverse.fromArray(s.leftViewMatrix),g.matrixWorldInverse.fromArray(s.rightViewMatrix),c.getInverse(l),"local-floor"===u&&(m.matrixWorldInverse.multiply(c),g.matrixWorldInverse.multiply(c));var _=h.parent;null!==_&&(d.getInverse(_.matrixWorld),m.matrixWorldInverse.multiply(d),g.matrixWorldInverse.multiply(d)),m.matrixWorld.getInverse(m.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),m.projectionMatrix.fromArray(s.leftProjectionMatrix),g.projectionMatrix.fromArray(s.rightProjectionMatrix),hb(v,m,g);var b=r.getLayers();if(b.length){var x=b[0];E(m.viewport,x.leftBounds),E(g.viewport,x.rightBounds)}return function(){for(var t=0;t<a.length;t++){var e=a[t],n=A(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&e.position.set(.2,-.6,-.05),null!==i.position&&e.position.fromArray(i.position),null!==i.orientation&&e.quaternion.fromArray(i.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(l),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var r="Daydream Controller"===n.id?0:1;void 0===w[t]&&(w[t]=!1),w[t]!==n.buttons[r].pressed&&(w[t]=n.buttons[r].pressed,!0===w[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}(),v},this.getStandingMatrix=function(){return l},this.isPresenting=y;var S=new my;this.setAnimationLoop=function(t){S.setAnimationLoop(t),y()&&S.start()},this.submitFrame=function(){y()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",x)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function db(t,e){var n=this,i=null,r=null,s="local-floor",o=null,a=[],l=[];function c(){return null!==i&&null!==r}var h=new $v;h.layers.enable(1),h.viewport=new Om;var u=new $v;u.layers.enable(2),u.viewport=new Om;var d=new ob([h,u]);function p(t){for(var e=0;e<a.length;e++)l[e]===t.inputSource&&a[e].dispatchEvent({type:t.type})}function f(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),y.stop(),n.dispatchEvent({type:"sessionend"})}function m(t){r=t,y.setContext(i),y.start(),n.dispatchEvent({type:"sessionstart"})}function g(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}d.layers.enable(1),d.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=a[t];return void 0===e&&((e=new sb).matrixAutoUpdate=!1,e.visible=!1,a[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){s=t},this.getSession=function(){return i},this.setSession=function(t){null!==(i=t)&&(i.addEventListener("select",p),i.addEventListener("selectstart",p),i.addEventListener("selectend",p),i.addEventListener("end",f),i.updateRenderState({baseLayer:new XRWebGLLayer(i,e)}),i.requestReferenceSpace(s).then(m),l=i.inputSources,i.addEventListener("inputsourceschange",function(){l=i.inputSources,console.log(l);for(var t=0;t<a.length;t++)a[t].userData.inputSource=l[t]}))},this.getCamera=function(t){if(c()){var e=t.parent,n=d.cameras;g(d,e);for(var i=0;i<n.length;i++)g(n[i],e);t.matrixWorld.copy(d.matrixWorld);for(var r=t.children,s=(i=0,r.length);i<s;i++)r[i].updateMatrixWorld(!0);return hb(d,h,u),d}return t},this.isPresenting=c;var v=null,y=new my;y.setAnimationLoop(function(e,n){if(null!==(o=n.getViewerPose(r))){var s=o.views,c=i.renderState.baseLayer;t.setFramebuffer(c.framebuffer);for(var h=0;h<s.length;h++){var u=s[h],p=c.getViewport(u),f=d.cameras[h];f.matrix.fromArray(u.transform.inverse.matrix).getInverse(f.matrix),f.projectionMatrix.fromArray(u.projectionMatrix),f.viewport.set(p.x,p.y,p.width,p.height),0===h&&d.matrix.copy(f.matrix)}}for(h=0;h<a.length;h++){var m=a[h],g=l[h];if(g){var y=n.getPose(g.targetRaySpace,r);if(null!==y){m.matrix.fromArray(y.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}v&&v(e)}),this.setAnimationLoop=function(t){v=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Hm},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function pb(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,s=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",h=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,u=null,d=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Hp,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,f,m,g,v,y,_,b,x,w,A,E,S,M,T,C,L,P,R=this,O=!1,I=null,D=0,k=0,N=null,B=null,F=-1,z={geometry:null,program:null,wireframe:!1},U=null,j=null,H=new Om,V=new Om,G=null,W=e.width,q=e.height,X=1,Y=new Om(0,0,W,q),Q=new Om(0,0,W,q),Z=!1,K=new uy,J=new wy,$=!1,tt=!1,et=new Hm,nt=new Sm;function it(){return null===N?X:1}try{var rt={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h,xrCompatible:!0};if(e.addEventListener("webglcontextlost",lt,!1),e.addEventListener("webglcontextrestored",ct,!1),null===(p=n||e.getContext("webgl",rt)||e.getContext("experimental-webgl",rt)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(wt){throw console.error("THREE.WebGLRenderer: "+wt.message),wt}function st(){f=new Ay(p),(m=new xy(p,f,t)).isWebGL2||(f.get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays")),f.get("OES_texture_float_linear"),P=new rb(p,f,m),(g=new nb(p,f,P,m)).scissor(V.copy(Q).multiplyScalar(X).floor()),g.viewport(H.copy(Y).multiplyScalar(X).floor()),v=new My(p),y=new U_,_=new ib(p,f,g,y,m,P,v),b=new gy(p),x=new Ey(p,b,v),w=new Ly(x,v),T=new Cy(p),A=new z_(R,f,m),E=new G_,S=new Z_,M=new _y(R,g,w,a),C=new by(p,f,v,m),L=new Sy(p,f,v,m),v.programs=A.programs,R.capabilities=m,R.extensions=f,R.properties=y,R.renderLists=E,R.state=g,R.info=v}st();var ot="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new db(R,p):new ub(R);this.vr=ot;var at=new eb(R,w,m.maxTextureSize);function lt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function ct(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1,st()}function ht(t){var e=t.target;e.removeEventListener("dispose",ht),function(t){ut(t),y.remove(t)}(e)}function ut(t){var e=y.get(t).program;t.program=void 0,void 0!==e&&A.releaseProgram(e)}this.shadowMap=at,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var t=f.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=f.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(t){void 0!==t&&(X=t,this.setSize(W,q,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new xm),t.set(W,q)},this.setSize=function(t,n,i){ot.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=t,q=n,e.width=Math.floor(t*X),e.height=Math.floor(n*X),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new xm),t.set(W*X,q*X).floor()},this.setDrawingBufferSize=function(t,n,i){W=t,q=n,X=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Om),t.copy(H)},this.getViewport=function(t){return t.copy(Y)},this.setViewport=function(t,e,n,i){t.isVector4?Y.set(t.x,t.y,t.z,t.w):Y.set(t,e,n,i),g.viewport(H.copy(Y).multiplyScalar(X).floor())},this.getScissor=function(t){return t.copy(Q)},this.setScissor=function(t,e,n,i){t.isVector4?Q.set(t.x,t.y,t.z,t.w):Q.set(t,e,n,i),g.scissor(V.copy(Q).multiplyScalar(X).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(t){g.setScissorTest(Z=t)},this.getClearColor=function(){return M.getClearColor()},this.setClearColor=function(){M.setClearColor.apply(M,arguments)},this.getClearAlpha=function(){return M.getClearAlpha()},this.setClearAlpha=function(){M.setClearAlpha.apply(M,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),p.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",lt,!1),e.removeEventListener("webglcontextrestored",ct,!1),E.dispose(),S.dispose(),y.dispose(),w.dispose(),ot.dispose(),pt.stop()},this.renderBufferImmediate=function(t,e){g.initAttributes();var n=y.get(t);t.hasPositions&&!n.position&&(n.position=p.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),t.hasColors&&!n.color&&(n.color=p.createBuffer());var i=e.getAttributes();t.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,t.positionArray,35048),g.enableAttribute(i.position),p.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,t.normalArray,35048),g.enableAttribute(i.normal),p.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,t.uvArray,35048),g.enableAttribute(i.uv),p.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,t.colorArray,35048),g.enableAttribute(i.color),p.vertexAttribPointer(i.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),p.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,s){var o=r.isMesh&&r.matrixWorld.determinant()<0;g.setMaterial(i,o);var a=yt(t,e,i,r),l=!1;z.geometry===n.id&&z.program===a.id&&z.wireframe===(!0===i.wireframe)||(z.geometry=n.id,z.program=a.id,z.wireframe=!0===i.wireframe,l=!0),r.morphTargetInfluences&&(T.update(r,n,i,a),l=!0);var c,h=n.index,u=n.attributes.position,d=1;!0===i.wireframe&&(h=x.getWireframeAttribute(n),d=2);var v=C;null!==h&&(c=b.get(h),(v=L).setIndex(c)),l&&(function(t,e,n){if(n&&n.isInstancedBufferGeometry&&!m.isWebGL2&&null===f.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{g.initAttributes();var i=n.attributes,r=e.getAttributes(),s=t.defaultAttributeValues;for(var o in r){var a=r[o];if(a>=0){var l=i[o];if(void 0!==l){var c=l.normalized,h=l.itemSize,u=b.get(l);if(void 0===u)continue;var d=u.buffer,v=u.type,y=u.bytesPerElement;if(l.isInterleavedBufferAttribute){var _=l.data,x=_.stride,w=l.offset;_&&_.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(a,_.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=_.meshPerAttribute*_.count)):g.enableAttribute(a),p.bindBuffer(34962,d),p.vertexAttribPointer(a,h,v,c,x*y,w*y)}else l.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(a,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):g.enableAttribute(a),p.bindBuffer(34962,d),p.vertexAttribPointer(a,h,v,c,0,0)}else if(void 0!==s){var A=s[o];if(void 0!==A)switch(A.length){case 2:p.vertexAttrib2fv(a,A);break;case 3:p.vertexAttrib3fv(a,A);break;case 4:p.vertexAttrib4fv(a,A);break;default:p.vertexAttrib1fv(a,A)}}}}g.disableUnusedAttributes()}}(i,a,n),null!==h&&p.bindBuffer(34963,c.buffer));var y=1/0;null!==h?y=h.count:void 0!==u&&(y=u.count);var _=n.drawRange.start*d,w=n.drawRange.count*d,A=null!==s?s.start*d:0,E=null!==s?s.count*d:1/0,S=Math.max(_,A),M=Math.min(y,_+w,A+E)-1,P=Math.max(0,M-S+1);if(0!==P){if(r.isMesh)if(!0===i.wireframe)g.setLineWidth(i.wireframeLinewidth*it()),v.setMode(1);else switch(r.drawMode){case em:v.setMode(4);break;case nm:v.setMode(5);break;case im:v.setMode(6)}else if(r.isLine){var R=i.linewidth;void 0===R&&(R=1),g.setLineWidth(R*it()),v.setMode(r.isLineSegments?1:r.isLineLoop?2:3)}else r.isPoints?v.setMode(0):r.isSprite&&v.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&v.renderInstances(n,S,P):v.render(S,P)}},this.compile=function(t,e){(d=S.get(t,e)).init(),t.traverse(function(t){t.isLight&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))}),d.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)vt(e.material[n],t.fog,e);else vt(e.material,t.fog,e)})};var dt=null,pt=new my;function ft(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||K.intersectsSprite(t)){i&&nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(et);var r=w.update(t);(s=t.material).visible&&u.push(t,r,s,n,nt.z,null)}}else if(t.isImmediateRenderObject)i&&nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(et),u.push(t,null,t.material,n,nt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||K.intersectsObject(t))){i&&nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(et),r=w.update(t);var s=t.material;if(Array.isArray(s))for(var o=r.groups,a=0,l=o.length;a<l;a++){var c=o[a],h=s[c.materialIndex];h&&h.visible&&u.push(t,r,h,n,nt.z,c)}else s.visible&&u.push(t,r,s,n,nt.z,null)}var p=t.children;for(a=0,l=p.length;a<l;a++)ft(p[a],e,n,i)}}function mt(t,e,n,i){for(var r=0,s=t.length;r<s;r++){var o=t[r],a=o.object,l=o.geometry,c=void 0===i?o.material:i,h=o.group;if(n.isArrayCamera){j=n;for(var u=n.cameras,p=0,f=u.length;p<f;p++){var m=u[p];a.layers.test(m.layers)&&(g.viewport(H.copy(m.viewport)),d.setupLights(m),gt(a,e,m,l,c,h))}}else j=null,gt(a,e,n,l,c,h)}}function gt(t,e,n,i,r,s){if(t.onBeforeRender(R,e,n,i,r,s),d=S.get(e,j||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){g.setMaterial(r);var o=yt(n,e.fog,r,t);z.geometry=null,z.program=null,z.wireframe=!1,function(t,e){t.render(function(t){R.renderBufferImmediate(t,e)})}(t,o)}else R.renderBufferDirect(n,e.fog,i,r,t,s);t.onAfterRender(R,e,n,i,r,s),d=S.get(e,j||n)}function vt(t,e,n){var i=y.get(t),r=d.state.lights,s=r.state.version,o=A.getParameters(t,r.state,d.state.shadowsArray,e,J.numPlanes,J.numIntersection,n),a=A.getProgramCode(t,o),l=i.program,c=!0;if(void 0===l)t.addEventListener("dispose",ht);else if(l.code!==a)ut(t);else if(i.lightsStateVersion!==s)i.lightsStateVersion=s,c=!1;else{if(void 0!==o.shaderID)return;c=!1}if(c){if(o.shaderID){var h=fy[o.shaderID];i.shader={name:t.type,uniforms:Xv(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,R),a=A.getProgramCode(t,o),l=A.acquireProgram(t,i.shader,o,a),i.program=l,t.program=l}var u=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<R.maxMorphTargets;p++)u["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals)for(t.numSupportedMorphNormals=0,p=0;p<R.maxMorphNormals;p++)u["morphNormal"+p]>=0&&t.numSupportedMorphNormals++;var f=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=J.numPlanes,i.numIntersection=J.numIntersection,f.clippingPlanes=J.uniform),i.fog=e,i.lightsStateVersion=s,t.lights&&(f.ambientLightColor.value=r.state.ambient,f.lightProbe.value=r.state.probe,f.directionalLights.value=r.state.directional,f.spotLights.value=r.state.spot,f.rectAreaLights.value=r.state.rectArea,f.pointLights.value=r.state.point,f.hemisphereLights.value=r.state.hemi,f.directionalShadowMap.value=r.state.directionalShadowMap,f.directionalShadowMatrix.value=r.state.directionalShadowMatrix,f.spotShadowMap.value=r.state.spotShadowMap,f.spotShadowMatrix.value=r.state.spotShadowMatrix,f.pointShadowMap.value=r.state.pointShadowMap,f.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),g=M_.seqWithValue(m.seq,f);i.uniformsList=g}function yt(t,e,n,i){_.resetTextureUnits();var r=y.get(n),s=d.state.lights;$&&(tt||t!==U)&&J.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,t===U&&n.id===F),!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsStateVersion!==s.state.version?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===J.numPlanes&&r.numIntersection===J.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(vt(n,e,i),n.needsUpdate=!1);var o,a,l=!1,c=!1,h=!1,u=r.program,f=u.getUniforms(),v=r.shader.uniforms;if(g.useProgram(u.program)&&(l=!0,c=!0,h=!0),n.id!==F&&(F=n.id,c=!0),l||U!==t){if(f.setValue(p,"projectionMatrix",t.projectionMatrix),m.logarithmicDepthBuffer&&f.setValue(p,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),U!==t&&(U=t,c=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var b=f.map.cameraPosition;void 0!==b&&b.setValue(p,nt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&f.setValue(p,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){f.setOptional(p,i,"bindMatrix"),f.setOptional(p,i,"bindMatrixInverse");var x=i.skeleton;if(x)if(m.floatVertexTextures){if(void 0===x.boneTexture){var w=Math.sqrt(4*x.bones.length);w=bm.ceilPowerOfTwo(w),w=Math.max(w,4);var A=new Float32Array(w*w*4);A.set(x.boneMatrices);var E=new ry(A,w,w,Ef,gf);E.needsUpdate=!0,x.boneMatrices=A,x.boneTexture=E,x.boneTextureSize=w}f.setValue(p,"boneTexture",x.boneTexture,_),f.setValue(p,"boneTextureSize",x.boneTextureSize)}else f.setOptional(p,x,"boneMatrices")}return c&&(f.setValue(p,"toneMappingExposure",R.toneMappingExposure),f.setValue(p,"toneMappingWhitePoint",R.toneMappingWhitePoint),n.lights&&((o=v).ambientLightColor.needsUpdate=a=h,o.lightProbe.needsUpdate=a,o.directionalLights.needsUpdate=a,o.pointLights.needsUpdate=a,o.spotLights.needsUpdate=a,o.rectAreaLights.needsUpdate=a,o.hemisphereLights.needsUpdate=a),e&&n.fog&&function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(v,e),n.isMeshBasicMaterial?_t(v,n):n.isMeshLambertMaterial?(_t(v,n),function(t,e){e.emissiveMap&&(v.emissiveMap.value=e.emissiveMap)}(0,n)):n.isMeshPhongMaterial?(_t(v,n),n.isMeshToonMaterial?function(t,e){bt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(v,n):bt(v,n)):n.isMeshStandardMaterial?(_t(v,n),n.isMeshPhysicalMaterial?function(t,e){xt(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===ip&&t.clearcoatNormalScale.value.negate()),t.transparency.value=e.transparency}(v,n):xt(v,n)):n.isMeshMatcapMaterial?(_t(v,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ip&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ip&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(v,n)):n.isMeshDepthMaterial?(_t(v,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(v,n)):n.isMeshDistanceMaterial?(_t(v,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(v,n)):n.isMeshNormalMaterial?(_t(v,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ip&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ip&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(v,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(v,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(v,n)):n.isPointsMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*X,t.scale.value=.5*q,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(v,n):n.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(v,n):n.isShadowMaterial&&(v.color.value.copy(n.color),v.opacity.value=n.opacity),void 0!==v.ltc_1&&(v.ltc_1.value=py.LTC_1),void 0!==v.ltc_2&&(v.ltc_2.value=py.LTC_2),M_.upload(p,r.uniformsList,v,_)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(M_.upload(p,r.uniformsList,v,_),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&f.setValue(p,"center",i.center),f.setValue(p,"modelViewMatrix",i.modelViewMatrix),f.setValue(p,"normalMatrix",i.normalMatrix),f.setValue(p,"modelMatrix",i.matrixWorld),u}function _t(t,e){var n;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=y.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function bt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ip&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ip&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function xt(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ip&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ip&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}pt.setAnimationLoop(function(t){ot.isPresenting()||dt&&dt(t)}),"undefined"!=typeof window&&pt.setContext(window),this.setAnimationLoop=function(t){dt=t,ot.setAnimationLoop(t),pt.start()},this.render=function(t,e){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),e&&e.isCamera){if(!O){z.geometry=null,z.program=null,z.wireframe=!1,F=-1,U=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ot.enabled&&(e=ot.getCamera(e)),(d=S.get(t,e)).init(),t.onBeforeRender(R,t,e,n||N),et.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),K.setFromMatrix(et),$=J.init(this.clippingPlanes,tt=this.localClippingEnabled,e),(u=E.get(t,e)).init(),ft(t,e,0,R.sortObjects),!0===R.sortObjects&&u.sort(),$&&J.beginShadows();var r=d.state.shadowsArray;at.render(r,t,e),d.setupLights(e),$&&J.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),M.render(u,t,e,i);var s=u.opaque,o=u.transparent;if(t.overrideMaterial){var a=t.overrideMaterial;s.length&&mt(s,t,e,a),o.length&&mt(o,t,e,a)}else s.length&&mt(s,t,e),o.length&&mt(o,t,e);t.onAfterRender(R,t,e),null!==N&&(_.updateRenderTargetMipmap(N),_.updateMultisampleRenderTarget(N)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),ot.enabled&&ot.submitFrame(),u=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){I!==t&&p.bindFramebuffer(36160,t),I=t},this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return N},this.setRenderTarget=function(t,e,n){N=t,D=e,k=n,t&&void 0===y.get(t).__webglFramebuffer&&_.setupRenderTarget(t);var i=I,r=!1;if(t){var s=y.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(i=s[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?y.get(t).__webglMultisampledFramebuffer:s,H.copy(t.viewport),V.copy(t.scissor),G=t.scissorTest}else H.copy(Y).multiplyScalar(X).floor(),V.copy(Q).multiplyScalar(X).floor(),G=Z;if(B!==i&&(p.bindFramebuffer(36160,i),B=i),g.viewport(H),g.scissor(V),g.setScissorTest(G),r){var o=y.get(t.texture);p.framebufferTexture2D(36160,36064,34069+(e||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,i,r,s,o){if(t&&t.isWebGLRenderTarget){var a=y.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(a=a[o]),a){var l=!1;a!==B&&(p.bindFramebuffer(36160,a),l=!0);try{var c=t.texture,h=c.format,u=c.type;if(h!==Ef&&P.convert(h)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===hf||P.convert(u)===p.getParameter(35738)||u===gf&&(m.isWebGL2||f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float"))||u===vf&&f.get(m.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&p.readPixels(e,n,i,r,P.convert(h),P.convert(u),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&p.bindFramebuffer(36160,B)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var i=e.image.width,r=e.image.height,s=P.convert(e.format);_.setTexture2D(e,0),p.copyTexImage2D(3553,n||0,s,t.x,t.y,i,r,0)},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,s=e.image.height,o=P.convert(n.format),a=P.convert(n.type);_.setTexture2D(n,0),e.isDataTexture?p.texSubImage2D(3553,i||0,t.x,t.y,r,s,o,a,e.image.data):p.texSubImage2D(3553,i||0,t.x,t.y,o,a,e.image)},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function fb(t,e){this.name="",this.color=new qg(t),this.density=void 0!==e?e:25e-5}function mb(t,e,n){this.name="",this.color=new qg(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function gb(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function vb(t,e,n,i){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function yb(t){Jg.call(this),this.type="SpriteMaterial",this.color=new qg(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}Object.assign(ub.prototype,Qd.prototype),Object.assign(db.prototype,Qd.prototype),Object.assign(fb.prototype,{isFogExp2:!0,clone:function(){return new fb(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(mb.prototype,{isFog:!0,clone:function(){return new mb(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(gb.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(gb.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(vb.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(vb.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),(yb.prototype=Object.create(Jg.prototype)).constructor=yb,yb.prototype.isSpriteMaterial=!0,yb.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var _b=new Sm,bb=new Sm,xb=new Sm,wb=new xm,Ab=new xm,Eb=new Hm,Sb=new Sm,Mb=new Sm,Tb=new Sm,Cb=new xm,Lb=new xm,Pb=new xm;function Rb(t){if(og.call(this),this.type="Sprite",void 0===ab){ab=new _v;var e=new gb(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);ab.setIndex([0,1,2,0,2,3]),ab.addAttribute("position",new vb(e,3,0,!1)),ab.addAttribute("uv",new vb(e,2,3,!1))}this.geometry=ab,this.material=void 0!==t?t:new yb,this.center=new xm(.5,.5)}function Ob(t,e,n,i,r,s){wb.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Ab.x=s*wb.x-r*wb.y,Ab.y=r*wb.x+s*wb.y):Ab.copy(wb),t.copy(e),t.x+=Ab.x,t.y+=Ab.y,t.applyMatrix4(Eb)}Rb.prototype=Object.assign(Object.create(og.prototype),{constructor:Rb,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),bb.setFromMatrixScale(this.matrixWorld),Eb.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),xb.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&bb.multiplyScalar(-xb.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var s=this.center;Ob(Sb.set(-.5,-.5,0),xb,s,bb,n,i),Ob(Mb.set(.5,-.5,0),xb,s,bb,n,i),Ob(Tb.set(.5,.5,0),xb,s,bb,n,i),Cb.set(0,0),Lb.set(1,0),Pb.set(1,1);var o=t.ray.intersectTriangle(Sb,Mb,Tb,!1,_b);if(null!==o||(Ob(Mb.set(-.5,.5,0),xb,s,bb,n,i),Lb.set(0,1),null!==(o=t.ray.intersectTriangle(Sb,Tb,Mb,!1,_b)))){var a=t.ray.origin.distanceTo(_b);a<t.near||a>t.far||e.push({distance:a,point:_b.clone(),uv:Hg.getUV(_b,Sb,Mb,Tb,Cb,Lb,Pb,new xm),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return og.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var Ib=new Sm,Db=new Sm;function kb(){og.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Nb(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Bv.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Hm,this.bindMatrixInverse=new Hm}kb.prototype=Object.assign(Object.create(og.prototype),{constructor:kb,isLOD:!0,copy:function(t){og.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(t,e){Ib.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Ib);this.getObjectForDistance(n).raycast(t,e)},update:function(t){var e=this.levels;if(e.length>1){Ib.setFromMatrixPosition(t.matrixWorld),Db.setFromMatrixPosition(this.matrixWorld);var n=Ib.distanceTo(Db);e[0].object.visible=!0;for(var i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(;i<r;i++)e[i].object.visible=!1}},toJSON:function(t){var e=og.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var s=n[i];e.object.levels.push({object:s.object.uuid,distance:s.distance})}return e}}),Nb.prototype=Object.assign(Object.create(Bv.prototype),{constructor:Nb,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Om,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Bv.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Bb=new Hm,Fb=new Hm;function zb(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Hm)}}function Ub(){og.call(this),this.type="Bone"}function jb(t){Jg.call(this),this.type="LineBasicMaterial",this.color=new qg(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}Object.assign(zb.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Hm;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,s=t.length;r<s;r++)Bb.multiplyMatrices(t[r]?t[r].matrixWorld:Fb,e[r]),Bb.toArray(n,16*r);void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new zb(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}}),Ub.prototype=Object.assign(Object.create(og.prototype),{constructor:Ub,isBone:!0}),(jb.prototype=Object.create(Jg.prototype)).constructor=jb,jb.prototype.isLineBasicMaterial=!0,jb.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var Hb=new Sm,Vb=new Sm,Gb=new Hm,Wb=new Rg,qb=new Ag;function Xb(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),og.call(this),this.type="Line",this.geometry=void 0!==t?t:new _v,this.material=void 0!==e?e:new jb({color:16777215*Math.random()})}Xb.prototype=Object.assign(Object.create(og.prototype),{constructor:Xb,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)Hb.fromBufferAttribute(e,i-1),Vb.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Hb.distanceTo(Vb);t.addAttribute("lineDistance",new lv(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var s=t.vertices;for((n=t.lineDistances)[0]=0,i=1,r=s.length;i<r;i++)n[i]=n[i-1],n[i]+=s[i-1].distanceTo(s[i])}return this},raycast:function(t,e){var n=t.linePrecision,i=this.geometry,r=this.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),qb.copy(i.boundingSphere),qb.applyMatrix4(r),qb.radius+=n,!1!==t.ray.intersectsSphere(qb)){Gb.getInverse(r),Wb.copy(t.ray).applyMatrix4(Gb);var s=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,a=new Sm,l=new Sm,c=new Sm,h=new Sm,u=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var d=i.index,p=i.attributes.position.array;if(null!==d)for(var f=d.array,m=0,g=f.length-1;m<g;m+=u){var v=f[m+1];a.fromArray(p,3*f[m]),l.fromArray(p,3*v),Wb.distanceSqToSegment(a,l,h,c)>o||(h.applyMatrix4(this.matrixWorld),(b=t.ray.origin.distanceTo(h))<t.near||b>t.far||e.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else for(m=0,g=p.length/3-1;m<g;m+=u)a.fromArray(p,3*m),l.fromArray(p,3*m+3),Wb.distanceSqToSegment(a,l,h,c)>o||(h.applyMatrix4(this.matrixWorld),(b=t.ray.origin.distanceTo(h))<t.near||b>t.far||e.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else if(i.isGeometry){var y=i.vertices,_=y.length;for(m=0;m<_-1;m+=u){var b;Wb.distanceSqToSegment(y[m],y[m+1],h,c)>o||(h.applyMatrix4(this.matrixWorld),(b=t.ray.origin.distanceTo(h))<t.near||b>t.far||e.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Yb=new Sm,Qb=new Sm;function Zb(t,e){Xb.call(this,t,e),this.type="LineSegments"}function Kb(t,e){Xb.call(this,t,e),this.type="LineLoop"}function Jb(t){Jg.call(this),this.type="PointsMaterial",this.color=new qg(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}Zb.prototype=Object.assign(Object.create(Xb.prototype),{constructor:Zb,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)Yb.fromBufferAttribute(e,i),Qb.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Yb.distanceTo(Qb);t.addAttribute("lineDistance",new lv(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var s=t.vertices;for(n=t.lineDistances,i=0,r=s.length;i<r;i+=2)Yb.copy(s[i]),Qb.copy(s[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Yb.distanceTo(Qb)}return this}}),Kb.prototype=Object.assign(Object.create(Xb.prototype),{constructor:Kb,isLineLoop:!0}),(Jb.prototype=Object.create(Jg.prototype)).constructor=Jb,Jb.prototype.isPointsMaterial=!0,Jb.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var $b=new Hm,tx=new Rg,ex=new Ag,nx=new Sm;function ix(t,e){og.call(this),this.type="Points",this.geometry=void 0!==t?t:new _v,this.material=void 0!==e?e:new Jb({color:16777215*Math.random()}),this.updateMorphTargets()}function rx(t,e,n,i,r,s,o){var a=tx.distanceSqToPoint(t);if(a<n){var l=new Sm;tx.closestPointToPoint(t,l),l.applyMatrix4(i);var c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}function sx(t,e,n,i,r,s,o,a,l){Rm.call(this,t,e,n,i,r,s,o,a,l),this.format=void 0!==o?o:Af,this.minFilter=void 0!==s?s:af,this.magFilter=void 0!==r?r:af,this.generateMipmaps=!1}function ox(t,e,n,i,r,s,o,a,l,c,h,u){Rm.call(this,null,s,o,a,l,c,i,r,h,u),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function ax(t,e,n,i,r,s,o,a,l){Rm.call(this,t,e,n,i,r,s,o,a,l),this.needsUpdate=!0}function lx(t,e,n,i,r,s,o,a,l,c){if((c=void 0!==c?c:Tf)!==Tf&&c!==Cf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Tf&&(n=pf),void 0===n&&c===Cf&&(n=xf),Rm.call(this,null,i,r,s,o,a,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:rf,this.minFilter=void 0!==a?a:rf,this.flipY=!1,this.generateMipmaps=!1}function cx(t){_v.call(this),this.type="WireframeGeometry";var e,n,i,r,s,o,a,l,c,h,u=[],d=[0,0],p={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,i=m.length;e<i;e++){var g=m[e];for(n=0;n<3;n++)a=g[f[n]],l=g[f[(n+1)%3]],d[0]=Math.min(a,l),d[1]=Math.max(a,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]})}for(c in p)u.push((h=t.vertices[(o=p[c]).index1]).x,h.y,h.z),u.push((h=t.vertices[o.index2]).x,h.y,h.z)}else if(t&&t.isBufferGeometry){var v,y,_,b,x;if(h=new Sm,null!==t.index){for(v=t.attributes.position,y=t.index,0===(_=t.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),r=0,s=_.length;r<s;++r)for(e=x=(b=_[r]).start,i=x+b.count;e<i;e+=3)for(n=0;n<3;n++)a=y.getX(e+n),l=y.getX(e+(n+1)%3),d[0]=Math.min(a,l),d[1]=Math.max(a,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]});for(c in p)h.fromBufferAttribute(v,(o=p[c]).index1),u.push(h.x,h.y,h.z),h.fromBufferAttribute(v,o.index2),u.push(h.x,h.y,h.z)}else for(e=0,i=(v=t.attributes.position).count/3;e<i;e++)for(n=0;n<3;n++)h.fromBufferAttribute(v,3*e+n),u.push(h.x,h.y,h.z),h.fromBufferAttribute(v,3*e+(n+1)%3),u.push(h.x,h.y,h.z)}this.addAttribute("position",new lv(u,3))}function hx(t,e,n){Gv.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new ux(t,e,n)),this.mergeVertices()}function ux(t,e,n){_v.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,s=[],o=[],a=[],l=[],c=new Sm,h=new Sm,u=new Sm,d=new Sm,p=new Sm;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=e+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=e;r++){var g=r/e;t(g,m,h),o.push(h.x,h.y,h.z),g-1e-5>=0?(t(g-1e-5,m,u),d.subVectors(h,u)):(t(g+1e-5,m,u),d.subVectors(u,h)),m-1e-5>=0?(t(g,m-1e-5,u),p.subVectors(h,u)):(t(g,m+1e-5,u),p.subVectors(u,h)),c.crossVectors(d,p).normalize(),a.push(c.x,c.y,c.z),l.push(g,m)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var v=i*f+r+1,y=(i+1)*f+r+1,_=(i+1)*f+r;s.push(i*f+r,v,_),s.push(v,y,_)}this.setIndex(s),this.addAttribute("position",new lv(o,3)),this.addAttribute("normal",new lv(a,3)),this.addAttribute("uv",new lv(l,2))}function dx(t,e,n,i){Gv.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new px(t,e,n,i)),this.mergeVertices()}function px(t,e,n,i){_v.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1;var r=[],s=[];function o(t,e,n,i){var r,s,o=Math.pow(2,i),l=[];for(r=0;r<=o;r++){l[r]=[];var c=t.clone().lerp(n,r/o),h=e.clone().lerp(n,r/o),u=o-r;for(s=0;s<=u;s++)l[r][s]=0===s&&r===o?c:c.clone().lerp(h,s/u)}for(r=0;r<o;r++)for(s=0;s<2*(o-r)-1;s++){var d=Math.floor(s/2);s%2==0?(a(l[r][d+1]),a(l[r+1][d]),a(l[r][d])):(a(l[r][d+1]),a(l[r+1][d+1]),a(l[r+1][d]))}}function a(t){r.push(t.x,t.y,t.z)}function l(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function c(t,e,n,i){i<0&&1===t.x&&(s[e]=t.x-1),0===n.x&&0===n.z&&(s[e]=i/2/Math.PI+.5)}function h(t){return Math.atan2(t.z,-t.x)}!function(t){for(var n=new Sm,i=new Sm,r=new Sm,s=0;s<e.length;s+=3)l(e[s+0],n),l(e[s+1],i),l(e[s+2],r),o(n,i,r,t)}(i=i||0),function(t){for(var e=new Sm,n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){for(var t=new Sm,e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];var n=h(t)/2/Math.PI+.5,i=(o=t,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);s.push(n,1-i)}var o;(function(){for(var t=new Sm,e=new Sm,n=new Sm,i=new Sm,o=new xm,a=new xm,l=new xm,u=0,d=0;u<r.length;u+=9,d+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),n.set(r[u+6],r[u+7],r[u+8]),o.set(s[d+0],s[d+1]),a.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),i.copy(t).add(e).add(n).divideScalar(3);var p=h(i);c(o,d+0,t,p),c(a,d+2,e,p),c(l,d+4,n,p)}})(),function(){for(var t=0;t<s.length;t+=6){var e=s[t+0],n=s[t+2],i=s[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(s[t+0]+=1),n<.2&&(s[t+2]+=1),i<.2&&(s[t+4]+=1))}}()}(),this.addAttribute("position",new lv(r,3)),this.addAttribute("normal",new lv(r.slice(),3)),this.addAttribute("uv",new lv(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function fx(t,e){Gv.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new mx(t,e)),this.mergeVertices()}function mx(t,e){px.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function gx(t,e){Gv.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new vx(t,e)),this.mergeVertices()}function vx(t,e){px.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function yx(t,e){Gv.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new _x(t,e)),this.mergeVertices()}function _x(t,e){var n=(1+Math.sqrt(5))/2;px.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function bx(t,e){Gv.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new xx(t,e)),this.mergeVertices()}function xx(t,e){var n=(1+Math.sqrt(5))/2,i=1/n;px.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function wx(t,e,n,i,r,s){Gv.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Ax(t,e,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Ax(t,e,n,i,r){_v.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},n=n||1,i=i||8;var s=t.computeFrenetFrames(e=e||64,r=r||!1);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var o,a,l=new Sm,c=new Sm,h=new xm,u=new Sm,d=[],p=[],f=[],m=[];function g(r){u=t.getPointAt(r/e,u);var o=s.normals[r],h=s.binormals[r];for(a=0;a<=i;a++){var f=a/i*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);c.x=g*o.x+m*h.x,c.y=g*o.y+m*h.y,c.z=g*o.z+m*h.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=u.x+n*c.x,l.y=u.y+n*c.y,l.z=u.z+n*c.z,d.push(l.x,l.y,l.z)}}!function(){for(o=0;o<e;o++)g(o);g(!1===r?e:0),function(){for(o=0;o<=e;o++)for(a=0;a<=i;a++)h.x=o/e,h.y=a/i,f.push(h.x,h.y)}(),function(){for(a=1;a<=e;a++)for(o=1;o<=i;o++){var t=(i+1)*a+(o-1),n=(i+1)*a+o,r=(i+1)*(a-1)+o;m.push((i+1)*(a-1)+(o-1),t,r),m.push(t,n,r)}}()}(),this.setIndex(m),this.addAttribute("position",new lv(d,3)),this.addAttribute("normal",new lv(p,3)),this.addAttribute("uv",new lv(f,2))}function Ex(t,e,n,i,r,s,o){Gv.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Sx(t,e,n,i,r,s)),this.mergeVertices()}function Sx(t,e,n,i,r,s){_v.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,s=s||3;var o,a,l=[],c=[],h=[],u=[],d=new Sm,p=new Sm,f=new Sm,m=new Sm,g=new Sm,v=new Sm,y=new Sm;for(o=0;o<=n;++o){var _=o/n*r*Math.PI*2;for(M(_,r,s,t,f),M(_+.01,r,s,t,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),a=0;a<=i;++a){var b=a/i*Math.PI*2,x=-e*Math.cos(b),w=e*Math.sin(b);d.x=f.x+(x*y.x+w*g.x),d.y=f.y+(x*y.y+w*g.y),d.z=f.z+(x*y.z+w*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),h.push(p.x,p.y,p.z),u.push(o/n),u.push(a/i)}}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var A=(i+1)*a+(o-1),E=(i+1)*a+o,S=(i+1)*(a-1)+o;l.push((i+1)*(a-1)+(o-1),A,S),l.push(A,E,S)}function M(t,e,n,i,r){var s=Math.cos(t),o=Math.sin(t),a=n/e*t,l=Math.cos(a);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(a)*.5}this.setIndex(l),this.addAttribute("position",new lv(c,3)),this.addAttribute("normal",new lv(h,3)),this.addAttribute("uv",new lv(u,2))}function Mx(t,e,n,i,r){Gv.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Tx(t,e,n,i,r)),this.mergeVertices()}function Tx(t,e,n,i,r){_v.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var s,o,a=[],l=[],c=[],h=[],u=new Sm,d=new Sm,p=new Sm;for(s=0;s<=n;s++)for(o=0;o<=i;o++){var f=o/i*r,m=s/n*Math.PI*2;d.x=(t+e*Math.cos(m))*Math.cos(f),d.y=(t+e*Math.cos(m))*Math.sin(f),d.z=e*Math.sin(m),l.push(d.x,d.y,d.z),u.x=t*Math.cos(f),u.y=t*Math.sin(f),p.subVectors(d,u).normalize(),c.push(p.x,p.y,p.z),h.push(o/i),h.push(s/n)}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var g=(i+1)*(s-1)+o-1,v=(i+1)*(s-1)+o,y=(i+1)*s+o;a.push((i+1)*s+o-1,g,y),a.push(g,v,y)}this.setIndex(a),this.addAttribute("position",new lv(l,3)),this.addAttribute("normal",new lv(c,3)),this.addAttribute("uv",new lv(h,2))}function Cx(t,e,n,i,r){var s,o;if(r===function(t,e,n,i){for(var r=0,s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}(t,e,n,i)>0)for(s=e;s<n;s+=i)o=qx(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=qx(s,t[s],t[s+1],o);return o&&Hx(o,o.next)&&(Xx(o),o=o.next),o}function Lx(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Hx(i,i.next)&&0!==jx(i.prev,i,i.next))i=i.next;else{if(Xx(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Px(t,e,n,i,r,s,o){if(t){!o&&s&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Bx(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1)}(r)}(t,i,r,s);for(var a,l,c=t;t.prev!==t.next;)if(a=t.prev,l=t.next,s?Ox(t,i,r,s):Rx(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),Xx(t),t=l.next,c=l.next;else if((t=l)===c){o?1===o?Px(t=Ix(t,e,n),e,n,i,r,s,2):2===o&&Dx(t,e,n,i,r,s):Px(Lx(t),e,n,i,r,s,1);break}}}function Rx(t){var e=t.prev,n=t,i=t.next;if(jx(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(zx(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&jx(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ox(t,e,n,i){var r=t.prev,s=t,o=t.next;if(jx(r,s,o)>=0)return!1;for(var a=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,l=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=Bx(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,n,i),h=Bx(a,l,e,n,i),u=t.prevZ,d=t.nextZ;u&&u.z>=c&&d&&d.z<=h;){if(u!==t.prev&&u!==t.next&&zx(r.x,r.y,s.x,s.y,o.x,o.y,u.x,u.y)&&jx(u.prev,u,u.next)>=0)return!1;if(u=u.prevZ,d!==t.prev&&d!==t.next&&zx(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&jx(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;u&&u.z>=c;){if(u!==t.prev&&u!==t.next&&zx(r.x,r.y,s.x,s.y,o.x,o.y,u.x,u.y)&&jx(u.prev,u,u.next)>=0)return!1;u=u.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&zx(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&jx(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Ix(t,e,n){var i=t;do{var r=i.prev,s=i.next.next;!Hx(r,s)&&Vx(r,i,i.next,s)&&Gx(r,s)&&Gx(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),Xx(i),Xx(i.next),i=t=s),i=i.next}while(i!==t);return i}function Dx(t,e,n,i,r,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Ux(o,a)){var l=Wx(o,a);return o=Lx(o,o.next),l=Lx(l,l.next),Px(o,e,n,i,r,s),void Px(l,e,n,i,r,s)}a=a.next}o=o.next}while(o!==t)}function kx(t,e){return t.x-e.x}function Nx(t,e){if(e=function(t,e){var n,i=e,r=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>o){if(o=a,a===r){if(s===i.y)return i;if(s===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n.prev;var l,c=n,h=n.x,u=n.y,d=1/0;for(i=n.next;i!==c;)r>=i.x&&i.x>=h&&r!==i.x&&zx(s<u?r:o,s,h,u,s<u?o:r,s,i.x,i.y)&&((l=Math.abs(s-i.y)/(r-i.x))<d||l===d&&i.x>n.x)&&Gx(i,t)&&(n=i,d=l),i=i.next;return n}(t,e)){var n=Wx(e,t);Lx(n,n.next)}}function Bx(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Fx(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function zx(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function Ux(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Vx(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Gx(t,e)&&Gx(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function jx(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Hx(t,e){return t.x===e.x&&t.y===e.y}function Vx(t,e,n,i){return!!(Hx(t,n)&&Hx(e,i)||Hx(t,i)&&Hx(n,e))||jx(t,e,n)>0!=jx(t,e,i)>0&&jx(n,i,t)>0!=jx(n,i,e)>0}function Gx(t,e){return jx(t.prev,t,t.next)<0?jx(t,e,t.next)>=0&&jx(t,t.prev,e)>=0:jx(t,e,t.prev)<0||jx(t,t.next,e)<0}function Wx(t,e){var n=new Yx(t.i,t.x,t.y),i=new Yx(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function qx(t,e,n,i){var r=new Yx(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Xx(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Yx(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}ix.prototype=Object.assign(Object.create(og.prototype),{constructor:ix,isPoints:!0,raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),ex.copy(n.boundingSphere),ex.applyMatrix4(i),ex.radius+=r,!1!==t.ray.intersectsSphere(ex)){$b.getInverse(i),tx.copy(t.ray).applyMatrix4($b);var s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s;if(n.isBufferGeometry){var a=n.index,l=n.attributes.position.array;if(null!==a)for(var c=a.array,h=0,u=c.length;h<u;h++){var d=c[h];nx.fromArray(l,3*d),rx(nx,d,o,i,t,e,this)}else{h=0;for(var p=l.length/3;h<p;h++)nx.fromArray(l,3*h),rx(nx,h,o,i,t,e,this)}}else{var f=n.vertices;for(h=0,p=f.length;h<p;h++)rx(f[h],h,o,i,t,e,this)}}},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,s=Object.keys(r);if(s.length>0){var o=r[s[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var a=i.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),sx.prototype=Object.assign(Object.create(Rm.prototype),{constructor:sx,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(ox.prototype=Object.create(Rm.prototype)).constructor=ox,ox.prototype.isCompressedTexture=!0,(ax.prototype=Object.create(Rm.prototype)).constructor=ax,ax.prototype.isCanvasTexture=!0,(lx.prototype=Object.create(Rm.prototype)).constructor=lx,lx.prototype.isDepthTexture=!0,(cx.prototype=Object.create(_v.prototype)).constructor=cx,(hx.prototype=Object.create(Gv.prototype)).constructor=hx,(ux.prototype=Object.create(_v.prototype)).constructor=ux,(dx.prototype=Object.create(Gv.prototype)).constructor=dx,(px.prototype=Object.create(_v.prototype)).constructor=px,(fx.prototype=Object.create(Gv.prototype)).constructor=fx,(mx.prototype=Object.create(px.prototype)).constructor=mx,(gx.prototype=Object.create(Gv.prototype)).constructor=gx,(vx.prototype=Object.create(px.prototype)).constructor=vx,(yx.prototype=Object.create(Gv.prototype)).constructor=yx,(_x.prototype=Object.create(px.prototype)).constructor=_x,(bx.prototype=Object.create(Gv.prototype)).constructor=bx,(xx.prototype=Object.create(px.prototype)).constructor=xx,(wx.prototype=Object.create(Gv.prototype)).constructor=wx,(Ax.prototype=Object.create(_v.prototype)).constructor=Ax,Ax.prototype.toJSON=function(){var t=_v.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},(Ex.prototype=Object.create(Gv.prototype)).constructor=Ex,(Sx.prototype=Object.create(_v.prototype)).constructor=Sx,(Mx.prototype=Object.create(Gv.prototype)).constructor=Mx,(Tx.prototype=Object.create(_v.prototype)).constructor=Tx;var Qx={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return Qx.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];Zx(t),Kx(n,t);var s=t.length;e.forEach(Zx);for(var o=0;o<e.length;o++)i.push(s),s+=e[o].length,Kx(n,e[o]);var a=function(t,e,n){n=n||2;var i,r,s,o,a,l,c,h=e&&e.length,u=h?e[0]*n:t.length,d=Cx(t,0,u,n,!0),p=[];if(!d||d.next===d.prev)return p;if(h&&(d=function(t,e,n,i){var r,s,o,a=[];for(r=0,s=e.length;r<s;r++)(o=Cx(t,e[r]*i,r<s-1?e[r+1]*i:t.length,i,!1))===o.next&&(o.steiner=!0),a.push(Fx(o));for(a.sort(kx),r=0;r<a.length;r++)Nx(a[r],n),n=Lx(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=s=t[0],r=o=t[1];for(var f=n;f<u;f+=n)(a=t[f])<i&&(i=a),(l=t[f+1])<r&&(r=l),a>s&&(s=a),l>o&&(o=l);c=0!==(c=Math.max(s-i,o-r))?1/c:0}return Px(d,p,n,i,r,c),p}(n,i);for(o=0;o<a.length;o+=3)r.push(a.slice(o,o+3));return r}};function Zx(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Kx(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Jx(t,e){Gv.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new $x(t,e)),this.mergeVertices()}function $x(t,e){_v.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,i=[],r=[],s=0,o=t.length;s<o;s++)a(t[s]);function a(t){var s=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,h=void 0!==e.bevelThickness?e.bevelThickness:6,u=void 0!==e.bevelSize?e.bevelSize:h-2,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3,f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:tw;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);var g,v,y,_,b,x,w,A,E=!1;f&&(g=f.getSpacedPoints(a),E=!0,c=!1,v=f.computeFrenetFrames(a,!1),y=new Sm,_=new Sm,b=new Sm),c||(p=0,h=0,u=0,d=0);var S=t.extractPoints(o),M=S.shape,T=S.holes;if(!Qx.isClockWise(M))for(M=M.reverse(),w=0,A=T.length;w<A;w++)Qx.isClockWise(x=T[w])&&(T[w]=x.reverse());var C=Qx.triangulateShape(M,T),L=M;for(w=0,A=T.length;w<A;w++)M=M.concat(x=T[w]);function P(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var R,O,I,D,k,N,B=M.length,F=C.length;function z(t,e,n){var i,r,s,o=t.x-e.x,a=t.y-e.y,l=n.x-t.x,c=n.y-t.y,h=o*o+a*a;if(Math.abs(o*c-a*l)>Number.EPSILON){var u=Math.sqrt(h),d=Math.sqrt(l*l+c*c),p=e.x-a/u,f=e.y+o/u,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(o*c-a*l),g=(i=p+o*m-t.x)*i+(r=f+a*m-t.y)*r;if(g<=2)return new xm(i,r);s=Math.sqrt(g/2)}else{var v=!1;o>Number.EPSILON?l>Number.EPSILON&&(v=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(v=!0):Math.sign(a)===Math.sign(c)&&(v=!0),v?(i=-a,r=o,s=Math.sqrt(h)):(i=o,r=a,s=Math.sqrt(h/2))}return new xm(i/s,r/s)}for(var U=[],j=0,H=L.length,V=H-1,G=j+1;j<H;j++,V++,G++)V===H&&(V=0),G===H&&(G=0),U[j]=z(L[j],L[V],L[G]);var W,q,X=[],Y=U.concat();for(w=0,A=T.length;w<A;w++){for(W=[],V=(H=(x=T[w]).length)-1,G=1+(j=0);j<H;j++,V++,G++)V===H&&(V=0),G===H&&(G=0),W[j]=z(x[j],x[V],x[G]);X.push(W),Y=Y.concat(W)}for(R=0;R<p;R++){for(I=R/p,D=h*Math.cos(I*Math.PI/2),O=u*Math.sin(I*Math.PI/2)+d,j=0,H=L.length;j<H;j++)Z((k=P(L[j],U[j],O)).x,k.y,-D);for(w=0,A=T.length;w<A;w++)for(W=X[w],j=0,H=(x=T[w]).length;j<H;j++)Z((k=P(x[j],W[j],O)).x,k.y,-D)}for(O=u+d,j=0;j<B;j++)k=c?P(M[j],Y[j],O):M[j],E?(_.copy(v.normals[0]).multiplyScalar(k.x),y.copy(v.binormals[0]).multiplyScalar(k.y),b.copy(g[0]).add(_).add(y),Z(b.x,b.y,b.z)):Z(k.x,k.y,0);for(q=1;q<=a;q++)for(j=0;j<B;j++)k=c?P(M[j],Y[j],O):M[j],E?(_.copy(v.normals[q]).multiplyScalar(k.x),y.copy(v.binormals[q]).multiplyScalar(k.y),b.copy(g[q]).add(_).add(y),Z(b.x,b.y,b.z)):Z(k.x,k.y,l/a*q);for(R=p-1;R>=0;R--){for(I=R/p,D=h*Math.cos(I*Math.PI/2),O=u*Math.sin(I*Math.PI/2)+d,j=0,H=L.length;j<H;j++)Z((k=P(L[j],U[j],O)).x,k.y,l+D);for(w=0,A=T.length;w<A;w++)for(W=X[w],j=0,H=(x=T[w]).length;j<H;j++)k=P(x[j],W[j],O),E?Z(k.x,k.y+g[a-1].y,g[a-1].x+D):Z(k.x,k.y,l+D)}function Q(t,e){var n,i;for(j=t.length;--j>=0;){n=j,(i=j-1)<0&&(i=t.length-1);var r=0,s=a+2*p;for(r=0;r<s;r++){var o=B*r,l=B*(r+1);J(e+n+o,e+i+o,e+i+l,e+n+l)}}}function Z(t,e,n){s.push(t),s.push(e),s.push(n)}function K(t,e,r){$(t),$(e),$(r);var s=i.length/3,o=m.generateTopUV(n,i,s-3,s-2,s-1);tt(o[0]),tt(o[1]),tt(o[2])}function J(t,e,r,s){$(t),$(e),$(s),$(e),$(r),$(s);var o=i.length/3,a=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);tt(a[0]),tt(a[1]),tt(a[3]),tt(a[1]),tt(a[2]),tt(a[3])}function $(t){i.push(s[3*t+0]),i.push(s[3*t+1]),i.push(s[3*t+2])}function tt(t){r.push(t.x),r.push(t.y)}!function(){var t=i.length/3;if(c){var e=0,r=B*e;for(j=0;j<F;j++)K((N=C[j])[2]+r,N[1]+r,N[0]+r);for(r=B*(e=a+2*p),j=0;j<F;j++)K((N=C[j])[0]+r,N[1]+r,N[2]+r)}else{for(j=0;j<F;j++)K((N=C[j])[2],N[1],N[0]);for(j=0;j<F;j++)K((N=C[j])[0]+B*a,N[1]+B*a,N[2]+B*a)}n.addGroup(t,i.length/3-t,0)}(),function(){var t=i.length/3,e=0;for(Q(L,e),e+=L.length,w=0,A=T.length;w<A;w++)Q(x=T[w],e),e+=x.length;n.addGroup(t,i.length/3-t,1)}()}this.addAttribute("position",new lv(i,3)),this.addAttribute("uv",new lv(r,2)),this.computeVertexNormals()}(Jx.prototype=Object.create(Gv.prototype)).constructor=Jx,Jx.prototype.toJSON=function(){var t=Gv.prototype.toJSON.call(this);return ew(this.parameters.shapes,this.parameters.options,t)},($x.prototype=Object.create(_v.prototype)).constructor=$x,$x.prototype.toJSON=function(){var t=_v.prototype.toJSON.call(this);return ew(this.parameters.shapes,this.parameters.options,t)};var tw={generateTopUV:function(t,e,n,i,r){var s=e[3*i],o=e[3*i+1],a=e[3*r],l=e[3*r+1];return[new xm(e[3*n],e[3*n+1]),new xm(s,o),new xm(a,l)]},generateSideWallUV:function(t,e,n,i,r,s){var o=e[3*n],a=e[3*n+1],l=e[3*n+2],c=e[3*i],h=e[3*i+1],u=e[3*i+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*s],g=e[3*s+1],v=e[3*s+2];return Math.abs(a-h)<.01?[new xm(o,1-l),new xm(c,1-u),new xm(d,1-f),new xm(m,1-v)]:[new xm(a,1-l),new xm(h,1-u),new xm(p,1-f),new xm(g,1-v)]}};function ew(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++)n.shapes.push(t[i].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function nw(t,e){Gv.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new iw(t,e)),this.mergeVertices()}function iw(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Gv;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),$x.call(this,i,e),this.type="TextBufferGeometry"}function rw(t,e,n,i,r,s,o){Gv.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new sw(t,e,n,i,r,s,o)),this.mergeVertices()}function sw(t,e,n,i,r,s,o){_v.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,s=void 0!==s?s:0,o=void 0!==o?o:Math.PI;var a,l,c=Math.min(s+o,Math.PI),h=0,u=[],d=new Sm,p=new Sm,f=[],m=[],g=[],v=[];for(l=0;l<=n;l++){var y=[],_=l/n,b=0;for(0==l&&0==s?b=.5/e:l==n&&c==Math.PI&&(b=-.5/e),a=0;a<=e;a++){var x=a/e;d.x=-t*Math.cos(i+x*r)*Math.sin(s+_*o),d.y=t*Math.cos(s+_*o),d.z=t*Math.sin(i+x*r)*Math.sin(s+_*o),m.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),v.push(x+b,1-_),y.push(h++)}u.push(y)}for(l=0;l<n;l++)for(a=0;a<e;a++){var w=u[l][a],A=u[l+1][a],E=u[l+1][a+1];(0!==l||s>0)&&f.push(u[l][a+1],w,E),(l!==n-1||c<Math.PI)&&f.push(w,A,E)}this.setIndex(f),this.addAttribute("position",new lv(m,3)),this.addAttribute("normal",new lv(g,3)),this.addAttribute("uv",new lv(v,2))}function ow(t,e,n,i,r,s){Gv.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},this.fromBufferGeometry(new aw(t,e,n,i,r,s)),this.mergeVertices()}function aw(t,e,n,i,r,s){_v.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},t=t||.5,e=e||1,r=void 0!==r?r:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,a,l,c=[],h=[],u=[],d=[],p=t,f=(e-t)/(i=void 0!==i?Math.max(1,i):1),m=new Sm,g=new xm;for(a=0;a<=i;a++){for(l=0;l<=n;l++)o=r+l/n*s,m.x=p*Math.cos(o),m.y=p*Math.sin(o),h.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/e+1)/2,g.y=(m.y/e+1)/2,d.push(g.x,g.y);p+=f}for(a=0;a<i;a++){var v=a*(n+1);for(l=0;l<n;l++){var y=(o=l+v)+n+1,_=o+n+2,b=o+1;c.push(o,y,b),c.push(y,_,b)}}this.setIndex(c),this.addAttribute("position",new lv(h,3)),this.addAttribute("normal",new lv(u,3)),this.addAttribute("uv",new lv(d,2))}function lw(t,e,n,i){Gv.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new cw(t,e,n,i)),this.mergeVertices()}function cw(t,e,n,i){_v.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=bm.clamp(i,0,2*Math.PI);var r,s,o,a=[],l=[],c=[],h=1/e,u=new Sm,d=new xm;for(s=0;s<=e;s++){var p=n+s*h*i,f=Math.sin(p),m=Math.cos(p);for(o=0;o<=t.length-1;o++)u.x=t[o].x*f,u.y=t[o].y,u.z=t[o].x*m,l.push(u.x,u.y,u.z),d.x=s/e,d.y=o/(t.length-1),c.push(d.x,d.y)}for(s=0;s<e;s++)for(o=0;o<t.length-1;o++){var g=(r=o+s*t.length)+t.length,v=r+t.length+1,y=r+1;a.push(r,g,y),a.push(g,v,y)}if(this.setIndex(a),this.addAttribute("position",new lv(l,3)),this.addAttribute("uv",new lv(c,2)),this.computeVertexNormals(),i===2*Math.PI){var _=this.attributes.normal.array,b=new Sm,x=new Sm,w=new Sm;for(r=e*t.length*3,s=0,o=0;s<t.length;s++,o+=3)b.x=_[o+0],b.y=_[o+1],b.z=_[o+2],x.x=_[r+o+0],x.y=_[r+o+1],x.z=_[r+o+2],w.addVectors(b,x).normalize(),_[o+0]=_[r+o+0]=w.x,_[o+1]=_[r+o+1]=w.y,_[o+2]=_[r+o+2]=w.z}}function hw(t,e){Gv.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new uw(t,e)),this.mergeVertices()}function uw(t,e){_v.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],i=[],r=[],s=[],o=0,a=0;if(!1===Array.isArray(t))c(t);else for(var l=0;l<t.length;l++)c(t[l]),this.addGroup(o,a,l),o+=a,a=0;function c(t){var o,l,c,h=i.length/3,u=t.extractPoints(e),d=u.shape,p=u.holes;for(!1===Qx.isClockWise(d)&&(d=d.reverse()),o=0,l=p.length;o<l;o++)!0===Qx.isClockWise(c=p[o])&&(p[o]=c.reverse());var f=Qx.triangulateShape(d,p);for(o=0,l=p.length;o<l;o++)d=d.concat(c=p[o]);for(o=0,l=d.length;o<l;o++){var m=d[o];i.push(m.x,m.y,0),r.push(0,0,1),s.push(m.x,m.y)}for(o=0,l=f.length;o<l;o++){var g=f[o];n.push(g[0]+h,g[1]+h,g[2]+h),a+=3}}this.setIndex(n),this.addAttribute("position",new lv(i,3)),this.addAttribute("normal",new lv(r,3)),this.addAttribute("uv",new lv(s,2))}function dw(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}function pw(t,e){_v.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,s,o=[],a=Math.cos(bm.DEG2RAD*e),l=[0,0],c={},h=["a","b","c"];t.isBufferGeometry?(s=new Gv).fromBufferGeometry(t):s=t.clone(),s.mergeVertices(),s.computeFaceNormals();for(var u=s.vertices,d=s.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],g=0;g<3;g++)n=m[h[g]],i=m[h[(g+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===c[r=l[0]+","+l[1]]?c[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var v=c[r];if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=a){var y=u[v.index1];o.push(y.x,y.y,y.z),o.push((y=u[v.index2]).x,y.y,y.z)}}this.addAttribute("position",new lv(o,3))}function fw(t,e,n,i,r,s,o,a){Gv.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new mw(t,e,n,i,r,s,o,a)),this.mergeVertices()}function mw(t,e,n,i,r,s,o,a){_v.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};var l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,s=void 0!==s&&s,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI;var c=[],h=[],u=[],d=[],p=0,f=[],m=n/2,g=0;function v(n){var r,s,f,v=new xm,y=new Sm,_=0,b=!0===n?t:e,x=!0===n?1:-1;for(s=p,r=1;r<=i;r++)h.push(0,m*x,0),u.push(0,x,0),d.push(.5,.5),p++;for(f=p,r=0;r<=i;r++){var w=r/i*a+o,A=Math.cos(w),E=Math.sin(w);y.x=b*E,y.y=m*x,y.z=b*A,h.push(y.x,y.y,y.z),u.push(0,x,0),v.x=.5*A+.5,v.y=.5*E*x+.5,d.push(v.x,v.y),p++}for(r=0;r<i;r++){var S=s+r,M=f+r;!0===n?c.push(M,M+1,S):c.push(M+1,M,S),_+=3}l.addGroup(g,_,!0===n?1:2),g+=_}!function(){var s,v,y=new Sm,_=new Sm,b=0,x=(e-t)/n;for(v=0;v<=r;v++){var w=[],A=v/r,E=A*(e-t)+t;for(s=0;s<=i;s++){var S=s/i,M=S*a+o,T=Math.sin(M),C=Math.cos(M);_.x=E*T,_.y=-A*n+m,_.z=E*C,h.push(_.x,_.y,_.z),y.set(T,x,C).normalize(),u.push(y.x,y.y,y.z),d.push(S,1-A),w.push(p++)}f.push(w)}for(s=0;s<i;s++)for(v=0;v<r;v++){var L=f[v+1][s],P=f[v+1][s+1],R=f[v][s+1];c.push(f[v][s],L,R),c.push(L,P,R),b+=6}l.addGroup(g,b,0),g+=b}(),!1===s&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(c),this.addAttribute("position",new lv(h,3)),this.addAttribute("normal",new lv(u,3)),this.addAttribute("uv",new lv(d,2))}function gw(t,e,n,i,r,s,o){fw.call(this,0,t,e,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}function vw(t,e,n,i,r,s,o){mw.call(this,0,t,e,n,i,r,s,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}function yw(t,e,n,i){Gv.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new _w(t,e,n,i)),this.mergeVertices()}function _w(t,e,n,i){_v.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,s,o=[],a=[],l=[],c=[],h=new Sm,u=new xm;for(a.push(0,0,0),l.push(0,0,1),c.push(.5,.5),s=0,r=3;s<=e;s++,r+=3){var d=n+s/e*i;h.x=t*Math.cos(d),h.y=t*Math.sin(d),a.push(h.x,h.y,h.z),l.push(0,0,1),u.x=(a[r]/t+1)/2,u.y=(a[r+1]/t+1)/2,c.push(u.x,u.y)}for(r=1;r<=e;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new lv(a,3)),this.addAttribute("normal",new lv(l,3)),this.addAttribute("uv",new lv(c,2))}(nw.prototype=Object.create(Gv.prototype)).constructor=nw,(iw.prototype=Object.create($x.prototype)).constructor=iw,(rw.prototype=Object.create(Gv.prototype)).constructor=rw,(sw.prototype=Object.create(_v.prototype)).constructor=sw,(ow.prototype=Object.create(Gv.prototype)).constructor=ow,(aw.prototype=Object.create(_v.prototype)).constructor=aw,(lw.prototype=Object.create(Gv.prototype)).constructor=lw,(cw.prototype=Object.create(_v.prototype)).constructor=cw,(hw.prototype=Object.create(Gv.prototype)).constructor=hw,hw.prototype.toJSON=function(){var t=Gv.prototype.toJSON.call(this);return dw(this.parameters.shapes,t)},(uw.prototype=Object.create(_v.prototype)).constructor=uw,uw.prototype.toJSON=function(){var t=_v.prototype.toJSON.call(this);return dw(this.parameters.shapes,t)},(pw.prototype=Object.create(_v.prototype)).constructor=pw,(fw.prototype=Object.create(Gv.prototype)).constructor=fw,(mw.prototype=Object.create(_v.prototype)).constructor=mw,(gw.prototype=Object.create(fw.prototype)).constructor=gw,(vw.prototype=Object.create(mw.prototype)).constructor=vw,(yw.prototype=Object.create(Gv.prototype)).constructor=yw,(_w.prototype=Object.create(_v.prototype)).constructor=_w;var bw=Object.freeze({WireframeGeometry:cx,ParametricGeometry:hx,ParametricBufferGeometry:ux,TetrahedronGeometry:fx,TetrahedronBufferGeometry:mx,OctahedronGeometry:gx,OctahedronBufferGeometry:vx,IcosahedronGeometry:yx,IcosahedronBufferGeometry:_x,DodecahedronGeometry:bx,DodecahedronBufferGeometry:xx,PolyhedronGeometry:dx,PolyhedronBufferGeometry:px,TubeGeometry:wx,TubeBufferGeometry:Ax,TorusKnotGeometry:Ex,TorusKnotBufferGeometry:Sx,TorusGeometry:Mx,TorusBufferGeometry:Tx,TextGeometry:nw,TextBufferGeometry:iw,SphereGeometry:rw,SphereBufferGeometry:sw,RingGeometry:ow,RingBufferGeometry:aw,PlaneGeometry:vy,PlaneBufferGeometry:yy,LatheGeometry:lw,LatheBufferGeometry:cw,ShapeGeometry:hw,ShapeBufferGeometry:uw,ExtrudeGeometry:Jx,ExtrudeBufferGeometry:$x,EdgesGeometry:pw,ConeGeometry:gw,ConeBufferGeometry:vw,CylinderGeometry:fw,CylinderBufferGeometry:mw,CircleGeometry:yw,CircleBufferGeometry:_w,BoxGeometry:Wv,BoxBufferGeometry:qv});function xw(t){Jg.call(this),this.type="ShadowMaterial",this.color=new qg(0),this.transparent=!0,this.setValues(t)}function ww(t){Kv.call(this,t),this.type="RawShaderMaterial"}function Aw(t){Jg.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qg(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fm,this.normalScale=new xm(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ew(t){Aw.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new xm(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}function Sw(t){Jg.call(this),this.type="MeshPhongMaterial",this.color=new qg(16777215),this.specular=new qg(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fm,this.normalScale=new xm(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Mw(t){Sw.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Tw(t){Jg.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fm,this.normalScale=new xm(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Cw(t){Jg.call(this),this.type="MeshLambertMaterial",this.color=new qg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Lw(t){Jg.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new qg(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fm,this.normalScale=new xm(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function Pw(t){jb.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}(xw.prototype=Object.create(Jg.prototype)).constructor=xw,xw.prototype.isShadowMaterial=!0,xw.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.color.copy(t.color),this},(ww.prototype=Object.create(Kv.prototype)).constructor=ww,ww.prototype.isRawShaderMaterial=!0,(Aw.prototype=Object.create(Jg.prototype)).constructor=Aw,Aw.prototype.isMeshStandardMaterial=!0,Aw.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Ew.prototype=Object.create(Aw.prototype)).constructor=Ew,Ew.prototype.isMeshPhysicalMaterial=!0,Ew.prototype.copy=function(t){return Aw.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,this.sheen=t.sheen?(this.sheen||new qg).copy(t.sheen):null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this},(Sw.prototype=Object.create(Jg.prototype)).constructor=Sw,Sw.prototype.isMeshPhongMaterial=!0,Sw.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Mw.prototype=Object.create(Sw.prototype)).constructor=Mw,Mw.prototype.isMeshToonMaterial=!0,Mw.prototype.copy=function(t){return Sw.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},(Tw.prototype=Object.create(Jg.prototype)).constructor=Tw,Tw.prototype.isMeshNormalMaterial=!0,Tw.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Cw.prototype=Object.create(Jg.prototype)).constructor=Cw,Cw.prototype.isMeshLambertMaterial=!0,Cw.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Lw.prototype=Object.create(Jg.prototype)).constructor=Lw,Lw.prototype.isMeshMatcapMaterial=!0,Lw.prototype.copy=function(t){return Jg.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Pw.prototype=Object.create(jb.prototype)).constructor=Pw,Pw.prototype.isLineDashedMaterial=!0,Pw.prototype.copy=function(t){return jb.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Rw=Object.freeze({ShadowMaterial:xw,SpriteMaterial:yb,RawShaderMaterial:ww,ShaderMaterial:Kv,PointsMaterial:Jb,MeshPhysicalMaterial:Ew,MeshStandardMaterial:Aw,MeshPhongMaterial:Sw,MeshToonMaterial:Mw,MeshNormalMaterial:Tw,MeshLambertMaterial:Cw,MeshDepthMaterial:K_,MeshDistanceMaterial:J_,MeshBasicMaterial:$g,MeshMatcapMaterial:Lw,LineDashedMaterial:Pw,LineBasicMaterial:jb,Material:Jg}),Ow={arraySlice:function(t,e,n){return Ow.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),s=0,o=0;o!==i;++s)for(var a=n[s]*e,l=0;l!==e;++l)r[o++]=t[a+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,s=t[0];void 0!==s&&void 0===s[i];)s=t[r++];if(void 0!==s){var o=s[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=s[i])&&(e.push(s.time),n.push.apply(n,o)),s=t[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{void 0!==(o=s[i])&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{void 0!==(o=s[i])&&(e.push(s.time),n.push(o)),s=t[r++]}while(void 0!==s)}}};function Iw(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Dw(t,e,n,i){Iw.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function kw(t,e,n,i){Iw.call(this,t,e,n,i)}function Nw(t,e,n,i){Iw.call(this,t,e,n,i)}function Bw(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ow.convertArray(e,this.TimeBufferType),this.values=Ow.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Fw(t,e,n){Bw.call(this,t,e,n)}function zw(t,e,n,i){Bw.call(this,t,e,n,i)}function Uw(t,e,n,i){Bw.call(this,t,e,n,i)}function jw(t,e,n,i){Iw.call(this,t,e,n,i)}function Hw(t,e,n,i){Bw.call(this,t,e,n,i)}function Vw(t,e,n,i){Bw.call(this,t,e,n,i)}function Gw(t,e,n,i){Bw.call(this,t,e,n,i)}function Ww(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=bm.generateUUID(),this.duration<0&&this.resetDuration()}function qw(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Uw;case"vector":case"vector2":case"vector3":case"vector4":return Gw;case"color":return zw;case"quaternion":return Hw;case"bool":case"boolean":return Fw;case"string":return Vw}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],i=[];Ow.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Iw.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var s;n:{i:if(!(t<i)){for(var o=n+2;;){if(void 0===i){if(t<r)break i;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,t<(i=e[++n]))break e}s=e.length;break n}if(t>=r)break t;var a=e[1];for(t<a&&(n=2,r=a),o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=r,t>=(r=e[--n-1]))break e}s=n,n=0}for(;n<s;){var l=n+s>>>1;t<e[l]?s=l:n=l+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,s=0;s!==i;++s)e[s]=n[r+s];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Iw.prototype,{beforeStart_:Iw.prototype.copySampleValue_,afterEnd_:Iw.prototype.copySampleValue_}),Dw.prototype=Object.assign(Object.create(Iw.prototype),{constructor:Dw,DefaultSettings_:{endingStart:tm,endingEnd:tm},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,s=t+1,o=i[r],a=i[s];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-n;break;case 2402:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:s=t,a=2*n-e;break;case 2402:s=1,a=n+i[1]-i[0];break;default:s=t-1,a=e}var l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=s*c},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f,b=0;b!==o;++b)r[b]=g*s[c+b]+v*s[l+b]+y*s[a+b]+_*s[h+b];return r}}),kw.prototype=Object.assign(Object.create(Iw.prototype),{constructor:kw,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=(n-e)/(i-e),h=1-c,u=0;u!==o;++u)r[u]=s[l+u]*h+s[a+u]*c;return r}}),Nw.prototype=Object.assign(Object.create(Iw.prototype),{constructor:Nw,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Bw,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Ow.convertArray(t.times,Array),values:Ow.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(Bw.prototype,{constructor:Bw,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Nw(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new kw(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Dw(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,s=i-1;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==r||s!==i){r>=s&&(r=(s=Math.max(s,1))-1);var o=this.getValueSize();this.times=Ow.arraySlice(n,r,s),this.values=Ow.arraySlice(this.values,r*o,s*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var s=null,o=0;o!==r;o++){var a=n[o];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),t=!1;break}if(null!==s&&s>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,s),t=!1;break}s=a}if(void 0!==i&&Ow.isTypedArray(i)){o=0;for(var l=i.length;o!==l;++o){var c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,s=t.length-1,o=1;o<s;++o){var a=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(i)a=!0;else for(var c=o*n,h=c-n,u=c+n,d=0;d!==n;++d){var p=e[c+d];if(p!==e[h+d]||p!==e[u+d]){a=!0;break}}if(a){if(o!==r){t[r]=t[o];var f=o*n,m=r*n;for(d=0;d!==n;++d)e[m+d]=e[f+d]}++r}}if(s>0){for(t[r]=t[s],f=s*n,m=r*n,d=0;d!==n;++d)e[m+d]=e[f+d];++r}return r!==t.length&&(this.times=Ow.arraySlice(t,0,r),this.values=Ow.arraySlice(e,0,r*n)),this},clone:function(){var t=Ow.arraySlice(this.times,0),e=Ow.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),Fw.prototype=Object.assign(Object.create(Bw.prototype),{constructor:Fw,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),zw.prototype=Object.assign(Object.create(Bw.prototype),{constructor:zw,ValueTypeName:"color"}),Uw.prototype=Object.assign(Object.create(Bw.prototype),{constructor:Uw,ValueTypeName:"number"}),jw.prototype=Object.assign(Object.create(Iw.prototype),{constructor:jw,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=(n-e)/(i-e),c=a+o;a!==c;a+=4)wm.slerpFlat(r,0,s,a-o,s,a,l);return r}}),Hw.prototype=Object.assign(Object.create(Bw.prototype),{constructor:Hw,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new jw(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Vw.prototype=Object.assign(Object.create(Bw.prototype),{constructor:Vw,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Gw.prototype=Object.assign(Object.create(Bw.prototype),{constructor:Gw,ValueTypeName:"vector"}),Object.assign(Ww,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,s=n.length;r!==s;++r)e.push(qw(n[r]).scale(i));return new Ww(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},r=0,s=n.length;r!==s;++r)e.push(Bw.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,s=[],o=0;o<r;o++){var a=[],l=[];a.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var c=Ow.getKeyframeOrder(a);a=Ow.sortedArray(a,1,c),l=Ow.sortedArray(l,1,c),i||0!==a[0]||(a.push(r),l.push(l[0])),s.push(new Uw(".morphTargetInfluences["+e[o].name+"]",a,l).scale(1/n))}return new Ww(t,-1,s)},findByName:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,s=0,o=t.length;s<o;s++){var a=t[s],l=a.name.match(r);if(l&&l.length>1){var c=i[u=l[1]];c||(i[u]=c=[]),c.push(a)}}var h=[];for(var u in i)h.push(Ww.CreateFromMorphTargetSequence(u,i[u],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var s=[],o=[];Ow.flattenJSON(n,s,o,i),0!==s.length&&r.push(new t(e,s,o))}},i=[],r=t.name||"default",s=t.length||-1,o=t.fps||30,a=t.hierarchy||[],l=0;l<a.length;l++){var c=a[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h={},u=0;u<c.length;u++)if(c[u].morphTargets)for(var d=0;d<c[u].morphTargets.length;d++)h[c[u].morphTargets[d]]=-1;for(var p in h){var f=[],m=[];for(d=0;d!==c[u].morphTargets.length;++d){var g=c[u];f.push(g.time),m.push(g.morphTarget===p?1:0)}i.push(new Uw(".morphTargetInfluence["+p+"]",f,m))}s=h.length*(o||1)}else{var v=".bones["+e[l].name+"]";n(Gw,v+".position",c,"pos",i),n(Hw,v+".quaternion",c,"rot",i),n(Gw,v+".scale",c,"scl",i)}}return 0===i.length?null:new Ww(r,s,i)}}),Object.assign(Ww.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Ww(this.name,this.duration,t)}});var Xw={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Yw(t,e,n){var i=this,r=!1,s=0,o=0,a=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,s,o),r=!0},this.itemEnd=function(t){s++,void 0!==i.onProgress&&i.onProgress(t,s,o),s===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this}}var Qw=new Yw;function Zw(t){this.manager=void 0!==t?t:Qw,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Zw.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}}),Zw.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n+1];if(e[n].test(t))return r}return null}};var Kw={};function Jw(t){Zw.call(this,t)}function $w(t){Zw.call(this,t)}function tA(t){Zw.call(this,t),this._parser=null}function eA(t){Zw.call(this,t),this._parser=null}function nA(t){Zw.call(this,t)}function iA(t){Zw.call(this,t)}function rA(t){Zw.call(this,t)}function sA(){this.type="Curve",this.arcLengthDivisions=200}function oA(t,e,n,i,r,s,o,a){sA.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=o||!1,this.aRotation=a||0}function aA(t,e,n,i,r,s){oA.call(this,t,e,n,n,i,r,s),this.type="ArcCurve"}function lA(){var t=0,e=0,n=0,i=0;function r(r,s,o,a){t=r,e=o,n=-3*r+3*s-2*o-a,i=2*r-2*s+o+a}return{initCatmullRom:function(t,e,n,i,s){r(e,n,s*(n-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,s,o,a){var l=(e-t)/s-(n-t)/(s+o)+(n-e)/o,c=(n-e)/o-(i-e)/(o+a)+(i-n)/a;r(e,n,l*=o,c*=o)},calc:function(r){var s=r*r;return t+e*r+n*s+i*(s*r)}}}Jw.prototype=Object.assign(Object.create(Zw.prototype),{constructor:Jw,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,s=Xw.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;if(void 0===Kw[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var a=o[1],l=!!o[2],c=o[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var h,u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);h="blob"===u?new Blob([d.buffer],{type:a}):d.buffer;break;case"document":var f=new DOMParser;h=f.parseFromString(c,a);break;case"json":h=JSON.parse(c);break;default:h=c}setTimeout(function(){e&&e(h),r.manager.itemEnd(t)},0)}catch(v){setTimeout(function(){i&&i(v),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{Kw[t]=[],Kw[t].push({onLoad:e,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",t,!0),m.addEventListener("load",function(e){var n=this.response;Xw.add(t,n);var i=Kw[t];if(delete Kw[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var s=0,o=i.length;s<o;s++)(a=i[s]).onLoad&&a.onLoad(n);r.manager.itemEnd(t)}else{for(s=0,o=i.length;s<o;s++){var a;(a=i[s]).onError&&a.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),m.addEventListener("progress",function(e){for(var n=Kw[t],i=0,r=n.length;i<r;i++){var s=n[i];s.onProgress&&s.onProgress(e)}},!1),m.addEventListener("error",function(e){var n=Kw[t];delete Kw[t];for(var i=0,s=n.length;i<s;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),m.addEventListener("abort",function(e){var n=Kw[t];delete Kw[t];for(var i=0,s=n.length;i<s;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(t),m}Kw[t].push({onLoad:e,onProgress:n,onError:i})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),$w.prototype=Object.assign(Object.create(Zw.prototype),{constructor:$w,load:function(t,e,n,i){var r=this,s=new Jw(r.manager);s.setPath(r.path),s.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=Ww.parse(t[n]);e.push(i)}return e}}),tA.prototype=Object.assign(Object.create(Zw.prototype),{constructor:tA,load:function(t,e,n,i){var r=this,s=[],o=new ox;o.image=s;var a=new Jw(this.manager);function l(l){a.load(t[l],function(t){var n=r._parser(t,!0);s[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(o.minFilter=af),o.format=n.format,o.needsUpdate=!0,e&&e(o))},n,i)}if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,h=0,u=t.length;h<u;++h)l(h);else a.load(t,function(t){var n=r._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,a=0;a<i;a++){s[a]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)s[a].mipmaps.push(n.mipmaps[a*n.mipmapCount+l]),s[a].format=n.format,s[a].width=n.width,s[a].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=af),o.format=n.format,o.needsUpdate=!0,e&&e(o)},n,i);return o}}),eA.prototype=Object.assign(Object.create(Zw.prototype),{constructor:eA,load:function(t,e,n,i){var r=this,s=new ry,o=new Jw(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,function(t){var n=r._parser(t);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:ef,s.wrapT=void 0!==n.wrapT?n.wrapT:ef,s.magFilter=void 0!==n.magFilter?n.magFilter:af,s.minFilter=void 0!==n.minFilter?n.minFilter:cf,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps),1===n.mipmapCount&&(s.minFilter=af),s.needsUpdate=!0,e&&e(s,n))},n,i),s}}),nA.prototype=Object.assign(Object.create(Zw.prototype),{constructor:nA,load:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,s=Xw.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),Xw.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}),iA.prototype=Object.assign(Object.create(Zw.prototype),{constructor:iA,load:function(t,e,n,i){var r=new Py,s=new nA(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var o=0;function a(n){s.load(t[n],function(t){r.images[n]=t,6==++o&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(var l=0;l<t.length;++l)a(l);return r}}),rA.prototype=Object.assign(Object.create(Zw.prototype),{constructor:rA,load:function(t,e,n,i){var r=new Rm,s=new nA(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(n){r.image=n;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?Af:Ef,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r}}),Object.assign(sA.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),s=0;for(i.push(0),n=1;n<=t;n++)s+=(e=this.getPoint(n/t)).distanceTo(r),i.push(s),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,s=i.length;n=e||t*i[s-1];for(var o,a=0,l=s-1;a<=l;)if((o=i[r=Math.floor(a+(l-a)/2)]-n)<0)a=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(s-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(s-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r=new Sm,s=[],o=[],a=[],l=new Sm,c=new Hm;for(n=0;n<=t;n++)s[n]=this.getTangentAt(n/t),s[n].normalize();o[0]=new Sm,a[0]=new Sm;var h=Number.MAX_VALUE,u=Math.abs(s[0].x),d=Math.abs(s[0].y),p=Math.abs(s[0].z);for(u<=h&&(h=u,r.set(1,0,0)),d<=h&&(h=d,r.set(0,1,0)),p<=h&&r.set(0,0,1),l.crossVectors(s[0],r).normalize(),o[0].crossVectors(s[0],l),a[0].crossVectors(s[0],o[0]),n=1;n<=t;n++)o[n]=o[n-1].clone(),a[n]=a[n-1].clone(),l.crossVectors(s[n-1],s[n]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(bm.clamp(s[n-1].dot(s[n]),-1,1)),o[n].applyMatrix4(c.makeRotationAxis(l,i))),a[n].crossVectors(s[n],o[n]);if(!0===e)for(i=Math.acos(bm.clamp(o[0].dot(o[t]),-1,1)),i/=t,s[0].dot(l.crossVectors(o[0],o[t]))>0&&(i=-i),n=1;n<=t;n++)o[n].applyMatrix4(c.makeRotationAxis(s[n],i*n)),a[n].crossVectors(s[n],o[n]);return{tangents:s,normals:o,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),(oA.prototype=Object.create(sA.prototype)).constructor=oA,oA.prototype.isEllipseCurve=!0,oA.prototype.getPoint=function(t,e){for(var n=e||new xm,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);var o=this.aStartAngle+t*r,a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=a-this.aX,d=l-this.aY;a=u*c-d*h+this.aX,l=u*h+d*c+this.aY}return n.set(a,l)},oA.prototype.copy=function(t){return sA.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},oA.prototype.toJSON=function(){var t=sA.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},oA.prototype.fromJSON=function(t){return sA.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(aA.prototype=Object.create(oA.prototype)).constructor=aA,aA.prototype.isArcCurve=!0;var cA=new Sm,hA=new lA,uA=new lA,dA=new lA;function pA(t,e,n,i){sA.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function fA(t,e,n,i,r){var s=.5*(i-e),o=.5*(r-n),a=t*t;return(2*n-2*i+s+o)*(t*a)+(-3*n+3*i-2*s-o)*a+s*t+n}function mA(t,e,n,i){return function(t,n){var i=1-t;return i*i*e}(t)+function(t,e){return 2*(1-t)*t*n}(t)+function(t,e){return t*t*i}(t)}function gA(t,e,n,i,r){return function(t,n){var i=1-t;return i*i*i*e}(t)+function(t,e){var i=1-t;return 3*i*i*t*n}(t)+function(t,e){return 3*(1-t)*t*t*i}(t)+function(t,e){return t*t*t*r}(t)}function vA(t,e,n,i){sA.call(this),this.type="CubicBezierCurve",this.v0=t||new xm,this.v1=e||new xm,this.v2=n||new xm,this.v3=i||new xm}function yA(t,e,n,i){sA.call(this),this.type="CubicBezierCurve3",this.v0=t||new Sm,this.v1=e||new Sm,this.v2=n||new Sm,this.v3=i||new Sm}function _A(t,e){sA.call(this),this.type="LineCurve",this.v1=t||new xm,this.v2=e||new xm}function bA(t,e){sA.call(this),this.type="LineCurve3",this.v1=t||new Sm,this.v2=e||new Sm}function xA(t,e,n){sA.call(this),this.type="QuadraticBezierCurve",this.v0=t||new xm,this.v1=e||new xm,this.v2=n||new xm}function wA(t,e,n){sA.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Sm,this.v1=e||new Sm,this.v2=n||new Sm}function AA(t){sA.call(this),this.type="SplineCurve",this.points=t||[]}(pA.prototype=Object.create(sA.prototype)).constructor=pA,pA.prototype.isCatmullRomCurve3=!0,pA.prototype.getPoint=function(t,e){var n,i,r,s,o=e||new Sm,a=this.points,l=a.length,c=(l-(this.closed?0:1))*t,h=Math.floor(c),u=c-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/l)+1)*l:0===u&&h===l-1&&(h=l-2,u=1),this.closed||h>0?n=a[(h-1)%l]:(cA.subVectors(a[0],a[1]).add(a[0]),n=cA),i=a[h%l],r=a[(h+1)%l],this.closed||h+2<l?s=a[(h+2)%l]:(cA.subVectors(a[l-1],a[l-2]).add(a[l-1]),s=cA),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),d),f=Math.pow(i.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(s),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),hA.initNonuniformCatmullRom(n.x,i.x,r.x,s.x,p,f,m),uA.initNonuniformCatmullRom(n.y,i.y,r.y,s.y,p,f,m),dA.initNonuniformCatmullRom(n.z,i.z,r.z,s.z,p,f,m)}else"catmullrom"===this.curveType&&(hA.initCatmullRom(n.x,i.x,r.x,s.x,this.tension),uA.initCatmullRom(n.y,i.y,r.y,s.y,this.tension),dA.initCatmullRom(n.z,i.z,r.z,s.z,this.tension));return o.set(hA.calc(u),uA.calc(u),dA.calc(u)),o},pA.prototype.copy=function(t){sA.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},pA.prototype.toJSON=function(){var t=sA.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},pA.prototype.fromJSON=function(t){sA.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new Sm).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(vA.prototype=Object.create(sA.prototype)).constructor=vA,vA.prototype.isCubicBezierCurve=!0,vA.prototype.getPoint=function(t,e){var n=e||new xm,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(gA(t,i.x,r.x,s.x,o.x),gA(t,i.y,r.y,s.y,o.y)),n},vA.prototype.copy=function(t){return sA.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},vA.prototype.toJSON=function(){var t=sA.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},vA.prototype.fromJSON=function(t){return sA.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(yA.prototype=Object.create(sA.prototype)).constructor=yA,yA.prototype.isCubicBezierCurve3=!0,yA.prototype.getPoint=function(t,e){var n=e||new Sm,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(gA(t,i.x,r.x,s.x,o.x),gA(t,i.y,r.y,s.y,o.y),gA(t,i.z,r.z,s.z,o.z)),n},yA.prototype.copy=function(t){return sA.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},yA.prototype.toJSON=function(){var t=sA.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},yA.prototype.fromJSON=function(t){return sA.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(_A.prototype=Object.create(sA.prototype)).constructor=_A,_A.prototype.isLineCurve=!0,_A.prototype.getPoint=function(t,e){var n=e||new xm;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},_A.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},_A.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},_A.prototype.copy=function(t){return sA.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},_A.prototype.toJSON=function(){var t=sA.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},_A.prototype.fromJSON=function(t){return sA.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(bA.prototype=Object.create(sA.prototype)).constructor=bA,bA.prototype.isLineCurve3=!0,bA.prototype.getPoint=function(t,e){var n=e||new Sm;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},bA.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},bA.prototype.copy=function(t){return sA.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},bA.prototype.toJSON=function(){var t=sA.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},bA.prototype.fromJSON=function(t){return sA.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(xA.prototype=Object.create(sA.prototype)).constructor=xA,xA.prototype.isQuadraticBezierCurve=!0,xA.prototype.getPoint=function(t,e){var n=e||new xm,i=this.v0,r=this.v1,s=this.v2;return n.set(mA(t,i.x,r.x,s.x),mA(t,i.y,r.y,s.y)),n},xA.prototype.copy=function(t){return sA.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},xA.prototype.toJSON=function(){var t=sA.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},xA.prototype.fromJSON=function(t){return sA.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(wA.prototype=Object.create(sA.prototype)).constructor=wA,wA.prototype.isQuadraticBezierCurve3=!0,wA.prototype.getPoint=function(t,e){var n=e||new Sm,i=this.v0,r=this.v1,s=this.v2;return n.set(mA(t,i.x,r.x,s.x),mA(t,i.y,r.y,s.y),mA(t,i.z,r.z,s.z)),n},wA.prototype.copy=function(t){return sA.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},wA.prototype.toJSON=function(){var t=sA.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},wA.prototype.fromJSON=function(t){return sA.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(AA.prototype=Object.create(sA.prototype)).constructor=AA,AA.prototype.isSplineCurve=!0,AA.prototype.getPoint=function(t,e){var n=e||new xm,i=this.points,r=(i.length-1)*t,s=Math.floor(r),o=r-s,a=i[0===s?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(fA(o,a.x,l.x,c.x,h.x),fA(o,a.y,l.y,c.y,h.y)),n},AA.prototype.copy=function(t){sA.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this},AA.prototype.toJSON=function(){var t=sA.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t},AA.prototype.fromJSON=function(t){sA.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new xm).fromArray(i))}return this};var EA=Object.freeze({ArcCurve:aA,CatmullRomCurve3:pA,CubicBezierCurve:vA,CubicBezierCurve3:yA,EllipseCurve:oA,LineCurve:_A,LineCurve3:bA,QuadraticBezierCurve:xA,QuadraticBezierCurve3:wA,SplineCurve:AA});function SA(){sA.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function MA(t){SA.call(this),this.type="Path",this.currentPoint=new xm,t&&this.setFromPoints(t)}function TA(t){MA.call(this,t),this.uuid=bm.generateUUID(),this.type="Shape",this.holes=[]}function CA(t,e){og.call(this),this.type="Light",this.color=new qg(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function LA(t,e,n){CA.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(og.DefaultUp),this.updateMatrix(),this.groundColor=new qg(e)}function PA(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new xm(512,512),this.map=null,this.mapPass=null,this.matrix=new Hm,this._frustum=new uy,this._frameExtents=new xm(1,1),this._viewportCount=1,this._viewports=[new Om(0,0,1,1)]}function RA(){PA.call(this,new $v(50,1,.5,500))}function OA(t,e,n,i,r,s){CA.call(this,t,e),this.type="SpotLight",this.position.copy(og.DefaultUp),this.updateMatrix(),this.target=new og,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==s?s:1,this.shadow=new RA}function IA(){PA.call(this,new $v(90,1,.5,500)),this._frameExtents=new xm(4,2),this._viewportCount=6,this._viewports=[new Om(2,1,1,1),new Om(0,1,1,1),new Om(3,1,1,1),new Om(1,1,1,1),new Om(3,0,1,1),new Om(1,0,1,1)],this._cubeDirections=[new Sm(1,0,0),new Sm(-1,0,0),new Sm(0,0,1),new Sm(0,0,-1),new Sm(0,1,0),new Sm(0,-1,0)],this._cubeUps=[new Sm(0,1,0),new Sm(0,1,0),new Sm(0,1,0),new Sm(0,1,0),new Sm(0,0,1),new Sm(0,0,-1)]}function DA(t,e,n,i){CA.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new IA}function kA(t,e,n,i,r,s){Jv.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()}function NA(){PA.call(this,new kA(-5,5,5,-5,.5,500))}function BA(t,e){CA.call(this,t,e),this.type="DirectionalLight",this.position.copy(og.DefaultUp),this.updateMatrix(),this.target=new og,this.shadow=new NA}function FA(t,e){CA.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function zA(t,e,n,i){CA.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function UA(t){Zw.call(this,t),this.textures={}}SA.prototype=Object.assign(Object.create(sA.prototype),{constructor:SA,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new _A(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,s=this.curves[i],o=s.getLength();return s.getPointAt(0===o?0:1-r/o)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var s=r[i],o=s.getPoints(s&&s.isEllipseCurve?2*t:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?t*s.points.length:t),a=0;a<o.length;a++){var l=o[a];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){sA.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=sA.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){sA.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new EA[i.type]).fromJSON(i))}return this}}),MA.prototype=Object.assign(Object.create(SA.prototype),{constructor:MA,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new _A(this.currentPoint.clone(),new xm(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var r=new xA(this.currentPoint.clone(),new xm(t,e),new xm(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,r,s){var o=new vA(this.currentPoint.clone(),new xm(t,e),new xm(n,i),new xm(r,s));this.curves.push(o),this.currentPoint.set(r,s)},splineThru:function(t){var e=new AA([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,s){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,s)},absarc:function(t,e,n,i,r,s){this.absellipse(t,e,n,n,i,r,s)},ellipse:function(t,e,n,i,r,s,o,a){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,s,o,a)},absellipse:function(t,e,n,i,r,s,o,a){var l=new oA(t,e,n,i,r,s,o,a);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var h=l.getPoint(1);this.currentPoint.copy(h)},copy:function(t){return SA.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=SA.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return SA.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),TA.prototype=Object.assign(Object.create(MA.prototype),{constructor:TA,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){MA.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=MA.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){MA.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new MA).fromJSON(i))}return this}}),CA.prototype=Object.assign(Object.create(og.prototype),{constructor:CA,isLight:!0,copy:function(t){return og.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=og.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),LA.prototype=Object.assign(Object.create(CA.prototype),{constructor:LA,isHemisphereLight:!0,copy:function(t){return CA.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(PA.prototype,{_projScreenMatrix:new Hm,_lightPositionWorld:new Sm,_lookTarget:new Sm,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,s=this._lightPositionWorld;s.setFromMatrixPosition(t.matrixWorld),e.position.copy(s),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),RA.prototype=Object.assign(Object.create(PA.prototype),{constructor:RA,isSpotLightShadow:!0,updateMatrices:function(t,e,n){var i=this.camera,r=2*bm.RAD2DEG*t.angle,s=this.mapSize.width/this.mapSize.height,o=t.distance||i.far;r===i.fov&&s===i.aspect&&o===i.far||(i.fov=r,i.aspect=s,i.far=o,i.updateProjectionMatrix()),PA.prototype.updateMatrices.call(this,t,e,n)}}),OA.prototype=Object.assign(Object.create(CA.prototype),{constructor:OA,isSpotLight:!0,copy:function(t){return CA.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),IA.prototype=Object.assign(Object.create(PA.prototype),{constructor:IA,isPointLightShadow:!0,updateMatrices:function(t,e,n){var i=this.camera,r=this.matrix,s=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;s.setFromMatrixPosition(t.matrixWorld),i.position.copy(s),o.copy(i.position),o.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(o),i.updateMatrixWorld(),r.makeTranslation(-s.x,-s.y,-s.z),a.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromMatrix(a)}}),DA.prototype=Object.assign(Object.create(CA.prototype),{constructor:DA,isPointLight:!0,copy:function(t){return CA.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),kA.prototype=Object.assign(Object.create(Jv.prototype),{constructor:kA,isOrthographicCamera:!0,copy:function(t,e){return Jv.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,s=n+t,o=i+e,a=i-e;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),h=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;s=(r+=h*(this.view.offsetX/l))+h*(this.view.width/l),a=(o-=u*(this.view.offsetY/c))-u*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=og.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),NA.prototype=Object.assign(Object.create(PA.prototype),{constructor:NA,isDirectionalLightShadow:!0,updateMatrices:function(t,e,n){PA.prototype.updateMatrices.call(this,t,e,n)}}),BA.prototype=Object.assign(Object.create(CA.prototype),{constructor:BA,isDirectionalLight:!0,copy:function(t){return CA.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),FA.prototype=Object.assign(Object.create(CA.prototype),{constructor:FA,isAmbientLight:!0}),zA.prototype=Object.assign(Object.create(CA.prototype),{constructor:zA,isRectAreaLight:!0,copy:function(t){return CA.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=CA.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),UA.prototype=Object.assign(Object.create(Zw.prototype),{constructor:UA,load:function(t,e,n,i){var r=this,s=new Jw(r.manager);s.setPath(r.path),s.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new Rw[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.uniforms)for(var r in t.uniforms){var s=t.uniforms[r];switch(i.uniforms[r]={},s.type){case"t":i.uniforms[r].value=n(s.value);break;case"c":i.uniforms[r].value=(new qg).setHex(s.value);break;case"v2":i.uniforms[r].value=(new xm).fromArray(s.value);break;case"v3":i.uniforms[r].value=(new Sm).fromArray(s.value);break;case"v4":i.uniforms[r].value=(new Om).fromArray(s.value);break;case"m3":i.uniforms[r].value=(new Cm).fromArray(s.value);case"m4":i.uniforms[r].value=(new Hm).fromArray(s.value);break;default:i.uniforms[r].value=s.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var o in t.extensions)i.extensions[o]=t.extensions[o];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),i.normalScale=(new xm).fromArray(a)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new xm).fromArray(t.clearcoatNormalScale)),i},setTextures:function(t){return this.textures=t,this}});var jA=function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)};function HA(){_v.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function VA(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),tv.call(this,t,e,n),this.meshPerAttribute=i||1}function GA(t){Zw.call(this,t)}HA.prototype=Object.assign(Object.create(_v.prototype),{constructor:HA,isInstancedBufferGeometry:!0,copy:function(t){return _v.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=_v.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),VA.prototype=Object.assign(Object.create(tv.prototype),{constructor:VA,isInstancedBufferAttribute:!0,copy:function(t){return tv.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=tv.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),GA.prototype=Object.assign(Object.create(Zw.prototype),{constructor:GA,load:function(t,e,n,i){var r=this,s=new Jw(r.manager);s.setPath(r.path),s.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=t.isInstancedBufferGeometry?new HA:new _v,n=t.data.index;if(void 0!==n){var i=new WA[n.type](n.array);e.setIndex(new tv(i,1))}var r=t.data.attributes;for(var s in r){i=new WA[(d=r[s]).type](d.array);var o=new(d.isInstancedBufferAttribute?VA:tv)(i,d.itemSize,d.normalized);void 0!==d.name&&(o.name=d.name),e.addAttribute(s,o)}var a=t.data.morphAttributes;if(a)for(var s in a){for(var l=a[s],c=[],h=0,u=l.length;h<u;h++){var d;o=new tv(i=new WA[(d=l[h]).type](d.array),d.itemSize,d.normalized),void 0!==d.name&&(o.name=d.name),c.push(o)}e.morphAttributes[s]=c}var p=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==p){h=0;for(var f=p.length;h!==f;++h){var m=p[h];e.addGroup(m.start,m.count,m.materialIndex)}}var g=t.data.boundingSphere;if(void 0!==g){var v=new Sm;void 0!==g.center&&v.fromArray(g.center),e.boundingSphere=new Ag(v,g.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var WA={Int8Array,Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function qA(t){Zw.call(this,t)}qA.prototype=Object.assign(Object.create(Zw.prototype),{constructor:qA,load:function(t,e,n,i){var r=this,s=""===this.path?jA(t):this.path;this.resourcePath=this.resourcePath||s;var o=new Jw(r.manager);o.setPath(this.path),o.load(t,function(n){var s=null;try{s=JSON.parse(n)}catch(a){return void 0!==i&&i(a),void console.error("THREE:ObjectLoader: Can't parse "+t+".",a.message)}var o=s.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(s,e):console.error("THREE.ObjectLoader: Can't load "+t)},n,i)},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(a)}),s=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,s),a=this.parseObject(t.object,i,o);return t.animations&&(a.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(a),a},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new TA).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new GA,r=0,s=t.length;r<s;r++){var o,a=t[r];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new bw[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new bw[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new bw[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new bw[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new bw[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new bw[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new bw[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new bw[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new bw[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new bw[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new bw[a.type]((new EA[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new bw[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new bw[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,h=a.shapes.length;c<h;c++)l.push(e[a.shapes[c]]);o=new bw[a.type](l,a.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,h=a.shapes.length;c<h;c++)l.push(e[a.shapes[c]]);var u=a.options.extrudePath;void 0!==u&&(a.options.extrudePath=(new EA[u.type]).fromJSON(u)),o=new bw[a.type](l,a.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(a);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?o=(new THREE.LegacyJSONLoader).parse(a,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),!0===o.isBufferGeometry&&void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}return n},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new UA;r.setTextures(e);for(var s=0,o=t.length;s<o;s++){var a=t[s];if("MultiMaterial"===a.type){for(var l=[],c=0;c<a.materials.length;c++){var h=a.materials[c];void 0===n[h.uuid]&&(n[h.uuid]=r.parse(h)),l.push(n[h.uuid])}i[a.uuid]=l}else void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=Ww.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){var n=this,i={};function r(t){return n.manager.itemStart(t),s.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}if(void 0!==t&&t.length>0){var s=new nA(new Yw(e));s.setCrossOrigin(this.crossOrigin);for(var o=0,a=t.length;o<a;o++){var l=t[o],c=l.url;if(Array.isArray(c)){i[l.uuid]=[];for(var h=0,u=c.length;h<u;h++){var d=c[h],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;i[l.uuid].push(r(p))}}else p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url,i[l.uuid]=r(p)}}return i},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,s=t.length;r<s;r++){var o,a=t[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image),(o=Array.isArray(e[a.image])?new Py(e[a.image]):new Rm(e[a.image])).needsUpdate=!0,o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.mapping&&(o.mapping=n(a.mapping,YA)),void 0!==a.offset&&o.offset.fromArray(a.offset),void 0!==a.repeat&&o.repeat.fromArray(a.repeat),void 0!==a.center&&o.center.fromArray(a.center),void 0!==a.rotation&&(o.rotation=a.rotation),void 0!==a.wrap&&(o.wrapS=n(a.wrap[0],QA),o.wrapT=n(a.wrap[1],QA)),void 0!==a.format&&(o.format=a.format),void 0!==a.type&&(o.type=a.type),void 0!==a.encoding&&(o.encoding=a.encoding),void 0!==a.minFilter&&(o.minFilter=n(a.minFilter,ZA)),void 0!==a.magFilter&&(o.magFilter=n(a.magFilter,ZA)),void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy),void 0!==a.flipY&&(o.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(o.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(o.unpackAlignment=a.unpackAlignment),i[a.uuid]=o}return i},parseObject:function(t,e,n){var i;function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function s(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var s=t[i];void 0===n[s]&&console.warn("THREE.ObjectLoader: Undefined material",s),e.push(n[s])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new ag,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new qg(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new mb(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new fb(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new $v(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new kA(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new FA(t.color,t.intensity);break;case"DirectionalLight":i=new BA(t.color,t.intensity);break;case"PointLight":i=new DA(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new zA(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new OA(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new LA(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=r(t.geometry),a=s(t.material);i=o.bones&&o.bones.length>0?new Nb(o,a):new Bv(o,a),void 0!==t.drawMode&&i.setDrawMode(t.drawMode);break;case"LOD":i=new kb;break;case"Line":i=new Xb(r(t.geometry),s(t.material),t.mode);break;case"LineLoop":i=new Kb(r(t.geometry),s(t.material));break;case"LineSegments":i=new Zb(r(t.geometry),s(t.material));break;case"PointCloud":case"Points":i=new ix(r(t.geometry),s(t.material));break;case"Sprite":i=new Rb(s(t.material));break;case"Group":i=new sb;break;default:i=new og}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,c=0;c<l.length;c++)i.add(this.parseObject(l[c],e,n));if("LOD"===t.type)for(var h=t.levels,u=0;u<h.length;u++){var d=h[u],p=i.getObjectByProperty("uuid",d.object);void 0!==p&&i.addLevel(p,d.distance)}return i}});var XA,YA={UVMapping:300,CubeReflectionMapping:Xp,CubeRefractionMapping:Yp,EquirectangularReflectionMapping:Qp,EquirectangularRefractionMapping:Zp,SphericalReflectionMapping:Kp,CubeUVReflectionMapping:Jp,CubeUVRefractionMapping:$p},QA={RepeatWrapping:tf,ClampToEdgeWrapping:ef,MirroredRepeatWrapping:nf},ZA={NearestFilter:rf,NearestMipmapNearestFilter:sf,NearestMipmapLinearFilter:of,LinearFilter:af,LinearMipmapNearestFilter:lf,LinearMipmapLinearFilter:cf};function KA(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Zw.call(this,t),this.options=void 0}function JA(){this.type="ShapePath",this.color=new qg,this.subPaths=[],this.currentPath=null}function $A(t){this.type="Font",this.data=t}function tE(t,e,n,i,r){var s=r.glyphs[t]||r.glyphs["?"];if(s){var o,a,l,c,h,u,d,p,f=new JA;if(s.o)for(var m=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),g=0,v=m.length;g<v;)switch(m[g++]){case"m":o=m[g++]*e+n,a=m[g++]*e+i,f.moveTo(o,a);break;case"l":o=m[g++]*e+n,a=m[g++]*e+i,f.lineTo(o,a);break;case"q":l=m[g++]*e+n,c=m[g++]*e+i,h=m[g++]*e+n,u=m[g++]*e+i,f.quadraticCurveTo(h,u,l,c);break;case"b":l=m[g++]*e+n,c=m[g++]*e+i,h=m[g++]*e+n,u=m[g++]*e+i,d=m[g++]*e+n,p=m[g++]*e+i,f.bezierCurveTo(h,u,d,p,l,c)}return{offsetX:s.ha*e,path:f}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".")}function eE(t){Zw.call(this,t)}KA.prototype=Object.assign(Object.create(Zw.prototype),{constructor:KA,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,s=Xw.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;fetch(t).then(function(t){return t.blob()}).then(function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)}).then(function(n){Xw.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}}),Object.assign(JA.prototype,{moveTo:function(t,e){this.currentPath=new MA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,s){this.currentPath.bezierCurveTo(t,e,n,i,r,s)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],s=new TA;s.curves=r.curves,e.push(s)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,s=0;s<n;r=s++){var o=e[r],a=e[s],l=a.x-o.x,c=a.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=e[s],l=-l,a=e[r],c=-c),t.y<o.y||t.y>a.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var h=c*(t.x-o.x)-l*(t.y-o.y);if(0===h)return!0;if(h<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(a.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=a.x)return!0}}return i}var r=Qx.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===e)return n(s);var o,a,l,c=[];if(1===s.length)return a=s[0],(l=new TA).curves=a.curves,c.push(l),c;var h=!r(s[0].getPoints());h=t?!h:h;var u,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=s.length;v<y;v++)o=r(u=(a=s[v]).getPoints()),(o=t?!o:o)?(!h&&f[g]&&g++,f[g]={s:new TA,p:u},f[g].s.curves=a.curves,h&&g++,m[g]=[]):m[g].push({h:a,p:u[0]});if(!f[0])return n(s);if(f.length>1){for(var _=!1,b=[],x=0,w=f.length;x<w;x++)p[x]=[];for(x=0,w=f.length;x<w;x++)for(var A=m[x],E=0;E<A.length;E++){for(var S=A[E],M=!0,T=0;T<f.length;T++)i(S.p,f[T].p)&&(x!==T&&b.push({froms:x,tos:T,hole:E}),M?(M=!1,p[T].push(S)):_=!0);M&&p[x].push(S)}b.length>0&&(_||(m=p))}v=0;for(var C=f.length;v<C;v++){c.push(l=f[v].s);for(var L=0,P=(d=m[v]).length;L<P;L++)l.holes.push(d[L].h)}return c}}),Object.assign($A.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=function(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],a=0,l=0,c=0;c<i.length;c++){var h=i[c];if("\n"===h)a=0,l-=s;else{var u=tE(h,r,a,l,n);a+=u.offsetX,o.push(u.path)}}return o}(t,e,this.data),r=0,s=i.length;r<s;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),eE.prototype=Object.assign(Object.create(Zw.prototype),{constructor:eE,load:function(t,n,i,r){var s=this,o=new Jw(this.manager);o.setPath(this.path),o.load(t,function(t){var i;try{i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}var r=s.parse(i);n&&n(r)},i,r)},parse:function(t){return new $A(t)}});var nE={getContext:function(){return void 0===XA&&(XA=new(window.AudioContext||window.webkitAudioContext)),XA},setContext:function(t){XA=t}};function iE(t){Zw.call(this,t)}function rE(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Sm)}function sE(t,e){CA.call(this,void 0,e),this.sh=void 0!==t?t:new rE}function oE(t,e,n){sE.call(this,void 0,n);var i=(new qg).set(t),r=(new qg).set(e),s=new Sm(i.r,i.g,i.b),o=new Sm(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(l)}function aE(t,e){sE.call(this,void 0,e);var n=(new qg).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}iE.prototype=Object.assign(Object.create(Zw.prototype),{constructor:iE,load:function(t,e,n,i){var r=new Jw(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,function(t){var n=t.slice(0);nE.getContext().decodeAudioData(n,function(t){e(t)})},n,i)}}),Object.assign(rE.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScale(s[1],.488603*i),e.addScale(s[2],.488603*r),e.addScale(s[3],.488603*n),e.addScale(s[4],n*i*1.092548),e.addScale(s[5],i*r*1.092548),e.addScale(s[6],.315392*(3*r*r-1)),e.addScale(s[7],n*r*1.092548),e.addScale(s[8],.546274*(n*n-i*i)),e},getIrradianceAt:function(t,e){var n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScale(s[1],1.023328*i),e.addScale(s[2],1.023328*r),e.addScale(s[3],1.023328*n),e.addScale(s[4],.858086*n*i),e.addScale(s[5],.858086*i*r),e.addScale(s[6],.743125*r*r-.247708),e.addScale(s[7],.858086*n*r),e.addScale(s[8],.429043*(n*n-i*i)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}),Object.assign(rE,{getBasisAt:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}),sE.prototype=Object.assign(Object.create(CA.prototype),{constructor:sE,isLightProbe:!0,copy:function(t){return CA.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return CA.prototype.toJSON.call(this,t)}}),oE.prototype=Object.assign(Object.create(sE.prototype),{constructor:oE,isHemisphereLightProbe:!0,copy:function(t){return sE.prototype.copy.call(this,t),this},toJSON:function(t){return sE.prototype.toJSON.call(this,t)}}),aE.prototype=Object.assign(Object.create(sE.prototype),{constructor:aE,isAmbientLightProbe:!0,copy:function(t){return sE.prototype.copy.call(this,t),this},toJSON:function(t){return sE.prototype.toJSON.call(this,t)}});var lE=new Hm,cE=new Hm;function hE(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign((function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new $v,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new $v,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}).prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n,i,r=t.projectionMatrix.clone(),s=e.eyeSep/2,o=s*e.near/e.focus,a=e.near*Math.tan(bm.DEG2RAD*e.fov*.5)/e.zoom;cE.elements[12]=-s,lE.elements[12]=s,r.elements[0]=2*e.near/((i=a*e.aspect+o)-(n=-a*e.aspect+o)),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),r.elements[0]=2*e.near/((i=a*e.aspect-o)-(n=-a*e.aspect-o)),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(cE),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(lE)}}),Object.assign(hE.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var uE=new Sm,dE=new wm,pE=new Sm,fE=new Sm;function mE(){og.call(this),this.type="AudioListener",this.context=nE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new hE}function gE(t){og.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}mE.prototype=Object.assign(Object.create(og.prototype),{constructor:mE,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){og.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(uE,dE,pE),fE.set(0,0,-1).applyQuaternion(dE),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(uE.x,i),e.positionY.linearRampToValueAtTime(uE.y,i),e.positionZ.linearRampToValueAtTime(uE.z,i),e.forwardX.linearRampToValueAtTime(fE.x,i),e.forwardY.linearRampToValueAtTime(fE.y,i),e.forwardZ.linearRampToValueAtTime(fE.z,i),e.upX.linearRampToValueAtTime(n.x,i),e.upY.linearRampToValueAtTime(n.y,i),e.upZ.linearRampToValueAtTime(n.z,i)}else e.setPosition(uE.x,uE.y,uE.z),e.setOrientation(fE.x,fE.y,fE.z,n.x,n.y,n.z)}}),gE.prototype=Object.assign(Object.create(og.prototype),{constructor:gE,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var vE=new Sm,yE=new wm,_E=new Sm,bE=new Sm;function xE(t){gE.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function wE(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function AE(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}xE.prototype=Object.assign(Object.create(gE.prototype),{constructor:xE,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(og.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(vE,yE,_E),bE.set(0,0,1).applyQuaternion(yE);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(vE.x,n),e.positionY.linearRampToValueAtTime(vE.y,n),e.positionZ.linearRampToValueAtTime(vE.z,n),e.orientationX.linearRampToValueAtTime(bE.x,n),e.orientationY.linearRampToValueAtTime(bE.y,n),e.orientationZ.linearRampToValueAtTime(bE.z,n)}else e.setPosition(vE.x,vE.y,vE.z),e.setOrientation(bE.x,bE.y,bE.z)}}}),Object.assign(wE.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(AE.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,s=this.cumulativeWeight;if(0===s){for(var o=0;o!==i;++o)n[r+o]=n[o];s=e}else this._mixBufferRegion(n,r,0,e/(s+=e),i);this.cumulativeWeight=s},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,s=this.binding;this.cumulativeWeight=0,r<1&&this._mixBufferRegion(n,i,3*e,1-r,e);for(var o=e,a=e+e;o!==a;++o)if(n[o]!==n[o+e]){s.setValue(n,i);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,n=3*e;this.binding.getValue(t,n);for(var i=e,r=n;i!==r;++i)t[i]=t[n+i%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,n,i,r){if(i>=.5)for(var s=0;s!==r;++s)t[e+s]=t[n+s]},_slerp:function(t,e,n,i){wm.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var s=1-i,o=0;o!==r;++o){var a=e+o;t[a]=t[a]*s+t[n+o]*i}}});var EE=new RegExp("[\\[\\]\\.:\\/]","g"),SE="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",ME=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),TE=/(WCOD+)?/.source.replace("WCOD",SE),CE=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),LE=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),PE=new RegExp("^"+ME+TE+CE+LE+"$"),RE=["material","materials","bones"];function OE(t,e,n){var i=n||IE.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function IE(t,e,n){this.path=e,this.parsedPath=n||IE.parseTrackName(e),this.node=IE.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function DE(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,s=new Array(r),o={endingStart:tm,endingEnd:tm},a=0;a!==r;++a){var l=i[a].createInterpolant(null);s[a]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$f,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function kE(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function NE(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function BE(t,e,n){gb.call(this,t,e),this.meshPerAttribute=n||1}function FE(t,e){return t.distance-e.distance}function zE(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,s=0,o=r.length;s<o;s++)zE(r[s],e,n,!0)}Object.assign(OE.prototype,{getValue:function(t,e){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(IE,{Composite:OE,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new IE.Composite(t,e,n):new IE(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(EE,"")},parseTrackName:function(t){var e=PE.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==RE.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var s=i(r.children);if(s)return s}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(IE.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=IE.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var s=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===s){s=o;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==s){if(void 0===t[s])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[s]}}var a=t[i];if(void 0!==a){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===r){r=o;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+i+" but it wasn't found.",t)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(IE.prototype,{_getValue_unbound:IE.prototype.getValue,_setValue_unbound:IE.prototype.setValue}),Object.assign((function(){this.uuid=bm.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}).prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid,p=i[d];if(void 0===p){p=e++,i[d]=p,t.push(u);for(var f=0,m=a;f!==m;++f)o[f].push(new IE(u,r[f],s[f]))}else if(p<n){l=t[p];var g=--n,v=t[g];for(i[v.uuid]=p,t[p]=v,i[d]=g,t[g]=u,f=0,m=a;f!==m;++f){var y=o[f],_=y[g],b=y[p];y[p]=_,void 0===b&&(b=new IE(u,r[f],s[f])),y[g]=b}}else t[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,s=0,o=arguments.length;s!==o;++s){var a=arguments[s],l=a.uuid,c=n[l];if(void 0!==c&&c>=e){var h=e++,u=t[h];n[u.uuid]=c,t[c]=u,n[l]=h,t[h]=a;for(var d=0,p=r;d!==p;++d){var f=i[d],m=f[h],g=f[c];f[c]=m,f[h]=g}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,s=r.length,o=0,a=arguments.length;o!==a;++o){var l=arguments[o],c=l.uuid,h=i[c];if(void 0!==h)if(delete i[c],h<n){var u=--n,d=t[u],p=t[y=--e];i[d.uuid]=h,t[h]=d,i[p.uuid]=u,t[u]=p,t.pop();for(var f=0,m=s;f!==m;++f){var g=(_=r[f])[u],v=_[y];_[h]=g,_[u]=v,_.pop()}}else{var y;for(i[(p=t[y=--e]).uuid]=h,t[h]=p,t.pop(),f=0,m=s;f!==m;++f){var _;(_=r[f])[h]=_[y],_.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var s=this._paths,o=this._parsedPaths,a=this._objects,l=this.nCachedObjects_,c=new Array(a.length);n[t]=i=r.length,s.push(t),o.push(e),r.push(c);for(var h=l,u=a.length;h!==u;++h)c[h]=new IE(a[h],t,e);return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];e[t[o]]=n,s[n]=a,s.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(DE.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,s=i/r;t.warp(1,r/i,e),this.warp(s,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,s=this._timeScaleInterpolant,o=this.timeScale;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);var a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+n,l[0]=t/o,l[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var s=(t-r)*n;if(s<0||0===n)return;this._startTime=null,e=n*s}e*=this._updateTimeScale(t);var o=this._updateTime(e),a=this._updateWeight(t);if(a>0)for(var l=this._interpolants,c=this._propertyBindings,h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulate(i,a)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,i=this.loop,r=this._loopCount,s=2202===i;if(0===t)return-1===r?e:s&&1==(1&r)?n-e:e;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),e>=n||e<0){var o=Math.floor(e/n);e-=n*o,r+=Math.abs(o);var a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){var l=t<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=e;if(s&&1==(1&r))return n-e}return e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:tm:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:tm:2402)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);var o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=n,this}}),kE.prototype=Object.assign(Object.create(Qd.prototype),{constructor:kE,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,s=t._propertyBindings,o=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName,c=l[a];void 0===c&&(l[a]=c={});for(var h=0;h!==r;++h){var u=i[h],d=u.name,p=c[d];if(void 0!==p)s[h]=p;else{if(void 0!==(p=s[h])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,a,d));continue}++(p=new AE(IE.create(n,d,e&&e._propertyBindings[h].binding.parsedPath),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(p,a,d),s[h]=p}o[h].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,s=0,o=r.length;s!==o;++s){var a=r[s];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{var o=s.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),s.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],s=this._bindings;void 0===r&&(i[e]=r={}),r[n]=t,t._cacheIndex=s.length,s.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete o[r],0===Object.keys(o).length&&delete s[i]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new kw(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Ww.findByName(n,t):t,s=null!==r?r.uuid:t,o=this._actionsByClip[s],a=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;a=o.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var c=new DE(this,r,e);return this._bindAction(c,a),this._addInactiveAction(c,s,i),c},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Ww.findByName(n,t):t,s=this._actionsByClip[r?r.uuid:t];return void 0!==s&&s.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){for(var e=this._actions,n=this._nActiveActions,i=this.time+=t*=this.timeScale,r=Math.sign(t),s=this._accuIndex^=1,o=0;o!==n;++o)e[o]._update(i,t,r,s);var a=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)a[o].apply(s);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var s=r.knownActions,o=0,a=s.length;o!==a;++o){var l=s[o];this._deactivateAction(l);var c=l._cacheIndex,h=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=c,e[c]=h,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var s=this._bindingsByRootAndName[e];if(void 0!==s)for(var o in s){var a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),NE.prototype.clone=function(){return new NE(void 0===this.value.clone?this.value:this.value.clone())},BE.prototype=Object.assign(Object.create(gb.prototype),{constructor:BE,isInstancedInterleavedBuffer:!0,copy:function(t){return gb.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign((function(t,e,n,i){this.ray=new Rg(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}).prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return zE(t,this,i,e),i.sort(FE),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,s=t.length;r<s;r++)zE(t[r],this,i,e);return i.sort(FE),i}}),Object.assign((function(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}).prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(bm.clamp(e/this.radius,-1,1))),this}}),Object.assign((function(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}).prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var UE=new xm;function jE(t,e){this.min=void 0!==t?t:new xm(1/0,1/0),this.max=void 0!==e?e:new xm(-1/0,-1/0)}Object.assign(jE.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=UE.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new xm),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new xm),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new xm),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new xm),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return UE.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var HE=new Sm,VE=new Sm;function GE(t,e){this.start=void 0!==t?t:new Sm,this.end=void 0!==e?e:new Sm}function WE(t){og.call(this),this.material=t,this.render=function(){}}Object.assign(GE.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Sm),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Sm),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Sm),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){HE.subVectors(t,this.start),VE.subVectors(this.end,this.start);var n=VE.dot(VE),i=VE.dot(HE)/n;return e&&(i=bm.clamp(i,0,1)),i},closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Sm),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),(WE.prototype=Object.create(og.prototype)).constructor=WE,WE.prototype.isImmediateRenderObject=!0;var qE=new Sm,XE=new Sm,YE=new Cm,QE=["a","b","c"];function ZE(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,s=void 0!==i?i:1,o=0,a=this.object.geometry;a&&a.isGeometry?o=3*a.faces.length:a&&a.isBufferGeometry&&(o=a.attributes.normal.count);var l=new _v,c=new lv(2*o*3,3);l.addAttribute("position",c),Zb.call(this,l,new jb({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}(ZE.prototype=Object.create(Zb.prototype)).constructor=ZE,ZE.prototype.update=function(){this.object.updateMatrixWorld(!0),YE.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var i=n.vertices,r=n.faces,s=0,o=0,a=r.length;o<a;o++)for(var l=r[o],c=0,h=l.vertexNormals.length;c<h;c++){var u=l.vertexNormals[c];qE.copy(i[l[QE[c]]]).applyMatrix4(t),XE.copy(u).applyMatrix3(YE).normalize().multiplyScalar(this.size).add(qE),e.setXYZ(s,qE.x,qE.y,qE.z),e.setXYZ(s+=1,XE.x,XE.y,XE.z),s+=1}else if(n&&n.isBufferGeometry){var d=n.attributes.position,p=n.attributes.normal;for(s=0,c=0,h=d.count;c<h;c++)qE.set(d.getX(c),d.getY(c),d.getZ(c)).applyMatrix4(t),XE.set(p.getX(c),p.getY(c),p.getZ(c)),XE.applyMatrix3(YE).normalize().multiplyScalar(this.size).add(qE),e.setXYZ(s,qE.x,qE.y,qE.z),e.setXYZ(s+=1,XE.x,XE.y,XE.z),s+=1}e.needsUpdate=!0};var KE=new Sm;function JE(t,e){og.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new _v,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,s=1;r<32;r++,s++){var o=r/32*Math.PI*2,a=s/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(a),Math.sin(a),1)}n.addAttribute("position",new lv(i,3));var l=new jb({fog:!1});this.cone=new Zb(n,l),this.add(this.cone),this.update()}(JE.prototype=Object.create(og.prototype)).constructor=JE,JE.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},JE.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),KE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(KE),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var $E=new Sm,tS=new Hm,eS=new Hm;function nS(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new _v,i=[],r=[],s=new qg(0,0,1),o=new qg(0,1,0),a=0;a<e.length;a++){var l=e[a];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(o.r,o.g,o.b))}n.addAttribute("position",new lv(i,3)),n.addAttribute("color",new lv(r,3));var c=new jb({vertexColors:ap,depthTest:!1,depthWrite:!1,transparent:!0});Zb.call(this,n,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function iS(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new sw(e,4,2),r=new $g({wireframe:!0,fog:!1});Bv.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function rS(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var n=new _v;n.addAttribute("position",new lv([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var i=new jb({fog:!1});Xb.call(this,n,i);var r=new _v;r.addAttribute("position",new lv([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Bv(r,new $g({side:ip,fog:!1}))),this.update()}(nS.prototype=Object.create(Zb.prototype)).constructor=nS,nS.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,i=n.getAttribute("position");eS.getInverse(this.root.matrixWorld);for(var r=0,s=0;r<e.length;r++){var o=e[r];o.parent&&o.parent.isBone&&(tS.multiplyMatrices(eS,o.matrixWorld),$E.setFromMatrixPosition(tS),i.setXYZ(s,$E.x,$E.y,$E.z),tS.multiplyMatrices(eS,o.parent.matrixWorld),$E.setFromMatrixPosition(tS),i.setXYZ(s+1,$E.x,$E.y,$E.z),s+=2)}n.getAttribute("position").needsUpdate=!0,og.prototype.updateMatrixWorld.call(this,t)},(iS.prototype=Object.create(Bv.prototype)).constructor=iS,iS.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},iS.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},(rS.prototype=Object.create(Xb.prototype)).constructor=rS,rS.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},rS.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var sS=new Sm,oS=new qg,aS=new qg;function lS(t,e,n){og.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new vx(e);i.rotateY(.5*Math.PI),this.material=new $g({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=ap);var r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.addAttribute("color",new tv(s,3)),this.add(new Bv(i,this.material)),this.update()}function cS(t,e){this.lightProbe=t,this.size=e;var n=new Kv({defines:{GAMMA_OUTPUT:""},uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),i=new sw(1,32,16);Bv.call(this,i,n),this.onBeforeRender()}function hS(t,e,n,i){t=t||10,e=e||10,n=new qg(void 0!==n?n:4473924),i=new qg(void 0!==i?i:8947848);for(var r=e/2,s=t/e,o=t/2,a=[],l=[],c=0,h=0,u=-o;c<=e;c++,u+=s){a.push(-o,0,u,o,0,u),a.push(u,0,-o,u,0,o);var d=c===r?n:i;d.toArray(l,h),d.toArray(l,h+=3),d.toArray(l,h+=3),d.toArray(l,h+=3),h+=3}var p=new _v;p.addAttribute("position",new lv(a,3)),p.addAttribute("color",new lv(l,3));var f=new jb({vertexColors:ap});Zb.call(this,p,f)}function uS(t,e,n,i,r,s){t=t||10,e=e||16,n=n||8,i=i||64,r=new qg(void 0!==r?r:4473924),s=new qg(void 0!==s?s:8947848);var o,a,l,c,h,u,d,p=[],f=[];for(c=0;c<=e;c++)l=c/e*(2*Math.PI),o=Math.sin(l)*t,a=Math.cos(l)*t,p.push(0,0,0),p.push(o,0,a),f.push((d=1&c?r:s).r,d.g,d.b),f.push(d.r,d.g,d.b);for(c=0;c<=n;c++)for(d=1&c?r:s,u=t-t/n*c,h=0;h<i;h++)l=h/i*(2*Math.PI),o=Math.sin(l)*u,a=Math.cos(l)*u,p.push(o,0,a),f.push(d.r,d.g,d.b),l=(h+1)/i*(2*Math.PI),o=Math.sin(l)*u,a=Math.cos(l)*u,p.push(o,0,a),f.push(d.r,d.g,d.b);var m=new _v;m.addAttribute("position",new lv(p,3)),m.addAttribute("color",new lv(f,3));var g=new jb({vertexColors:ap});Zb.call(this,m,g)}function dS(t,e,n,i){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new _v,s=new Float32Array(3*(3*(this.divisionsInnerAngle+2*this.divisionsOuterAngle)+3));r.addAttribute("position",new tv(s,3));var o=new jb({color:65280}),a=new jb({color:16776960});Xb.call(this,r,[a,o]),this.update()}(lS.prototype=Object.create(og.prototype)).constructor=lS,lS.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},lS.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");oS.copy(this.light.color),aS.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?oS:aS;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(sS.setFromMatrixPosition(this.light.matrixWorld).negate())},(cS.prototype=Object.create(Bv.prototype)).constructor=cS,cS.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},cS.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},hS.prototype=Object.assign(Object.create(Zb.prototype),{constructor:hS,copy:function(t){return Zb.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),(uS.prototype=Object.create(Zb.prototype)).constructor=uS,(dS.prototype=Object.create(Xb.prototype)).constructor=dS,dS.prototype.update=function(){var t,e,n=this.audio,i=this.range,r=this.divisionsInnerAngle,s=this.divisionsOuterAngle,o=bm.degToRad(n.panner.coneInnerAngle),a=bm.degToRad(n.panner.coneOuterAngle),l=o/2,c=a/2,h=0,u=0,d=this.geometry,p=d.attributes.position;function f(n,r,s,o){var a=(r-n)/s;for(p.setXYZ(h,0,0,0),u++,t=n;t<r;t+=a)p.setXYZ(e=h+u,Math.sin(t)*i,0,Math.cos(t)*i),p.setXYZ(e+1,Math.sin(Math.min(t+a,r))*i,0,Math.cos(Math.min(t+a,r))*i),p.setXYZ(e+2,0,0,0),u+=3;d.addGroup(h,u,o),h+=u,u=0}d.clearGroups(),f(-c,-l,s,0),f(-l,l,r,1),f(l,c,s,0),p.needsUpdate=!0,o===a&&(this.material[0].visible=!1)},dS.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var pS=new Sm,fS=new Sm,mS=new Cm;function gS(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,s=void 0!==i?i:1,o=0,a=this.object.geometry;a&&a.isGeometry?o=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new _v,c=new lv(2*o*3,3);l.addAttribute("position",c),Zb.call(this,l,new jb({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}(gS.prototype=Object.create(Zb.prototype)).constructor=gS,gS.prototype.update=function(){this.object.updateMatrixWorld(!0),mS.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry,i=n.vertices,r=n.faces,s=0,o=0,a=r.length;o<a;o++){var l=r[o],c=l.normal;pS.copy(i[l.a]).add(i[l.b]).add(i[l.c]).divideScalar(3).applyMatrix4(t),fS.copy(c).applyMatrix3(mS).normalize().multiplyScalar(this.size).add(pS),e.setXYZ(s,pS.x,pS.y,pS.z),e.setXYZ(s+=1,fS.x,fS.y,fS.z),s+=1}e.needsUpdate=!0};var vS=new Sm,yS=new Sm,_S=new Sm;function bS(t,e,n){og.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new _v;i.addAttribute("position",new lv([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new jb({fog:!1});this.lightPlane=new Xb(i,r),this.add(this.lightPlane),(i=new _v).addAttribute("position",new lv([0,0,0,0,0,1],3)),this.targetLine=new Xb(i,r),this.add(this.targetLine),this.update()}(bS.prototype=Object.create(og.prototype)).constructor=bS,bS.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},bS.prototype.update=function(){vS.setFromMatrixPosition(this.light.matrixWorld),yS.setFromMatrixPosition(this.light.target.matrixWorld),_S.subVectors(yS,vS),this.lightPlane.lookAt(yS),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(yS),this.targetLine.scale.z=_S.length()};var xS=new Sm,wS=new Jv;function AS(t){var e=new _v,n=new jb({color:16777215,vertexColors:op}),i=[],r=[],s={},o=new qg(16755200),a=new qg(16711680),l=new qg(43775),c=new qg(16777215),h=new qg(3355443);function u(t,e,n){d(t,n),d(e,n)}function d(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(i.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",a),u("p","n2",a),u("p","n3",a),u("p","n4",a),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l),u("c","t",c),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),e.addAttribute("position",new lv(i,3)),e.addAttribute("color",new lv(r,3)),Zb.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function ES(t,e,n,i,r,s,o){xS.set(r,s,o).unproject(i);var a=e[t];if(void 0!==a)for(var l=n.getAttribute("position"),c=0,h=a.length;c<h;c++)l.setXYZ(a[c],xS.x,xS.y,xS.z)}(AS.prototype=Object.create(Zb.prototype)).constructor=AS,AS.prototype.update=function(){var t=this.geometry,e=this.pointMap;wS.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ES("c",e,t,wS,0,0,-1),ES("t",e,t,wS,0,0,1),ES("n1",e,t,wS,-1,-1,-1),ES("n2",e,t,wS,1,-1,-1),ES("n3",e,t,wS,-1,1,-1),ES("n4",e,t,wS,1,1,-1),ES("f1",e,t,wS,-1,-1,1),ES("f2",e,t,wS,1,-1,1),ES("f3",e,t,wS,-1,1,1),ES("f4",e,t,wS,1,1,1),ES("u1",e,t,wS,.7,1.1,-1),ES("u2",e,t,wS,-.7,1.1,-1),ES("u3",e,t,wS,0,2,-1),ES("cf1",e,t,wS,-1,0,1),ES("cf2",e,t,wS,1,0,1),ES("cf3",e,t,wS,0,-1,1),ES("cf4",e,t,wS,0,1,1),ES("cn1",e,t,wS,-1,0,-1),ES("cn2",e,t,wS,1,0,-1),ES("cn3",e,t,wS,0,-1,-1),ES("cn4",e,t,wS,0,1,-1),t.getAttribute("position").needsUpdate=!0};var SS=new bg;function MS(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new _v;r.setIndex(new tv(n,1)),r.addAttribute("position",new tv(i,3)),Zb.call(this,r,new jb({color:e})),this.matrixAutoUpdate=!1,this.update()}function TS(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new _v;i.setIndex(new tv(n,1)),i.addAttribute("position",new lv([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Zb.call(this,i,new jb({color:e})),this.geometry.computeBoundingSphere()}function CS(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=new _v;r.addAttribute("position",new lv([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Xb.call(this,r,new jb({color:i}));var s=new _v;s.addAttribute("position",new lv([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new Bv(s,new $g({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}(MS.prototype=Object.create(Zb.prototype)).constructor=MS,MS.prototype.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&SS.setFromObject(this.object),!SS.isEmpty()){var e=SS.min,n=SS.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},MS.prototype.setFromObject=function(t){return this.object=t,this.update(),this},MS.prototype.copy=function(t){return Zb.prototype.copy.call(this,t),this.object=t.object,this},MS.prototype.clone=function(){return(new this.constructor).copy(this)},(TS.prototype=Object.create(Zb.prototype)).constructor=TS,TS.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),og.prototype.updateMatrixWorld.call(this,t))},(CS.prototype=Object.create(Xb.prototype)).constructor=CS,CS.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?ip:np,this.lookAt(this.plane.normal),og.prototype.updateMatrixWorld.call(this,t)};var LS,PS,RS=new Sm;function OS(t,e,n,i,r,s){og.call(this),void 0===t&&(t=new Sm(0,0,1)),void 0===e&&(e=new Sm(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===s&&(s=.2*r),void 0===LS&&((LS=new _v).addAttribute("position",new lv([0,0,0,0,1,0],3)),(PS=new mw(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Xb(LS,new jb({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bv(PS,new $g({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,s)}function IS(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new _v;n.addAttribute("position",new lv(e,3)),n.addAttribute("color",new lv([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new jb({vertexColors:ap});Zb.call(this,n,i)}function DS(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),pA.call(this,t),this.type="catmullrom"}(OS.prototype=Object.create(og.prototype)).constructor=OS,OS.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{RS.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(RS,e)}},OS.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},OS.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},OS.prototype.copy=function(t){return og.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},OS.prototype.clone=function(){return(new this.constructor).copy(this)},(IS.prototype=Object.create(Zb.prototype)).constructor=IS,sA.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(sA.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(SA.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Gv,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new Sm(r.x,r.y,r.z||0))}return e}}),Object.assign(MA.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Object.create(pA.prototype),Object.create(pA.prototype),DS.prototype=Object.create(pA.prototype),Object.assign(DS.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),hS.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},nS.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Zw.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),jA(t)}}),Object.assign(qA.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(jE.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(bg.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),GE.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(bm,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),bm.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),bm.ceilPowerOfTwo(t)}}),Object.assign(Cm.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Hm.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Sm).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,s)}}),ly.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},wm.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(Rg.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Hg.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Hg,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Hg.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Hg.getNormal(t,e,n,i)}}),Object.assign(TA.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Jx(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new hw(this,t)}}),Object.assign(xm.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Sm.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Om.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Gv.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(og.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(og.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(kb.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(zb.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Nb.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(sA.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),$v.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(CA.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(tv.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(_v.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(_v.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign($x.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(NE.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Jg.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new qg}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(Sw.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Kv.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(pb.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(pb.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(eb.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(iy.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Im.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(ub.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),gE.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new iE).load(t,function(t){e.setBuffer(t)}),this},wE.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},ny.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},Lm.crossOrigin=void 0,Lm.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new rA;r.setCrossOrigin(this.crossOrigin);var s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},Lm.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new iA;r.setCrossOrigin(this.crossOrigin);var s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},Lm.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Lm.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};let kS=(()=>{class t{constructor(){this.mouseX=0,this.mouseY=0,this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.createGeometry=function(){for(var t=new _v,e=[],n=new Sm,i=0;i<150;i++)n.x=4*Math.random()-1,n.y=2*Math.random()-1,n.z=4*Math.random()-1,n.normalize(),n.multiplyScalar(550),e.push(n.x,n.y,n.z),n.multiplyScalar(.2*Math.random()+1),e.push(n.x,n.y,n.z);return t.addAttribute("position",new lv(e,3)),t}}createScene(t){this.canvas=document.getElementById(t),this.scene=new ag,this.camera=new $v(45,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light=new FA(5197647),this.light.position.z=10,this.scene.add(this.light);let e,n,i,r,s=[[.25,0,2],[.5,0,2],[.75,0,.75],[1,0,.5],[1.25,0,.8],[3,0,.75],[3.5,0,.5],[4.5,0,.25],[5.5,0,.125]],o=this.createGeometry();for(e=0;e<s.length;++e)(n=new Bv(o,i=new $g({color:(r=s[e])[1],opacity:r[2]}))).rotation.y=Math.random()*Math.PI*4,n.rotation.z=Math.random()*Math.PI,n.rotation.x=Math.random()*(Math.PI/6),n.updateMatrix(),this.scene.add(n);this.renderer=new pb({canvas:this.canvas,alpha:!0,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio)}animate(){window.addEventListener("DOMContentLoaded",()=>{this.render()}),window.addEventListener("resize",()=>{this.resize()})}render(){requestAnimationFrame(()=>{this.render()}),this.camera.position.y+=.05*(200-this.mouseY-this.camera.position.y),this.camera.lookAt(this.scene.position),this.renderer.render(this.scene,this.camera);for(var t=2e-5*Date.now(),e=0;e<this.scene.children.length;e++){var n=this.scene.children[e];n.rotation.y=t*(e<4?e+1:-(e+1)),e<5&&(Math.sin(7*t),n.scale.x=n.scale.y=n.scale.z)}}resize(){this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}return t.ngInjectableDef=dt({factory:function(){return new t},token:t,providedIn:"root"}),t})();var NS=$n({encapsulation:0,styles:[["#renderCanvas[_ngcontent-%COMP%]{opacity:.3}"]],data:{}});function BS(t){return co(0,[(t()(),Xs(0,0,null,null,1,"div",[["class","engine-wrapper"]],null,null,null,null,null)),(t()(),Xs(1,0,null,null,0,"canvas",[["id","renderCanvas"]],null,null,null,null,null))],null,null)}function FS(t){return co(0,[(t()(),Xs(0,0,null,null,1,"app-engine",[],null,null,null,BS,NS)),ar(1,114688,null,0,Yd,[kS],null,null)],function(t,e){t(e,1,0)},null)}var zS=Bi("app-engine",Yd,FS,{},{},[]);const US=new gn("8.1.2");function jS(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}let HS;try{HS="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch($L){HS=!1}const VS=new gn("8.1.2"),GS=new Et("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});class WS{constructor(t,e){this._sanityChecksEnabled=t,this._hammerLoader=e,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_areChecksEnabled(){return this._sanityChecksEnabled&&ee()&&!this._isTestEnv()}_isTestEnv(){const t=this._window;return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._document||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){VS.full!==US.full&&console.warn("The Angular Material version ("+VS.full+") does not match the Angular CDK version ("+US.full+").\nPlease ensure the versions of these two packages exactly match.")}_checkHammerIsAvailable(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}let qS;try{qS="undefined"!=typeof Intl}catch($L){qS=!1}class XS{}const YS=new Et("MAT_GRID_LIST");class QS{constructor(t,e){this._element=t,this._gridList=e,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(jS(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(jS(t))}_setStyle(t,e){this._element.nativeElement.style[t]=e}}class ZS{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(t=>this._trackTile(t))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new KS(this.rowIndex,e)}_findMatchingGap(t){if(t>this.tracker.length)throw Error(`mat-grid-list: tile with colspan ${t} is wider than `+`grid with cols="${this.tracker.length}".`);let e=-1,n=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e)):-1!=(e=this.tracker.indexOf(0,this.columnIndex))?(n=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e))}while(n-e<t||0==n);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let n=0;n<e.colspan;n++)this.tracker[t+n]=e.rowspan}}class KS{constructor(t,e){this.row=t,this.col=e}}const JS=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class $S{constructor(){this._rows=0,this._rowspan=0}init(t,e,n,i){this._gutterSize=rM(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=n,this._direction=i}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":iM(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,n){let i=100/this._cols,r=(this._cols-1)/this._cols;this.setColStyles(t,n,i,r),this.setRowStyles(t,e,i,r)}setColStyles(t,e,n,i){let r=this.getBaseTileSize(n,i);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(r,e)),t._setStyle("width",iM(this.getTileSize(r,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class tM extends $S{constructor(t){super(),this.fixedRowHeight=t}init(t,e,n,i){if(super.init(t,e,n,i),this.fixedRowHeight=rM(this.fixedRowHeight),!JS.test(this.fixedRowHeight))throw Error(`Invalid value "${this.fixedRowHeight}" set as rowHeight.`)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",iM(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",iM(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class eM extends $S{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,n,i){this.baseTileHeight=this.getBaseTileSize(n/this.rowHeightRatio,i),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",iM(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",iM(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");if(2!==e.length)throw Error(`mat-grid-list: invalid ratio given for row-height: "${t}"`);this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class nM extends $S{setRowStyles(t,e){let n=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(n,e)),t._setStyle("height",iM(this.getTileSize(n,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function iM(t){return`calc(${t})`}function rM(t){return t.match(/([A-Za-z%]+)$/)?t:`${t}px`}const sM="fit";class oM{constructor(t,e){this._element=t,this._dir=e,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(jS(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${null==t?"":t}`}get rowHeight(){return this._rowHeight}set rowHeight(t){const e=`${null==t?"":t}`;e!==this._rowHeight&&(this._rowHeight=e,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){if(!this.cols)throw Error('mat-grid-list: must pass in number of columns. Example: <mat-grid-list cols="3">')}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler=t===sM?new nM:t&&t.indexOf(":")>-1?new eM(t):new tM(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new ZS);const t=this._tileCoordinator,e=this._tiles.filter(t=>!t._gridList||t._gridList===this),n=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,e),this._tileStyler.init(this.gutterSize,t,this.cols,n),e.forEach((e,n)=>{const i=t.positions[n];this._tileStyler.setStyle(e,i.row,i.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}}class aM{}const lM=new Et("cdk-dir-doc",{providedIn:"root",factory:function(){return Bt(Ba)}});let cM=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Pr,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.ngInjectableDef=dt({factory:function(){return new t(Nt(lM,8))},token:t,providedIn:"root"}),t})();class hM{}var uM=$n({encapsulation:2,styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-figure{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}.mat-grid-tile .mat-grid-tile-footer,.mat-grid-tile .mat-grid-tile-header{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-footer>*,.mat-grid-tile .mat-grid-tile-header>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-grid-tile .mat-grid-tile-footer.mat-2-line,.mat-grid-tile .mat-grid-tile-header.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}"],data:{}});function dM(t){return co(2,[(t()(),Xs(0,0,null,null,1,"div",[],null,null,null,null,null)),io(null,0)],null,null)}var pM=$n({encapsulation:2,styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-figure{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}.mat-grid-tile .mat-grid-tile-footer,.mat-grid-tile .mat-grid-tile-header{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-footer>*,.mat-grid-tile .mat-grid-tile-header>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-grid-tile .mat-grid-tile-footer.mat-2-line,.mat-grid-tile .mat-grid-tile-header.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}"],data:{}});function fM(t){return co(2,[(t()(),Xs(0,0,null,null,1,"figure",[["class","mat-figure"]],null,null,null,null,null)),io(null,0)],null,null)}class mM{constructor(t){this.el=t,this.chars="!<>-_\\/]{[}\u2014=+*>^?#<_~________",this.update=this.update.bind(this)}setText(t){const e=this.el.innerText,n=Math.max(e.length,t.length),i=new Promise(t=>this.resolve=t);this.queue=[];for(let r=0;r<n;r++){const n=e[r]||"",i=t[r]||"",s=Math.floor(40*Math.random()),o=s+Math.floor(40*Math.random());this.queue.push({from:n,to:i,start:s,end:o})}return cancelAnimationFrame(this.frameRequest),this.frame=0,this.update(),i}update(){let t="",e=0;for(let n=0,i=this.queue.length;n<i;n++){let{from:i,to:r,start:s,end:o,char:a}=this.queue[n];this.frame>=o?(e++,t+=r):this.frame>=s?((!a||Math.random()<.25)&&(a=this.randomChar(),this.queue[n].char=a),t+=`<span class="dud" style="color:#808080">${a}</span>`):t+=i}this.el.innerHTML=t,e===this.queue.length?this.resolve():(this.frameRequest=requestAnimationFrame(this.update),this.frame++)}randomChar(){return this.chars[Math.floor(Math.random()*this.chars.length)]}}class gM{constructor(){}ngOnInit(){const t=["Thinker","Designer","Creative developer","Problem solver","#justsaying","Dancer"],e=document.querySelector(".text"),n=new mM(e);let i=0;const r=()=>{n.setText(t[i]).then(()=>{}),i+=1};r();var s=setInterval(function(){i==t.length?(clearInterval(s),new mM(document.querySelector(".reflectIam")).setText("I am Shujath").then(()=>{})):r()},2e3);this.loadScript("../assets/js/imagesloaded.pkgd.min.js"),this.loadScript("../assets/js/TweenMax.min.js"),this.loadScript("../assets/js/menugrid.js")}loadScript(t){const e=document.body,n=document.createElement("script");n.innerHTML="",n.src=t,n.async=!1,n.defer=!0,e.appendChild(n)}}var vM=$n({encapsulation:0,styles:[['@import url(https://fonts.googleapis.com/css?family=Anton|Buenard:400,700);article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], main[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], summary[_ngcontent-%COMP%]{display:block}audio[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{display:inline-block}audio[_ngcontent-%COMP%]:not([controls]){display:none;height:0}[hidden][_ngcontent-%COMP%]{display:none}html[_ngcontent-%COMP%]{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{outline:0}h1[_ngcontent-%COMP%]{font-size:2em;margin:.67em 0}abbr[title][_ngcontent-%COMP%]{border-bottom:1px dotted}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:700}dfn[_ngcontent-%COMP%]{font-style:italic}hr[_ngcontent-%COMP%]{box-sizing:content-box;height:0}mark[_ngcontent-%COMP%]{background:#ff0;color:#000}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], samp[_ngcontent-%COMP%]{font-family:monospace,serif;font-size:1em}pre[_ngcontent-%COMP%]{white-space:pre-wrap}q[_ngcontent-%COMP%]{quotes:"\\201C" "\\201D" "\\2018" "\\2019"}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup[_ngcontent-%COMP%]{top:-.5em}sub[_ngcontent-%COMP%]{bottom:-.25em}img[_ngcontent-%COMP%]{border:0}svg[_ngcontent-%COMP%]:not(:root){overflow:hidden}figure[_ngcontent-%COMP%]{margin:0}fieldset[_ngcontent-%COMP%]{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend[_ngcontent-%COMP%]{border:0;padding:0}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:100%;margin:0}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{line-height:normal}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], input[type=reset][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{-webkit-appearance:button;cursor:pointer}button[disabled][_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{cursor:default}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0}input[type=search][_ngcontent-%COMP%]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button, input[type=search][_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}button[_ngcontent-%COMP%]::-moz-focus-inner, input[_ngcontent-%COMP%]::-moz-focus-inner{border:0;padding:0}textarea[_ngcontent-%COMP%]{overflow:auto;vertical-align:top}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]::after, [_ngcontent-%COMP%]::before{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;--color-text:#000;--color-bg:whitesmoke;--color-link:#000;--color-link-hover:#000;--color-info:#000;font-family:Buenard,serif;min-height:100vh;color:#000;background-color:#f5f5f5;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.preview-open[_ngcontent-%COMP%]{overflow:hidden}.js[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]::before{content:\'\';position:fixed;z-index:100000;top:0;left:0;width:100%;height:100%;background:#f5f5f5}.js[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]::after{content:\'\';position:fixed;z-index:100000;top:50%;left:50%;width:60px;height:60px;margin:-30px 0 0 -30px;pointer-events:none;border-radius:50%;opacity:.4;background:#000;-webkit-animation:.7s linear infinite alternate forwards loaderAnim;animation:.7s linear infinite alternate forwards loaderAnim}@-webkit-keyframes loaderAnim{to{opacity:1;transform:scale3d(.5,.5,1)}}@keyframes loaderAnim{to{opacity:1;transform:scale3d(.5,.5,1)}}a[_ngcontent-%COMP%]{text-decoration:none;color:#000;outline:0}a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{color:#000;outline:0}.hidden[_ngcontent-%COMP%]{position:absolute;overflow:hidden;width:0;height:0;pointer-events:none}.icon[_ngcontent-%COMP%]{display:block;width:1.5em;height:1.5em;margin:0 auto;fill:currentColor}main[_ngcontent-%COMP%]{position:relative;height:100vh}.content[_ngcontent-%COMP%]{position:relative}.grid[_ngcontent-%COMP%]{width:80%;max-width:100vw;margin:0 5%;padding-bottom:10rem;grid-row-gap:3rem;padding-top:5rem;grid-column-gap:4rem}.grid__item[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0 0 10rem;cursor:pointer}.box[_ngcontent-%COMP%]{position:relative;margin:2rem}.box__title[_ngcontent-%COMP%]{margin:0;line-height:1;position:absolute;z-index:100;height:35vh}.box__title-inner[_ngcontent-%COMP%]{display:block;position:relative;font-weight:400;text-transform:uppercase;font-size:5vh;letter-spacing:.15rem;line-height:1.25;font-family:Anton,sans-serif}.box__title-inner[data-hover][_ngcontent-%COMP%]{-webkit-text-stroke:1px #000;text-stroke:1px #000;-webkit-text-fill-color:transparent;text-fill-color:transparent;color:transparent}.box__title-inner[_ngcontent-%COMP%]::before{content:attr(data-hover);position:absolute;top:0;left:0;height:0;overflow:hidden;white-space:nowrap;-webkit-text-stroke:0;text-stroke:0;-webkit-text-fill-color:#000;text-fill-color:#000;color:#000;transition:all .3s}.grid__item[_ngcontent-%COMP%]:hover   .box__title-inner[_ngcontent-%COMP%]::before{height:100%;width:100%}.box__text[_ngcontent-%COMP%]{margin:.5rem 1rem;position:absolute;top:-5rem;font-weight:400;text-transform:uppercase;letter-spacing:.15rem;font-size:3vh;font-family:Anton,sans-serif}.box__text-inner[_ngcontent-%COMP%]{position:relative;display:block;border:1vh solid #000;padding:.25rem 1.25rem}.box__text-inner--reverse[_ngcontent-%COMP%]{background:#000;color:#f5f5f5}.box__img[_ngcontent-%COMP%]{display:block;flex:none;margin:0 auto;max-width:100%;-webkit-filter:grayscale(1);filter:grayscale(1);transition:-webkit-filter .3s;transition:filter .3s;transition:filter .3s,-webkit-filter .3s;pointer-events:none}.grid__item[_ngcontent-%COMP%]:hover   .box__img[_ngcontent-%COMP%]:not(.box__img--original){-webkit-filter:grayscale(0);filter:grayscale(0)}.box__shadow[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:-1rem;left:-1rem;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAOklEQVQoU43MSwoAMAgD0eT+h7ZYaOlHo7N+DNHL2HAGgBWcyGcKbqTghTL4oQiG6IUpOqFEC5bI4QD8PAoKd9j4XwAAAABJRU5ErkJggg==)}.box__deco[_ngcontent-%COMP%]{font-size:6rem;line-height:1;font-weight:700;position:absolute;bottom:-4rem;right:-4rem;display:none}.box__content[_ngcontent-%COMP%]{position:absolute;max-width:195px;font-size:.9rem;text-align:right;display:none}.box__content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{white-space:nowrap}.overlay[_ngcontent-%COMP%]{pointer-events:none;width:100%;height:100vh;position:fixed;top:0;left:0;z-index:1000;overflow:hidden}.overlay--open[_ngcontent-%COMP%]{pointer-events:auto}.overlay__reveal[_ngcontent-%COMP%]{width:100%;height:100%;top:0;left:0;background:#000;position:absolute;z-index:100;transform:translate3d(100%,0,0)}.overlay__item[_ngcontent-%COMP%]{width:100%;height:100vh;position:absolute;top:0;left:0;background:#ececec;opacity:0;display:flex;flex-direction:column;align-items:center;padding:5rem 5vw;justify-content:center}.overlay__item[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{max-width:600px;max-height:100%;margin:0}.overlay__item[_ngcontent-%COMP%]   .box__title[_ngcontent-%COMP%]{bottom:0}.box__img--original[_ngcontent-%COMP%]{max-height:calc(100vh - 10rem);-webkit-filter:none;filter:none}.overlay__close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:0 0;border:0;margin:1rem;padding:1rem;opacity:0}.overlay__close[_ngcontent-%COMP%]:focus{outline:0}.overlay__content[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;max-width:25rem;margin:1rem 0 0 10vw}@media screen and (min-width:55em){.grid[_ngcontent-%COMP%]{display:grid;align-items:center;padding:3rem 3rem 15rem;grid-row-gap:2rem;grid-column-gap:3rem;grid-template-columns:repeat(3,calc(100% / 3))}.grid__item[_ngcontent-%COMP%]{margin:0}.box[_ngcontent-%COMP%]{margin:4rem}.box__title[_ngcontent-%COMP%]{top:-4vh;right:-3vw;-webkit-writing-mode:vertical-rl;-ms-writing-mode:tb-rl;writing-mode:vertical-rl;height:35vh}.box__title--straight[_ngcontent-%COMP%]{-webkit-writing-mode:horizontal-tb;-ms-writing-mode:lr-tb;writing-mode:horizontal-tb}.box__title--straight[_ngcontent-%COMP%]   .box__title-inner[_ngcontent-%COMP%]::before{width:0;height:auto}.box__title--bottom[_ngcontent-%COMP%]{bottom:-5rem;top:auto}.box__title--left[_ngcontent-%COMP%]{left:-4vw;z-index:2;right:auto;top:0;height:35vh}.box__text--topcloser[_ngcontent-%COMP%]{top:-5rem}.box__text--bottom[_ngcontent-%COMP%], .box__text--bottomcloser[_ngcontent-%COMP%]{bottom:-5rem;top:auto}.box__text--right[_ngcontent-%COMP%]{right:0;left:auto}.box__text--left[_ngcontent-%COMP%]{left:0;right:auto}.box__text-inner--rotated1[_ngcontent-%COMP%]{transform:rotate(8deg);left:2rem}.box__text-inner--rotated2[_ngcontent-%COMP%]{transform:rotate(-3deg)}.box__text-inner--rotated3[_ngcontent-%COMP%]{transform:rotate(-8deg);right:2rem}.box__deco[_ngcontent-%COMP%]{display:block}.box__deco--left[_ngcontent-%COMP%]{right:auto;left:-3rem}.box__deco--top[_ngcontent-%COMP%]{top:0;bottom:auto}.overlay__item[_ngcontent-%COMP%]{flex-direction:row}.overlay__content[_ngcontent-%COMP%]{font-size:2.25rem;margin-top:0}.overlay__item[_ngcontent-%COMP%]   .box__title--bottom[_ngcontent-%COMP%]{bottom:0}}@media screen and (min-width:80em){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,33%)}.box[_ngcontent-%COMP%]{margin:6rem 4.5rem}.box__content[_ngcontent-%COMP%]{display:block}}@media screen and (max-width:55em){.content[_ngcontent-%COMP%]{flex-direction:column;height:auto;min-height:0}.content--fixed[_ngcontent-%COMP%]{position:relative;z-index:1000;display:block;padding:.85em}}.social-icons[_ngcontent-%COMP%]{flex-direction:row}.graphicEngine[_ngcontent-%COMP%]{z-index:-5;position:absolute}section[_ngcontent-%COMP%]{width:100vw;height:auto}.Intro[_ngcontent-%COMP%]{width:100vw;height:100vh;position:absolute;top:40vh;left:30vw}.iam[_ngcontent-%COMP%]{font-size:6vh}.reflectIam[_ngcontent-%COMP%]{font-size:6vh;width:60vw;overflow-wrap:break-word}']],data:{}});function yM(t){return co(0,[(t()(),Xs(0,0,null,null,15,"section",[["class","sec1"]],null,null,null,null,null)),(t()(),Xs(1,0,null,null,2,"div",[["class","graphicEngine"]],null,null,null,null,null)),(t()(),Xs(2,0,null,null,1,"app-engine",[],null,null,null,BS,NS)),ar(3,114688,null,0,Yd,[kS],null,null),(t()(),Xs(4,0,null,null,11,"mat-grid-list",[["class","mat-grid-list"],["cols","1"],["rowHeight","100vh"]],null,null,null,dM,uM)),ar(5,2211840,null,1,oM,[cn,[2,cM]],{cols:[0,"cols"],rowHeight:[1,"rowHeight"]},null),Js(603979776,1,{_tiles:1}),(2048,null,e=YS,null,n=[oM],lr(-1,2048,null,0,e,null,n)),(t()(),Xs(8,0,null,0,7,"mat-grid-tile",[["class","mat-grid-tile"],["colspan","1"],["rowspan","1"]],null,null,null,fM,pM)),ar(9,49152,[[1,4]],0,QS,[cn,[2,YS]],{rowspan:[0,"rowspan"],colspan:[1,"colspan"]},null),(t()(),Xs(10,0,null,0,5,"div",[["class","Intro"]],null,null,null,null,null)),(t()(),Xs(11,0,null,null,1,"div",[["class","iam"]],null,null,null,null,null)),(t()(),oo(-1,null,["Hi there!"])),(t()(),Xs(13,0,null,null,2,"div",[["class","reflectIam"]],null,null,null,null,null)),(t()(),oo(-1,null,["I'm a "])),(t()(),Xs(15,0,null,null,0,"span",[["class","text"]],null,null,null,null,null)),(t()(),Xs(16,0,null,null,76,"section",[["class","sec1"]],null,null,null,null,null)),(t()(),Xs(17,0,null,null,75,"div",[["class","grid"]],null,null,null,null,null)),(t()(),Xs(18,0,null,null,15,"a",[["class","grid__item"],["routerLink","/projects"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==Yi(t,19).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),ar(19,671744,null,0,yd,[gd,su,wa],{routerLink:[0,"routerLink"]},null),(t()(),Xs(20,0,null,null,13,"div",[["class","box"]],null,null,null,null,null)),(t()(),Xs(21,0,null,null,0,"div",[["class","box__shadow"]],null,null,null,null,null)),(t()(),Xs(22,0,null,null,1,"img",[["alt","Some image"],["class","box__img"],["routerLink","/projects"],["src","assets/img/1.gif"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==Yi(t,23).onClick()&&i),i},null,null)),ar(23,16384,null,0,vd,[gd,su,[8,null],fn,cn],{routerLink:[0,"routerLink"]},null),(t()(),Xs(24,0,null,null,2,"h3",[["class","box__title"]],null,null,null,null,null)),(t()(),Xs(25,0,null,null,1,"span",[["class","box__title-inner"],["data-hover","TECHIE"]],null,null,null,null,null)),(t()(),oo(-1,null,["TECHIE"])),(t()(),Xs(27,0,null,null,2,"h4",[["class","box__text"]],null,null,null,null,null)),(t()(),Xs(28,0,null,null,1,"span",[["class","box__text-inner box__text-inner--rotated3"]],null,null,null,null,null)),(t()(),oo(-1,null,["PROJECTS"])),(t()(),Xs(30,0,null,null,1,"div",[["class","box__deco"]],null,null,null,null,null)),(t()(),oo(-1,null,["\u2665"])),(t()(),Xs(32,0,null,null,1,"p",[["class","box__content"]],null,null,null,null,null)),(t()(),oo(-1,null,['"Sometimes we go surfing when it\'s stormy weather"'])),(t()(),Xs(34,0,null,null,11,"a",[["class","grid__item"],["disabled",""],["href","#preview-2"]],null,null,null,null,null)),(t()(),Xs(35,0,null,null,10,"div",[["class","box"]],null,null,null,null,null)),(t()(),Xs(36,0,null,null,0,"div",[["class","box__shadow"]],null,null,null,null,null)),(t()(),Xs(37,0,null,null,0,"img",[["alt","Some image"],["class","box__img"],["src","assets/img/3.jpg"]],null,null,null,null,null)),(t()(),Xs(38,0,null,null,2,"h3",[["class","box__title"]],null,null,null,null,null)),(t()(),Xs(39,0,null,null,1,"span",[["class","box__title-inner"],["data-hover","CHILL ZONE"]],null,null,null,null,null)),(t()(),oo(-1,null,["CHILL ZONE"])),(t()(),Xs(41,0,null,null,2,"h4",[["class","box__text box__text--topcloser box__text--left"]],null,null,null,null,null)),(t()(),Xs(42,0,null,null,1,"span",[["class","box__text-inner box__text-inner--rotated3"]],null,null,null,null,null)),(t()(),oo(-1,null,["M.A.D"])),(t()(),Xs(44,0,null,null,1,"div",[["class","box__deco"]],null,null,null,null,null)),(t()(),oo(-1,null,["\u266d\u266d"])),(t()(),Xs(46,0,null,null,11,"a",[["class","grid__item"],["href","#preview-3"]],null,null,null,null,null)),(t()(),Xs(47,0,null,null,10,"div",[["class","box"]],null,null,null,null,null)),(t()(),Xs(48,0,null,null,0,"div",[["class","box__shadow"]],null,null,null,null,null)),(t()(),Xs(49,0,null,null,0,"img",[["alt","Some image"],["class","box__img"],["src","assets/img/3.gif"]],null,null,null,null,null)),(t()(),Xs(50,0,null,null,2,"h3",[["class","box__title"]],null,null,null,null,null)),(t()(),Xs(51,0,null,null,1,"span",[["class","box__title-inner"],["data-hover","FEAT"]],null,null,null,null,null)),(t()(),oo(-1,null,["FEAT"])),(t()(),Xs(53,0,null,null,2,"h4",[["class","box__text box__text--topcloser box__text--left"]],null,null,null,null,null)),(t()(),Xs(54,0,null,null,1,"span",[["class","box__text-inner box__text-inner--rotated3"]],null,null,null,null,null)),(t()(),oo(-1,null,["ACHIEVEMENTS"])),(t()(),Xs(56,0,null,null,1,"div",[["class","box__deco"]],null,null,null,null,null)),(t()(),oo(-1,null,["\u2730"])),(t()(),Xs(58,0,null,null,12,"a",[["class","grid__item"],["routerLink","/work"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==Yi(t,59).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),ar(59,671744,null,0,yd,[gd,su,wa],{routerLink:[0,"routerLink"]},null),(t()(),Xs(60,0,null,null,10,"div",[["class","box"]],null,null,null,null,null)),(t()(),Xs(61,0,null,null,0,"div",[["class","box__shadow"]],null,null,null,null,null)),(t()(),Xs(62,0,null,null,0,"img",[["alt","Some image"],["class","box__img"],["src","assets/img/4.gif"]],null,null,null,null,null)),(t()(),Xs(63,0,null,null,2,"h3",[["class","box__title box__title--left"]],null,null,null,null,null)),(t()(),Xs(64,0,null,null,1,"span",[["class","box__title-inner"],["data-hover","I WORK!"]],null,null,null,null,null)),(t()(),oo(-1,null,["I WORK!"])),(t()(),Xs(66,0,null,null,2,"h4",[["class","box__text box__title--topcloser box__text--right"]],null,null,null,null,null)),(t()(),Xs(67,0,null,null,1,"span",[["class","box__text-inner box__text-inner--rotated1"]],null,null,null,null,null)),(t()(),oo(-1,null,["EXPERIENCE"])),(t()(),Xs(69,0,null,null,1,"div",[["class","box__deco"]],null,null,null,null,null)),(t()(),oo(-1,null,["\u2699"])),(t()(),Xs(71,0,null,null,9,"a",[["class","grid__item"],["href","#preview-6"]],null,null,null,null,null)),(t()(),Xs(72,0,null,null,8,"div",[["class","box"]],null,null,null,null,null)),(t()(),Xs(73,0,null,null,0,"div",[["class","box__shadow"]],null,null,null,null,null)),(t()(),Xs(74,0,null,null,0,"img",[["alt","Some image"],["class","box__img"],["src","assets/img/5.gif"]],null,null,null,null,null)),(t()(),Xs(75,0,null,null,2,"h3",[["class","box__title box__title--left"]],null,null,null,null,null)),(t()(),Xs(76,0,null,null,1,"span",[["class","box__title-inner"],["data-hover","LOGBOOK"]],null,null,null,null,null)),(t()(),oo(-1,null,["LOGBOOK"])),(t()(),Xs(78,0,null,null,2,"h4",[["class","box__text box__title--topcloser box__text--right"]],null,null,null,null,null)),(t()(),Xs(79,0,null,null,1,"span",[["class","box__text-inner box__text-inner--rotated1"]],null,null,null,null,null)),(t()(),oo(-1,null,["BLOG"])),(t()(),Xs(81,0,null,null,11,"a",[["class","grid__item"],["href","#preview-5"]],null,null,null,null,null)),(t()(),Xs(82,0,null,null,10,"div",[["class","box"]],null,null,null,null,null)),(t()(),Xs(83,0,null,null,0,"div",[["class","box__shadow"]],null,null,null,null,null)),(t()(),Xs(84,0,null,null,0,"img",[["alt","Some image"],["class","box__img"],["src","assets/img/6.gif"]],null,null,null,null,null)),(t()(),Xs(85,0,null,null,2,"h3",[["class","box__title box__title--left"]],null,null,null,null,null)),(t()(),Xs(86,0,null,null,1,"span",[["class","box__title-inner"],["data-hover","I CAN SEE"]],null,null,null,null,null)),(t()(),oo(-1,null,["I CAN SEE"])),(t()(),Xs(88,0,null,null,2,"h4",[["class","box__text box__title--topcloser box__text--right"]],null,null,null,null,null)),(t()(),Xs(89,0,null,null,1,"span",[["class","box__text-inner box__text-inner--rotated1"]],null,null,null,null,null)),(t()(),oo(-1,null,["Gallery"])),(t()(),Xs(91,0,null,null,1,"div",[["class","box__deco"],["style","font-size:4rem"]],null,null,null,null,null)),(t()(),oo(-1,null,["\u{1f440}"])),(t()(),Xs(93,0,null,null,1,"section",[["class","sec1"]],null,null,null,null,null)),(t()(),Xs(94,0,null,null,0,"div",[["class","SectionTitle"]],null,null,null,null,null))],function(t,e){t(e,3,0),t(e,5,0,"1","100vh"),t(e,9,0,"1","1"),t(e,19,0,"/projects"),t(e,23,0,"/projects"),t(e,59,0,"/work")},function(t,e){t(e,18,0,Yi(e,19).target,Yi(e,19).href),t(e,58,0,Yi(e,59).target,Yi(e,59).href)});var e,n}function _M(t){return co(0,[(t()(),Xs(0,0,null,null,1,"app-home",[],null,null,null,yM,vM)),ar(1,114688,null,0,gM,[],null,null)],function(t,e){t(e,1,0)},null)}var bM=Bi("app-home",gM,_M,{},{},[]),xM=i("EVdn");class wM{constructor(){}ngOnInit(){xM(".presentation").on("click",function(){xM(".presentation").removeClass("active"),xM(this).addClass("active")})}}var AM=$n({encapsulation:0,styles:[['.wrapper[_ngcontent-%COMP%]{height:100vh;font-family:Roboto;font-weight:500;color:#f5f5f5;margin:1% 8%}.nav__wrapper[_ngcontent-%COMP%]{height:100%;z-index:99;display:flex;flex-flow:column nowrap;justify-content:flex-end}.nav__counter[_ngcontent-%COMP%]{font-size:3vh;transition:all .15s ease-out}.nav__title[_ngcontent-%COMP%]{font-size:4vh;font-weight:300;margin:0 0 .25em;width:auto;height:0;overflow:hidden;opacity:0;transition:height .3s ease-out,opacity .2s ease-out}.SecTitle[_ngcontent-%COMP%]{font-size:20vh;position:fixed;top:1vh;width:100vw;left:5vw;-webkit-text-stroke:1px #000;font-weight:1000;font-stretch:expanded;letter-spacing:1rem;-webkit-text-fill-color:#f5f5f5;transition:.3s all;overflow-wrap:break-word;opacity:.5}.b2h[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:1%;z-index:2;color:#000;left:97%}.nav__body[_ngcontent-%COMP%]{font-weight:300;font-size:2.5vh;width:auto;max-width:60vw;text-align:justify;height:0;overflow:hidden;opacity:0;transition:height .3s ease-out,opacity .2s ease-out}.nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;transition:all .3s ease-out;margin-bottom:1em}.nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:\'\';display:block;border-left:2px solid #000;border-top:2px solid #000;height:100vh;width:1.5vw;position:absolute;left:-2.5vw;top:2vh}.nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:0;color:#000;transition:all .15s ease-out}.nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:transparent;padding-left:1em}.nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{background-color:transparent}.nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{pointer-events:none;padding-left:1em}.nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{width:2.5vw;height:100vh;top:4vh}.nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .nav__counter[_ngcontent-%COMP%]{font-size:3vh}.nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .nav__body[_ngcontent-%COMP%], .nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .nav__title[_ngcontent-%COMP%]{height:auto;opacity:1;overflow:visible}[_ngcontent-%COMP%]:root{--txt-color:#fff;--txt-box-bg:#424242;--main-bg:#000;--main-front-color:#00a8ff;--second-front-color:#e84118;--third-front-color:#fbc531}*[_ngcontent-%COMP%]{margin:0;padding:0}.head-text[_ngcontent-%COMP%]{font-family:"IBM Plex Sans",sans-serif;color:var(--txt-color)}.main-text[_ngcontent-%COMP%]{font-family:"IBM Plex Mono" monospace;color:var(--txt-color)}#title-text[_ngcontent-%COMP%]{position:absolute;background-clip:text;color:transparent;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-image:linear-gradient(#000,#000);background-size:100% 100%;background-position:right;background-repeat:no-repeat;transition:1s all;font-weight:700;text-align:center;font-size:9vh;-webkit-text-stroke:2px var(--main-front-color);-webkit-animation:13s linear infinite stroke-rainbow,13s linear infinite text-rainbow;animation:13s linear infinite stroke-rainbow,13s linear infinite text-rainbow}#title-text[_ngcontent-%COMP%]:hover{background-size:0 100%}@-webkit-keyframes stroke-rainbow{0%,100%{border-color:var(--main-front-color);-webkit-text-stroke-color:var(--main-front-color)}25%,75%{border-color:var(--second-front-color);-webkit-text-stroke-color:var(--second-front-color)}50%{border-color:var(--third-front-color);-webkit-text-stroke-color:var(--third-front-color)}}@keyframes stroke-rainbow{0%,100%{border-color:var(--main-front-color);-webkit-text-stroke-color:var(--main-front-color)}25%,75%{border-color:var(--second-front-color);-webkit-text-stroke-color:var(--second-front-color)}50%{border-color:var(--third-front-color);-webkit-text-stroke-color:var(--third-front-color)}}@-webkit-keyframes text-rainbow{0%,100%{background-color:var(--main-front-color)}25%,75%{background-color:var(--second-front-color)}50%{background-color:var(--third-front-color)}}@keyframes text-rainbow{0%,100%{background-color:var(--main-front-color)}25%,75%{background-color:var(--second-front-color)}50%{background-color:var(--third-front-color)}}']],data:{}});function EM(t){return co(0,[(t()(),Xs(0,0,null,null,3,"a",[["class","b2h"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==Yi(t,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),ar(1,671744,null,0,yd,[gd,su,wa],{routerLink:[0,"routerLink"]},null),so(32,2,new Array(1)),(t()(),Xs(3,0,null,null,0,"i",[["class","fa fa-home fa-2x"]],null,null,null,null,null)),(t()(),Xs(4,0,null,null,3,"div",[["class","SecTitle"]],null,null,null,null,null)),(t()(),oo(-1,null,[" LIFE"])),(t()(),Xs(6,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),oo(-1,null,["EXPERIENCE\n"])),(t()(),Xs(8,0,null,null,50,"div",[["class","wrapper"]],null,null,null,null,null)),(t()(),Xs(9,0,null,null,49,"nav",[["class","nav__wrapper"],["id","navbar-example"]],null,null,null,null,null)),(t()(),Xs(10,0,null,null,48,"ul",[["class","nav"]],null,null,null,null,null)),(t()(),Xs(11,0,null,null,10,"li",[["class","presentation active"]],null,null,null,null,null)),(t()(),Xs(12,0,null,null,9,"a",[],null,null,null,null,null)),(t()(),Xs(13,0,null,null,1,"span",[["class","nav__counter"]],null,null,null,null,null)),(t()(),oo(-1,null,["February 2018 - Present"])),(t()(),Xs(15,0,null,null,1,"h3",[["class","nav__title"]],null,null,null,null,null)),(t()(),oo(-1,null,["Systems Engineer, Infosys Ltd."])),(t()(),Xs(17,0,null,null,4,"p",[["class","nav__body"]],null,null,null,null,null)),(t()(),oo(-1,null,["After a four month long internship, I became part of a fun research and innovation team named "])),(t()(),Xs(19,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),oo(-1,null,["Lab42, ETA"])),(t()(),oo(-1,null,[". We work on next-gen solutions using disruptive technologies like Deep learning and Virtual reality. Responsibilities include developing POCs and transforming them into innovative solutions, managing and mentoring interns in developing and deploying products."])),(t()(),Xs(22,0,null,null,8,"li",[["class","presentation"]],null,null,null,null,null)),(t()(),Xs(23,0,null,null,7,"a",[],null,null,null,null,null)),(t()(),Xs(24,0,null,null,1,"span",[["class","nav__counter"]],null,null,null,null,null)),(t()(),oo(-1,null,["July 2015 - May 2018"])),(t()(),Xs(26,0,null,null,2,"h3",[["class","nav__title"]],null,null,null,null,null)),(t()(),oo(-1,null,["Advisor/Developer, Think-Digital "])),(t()(),Xs(28,0,null,null,0,"i",[["class","fa fa-info-circle"],["href","http://think-digital.in"]],null,null,null,null,null)),(t()(),Xs(29,0,null,null,1,"p",[["class","nav__body"]],null,null,null,null,null)),(t()(),oo(-1,null,[" This is a startup organization specializing in Software solutions. Enhanced my frontend and backend skills by working on a versatile of projects. Later, I became an advisor and my role was focussed on mentoring and guiding young developers, and orienting the organization towards a technologically advanced company. Being in the organizationm, I also conducted workshops on IoT as an Intro and pursuing it as an advanced career. "])),(t()(),Xs(31,0,null,null,7,"li",[["class","presentation"]],null,null,null,null,null)),(t()(),Xs(32,0,null,null,6,"a",[],null,null,null,null,null)),(t()(),Xs(33,0,null,null,1,"span",[["class","nav__counter"]],null,null,null,null,null)),(t()(),oo(-1,null,["February 2017 - May 2018"])),(t()(),Xs(35,0,null,null,1,"h3",[["class","nav__title"]],null,null,null,null,null)),(t()(),oo(-1,null,["Creatives Mentor, Google Developer Students' Club (DSC-SRM Chapter)"])),(t()(),Xs(37,0,null,null,1,"p",[["class","nav__body"]],null,null,null,null,null)),(t()(),oo(-1,null,["Developer Student Clubs (DSC) is a Google Developers program for university students to learn mobile and web development skills. My role was to mentor the technical team of DSC. We worked on Android Studio and Web Development using AMP nd PWA."])),(t()(),Xs(39,0,null,null,7,"li",[["class","presentation"]],null,null,null,null,null)),(t()(),Xs(40,0,null,null,6,"a",[],null,null,null,null,null)),(t()(),Xs(41,0,null,null,1,"span",[["class","nav__counter"]],null,null,null,null,null)),(t()(),oo(-1,null,["October 2016 - January 2018"])),(t()(),Xs(43,0,null,null,1,"h3",[["class","nav__title"]],null,null,null,null,null)),(t()(),oo(-1,null,["Developer, Center of Applied Research in Education (CARE-SRM)"])),(t()(),Xs(45,0,null,null,1,"p",[["class","nav__body"]],null,null,null,null,null)),(t()(),oo(-1,null,["Worked with a team of Software develpersto develop smart and innovative teaching environments tat help in enhancing the university's learning approach. We worked on projects like e-Learn and e-Services(A Certification process automation tool)."])),(t()(),Xs(47,0,null,null,10,"li",[["class","presentation"]],null,null,null,null,null)),(t()(),Xs(48,0,null,null,9,"a",[],null,null,null,null,null)),(t()(),Xs(49,0,null,null,1,"span",[["class","nav__counter"]],null,null,null,null,null)),(t()(),oo(-1,null,["July 2014 - May 2018"])),(t()(),Xs(51,0,null,null,1,"h3",[["class","nav__title"]],null,null,null,null,null)),(t()(),oo(-1,null,["Student, SRM University"])),(t()(),Xs(53,0,null,null,4,"p",[["class","nav__body"]],null,null,null,null,null)),(t()(),oo(-1,null,["Completed my Bachelor's degree with an "])),(t()(),Xs(55,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),oo(-1,null,["8.7 GPA"])),(t()(),oo(-1,null,[" at SRM University, a great place for Multi-National people to interact, and grow in terms of every aspect of your life. It doesn't matter which course you select to major in, at the end of the programme , you'll eventually come out as a successful visionary."])),(t()(),oo(-1,null,["l.3 "]))],function(t,e){var n=t(e,2,0,"/home");t(e,1,0,n)},function(t,e){t(e,0,0,Yi(e,1).target,Yi(e,1).href)})}function SM(t){return co(0,[(t()(),Xs(0,0,null,null,1,"app-work",[],null,null,null,EM,AM)),ar(1,114688,null,0,wM,[],null,null)],function(t,e){t(e,1,0)},null)}var MM=Bi("app-work",wM,SM,{},{},[]);i("sEhn");class TM{constructor(){}ngOnInit(){}}var CM=$n({encapsulation:0,styles:[[""]],data:{}});function LM(t){return co(0,[(t()(),Xs(0,0,null,null,5,"a-scene",[],null,null,null,null,null)),(t()(),Xs(1,0,null,null,0,"a-box",[["color","#4CC3D9"],["position","-1 0.5 -3"],["rotation","0 45 0"]],null,null,null,null,null)),(t()(),Xs(2,0,null,null,0,"a-sphere",[["color","#EF2D5E"],["position","0 1.25 -5"],["radius","1.25"]],null,null,null,null,null)),(t()(),Xs(3,0,null,null,0,"a-cylinder",[["color","#FFC65D"],["height","1.5"],["position","1 0.75 -3"],["radius","0.5"]],null,null,null,null,null)),(t()(),Xs(4,0,null,null,0,"a-plane",[["color","#7BC8A4"],["height","4"],["position","0 0 -4"],["rotation","-90 0 0"],["width","4"]],null,null,null,null,null)),(t()(),Xs(5,0,null,null,0,"a-sky",[["color","#ECECEC"]],null,null,null,null,null))],null,null)}function PM(t){return co(0,[(t()(),Xs(0,0,null,null,1,"app-vrview",[],null,null,null,LM,CM)),ar(1,114688,null,0,TM,[],null,null)],function(t,e){t(e,1,0)},null)}var RM=Bi("app-vrview",TM,PM,{},{},[]),OM=i("Au0k"),IM=i.n(OM);class DM{constructor(){this.URLS=["https://logo.clearbit.com/angular.io","https://logo.clearbit.com/reactjs.com","https://logo.clearbit.com/tensorflow.org","https://logo.clearbit.com/javascript.com","https://logo.clearbit.com/python.org","https://logo.clearbit.com/html.com","https://logo.clearbit.com/docker.com","https://logo.clearbit.com/css3.info","https://logo.clearbit.com/jquery.org","https://logo.clearbit.com/linux.org","https://logo.clearbit.com/restfulapi.net","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAA5FBMVEUjLz7////3lij7mCceKzsgLj4dKjoUIzX/micaKDgeLT4YJjf6mCgAJj+EiY8bLD4OIDIAGi4AJT/z9PUPKT87RlUAFSsAEikJHTDskSni4+ULKD/ylCjnjir29/fr7O24u78tOEbFyMs5OTzY2tx2fIMADCZDS1aNkpnciStlTTl7WDakqK3O0NNYYGpnbndOVmGOYTXEfC61dDEvNT3Sgy1BPDzLfi+qrbK9v8M0QE59g4pgZ3GYnaNKUVxscnu8eDBWRTqfajJwUjiscTGCWzYAABucZzRJQTtPQzqLXzVpTzixQPgJAAAOX0lEQVR4nO1bB3eizBomAgKiARSNvRu7cRVTbFFjbsr+//9zhzKFoskaTHbvneec7zsbJszMM29/hzAMBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFxT8OnpMENatpWjYryFHuu1aNyoK1qArW5M+4EKcKtfZysbqvPlTvB53WeC6pPpKchYNTfGLUQ4EXhNr6sWMtugJrMqpwHpLR7PW8U89fkCgPB/Nr2fVbctpC7CpoF1p2bg7Os1rQCll7NC1JxENOUxf1Crlo82ERuwqfpHw1HrjWwQs+ZqJ4P234OM/4JcVV4WhV8C+RuYejI0SRz86r3gWtRTtywAxfgCS3moH0LNTbaDX5ET29921BWOB3WrJ3VF6iwQUcjHKr8oFFK60wKcqjI/zM1Zaq85tcDT+seRVJe8CvVH16qmJhjR2lkObDI6s++g7pZPC1/JGFTKTGUK+usSqPo555MiniUK69q8hokZQzWfT4uvVAYz4J0vKQqmCKWUdgWWRMFyvVPU10TL5R85gpN0dDVftFTg42fIj8VWgM5ZuPCGLXQRjiMOueRuiQLyw8OkYYqWOjct2zRjmVIn88D8NUvr5a3CyXy1anmndJFvq/KNpFJe0Wk+byivceCWexkdqRQCX80kX+vjVat9vt9egRRKzyuRiWHxZjKaPKsiTJsqDJS3LLD47EMvjkb9xiunZZVdPtCglbr2c8Dy7yj1FNlqIgGYhKsprhlytTf5uZ0BhKlh+vt+SM4HIeUmaExZhq2xITLtEjtyHy6oULbk9LGOmlxZ3Q2qHkie9SVmvVU5chhgv+friSM7I/jVAJ57GwF+TaSE2bLjUiLNTCksxciINJ2cqNdaFS8zplczbtKsx4yMuyGjyiDbCaOs5bQ7EzNScNkfCyFgYuR6QhQo7y4dAy8His70UUS6ziMFSxy3TF5KgTvYdODBiSMuBrKDJ0rOfcHBnAjUvY344MyjqgxAiLGhCSR1teODKukBKWUMpWHlk6GV0jhr7M4XuBJVZ2dsIzSE1JQ5RGzsM29MAjKWiapi134pyWPytDIl9+dHZCGBzhnNSV/SjPQI/TISR8hVTBccBcGslwEF52dgqIs4blgoQf3RBlkMOhrqUv4L/wNJxPJ2X0pJL+USFy2F4W0HVIyPvgxIWb55HkmlCaCDhrQg+vcDlT58OrIv4cRPhDEVhFCRj2l8iVrKNwuIwNUUVBpwpDA9Rqi3b7KiAYfxOCGMottDcGbgym3SkZZys4KcFmiBxndE2m2fXllfo9LpUDeaHd9BIkq+sVxJCJop0toX7BFKUu8KhKxlVwBv5+GZeNWXf7Ir8aq2r0vJLkOVVqj2Cn7fJx1GZUVQhiiEVyD5UO1npmiLx2XqnAYIIiCVn6c21PeZhqrsZ89oySlNTaaphyLzlcjdYBDIno5mwoCnN0M7jBbkYZlldZZIZk1ShgZUdoDtbymdSVuxp5C1IvCC0dQwfrqzhMmaJSGHpfmNBdlGOkGmY7FwHI369DTbodyLWHoNUOMGQyqLZzUlNY/VpZDoqhjg7jHLTuLvm0QIpgloUQdvwQRsdbJl6G2NU7JK4JMwTCSRF8gf7fBExhz3NzoBeVv8mG6nSEj1tR7u3hRLppUULu0857UO1n+xWU5qXWXhMTaocapgM+xEsTefwZgiRD3IKwDRFGSKe6RZ7IjvkyTF+a/gyUyzKdYDnWw0sCeN6losNBa5yep9fLxao6JEdIFcNdJ8s7qo6UnOYRErFV3EbHqYAZMEf1er4K6kjXQ+vTaERxnhrM5axs94QENSvV2gskX3J/2LQsQxSaxA+m0sIq2KSPU6BDlSCncu1Ld6QysQqp+OcYPGd+pLm1n5eDIr7JAT42xcbDKWD5oTnhoWL2hZEZNvnDescJ2fWi7iEZC0dPcVYMzMinRoFZG4AAnYkZ1mHOkoJCQr7WfKBBO/ugIRMVMvNLl00ODnSP/gxEyX7R8s94kOEl8RjmLEhIyBA7ApEetD9MVjjh+pHgmP/o9z8FfCMYcJtilgBo2O0nZPgY1EOCo5Qo6+TmjiGCKhidRf5TUVyWCbcQSguHvBEM0CKcNHsYogq2co344EtD2eGcr/HI7Xr7/AfAZbBSLcJI34jmYCdgPuIA3AxxWqPIqAmF3BTUW1AFw0rj011DojUUiiHivD/g3tY17GaIhdvKOHqYDxhdqLBtU/50eMugABWkVX8MonMWxBDfa3rj9RXMBh7+46jkA9k+dQar11BH/LfCh4CveEJphxNCCtBSsobruFUGhzkm7z8C6Hwq17Bo8V4oHga+Z/Zewp4Ewg79OsHxhO/2HCi20EdHq8j7RJjHpWAl777kOAauhrQ0lKt8oq2U90YL7pqsiofuG0vkQS+cXyqTryP+8ACHHjPk1EO7V/H93ccR9BOI4nh4ceNWU1lwl/0eJc54mgLuTDnmPIWe1OP4ufaglQ1sysgCEmGTCSdtw4pYIbM2ObP0lDUeO5U9fRa30bhvhH2lodnLKQ/Gmiq5SXDaOn9gxpOhEjkEKK0Fq7AQNGb54K0am14xuBNl9w2L5zpx6FUAyxOVm51RTVNlyfreLSqpWnuFJy2H1O0nPgMxd9Jaz+fz8aKKTpIoET2GL7u+9ynHXIPkB1IXPkdM3NrlQUE6aoNF5+1lx1VChVU9MVfeJpRLdkMG/9h0axTZmPfeeXt62j6fkfF+DVX29RkCOgIngqsdaUMNGY3gMXLt0y19r9FopCE2vaHCx9CH/KfDy8cQbg72aapMlBEOfkEjk80Hb+xyfV7jSzCJqvQAwXaYDUW1FUyxvMpyxKc9+ZHH9Ekn5WXPyKQh+gIbVzv+seBwHu6lohrYLx2ObEtwpFFVvKdKFI/+7+xIV+vLJcC7/MrXmEFIdbSwP8CW1YFXjMObjHOMvAR8UX4Z8FUwttGmP/1QUROr4hW+PZ5dBF8kVFZMOIHQBV5lLnHvsDJcpYmsipNHSylQa2R+3m6n0+maHHDmsjRvp8FoLfhd4AAE5ua+6VKfcrO6FNTzXLJxgpAePS46ncXjKO39gv3QHhmeO/bt+tFB63UpG52PHy/tK73V5XLNZM95q89FZQHg+/4KwVkV/gGEKkhn/VsECgoKCgoKir8GvKIXdEWJKYqi60rs4xf+KcT0RNLo/dpPNxOAzfTl6TaZ0P9n0pxYQd++TIqiKLIQ4N/xyTN/qiB5RfmLTkdJbHelIstGvGDZbuM0irzR7/FKyPs8FTFlC6QX99GzIL7oJ02q70T27lX/K0xZN6Zxv/QQw33htFn3YoQVp43Ez6uq8rsoQjpxGy49PZEh3+iCadnizij8MEe+IbLxuOlWxHiu1DVRygF/81WGjNK4M0+Ozf1q/KxD5huA1mz60v+9fb1tNAyAxu22PynGv8iQUZiNSTEuln4ZP8oxxhhKoqCbcT7G24gpemJbdOxwd5qnAeATO0v/TY564Qd9TvDHUkl7dxHx18kMwSRPRdbmWNw1En9L7HCg9B01ffrKxvRt13FjbHG61f+CHICPQWVSnmyGxdsvqZfSmEBPLRYnv5kfzgJ5nb99ddI0/dliGC+d6mgcxBI7FH5YsfuL0X9OWWM6378rFjeGdcz6i3X27DTx1XmTvRIOuGJk00v+SKYT05O3eyt1c5KYxMbyEeLzFxyNA8WYEjkhy5Ze3grfTJJXko33mZN4sxNLaslc3FLS1xC2ElOec0ReCDzr7PlW/zaT5JVC42mTY51TjrN901B4ww5ls6+L0ETh9c6V+sbF3KTfUL6DpKIbvWkX103xyLvlCfRnMSwlddZ5j7g5ssC3PjPJs0YQUNQnfk9LIouNRCy92ZR02wxzJ1aHAdD5ibdCA9lwd9dTEmdhGVMKidf3CUvSi7DxnZN48EbOerAPSYTWnPpTV4x4AJxrbvO8ZRJ6SN+VWyuBtFO/fdp1vUW9OOtBw1B+20r6tXDvhW68FAMqUaCv3U3/zVDCkCUf0wvMbW83K7E+lSm+MCgYFywlZSchitBavnC7CeiVWFbJdicvPeYrLT5ADrx825/OQPkX9/Ys4uzkDZfjoKQyf4Hdhp5/xJLbuwMNE6tI7W52/dtEMmHu9dMCtbQykeTfnvd3Zm0bMH9c7PYSxNEpfVNJxU0ybILm3Pp2dqgpZNJkwQYBz+feq6HbVZ1T1rlJgRrP7uomErrx9vS+m+TMlw8cntjtF1zSSpjRK54L1woxR/5pdqQz5IizmCuVQGX+bpfmhtms1gsJEwVTkUGd/rrtPb2/bGalUi4SLDnE791w21vs1fSk7HvIVojA68rTLHKUo7Uzp7sSsbors9nsDgL822y2RMxRNu4zORfYeOnd12PQX8Dq4uTI3xF9maOS7E3Ew8rq5xqAz7zJirN+QH6YBH4mXjLOmxwrSWOX+zTHkwAS4M1rMiAEKT0WZG+3Z6/jYrrxPIuciyRwO91fjeAaBmRs8WLvXEZIgtdj233puNc5DcD6Nj3mQI3Gx3Ji6fd3EDQXUxJMfxMJTANOp8eyk76ROJwhxXbT128i6JDU+5vcEXf/JzBrlk2f+eBa8Nubmzxwd9s9sMmvsQTsIrN9L/Z9xfWfABTixtvzpFs8kSVgl+tO+q/M39CyPASQOSeM7fO0VIwcSr8OkGMjxe6+H3INdiaYHxIkjd+/pl3Wuo8+FtdBymP+UnG2f+8ZycI/wA7Bopk0tu/7zV03Jzogr9/NH3PdO5Cgb/mkmaj+O+QImDwV3jAar9un/vvLbr/fTzfgfzuQjT/1XhuGARzUP8qNAK6S9AJAAvyn2xWVt56ioKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg+P/AfwGJa11hng+2ugAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAADgCAMAAAAt85rTAAAAb1BMVEX///8xxPMowvMfwfP7/v8vxfP2/f/g9v3t+v78//+B2vjw+/49x/TM7/za9P1AyfSK3fhs0/ar5/ud4Pmy5/pa0PZ11vdSzfXC7Pvd9f3R8fyU4PlfzvZQzvV42Pd11Pey6Pux6fqJ2fi77PuK3/lGVkF8AAAHhklEQVR4nO2d2ZaqOhCGtwFCRAaZFKXV7na//zMe9Lh7qfmDIBnoteq780KSnySVqsrAnz8EQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEMR3RFO062uT1R54fo3Vb7Feuq6QJn6fl5rDw2DNecDgWIfddV3AKfphWx6zTtsB0KrPonIql64q+h0jKums5hbgfkV6Q/8r+ui9PmbLpnhsy2xSp6wqPI9lkwTB1N43BNvpFEpN8lLpbM8ab3yGRJ/XLgafQ6OUpd139V/hp9Ka8q8RFu3OtoB9Rbt+Xd5VYF3O2qJ8f4wffs8Igb1zLUBJNlneVGJeuhWDSib3zTmIeuhYjwz8zXfo6hdtmbj6qWGvpnj8Kg3JeCsVJp7yrxHZO1jTMdevriIRrWT+ktQF9MzI1yRDz2YW4i/hGcP31+i/1PNya/Ut9rAsW8tN3WXyez01zrorye1Nni5ciWT2HNgxf6Oui9k153oePbvRql1RtHrzwW1nufhyKfvvCWH7eCWzyeZgWdX8zssi1LeV98wPzgjbsDYCWfB/1S2zdzoc8UteuG3jFkHQSX3fDUf0UpzP+sgjU774uhkavYdszjgOXwUWi9D9ZVo6xgHt1IMK27kypUE7wXp6O61m8UTYiyw1V/zVHRZ0YK8cbv1D1tG4YGqj7EL48VadK3nmcX6i6aexmGArFAHzfh1T5fCx3MRsu14r2i943CqqkQFBorPhQkgzr+57ytlPsF7lwuwW2CVN9q51CYWs9I9zAinibqd6xqpfaTuvjKZBN1qeKvqxPhrAB9QyVJIZ9w3ITwgYM3pr/JArcObQ8eygNmuM9Tcbch/YrttqEqAFZriuwgUkCFml6+hASFCXF+rz+Bj1/a7EJ1+gND4puhwHjaIvujPiQy9ebH0JzBdtY80grYMjjSmsRLeij2V5rEWr8b9SAel9vCDxdnYOgF5SpDz41FwKGubUsKbBx7EN3IRyZGTt21C/By9Vv4YAh9c7aS0GIDRCoP5rZg1IiKzlSMP5N+PocjPTMSlSYyH6op8fLfsAvQDk2UqR+C96siSk4lWdbA0NdhstJBXY00XXAuhU7GijnGS4PQU+vF/OvINBVDiYKemIFZnkz81MlFbQIjBT0SCqP/YOZsQ8Sk54Ff1tO2OtINSF28kTBLPjbspNoKmm5klePbZhR2Y9hRmxMhxy1sNZQUXeA1LOpxZ9SKomtDRV1hzwwjK1uyQvkNjJPB+m1ZgYctSufki9jY6aXbfd7650DkFMjNjL4crS7NWW7GycCZRtjU6D2zIGM2xasDRV1hxzEGBN4dtJFZSNjzIoCgRbWmA4W50FZoIV5UJ7oA1PJLjeeDIizTfmicsRrwxcF0YShHY8cONsWogl5gZkZOgAADiswU/bsjr0c8BraO55spTHoWVidEHLKwtDyOVrnNVLQI1wu1syawRKsgdjIqoGUOouM5EVB7sDGXhIfrNwZWTPYgTUQK1tjwR4ZE2sTaDOVne1OO7BmYKDrcLBKZ2d1CZ11YfpXzwVYRz5aWR9Eawbel/Zi0OqZKZ/wCbBmwD60NyHaUGxprxPapRPrngplh8neaTu4T+akefyjgW7tGFMFfCjNO53kYN5g5kAC7atmJ51+MFh30VxCP2jHalBptDOoAQOLJ3waufgFy/SZALQVx95evAtwS64+dwa+QKubts8m92zjLc2adrwPZAnP9QSaOhHcUGz54ARwpLTNxPBMhpGApQeBT+AcNVhy+GgbixKPVPgQ1Xq6QwMPdttuQIUl7yoyWSE82G0mKdKPvLalRWGDzpUym2cm/qG6I8BbTxmHIT4U5eS2gBQfAe0szfu2FOUpLtGmmzs74FRxoX57PsS9QvuW/qGo7glg757CAaneheVjWQ+oDppfbkIIx8cWywK/rq2Bqg8EnfG51Sqrxo4bX9738/+THN7KyUvlbSRscarGTRgV7g+BpVQaZqW8gOJyR+HpPKKfnrE+Hb7RFHpvdGJx/TV0AjvjS3Ns5ikwu94rDZnHNoMuXlFMOXO4tUp9ac6tjix6KVE1ludx7xj0Hh+quX2xkWbVKvS5cEEBAxT2ujYiUumzHiMpUBjAu6r2nUDH/vXL12KV/SuFPfFqE+u+d8cE6uur/tVW8cfOvCj0OZ8fHhGn/iaM8d92keKFBA5C+H5Eq+hqtxrDPzWq4ZcNvnTOHrzXmHroH6Vq+NXJLD9BIWpVBAwFhrmisT0dyUczlKoshiyQK29Ry/Sv9+sjjRS97kngcpcrnM9sUs7KPLzJ4X2hjwJFoYiN2HGeo+8eUci7up8ENviDG4zVzbyb74aoMunu3juBYgO7MfN+ibwLy8/t0x3MPwJ5iSJbxoJ6vl9hgDTR9r4f3gSKM9q/wOKP9VwChxGE1Xenkd0JXAELdGm779EZuJnA9015uUubXQXy5vmeW3a9g7sZeZnsvPDFrlrnmef9qU4/tuX66TOPZXmbhIo7uH8VPueiSf7mhyzrumyQHep8s/5KV/x3f9mNIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCICzwH8fbVYVLXiuUAAAAAElFTkSuQmCC","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxAPDxANDxAQEQ4PEA8QEA8NEA8NEBAQFREWFhUSFRUYHSggGBolGxMXITIhJSkrLi4vFx8zODMtNygtLisBCgoKDg0OGxAQGy0lHyUtLy0tKy0tLy0tNTgvLS0tLy01LS0tLS0tKzcrLS0tLS0tLS0tLSstLS0tLS0tLS0tLf/AABEIAOEA4QMBEQACEQEDEQH/xAAbAAEAAQUBAAAAAAAAAAAAAAAAAQMEBQYHAv/EADkQAAIBAgEJBAkDBAMAAAAAAAABAgMRBAUGEiExQVFhgRMicZEUFiMyQlOhwdEVovBSkrHhB2Jy/8QAGwEBAAMBAQEBAAAAAAAAAAAAAAEEBQMGAgf/xAAwEQEAAQMDAwMDAgUFAAAAAAAAAQIDEQQSMRNBUQUUIRVSYXGBQlORsdEGIiMyof/aAAwDAQACEQMRAD8A7iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWWVsoww1PtJa3sjFbZM7WLM3atsOdy5FEZlpuJzmxE3dSUFuUUa9GhtUx8xlQq1NcqXrBivmv6H37Oz4R7i55R6w4r5r+g9nZ8HuLnlHrFivmv6D2dnwe4ueT1ixXzX9B7Kz4R7i55R6xYr5r+hPs7Pg9xc8nrFivmv6D2Vnwe4ueUeseK+a/oPZWfB7i55PWPFfNf0HsrPg9xc8vdHOfFRd3PSXCSTRFWhszHCY1NyO7cMg5ZjioPVo1I20o/dcjI1OmmzP4XrN6LkfllSs7AAAAAAAAAAAAAAAAABDYHPs48pekVnZ+zp92HPjLqb2ks9Oj55lmX7m+r8MSW3AA8skGBAQgASIYEACUL3I2UHhq0aq93ZNcYvacNRZi7RNLpaubKsunUqilFSi7xkk01vTPNzExOJa8TmMw9kJAAAAAAAAAAAAAAAAGCzryl2NLs4v2lW61bVDe/sXdFY317p4hX1FzbTiOZaIbjNAIJEAGBAQgCCQYEMAShDA3PMjKmlF4Wb1x71O++O+PQx/UbGJ6kfuv6S7mNktsMtdAAAAAAAAAAAAAAAPFaqoRc5O0YptvgkTTTNU4hEziMy5rlXHPEVZVXsbtFcIrYj0Vi1FuiKYZVyvfVlaHZzAISu0lrb1JcWJmIjMkRn4Xn6Rifkz/b+St7yx9zt7e54HkjE/Jn+38j3lj7j29zwh5HxPyZ/t/JPvLH3I9vc8H6Pifkz/AG/ke8sfce3ueEfo+J+TP9v5HvbH3Ht7nhH6Pifkz/b+Sfe2PuPb3PCzrQlCThKLjKLs07XR8T6jponE1w70em6quN1NEzCnf+aiPqWl++H19K1n8uUaX81D6lpfvg+laz+XKrhMVKlUjVhqlBprZ5Hzc1+krpmma4+X1T6ZrKZzFuXU8nYyNelCtDZJXtwe9dGYfxn/AGzmFyqiqicVxifC5D5AAAAAAAAAAAAAAapnnlOyWGi9btKpbhuj9/I0/T7Gf+Sf2U9Vc/hhqRrKIBBIzebOB05utJd2DtHnPj0M31C/tjpx35W9LbzO+W0GOvgEASAAAaxnhk26WJitcbRqf+d0umwraijMboa3pmo21dKe/DUym3EAQwltWYuVuzqPDTfcqu8L7p8OpY09zE7ZZfqen30dSOY5dBLrAAAAAAAAAAAAAApYmroRct6WpPe9yOdy7Tbp3V8JppmqcQ5ji6sp1Jyn77k9K/G+w9Va27I2cY+GNXndO7lROj5Lge8PRlUnGnH3pOy/JzuVxRTNU9n1RTNVWIb3hMPGlCNOOyKt4vezzlyua6pqnu1qaYpjEKx8PpDAAAAADxVpqUXGSvGSaae9MTGUxMxOYc6yrgnh6sqT2LXF8YvY/wCcDNuUbKsPU6W/F63FXfusz4WUECYycWpJ2aaaa3MkmImMS6rm5lRYqhGp8a7tRcJLf12mjar305eW1en6Nyae3ZlToqgAAAAAAAAAAAxGU6+lLQWyO3xMD1HUb69kcQvae3iN0tUy/hLNVorU9U/Hcz0X+ndfvonT1z80/Mfp4/b+zL9S0+2rqRxPLDnp2WAbNmvgLRdeS1y1Q5R3vqY3qF/dV047cr+lt4jdPdnzOW0AeqdNyepAXEcHxfkBLwXB+aAt6tJx2+e4DwBAGEzoyd21LtIr2lK8lzj8S+/Q43qN1P5XtBqOlcxPEtHKD0qCEoAzeaWVvRsQlJ+yq2hPlwl0O1mvbUpa7T9a38cxw6gmaDzCQAAAAAAAAAC3xtfQi3vepeJV1mo6NvPfs62qN9WGDPMTOWk8V6SnFwlskrM7ae/XYu03aOYlzu24uUTTPdqGJounOUHtT81uZ+naa/RqLVN2jiXlbtubdc0z2VcmYN16sae7bJ8Irb+BqL0Wrc1d+ybVvfVhvUIqKUUrJJJLgkedmZmcy1k3IHqlDSdgMlTgoqyA9AAIlG6s9gGOr0tF23PYBSAAaDnJk7sKzcV7OpeUeT3x6fcoX6NtX4l6T0/UdW3ieYYk4NBAEAdJzJyv29Dspv2tFJO+2UPhf2L9i5upxPZ5z1HTdK5ujiWyHdnAAAAAAAAADB5QraU2t0dSPNa69Ny7Mdo+GjYo20/qtyk7AGJy/hNKPapd6G3nH/R6f/Tmv6dydPXPxVx+vj9/7sr1PT7qepTzHK/zfwPZUtKS9pUs5cluj/OJray/1LmI4hW09vZT88yypUdwC7wEdr8EBdgAAAC2x0e7fgwLEABYZbyesRRlT+Nd6D4SX52dT4uUb6cLGlvzZuRV27udSi02mrNOzT3NbjNmMPV0zFUZhDISgC+yHlF4avCstidprjB7V/OB9269tWXDU2YvW5pn9nXou6uabySQAAAAAAAAGv4qDjUknxbXg3dfzkeV1dubd6qJ/X+rUtVbqIlSK77ABMVTTOYJjPxK8pyurnqdLfi9birv3Zl2jZVh7LDmAXmAeprmBdAAAAC3xr7ni0BYAAKGOxUaNOVWXuxV/F7l1PmqrbGZdLNqbtcUU93NcTXdSc6kvenJyduLM2qczmXrbdEUUxTHEKR8vtASrYTCyrVIUYK8qklFcr7X0V30Jpp3TiHO7ci3RNc9nZqcbJLgkvI1Xj5nM5eggAAAAAAAAsMqYfSjpr3ofWO/8mf6hp+pb3RzCxp7m2rE92JR5xfAAFShOztuZe0Go6VzE8S437e6n8rs9KzgCph6mjK+7YwMincCQAADHYurpOy2L/IFEABpmd+UtOaw8X3abvO2+fDoUtRXmdsN/wBM0+yjqTzPH6NdKzVQBAS3r/j/ACRaLxk1rneNK+6F+9Lq1bwRc09vEbpYPqmp3VdKnty3QtMgAAAAAAAAAGBgcbQ7OdvheuPhvXQ8zrtP0bnxxPDSs3N9P5UCk7AAC6oTuua2npPT9R1be2eYZ1+3tqz2lVL7gAVaNdx5rgBcxxcXy8QJlio8b+CAtq2JctS1L6sCgAAx+W8oLD0ZVPjfdguMn+Npzu17KcrWk0/WuRT27udyk2227tu7fFmc9TEREYh5ISgJX2RMmyxVeFBX0XrnJfDBbX9up926N9WFbVX4s25q79nXaNKMIxhFWjFKMUtiSVkjTiMPKTMzOZewgAAAAAAAAAALbH4ftIWXvLXHx4dSrq9PF63NPfs62bmyrLBI8tMYnEtNIAgeqc9F33byxpr82bkVf1c7lG+nC8TPV0zFUZhmTGPguSgAAAAAABz/ADkyl29ZqL9nTvGHPjLqZ96vdV+Hp9Dp+jb+eZ5/wxJxXUBIwOlZk5H9HodrNWq1rSd9sYfDH79TQsW9tPzy8z6hqercxHENkOygAAAAAAAAAAAABhcqYfRnpr3Z7eUv9mB6np9tXUjief1X9NczTtnstDKWQCALjDz1W4f4Nz0vU5jpT24UtTbxO6Fc2FQAAAAADB51ZS7Gl2cX7SrdK22MPif2OF+5tpxHMtH07TdS5uniP7tFKD0YEoAzmaGSPSsQnJXo0bTnwb+GHVryR2sUbqszwoeoajpW8RzLqRoPMgAAAAAAAAAAAAAKWJoqcXB79/B7mcr1qLtE0T3fVFc01Zhr8ouLcXtTszydy3NuqaauYatMxMZhB8JCBMZWdzpbuTbqiqnmEVUxVGJVfSORp/V7n2wre0p8npHIfV7n2we0p8npD4D6vc+2D2lPk9IfAj6vc+2D2lPk9IfAfV7n2we0p8vFbHKEXOWpRTbPqj1W7VVFMUwmNHEziJaBlTHSxFWVWW/VFf0xWxFquuapzLf09imzRFELQ+HdAExi21GKvJtJJbW3sQiMomYiMy6xm3kpYTDxpfG+9Ulxm9vRbOhpW6NlOHk9Vfm9cmrt2ZU6K4AAAAAAAAAAAAAABi8r4fZVXhLw3Mx/VNPmOrHblc0tz+CWNMJdAAAAAIACANbzox+zDxfOf2RpaK1iN89+F3SWv45a4Xl8AAbXmDkjtKjxc13KTtTvvqb30X1fIs6e3md0sj1TU7aelHM8uhl1ggAAAAAAAAAAAAAAADzOKkmnrTVmuRFVMVRiUxOJzDXq9J05OD3bHxW5nk9VYmzcmj+jVt1xXTl4K77ABAgAAAtsoYtUacqj3LUuL3I62bfUril926JrqxDRKtRzk5yd3Jttm3ERHxDYpiKYxDwEoArYLCyrVYUaa79SSiuXFvklrJppmqcQ53rsW6Jrq7Ov5NwUMPShQh7sI25t72+bes06aYpjEPJXbk3K5rq5ldH05gAAAAAAAAAAAAAAAABZZRwnaJOPvx2X3rgUddpOvR8f9o4/w72LuyfnhhpJx1SjJPmmedrsXKJxVEtCKoniXnS8fJnxsq8JyX8fJjZV4Tkv4+TGyrwZL+Pkxsq8IL+Pkxsq8JannHi5VanZxUtCnwjKzlvZq6WxNFGZj5lf00U005mfmWI7KX9Mv7ZFnbK11KfKOyl/TL+2QxJ1KPL1SwtSb0YU6kpPdGEmIpqnsiq9bpjMzDoGZmbksNfEVklWmrRjqfZxe2//AGZds2tvzPLA1+ti9OyjiP8A1tRYZoAAAAAAAAAAAAAAAAAAAEWAWIxAWGICwxAWGICwxAjQXBeSJTmTQXBeSBmTQXBeSBmUqKCMpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//2Q==","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxASEBAPEBAPEBAPDw8QERIQEA8QDxAQFREWFhcSFRUYHSggGBolGxUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OFxAQFy0fHh0tLS0tLSsrLSstLS0tLS0tLS0tLS0tLS0rLS0tKystLS0tKy03Kys3KysrLS0rKysrK//AABEIAOEA4QMBIgACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAAAQUDBAYCB//EADkQAAIBAgMGBAUDAwIHAAAAAAABAgMRBAUhEjFBUWFxBiIygRNSkaHBQrHRI2Jyc7IUFSRDgpKi/8QAGQEBAAMBAQAAAAAAAAAAAAAAAAEDBAIF/8QAJREBAAICAgEEAgMBAAAAAAAAAAECAxEhMRIiMlFhE0EEQnEj/9oADAMBAAIRAxEAPwD7iAAAAAgAAAAAAAAAAAAARJBFwJBDl1IkB6uSa1PEeZwfqX3NgCQQAJBAAkEACQQAJBAAkAAAABAJAEMEkACCQAIuRKSW80MTmSWkdX9iYiZc2tEdt+Ukt5q1sfCPG76FRWxM5b37GE7jH8s9/wCR8LGrmkv0q3c1amMqP9T9tDxToyluT+hswyyb32X3Z16YV/8ASzUdST3tv3ZY5RWk3KLbasFlXOf2NvC0YQ0Tu31Vzm0xrhZjreLcyqvEGJ+HVoSWjk3HuXlCd4plD4qy11Ph1k3/AEXquDXMucvknTjbkVtTZFgiQIsLEgCLCxIAiwsSAIsCQAAAAAAAAAIDZ5bAk18Ti4wWu/ka+Nx6j5Y6y/YqJSbd29eZ3Wm2fJm1xDNicXKb1dlyRgt7mbD4eU3ZbuL4FrQwcIK738WzuZiFFaWvzKvw+AnL+1c2WFLA04avXq9xixOZpaQ1f2K+dWdR21fREcys3SvXK0q4+EdI69txpVczm91l+5NDK5PWTUVy4m7HCUob7f8AkRxCdXn6VLnUl8z+pkoYOrtJ2a6lmsbRT2VJLsjYqVEouW9JN2W9pchNvp1XFE/tpZ9XjDDVpSdkqbXvwRpeEsQ5UY35I5DNc6rY+apU4OnRjLc9XJrnY7rIMF8KlGPRHC9aggkhIAAAAAAAAAAAAAAgICSLhnicgDkV2OxtvLHfxPePxWyrL1P7FO2WVqy5cmuIGbmDwTl5paR/cnAYPa80l5eC4s2MbjVBbMfV9kdTP6hXWmvVZlr4mFJWW/kirr4mc3bXXcluPFChOo9Pdst6NCFNX06tkcQ65v8AUNPDZY3rPRckbsqlKkuC6LVmji80vpD68yvjCc3onJ+5Opns8q14rDfxGbSekFZc2aE6s5ve5drssMPlXGo/Zfk2ZYmhS3NX5LVjiOjVp90q2jl1SVvLZdWX0Kdo7PS32Kmrnfyx+pglnNToJrazqt60bGVeHqVC+y5Sbd9UXKZzqzmouCZnpZ580PdHM45h3+esrzbJTNLD5jTnukr8nozYfR2OJjS2LRPTNckwRra2ej/czIh0kAAAAAAAAAAACAInKxq1quynJ8DLUlr2KfNq92oLhv7nVY2pyW1DVq1XJtvj+xlwOH25Jv0rf1NWCbaS4uxfU4xpw6JXZbbiNM1I8p3LxjsTsRsvVwXIqsLRlUl04t8jHWqSqT01vouxdUoxpQ14LV82R1H27n1T9Q9SnClDot3UpMXjJVHrouCR4xOJdSV3f+1cixy/AJeeaV96T3LqTqI5lEz5cR0wYLLnLzS0j92b9XEU6K2UteS/Jq4/NLeWm9eMkU8pNu7Jis27JtFOm5isxnPS9o8kY6GEqT9Kfd7jVbM2Gxs4Pyt25cGd61HCqJ8p9Szp5LxlP2RsRyelx2n7mzg8Spx2lx3ozXKJtbbVWlP0r6mT0+F4vv8AyV2KyipHWPmXTedCLkxktBbFWXGNtdGvYssvzeUHsz80efFG5nOBUoucV5o7+qOdZfGrxyzTE454do9mcU0+qa5nnCYjVwl6o/cpPD+MtL4Tej9PSRvZu9hwrLTZezL/ABZmvXxnTZjv5RtdIkw4aopRTXIzHC0AAAAAAAAPMiTxWegRLWqTtd8tTnatTablzZb5lUtTfXQorl+OGPNbnSzyildub4aI2M4rWhsr9X7GTL4Wpx5vX3K7Op+dLkiI5smY8a8MmTUbtzfDRDOsRqoJ7t/c28shanHr+Slx8r1J9JNfc6jmyJ4r/reyjDXe29y3Lqes3xv/AG4u3zP8G3QahRTXCF/c5ydRttve2yax5Si0+EagbDZ5uRcu0zpbIueWyLki78Pzd5x6F2Uvh6nZSnz0LjaMmT3NuP2vQPNxc4WJf76HIwp3rOHDbmjqcRWUYyk+Cf1OayiLnX2uC2pMuxcRMqMvMxDWpT2Kifyy/J1GZx26FRc6bku6VzlK7/qP/L8nW1n/AEZf6Uv9pOaOIME8zDX8L4nboxvyRdo5TwPO9N+51aMzZCQAAAAAhkkMAYcTwMxr4p7hDm3SmzmfliubZVR3rq0WOdP0e5W0H5l3Rqr7WG/udPDRJckYsRhYTs5LVGVAp/bRqJTBJJJKyWhzuZ07VZf3PaR0VzTzHB/EjppJao6pOp5cXruOGvQxKnQcV6oxtbmUlzJNSg7O8WYmzRWrPe3yXFzzchs704S2ZcLh3Ulsx93yM2Ey6dRrTZjzf8HQYTDRpq0fd8WV3vELKU2y0KSjFRW5Iy3PBJlmWvp6IIuV2eSqfD/pp6u0rb7CI3JM6javz3MFJ/DhuXqfN8jby3D/AAaE6ktJNX7Lga2UZS7qpUW7VRf7mx4hxWzTVNb5f7S+e4rVRribyocOtqpFfNK/3Onzyv8ADwtaT4U3H6q35KXw7h9qrtcIK/1J8dYq1KnQT1q1FfnsrX+CM3enWCP22vAtK1JPojq0U3hnD7NKPYujNLYAAAAABBJAA1sXwNk18WvKIRbpRZ4vLF9WiohLVPqXua0703berM565sx8w8/JxZ1sJaJ9EermlldbaprnHys2yiY1LRWdw9XFzyCEvFahGatJJ/uaNTJoPc2iyBPlMOZrEquOSw4ybNvD4ClDdHXm9TZBM2mSKxCSbnlA4dPVwRci4HoXIuQ39CY+CSdRRTlJ2SV32ONzDFOrUctbbo9jdzzNNt/Dh6V6nz6Fdl8kqtNvVbSujVjx+MblmyX3OodTk2F+HSs9HLWRymJq/wDFZg2tadJ7EXwdnqzqfEFSccNVcNJKDs/sVXgXLLR+I9W9ffmZbzudtmKNQ7DCU9mKXJGchEla0AAAAACCSABjrRvFoyEMCqaumu6OYxVLYk48Fu7HU4qOzPpL9ytzbC7cdpeqOvdF+K2mPNRXZXjNievplo+50alfduONf0/nkWmV5ns2hPdwfLoW5Kb5hVTJriV9cXPMZJrRpkmdftNxcgATcXIIckt7SBt7B5TFx0berg8mhjs1p0rpval8qJis2niCbahvzmkrydlvbZzmb5xtXhTbUeMvmNDH5jOq9XaPyo2sryeVTzTvGH3ZprjinNu1Fsk24hhyvLpVXygt7NZaVbLhUsvaR2TUadNpKyinu7HGYfzVo/3VPydUvNtubV8Zh12av/p6n+mzz4Oleiux4z6oo4ar/hYeC1/Rj2Riv234+nSIkhEnCwAAAAACCSAACJAwYqkpRaft3KmnUd3CWkl90XjK/MsDtq60ktz4omJ05tXagzTLr3nBa8Y8+pSO/X3Omo4yz+HU8s1pd+mR4xuWwqaryy5r8mqmX5YcmJS4XH1KfpenJ7iyp56v1Ra7aldicsqw/TtLmtTSlFremvZl3jSyqLWq6WOc0Xxa7oied0luu+yOZuRcj8NU/lsucRn8t0I26veVlfFTm7yk2+9jxToTl6YyfYscLkVR6zeyvqyfRVHqs2/DmIk9uDbaja12XdzVwWEhSjsx93xZsXMt5iZ4aaRqOXo5fEZNWdSVkmm77V9DprhMVvNekWrFu1ZgMmhC0peef/yi16HkxYqpswnLlFv3EzNpNRWNq3xHj1GHw0/NPf0iVvhrDbVXb/TTX3K2CnVqJX2pze98DscHh4UKVr6RTlN8+potrHTxVV3e21R41xVqdOivVWnu47Md7+6Oh8NUNmjHscRh5yxmMdTXYh5YdEfScLS2YxXJIwy30jUMyJAIdgAAAAAQSQAAFgAYJAr8xy2FVarX8nPVVicO93xaa4P1rszsLHipTT0aJ2iaxLk6OfUXpNypy5SWn1N2lWpVPTKE+1mbeNyGjU3xRUS8LfDl8Sk3GS5brcrHUXVWxQ1M3yxpupTV1xjxXYq8NiXB3snzUkdPQxib2KnkmuD3MxYzKaU9bbMnxjp9jVTLHUsl8UxPDVo59BLWm4/42PNXxF8sP/ZlNjMNKnJxl7O3qRGEjTbtUk4rmkW/jr2q87dNyrnld7pKK6JW+5fZTi5VKSlLfqu5pYfA4RK+1GfWUvwbNTNcPTVlJWW5RRVfU8RVZXcczKxuEUcvElO9lCVud7FxSqqSUlqmr+xVNJr2si0Sy3Of8QZrHZdKm7t+prguRaZpiNilOXGzS7s4/LsK6tSML82305luGke6XGS/9Vl4YwzlUdThDRdzL41xL+HToRbTrS1tv2VwLlKlh6WrUYQTbb3vr3OUy9zxmL+M09hO0FyimVZb+UrsNNOq8I5QqdNStq7HTWMWFp7MVHkjMZ2sAAAAAAAAIJIAAAASQSAIJIAWFiSLAVmZ5TCqtVrz4lHClWw7tNudJ8X6onX2MVaipJponbmaxLnsTh6daNparg1vRQ4vIqkXeDU4/SX0LvHZbVpNzovTe4PVexqUs7imo1oSpvdtPWPuX0zTVlyYHNVqbi9mSs1wJw9Fzlsxtd83ZHYYvB060dUnppJfycnmGDnRnZt23wkjbTLF2W1NStKPhyT9dRLpFbX3OhpQUYqK3RVkiryfM1OnepJJwWt3a65lfm+fbScKV7cZ7r9iiaXvbUu4mtY28eI8x25fCi7xje75s3PC2FsnWa1krR/xKfKculWld3UE02+fQ6fMsbDDUXN2SirQjxb4JE5bRSvjBjrNp2oPFtV1a1LCxbtG0p93+k63w5lEaMFpq+hynhHBTrVZYipq5yvrw6H0aEbJIwzL0aRqHpEkIkh0AAAAAAAAEEkAAESBAJAAgkAAAAIJAHlxNHF5XTqb4r6FgyAOX/5bOhLyu9NvWPLsaniKjtUW+MGmn7nW4qN4vsUVSmpJxkrp6O+4uxW1O2XPXbgqVOUtIqUr8Fdousv8PTfmq+VfKvV7l5OVGirydOmlxk1Epcw8VwXlw8XVlz/SaL/yPhnrglc4nFUcPTvJqEIrRcX0XM5JOtj66k040ovyRfBc31MmEyjEYufxK7b1Wn6V2R3+UZRCjFJLUyWtvltpj0yZPl6pQUUixQRJwtQSAAAAAAAAAAIJIAAIkCESAAAAAAAAAAAAHiotH2OI8QYDFSlalOUYv5dH9TuTzsLkTtExEvnGF8GTk7zcm+N23+50eW+FadO10vodNYkbkiNMFHDxikkkjMSCEoRIAAAAAAAAAAAACAACJAAAAAAAAAAAAAAAIYQABkgAAAAAAAAAAAAAAAAAf//Z","https://logo.clearbit.com/vuejs.org","https://logo.clearbit.com/raspberrypi.org","https://logo.clearbit.com/getpostman.com","https://logo.clearbit.com/arduino.cc","https://logo.clearbit.com/aframe.io","https://logo.clearbit.com/threejs.org","https://logo.clearbit.com/anaconda.org","https://logo.clearbit.com/mysql.com","https://logo.clearbit.com/firebase.com","https://logo.clearbit.com/git.com","https://logo.clearbit.com/opencv.org","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAHgAewMBEQACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAGAAECAwcFBP/EAEEQAAECBAEFDgQDBwUAAAAAAAEAAgMEBREGEiFRk7IHExYXMTZBUnJ0kbHR4TVhc4EVInEUIyQmosHxJTIzQqH/xAAaAQEAAwEBAQAAAAAAAAAAAAAABAUGAwEC/8QAMxEAAQMBAwoFBAMBAQAAAAAAAAECAwQFEYESFBUhMzRRYZGxMUFx0fATMsHhIlKhckL/2gAMAwEAAhEDEQA/APbV6pL0mVEzNB5hl4Z+QXNz/haKSRGJepiaanfUPyGeJyOG1J6k1qx6rhncZO0PU8vmA/DWldWZ1Y9UzuMaHqeXzAfhpS+rM6seqZ3GND1PL5gLhnS+rM6seqZ3GND1HL5gPwypfVmdWPVM7jGh6nl8wG4Z0vqzOrHqmdxjQ9Ty+YC4aUrqzOrHqmdxjQ9Ty+YEeG1J6szqx6pncY0PU8vmA3Dek9Sa1Y9UzuMaHqeXzAbhzSOrNaseq9zuMaHqeXzAY46pHVmtWPVeZ3HzGh6nl1/Qxx5Rx/1mtUPVM7j5jQ9Ty6/obh9RurN6oeqZ3HzGh6nkeuk4uplWnmScqJjfXgkZbABmF9K+2VDHuyUOM9nTQRrI+64767kAGd0DPQ2d4b5FRavZlrY+84L+DPGhVxpibQgJgICVkArIBiEBEhAQcEBWQgIFD0g4ICshAVlAd7AHOuW7ETZKkU21Qr7V3R2Hc1tWZkgax/8AA2d4b5FRavZltY+84exnjQq40xYAgLAEBMBAKyAYhAVuCAgQgKyEBW5AQKHpW5AVuQHewBzqluxE2SpFNtUK61d1dh3NaVmZMGsf/BGfXb5FRavZltY284exnzVXGmJhAdOhU9tTqLJV8R0Nrg4lzRnzC66RMy35JGrKhaeFZES8Km4Mkxyzcz/T6KZmbeJS6am/qn++45wbJdE1Nf0+iZmziNNTf1T/AH3PDO4MjNaXSU22IepFbknxHoubqRU+1SRFbTVW6Rt3NPYFpuWjSkd0CZhuhxG8rXKKqK1blLiORkjcpi3oedy+T7K3ICsoCtyHpByAqKA72AedUt2ImyVIptqhX2rursO5rSszJA1j/wCBs+u3yKi1ezLax95w9jPWquNMWBAd/BZ/1+D2H7KkU20QrrV3VfVO4eVCYMpITMy1ocYMJzw0nlsL2Vi92S1VM1BGksrWL5qiAoMaTF88lBI0CIQoSVjuBeaFj/uvQ71ErstVg5kNrocdgu6E7RpB6VJinbJq8yrrKGSl1rrbxPPi6mMnqXEjtb+/lml7XAZy3pH9/wBV81MeUy/zQ6WZUrDMjF+12r2M4cqw1RW5AVuQFbkPStxQFbkB3sA86pbsRNkqRTbVCvtXdXYdzWlZmSBndA+Bs7w3yKi1ezLax95w9jPWquNMWAoDvYL5wQew/ZKkU20QrrV3VfVA3r3wOod2ibJU+XZu9DPUW8x/9J3MvLlUGyOnhiK6HX5IsJzvLT8wQV2gVUkQh2i1FpX38DSYzQ6C9rs4LSD4K0XwMi1VRUVDHpWFFmXwYMFhfFiWa1o5SSqZEVVuQ3UjmsRXO1Igd0vBclBhtdUXOmI1rlrXFrG+Gc/fwU9lK1Pu1qZuoteVy3Rak/06Zw1RSLfh0DwN11+hFwImkKpP/agjjigyFKl5eYkWPhmLFLHMLy5v+0npz9Ci1MLWIitLiy62Woc5smu5APcohcFbigO9gDnVLdiJslSKbaoV1q7o7Dua0rMyYM7oPwJneG+RUWr2ZbWNvK+i/gzsFVxpiYKA7+CT/MMDsP2SpFNtEK61d1X1QOq61z6JUGsaXOMtEAaBck5JU+XZr6Gdo1RKiNV4p3MybIzr3BrZKaJPIBAd6KqRjuBr1nhTxenVAswlh2ZlpoT8+zeiwHeoZN3XOa5tyZvNTKeBWrluKS0rQZIz6US33+KncxHPNp9GmYpcA9zDDhjS45h6/ZSJn5EaqVtDCs07W3avFfRAQwBCZErMR7h+aFAJZ8iSB5E+Kh0iXvVS8tlypToieahbiecmafRJiZkheKzJ/Nk3yASAXW+SmTOc1iq0pKGJk1Q1j/BflxnIxHWmuym1OYv8yCPC1lXJPInmabMKVU2aCq+Ip2ryMGWnmw3OhRMsRWDJJzEWI5OlHzOe25x5T0MVPIr4/NLrjiErkTCtyA7+AOdct2ImyVIptohX2rujsO5raszJAxuh/Amd4b5FRavZltY+8L6exnIKrjTEwUAQYHN8RQPpv2VIptohXWruq+qdzSS4NBLiAByk9CszKoirqQrdMwGtu+YhNGkxAAvnKTifSRv8EavQ5VQxRSZJp/iRHiDkhwPzH7nkHiub6iNvneTIbNqZV+25OK/LwCrtbmazMCJGsyEz/jgtNw3536T81XyyrIt6mjpKNlMy5utV8VGw9VfwiqwplwJhEFkUDlyT0/Y2KQyfTfeK2nziFWJ4+XqapAjQZqA2NAe2LBiC7XNNwQrVFRU1GQex0bslyXKgM1vBUnOZUWnu/ZI5z5Frw3H9Oj7eCjSUrXa26i0prXlj/jL/ACT/AH9/NZn1RkZmmzTpWdhGHFbntygjoIPSFAc1WLc40UMzJmZbFvQ8Tivk6EHIAg3Pudcr2ImyVIptqhX2rujsO5raszJAvuifAWd4b5OUWr2ZbWNvOHsZuCq405MFAEGBTfEkD6cTZUim2iFba26r6p3DvEnN6p91ibJU+XZu9DPUW9R/9J3MlAaORo8FUGzvUe6HhElD0iSgPdS61P0mIXSUctaTd0N35mO/Uf3FiujJHM+1SPUUsVQl0iY+ZoeGcSwK410Iw95m2NynQ73BHJdpU+GdJNXgpmq2gfS/yRb2qUY+kIc1QIsyWjfpSz2O+V7OHh5Lypaisv4H3ZMzo6hGeTviGVOKrTVECUAQ7nvOuW7ETZKkU21Qr7V3V2Hc1xWZkgW3RvgDO8M8iotXs8S2sfeMPYzUFVxpyQKAIcBn+ZYH04mypFNtEK21t1X1TuH2JOb1T7rE2Sp8uzd6Geot5j9U7mRXVQbMV0BElAEGDKXKVecm5edYXNEDKaWmxacoZwpFPG16qjittKokp2NdGvn+DqzW59Eyz+yVFpZojQ8/iPRdVo18lIjLbS7+bOinVwthP8FmnzceaEaMWFjQxuS1oJF+XlOZdYaf6a5SqRK6085Z9Nrbk8SeP5+HKYejQCRvs0RDY3pIuC4+HmF7UuyWXcT5sqF0lSjvJusydxVYaorcUPQj3O+dct9OJslSKbaoV1rbq7Dua6rMyQK7o/N5neGeRUWr2eJbWPvOHsZndVxpxwUB0aFVHUipMnWQRGLGubkF2Te4ty2K6Rv+m7KI9VTpURLGq3HeqOOYs/T5mTNNZD3+E6Hl7+Tk3Fr2yV2fVK5qtu8fnAr4bIbFI2TL8Fv8P2CV1FLgV0AxKA6FCrUehzjpiWZDiZbch7Il7EXvyjk5F0jkWNb0I1VSsqWZDtQWwd0WVyf4inR2utn3uI1w/wDbKUlYnm0p3WI//wAvQrm90WHvZElTn5Z6Y7wAPsL38V46s4NPqOxFv/m/p+wJqtUm6rNGZnopiRLWAGZrRoA6Aor3q9b3F1BBHAzIjS5DwEr4OxFAEu53zrlvpxNkqRTbVCutbdXYdzXVZmSBTdKNsOs7yzyKi1ezxLaxt5w9jMAVXGnHugHDkA+UgFlIBZSAa6AiSgIkoBiUPSBKAigEgCXc751y304myVIptqhXWtursO5rqszJAlum83Gd5Z5FRqr7E9S2sbecF/Bl2Uq01A4ch4PlIB7oBXQDZSAWUgGLkPSJKAiSgGQCQCQBLud865b6cTZKkU21QrrW3V2Hc11WZkgR3Tubbe8s8io1V9iepbWNvOC/gyvpVaage6AcFAK6AfKQDXQDZSAV0AyASASASASAJdzvnXLfTibJUim2qFda26uw7muqzMkc+tUiWrUmJWc3zew8P/dusbi/quckaSJcpIp6h9O/LZ4nD4vaJpm9b7LjmkfFSdpmp5dBuL2iaZvW+yZpHxUaZqeXQXF7RNM3rfZM0j4qNM1PLoLi9ommb1vsmaR8VGmanl0Fxe0TTN632TNI+KjTNTy6C4vaJpm9b7JmkfFRpmp5dBcXtE0zet9kzSPio0zU8uguL2iaZvW+yZpHxUaZqeXQXF7RNM3rfZM0j4qNM1PLoLi9ommb1vsmaR8VGmanl0Fxe0TTN632TNI+KjTNTy6C4vaJpm9b7JmkfFRpmp5dBcXtE0zet9kzSPio0zU8uh7aRhCmUieZOyhmN9YCBlxLjOLaF9sp2MdlIcai0p541jfdcEC7lef/2Q==","https://logo.clearbit.com/nodejs.org","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAflBMVEX///8AcsYAacO60+wAZ8IAcMUAbMQAbsXg6/cAasMAZcIAdMcAY8Hs9Pr4/P60zupZltMwgsyjw+XD2O5roNdDi8/Q4fJ+q9vc6fXw9vs2hc2Rt+BOkNEee8mavePl7/hvo9iFsN3M3vGqyOdimtUVecmUuuGfwOSDrdwAXb8ngyeUAAAJWUlEQVR4nO2daWOqOhCGG2SpG9rautXWrdv5/3/wKh4FkgnMZMVz83xVMSFhljeT8PAQCAQCgUAgEAgEAoFAwC5H3w2wzabnuwV2yddfvptgl+VwMPHdBqvMouzfHsKPQdJ/9t0Im+xiliS+G2GR/LXPWP/NdzPssf3KGEv6ue92WOOQJoyxdOG7HdZ4Hp07yOKx74bYYhGf+8eyF98NsUS+iYoOsvjRd1PsMH7PLh3Mpr6bYod5llw6yAbz2gdLTw0yzSS+djBZ1z9Jt35aZJj9gF2JZ7VPDqN/YtJO41sHk6f6R7tsdPDTKIOsnlJWDiGXNqUJ3+f7Y3mzMechHNY/7J08SHzngkYvqnSQ8WnT9PRhkvppmSG+R9UO8mnTuAgC7jpOfYlZFT5teu5fHs679Rj5ul/rYNJf1b/wdBngbOOnfdosh1mtgyz9rX/h8eomOSd5L8xqNqboCJc27a9uJHn300Q9PgZ8B4W06ev2jejHSxu12MWMZ8ClTYdKqJPem7BRCE78EPIR6K7ymKY7H81UZ/ueCR1k8Zz7Vm2UB3eVRh0EG3OeiK/ctyZR48dd5jkGOih6hE39W/H9rEYtRBvDxLTpYcx9jQ/Ku8smgjoopE0PP/z37kQJH7+nYAfFEXrip3IS3YOOOs+gR/BExK82LcW5nH16aTOJCWhjzuOT8B59D4z1gPcnnWM/gvsHPWNDyKGsoat2iCloRAtifggP4HcFc9QpaoITB582nVJjIOgRNYBOsWRgmy8IVjJP4Qe2v/fSeAxSG3NGXG2awE6zw4LGm5AMVuHTJiFiq9yMjkrgn3IbA7aaj9iqg9hFCZwXnIRGC27uR/6DLkrgW15w4tss5kVCxFa9H52TwGdNNqZosiCkARFb5YZ0TdD4aOsgMO2giK2kYxI4IDjxQyjGKaz5pow65DEgwYkfQjGxhSO2kg5J4EWFUwtC2iSL2Cp0RgIHBSd+CIW0SRqxVX7UkeJMWHDiAKQJacRWEn146I8ALDjxCGlTQ8RWGcR0BfyjYySCEwdg+VeD9p91QAIfQ6I2QCQa/o9W83tm5FsCb/FoV6AivaaIrcS3BP6GGofTSIhFeo0RWwW/gkZD8lMDSvaaI7YSvxL4J+4hBNKmh4cEN7/9SuBtUddtGIBnaYb8LfNaSvyOHAYo+GqN2Er8SeBH7BAC2Xrex05SBk9yF+TYJwmyhoiIrfkWuWCBNYZQ+PxKGEJfgsYWayqgvU1YN3O9ScyHoLFBmgogbcJGbJW75EECR1t70J3hIrYKI/ceA+spkggYwiUmrajhXgIXFt9liKtNJ36RRqqCawm8XYC4tQzSy6BV0RZc1/TtsIOQQnubCBFbCaBkWQSb+YBpEyliK0kylx4D7a9BA5GrDKFbCbyHbiIYUZIiturF3O11QxsKWIJAaGzw1ZxJ4FjpQqJZo8M93OUssEK3ELbw1Iitcj1HEjjeEsIiEjYaAnAjgc/xQwjecnrEVrli5EICxwfN8JEQvyrO8IqLzdET/BDCdU0KEVuF2LoEjpYuTkP4DV1AKWIrsV/Tt0cbQsmREFiJVYZtCZzgy+AgSzFiK7EtgU/xIwDruEdlZ3jFrgR+wFv6bAdeQTViq2BVAic4azhMVo/YSmxK4M/4pEBSKKIesVWwVwVOUeIlQrxGxFZiTwLHitxMunKLj/gasSWB46ULaZ6z0HSGfwFFZgMQlhpkwpiRScpsSeB46UIeeCwRxVO4P7BR00e4//JMtaeROlWxIYF/EOSjhpP0PszYGjYwLoGvMLVrf0myhgvtTHhEGxL4jmAFmyPHVzP21LQEPic8Py312bleCnz7F2hNSwPKonSbNr2lFCmo/w0NvHTBELE/IUNp/B+TggZlYiHEomcjBtVkTR9e5Ga4W7tQXLng/snYtvYxJRLB+eINfRFYxJwE/klpDjJ5MxKhwmoeHZJhwD4cY7wq2fBn/FFFipAqQ9DLQxQPK8WMBI6tzysgpN8kDyRjZELQkB0dAELRa/cGumhCAidIF1TrNjVgUPUlcJr8RzyA/Ek/CE+Ybg+x9XmXvyMeC7gyYFB1JXDaShHZPy0JWaeEBNirQoHkmBU2KfWkB2igSbUEDXR93uW/FPKZb32DquMxVuj6vIKBypLJi7aqoSOBo+vzCiSrTW3oqxrqEjixakIxI9VXNRqVr0Zo9fTKEqa+qqEqaFBEbqaz5jXTNqiKEjht9uhoCj+6BlVtW/s3zchpVdVpy8Qq/06SLrRXLXUNqooETqx70Yzxc11Vg36yKzEF1xaFdA0qPWJc0/5Q/71Nugvg1G3tRIlB3eeWHDWFG+LJriTpwpCst9eTiWnuCl+fd7m4mbMdNFUNigROrVwC9zYpQN7RVoMiaBDq8wqU0iaAFfHh4MA/K9hN6FfMlSbPtVSNpI+901Tva3Ahb6JlULG3mrq6Z7Ty403LLeLym5z6MJgtFfzUCcJxEjhJ5EZfFc9aJwjHhMeP1CfB9GYkLVUDc7IrtUzZfLGnVvFbe00fUbqwsjtgpmNQWwUN6hSxsp1Mp/itzbKT67DtvO5WR9Vo3ta+ouahts5s1lA1mg0DeZO1qWoInvxL3do0SeDk6gFTxRAiW3WD2lQFThO5mdUN5BrFb/JW0asjbG7Q0Sh+k57sSg4m7O7oVC9+k0ngb+QrWj4CQL34DY4kiQcbMQdnxijLxLAETqrPK7D+no2xsqoBSeBU6cLJqZTKMjGk/tF1LhdnOExUlxZFCZxUn1fg5pg45eI3XjwibEK/XcLNuaKqqgb/DC3+xEQGrt6Tolr8xkngy0cyrg5QWyEP8hUGsSNngSN4pNUt3biTl5ud2KruPI07cBZ4C9vZz8s6ilWzYRcHoSiTz4+/r0kU97XWanyd7NrCY+9t+h6f+6Zfe9q1V9WMDz+7pyiOUr1FtgrdeVVNMSmHseakFEmG/l9Vk58m5edwYGRSAvh9udl5Uq4Tk5MSwNPLzVbz42KTWRu4Ku5Pdi0sZeqib39xeLLreHaalEYtJQonJ7uacd+qWD7Z9Wwpz+47dTUpRayd7Fq4777zSQlgXpg/T8qNBfetjEFZN9/+dd8eJyWAmZebOXHfqmiqgqv55HeTOHHfqih7jHw52W/Y6M9oFMdRpxkpneyazyfHyaR3JygOYiAQCAQCgUAgEAgEAoFAIBAIBAKBQCDwP+Q/meSNFnFmiZkAAAAASUVORK5CYII=","https://logo.clearbit.com/movidius.com","https://logo.clearbit.com/dialogflow.com"]}ngOnInit(){var t=document.getElementById("testit");new IM.a(t,"shujathkhan",{global_stats:!1,summary_text:"",responsive:!0}).then(t=>{document.querySelector(".contrib-footer.clearfix.mt-1.mx-3.px-3.pb-1").innerHTML="",document.querySelector("#user-activity-overview").innerHTML="";var e=document.querySelectorAll(".wday");[].forEach.call(e,t=>{t.setAttribute("dx","-2vw")}),document.querySelector(".js-calendar-graph-svg").setAttribute("viewBox","-20 0 722 112")})}loadScript(t){const e=document.body,n=document.createElement("script");n.innerHTML="",n.src=t,n.async=!1,n.defer=!0,e.appendChild(n)}}var kM=$n({encapsulation:0,styles:[[".SecTitle[_ngcontent-%COMP%]{font-size:10vh;padding:5vh 0;text-transform:uppercase;opacity:.5;-webkit-text-stroke:1px #000;font-weight:1000;font-stretch:expanded;letter-spacing:.5vw;-webkit-text-fill-color:#f5f5f5}.mainContainer[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(2,1fr)}.titleContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}section[_ngcontent-%COMP%]{width:90vw;height:100vh}.SecDesc[_ngcontent-%COMP%]{font-size:1.5rem;position:fixed;top:10%;left:10%;width:30rem}.calendar[_ngcontent-%COMP%]{font-size:.6rem}.SkillsTitle[_ngcontent-%COMP%]{font-size:10vh;opacity:.5;padding:5vh 0;-webkit-text-stroke:1px #000;font-weight:1000;font-stretch:expanded;letter-spacing:.5vw;-webkit-text-fill-color:#f5f5f5}.skillsContent[_ngcontent-%COMP%]{display:flex;flex-flow:row;justify-content:space-around;padding-left:8vw;margin-top:13vh;flex-wrap:wrap;width:85vw;height:41vh;overflow:auto}.skillsContent[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px;flex:1 1 5%}#testit[_ngcontent-%COMP%]{width:80vw;font-size:1vh}.GitTitle[_ngcontent-%COMP%]{text-align:left;padding-left:5rem;font-size:1rem}.myProjects[_ngcontent-%COMP%]{width:80vw;height:70vh;background:#f5f5f5;margin:-25vh 0 0 8vw;display:grid;grid-template-rows:repeat(2,1fr)}.ProjectsSecTitle[_ngcontent-%COMP%]{border-top:.25vh solid #000;width:42.7vh;height:3vh;display:grid;grid-auto-flow:column;padding:1.1vh;transform:skew(-25deg,0deg);-webkit-transform:perspective(17vh) rotateX(0);text-align:center;position:absolute;z-index:1;left:10vw}.projSTitle[_ngcontent-%COMP%]:not(:last-child){border-right:.25vh solid}.projSTitle[_ngcontent-%COMP%]{padding:.15vh 0 0;cursor:pointer;text-transform:uppercase;text-align:center}.ProjectsSecBody[_ngcontent-%COMP%]{width:80vw;height:70vh;background:#f5f5f5;border-left:.25vh solid #000;border-right:.25vh solid #000;border-top:.25vh solid #000;border-bottom:.25vh solid #000;overflow-y:auto;overflow-x:hidden}.ProjectsSecNav[_ngcontent-%COMP%]{font-size:5vh;width:2vw;height:10vh;z-index:5;float:right;margin:12rem 1.5rem 13rem}.skillMainContainer[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(3,6VH)}.githubSec[_ngcontent-%COMP%]{margin-top:50vh;padding-left:8vw}"]],data:{}});function NM(t){return co(0,[(t()(),Xs(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),Xs(1,0,null,null,0,"img",[["style","width: 3rem;height: 3rem;object-fit: cover;"]],[[8,"src",4]],null,null,null,null))],null,function(t,e){t(e,1,0,e.context.$implicit)})}function BM(t){return co(0,[(t()(),Xs(0,0,null,null,25,"section",[],null,null,null,null,null)),(t()(),Xs(1,0,null,null,24,"div",[["class","mainContainer"]],null,null,null,null,null)),(t()(),Xs(2,0,null,null,4,"div",[["class","titleContainer"]],null,null,null,null,null)),(t()(),Xs(3,0,null,null,1,"div",[["class","SecTitle"]],null,null,null,null,null)),(t()(),oo(-1,null,[" Projects "])),(t()(),Xs(5,0,null,null,1,"div",[["class","backIcon"]],null,null,null,null,null)),(t()(),Xs(6,0,null,null,0,"i",[["class","fa fa-angle-left"]],null,null,null,null,null)),(t()(),Xs(7,0,null,null,18,"div",[["class","myProjects"]],null,null,null,null,null)),(t()(),Xs(8,0,null,null,8,"div",[["class","ProjectsSecTitle"]],null,null,null,null,null)),(t()(),Xs(9,0,null,null,1,"div",[["class","projSTitle"]],null,null,null,null,null)),(t()(),oo(-1,null,[" Web "])),(t()(),Xs(11,0,null,null,1,"div",[["class","projSTitle"]],null,null,null,null,null)),(t()(),oo(-1,null,[" Mobile "])),(t()(),Xs(13,0,null,null,1,"div",[["class","projSTitle"]],null,null,null,null,null)),(t()(),oo(-1,null,[" VR "])),(t()(),Xs(15,0,null,null,1,"div",[["class","projSTitle"]],null,null,null,null,null)),(t()(),oo(-1,null,[" AI "])),(t()(),Xs(17,0,null,null,8,"div",[["class","ProjectsSecBody"]],null,null,null,null,null)),(t()(),Xs(18,0,null,null,2,"div",[["style","text-align: center"]],null,null,null,null,null)),(t()(),Xs(19,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),oo(-1,null,["UNDER CONSTRUCTION"])),(t()(),Xs(21,0,null,null,4,"div",[["class","ProjectsSecNav"]],null,null,null,null,null)),(t()(),Xs(22,0,null,null,1,"div",[["class","navIcon"]],null,null,null,null,null)),(t()(),Xs(23,0,null,null,0,"i",[["class","fa fa-angle-up"]],null,null,null,null,null)),(t()(),Xs(24,0,null,null,1,"div",[["class","navIcon"]],null,null,null,null,null)),(t()(),Xs(25,0,null,null,0,"i",[["class","fa fa-angle-down"]],null,null,null,null,null)),(t()(),Xs(26,0,null,null,15,"section",[],null,null,null,null,null)),(t()(),Xs(27,0,null,null,14,"div",[["class","skillMainContainer"]],null,null,null,null,null)),(t()(),Xs(28,0,null,null,1,"div",[["class","SkillsTitle"]],null,null,null,null,null)),(t()(),oo(-1,null,[" SKILLS "])),(t()(),Xs(30,0,null,null,6,"div",[["class","skillsContent"]],null,null,null,null,null)),(t()(),qs(16777216,null,null,1,null,NM)),ar(32,278528,null,0,Da,[kn,In,Cn],{ngForOf:[0,"ngForOf"]},null),(t()(),Xs(33,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),Xs(34,0,null,null,0,"img",[["src","https://logo.clearbit.com/mongodb.org"]],null,null,null,null,null)),(t()(),Xs(35,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),Xs(36,0,null,null,0,"img",[["src","https://logo.clearbit.com/expressjs.com"],["style","height: 1.95rem;"]],null,null,null,null,null)),(t()(),Xs(37,0,null,null,4,"div",[["class","githubSec"]],null,null,null,null,null)),(t()(),Xs(38,0,null,null,0,"div",[["id","testit"]],null,null,null,null,null)),(t()(),Xs(39,0,null,null,2,"div",[["class","GitTitle"]],null,null,null,null,null)),(t()(),oo(-1,null,[" Contributions on "])),(t()(),Xs(41,0,null,null,0,"i",[["class","fa fa-github"]],null,null,null,null,null))],function(t,e){t(e,32,0,e.component.URLS)},null)}function FM(t){return co(0,[(t()(),Xs(0,0,null,null,1,"app-projects",[],null,null,null,BM,kM)),ar(1,114688,null,0,DM,[],null,null)],function(t,e){t(e,1,0)},null)}var zM=Bi("app-projects",DM,FM,{},{},[]),UM=i("K7Ri"),jM=i.n(UM),HM=i("IiLU"),VM=i("aDsv");class GM{constructor(){}ngOnInit(){let t=-100,e=-100;const n=document.querySelector(".cursor--small");(()=>{document.addEventListener("mousemove",n=>{t=n.clientX,e=n.clientY});const i=()=>{jM.a.set(n,{x:t,y:e}),requestAnimationFrame(i)};requestAnimationFrame(i)})();let i,r=0,s=0;(()=>{const n=document.querySelector(".cursor--canvas");HM.setup(n);const o=new HM.Path.RegularPolygon(new HM.Point(1,1),8,10);o.strokeColor=new HM.Color(0,0,0),o.strokeWidth=1,o.smooth(),(i=new HM.Group([o])).applyMatrix=!1,o.segments.map(()=>new VM);const a=(t,e,n)=>(1-n)*t+n*e;HM.view.onFrame=n=>{r=a(r,t,.2),s=a(s,e,.2),i.position=new HM.Point(r,s)}})()}}var WM=$n({encapsulation:0,styles:[[".cursor[_ngcontent-%COMP%]{position:fixed;left:0;top:0;pointer-events:none}.cursor--small[_ngcontent-%COMP%]{width:5px;height:5px;left:-2.5px;top:-2.5px;border-radius:50%;z-index:11000}.cursor--canvas[_ngcontent-%COMP%]{width:100vw;height:100vh;z-index:12000}"]],data:{}});function qM(t){return co(0,[(t()(),Xs(0,0,null,null,0,"div",[["class","cursor cursor--small"]],null,null,null,null,null)),(t()(),Xs(1,0,null,null,0,"canvas",[["class","cursor cursor--canvas"],["resize",""]],null,null,null,null,null))],null,null)}var XM=$n({encapsulation:0,styles:[[""]],data:{}});function YM(t){return co(0,[(t()(),Xs(0,0,null,null,2,"div",[["id","luxy"]],null,null,null,null,null)),(t()(),Xs(1,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ar(2,212992,null,0,wd,[xd,kn,sn,[8,null],Le],null,null),(t()(),Xs(3,0,null,null,1,"app-cursor",[],null,null,null,qM,WM)),ar(4,114688,null,0,GM,[],null,null)],function(t,e){t(e,2,0),t(e,4,0)},null)}function QM(t){return co(0,[(t()(),Xs(0,0,null,null,1,"app-root",[],null,null,null,YM,XM)),ar(1,114688,null,0,_a,[],null,null)],function(t,e){t(e,1,0)},null)}var ZM=Bi("app-root",_a,QM,{},{},[]);class KM{}class JM{}const $M="*";function tT(t,e=null){return{type:2,steps:t,options:e}}function eT(t){return{type:6,styles:t,offset:null}}function nT(t){Promise.resolve(null).then(t)}class iT{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){nT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class rT{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,i=0;const r=this.players.length;0==r?nT(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const sT="!";function oT(){return"undefined"!=typeof process}function aT(t){switch(t.length){case 0:return new iT;case 1:return t[0];default:return new rT(t)}}function lT(t,e,n,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(t=>{const n=t.offset,i=n==l,h=i&&c||{};Object.keys(t).forEach(n=>{let i=n,a=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,o),a){case sT:a=r[n];break;case $M:a=s[n];break;default:a=e.normalizeStyleValue(n,i,a,o)}h[i]=a}),i||a.push(h),c=h,l=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function cT(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&hT(n,"start",t)));break;case"done":t.onDone(()=>i(n&&hT(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&hT(n,"destroy",t)))}}function hT(t,e,n){const i=n.totalTime,r=uT(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),s=t._data;return null!=s&&(r._data=s),r}function uT(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function dT(t,e,n){let i;return t instanceof Map?(i=t.get(e))||t.set(e,i=n):(i=t[e])||(i=t[e]=n),i}function pT(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let fT=(t,e)=>!1,mT=(t,e)=>!1,gT=(t,e,n)=>[];const vT=oT();(vT||"undefined"!=typeof Element)&&(fT=(t,e)=>t.contains(e),mT=(()=>{if(vT||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):mT}})(),gT=(t,e,n)=>{let i=[];if(n)i.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&i.push(n)}return i});let yT=null,_T=!1;function bT(t){yT||(yT=("undefined"!=typeof document?document.body:null)||{},_T=!!yT.style&&"WebkitAppearance"in yT.style);let e=!0;return yT.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in yT.style)&&_T&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in yT.style),e}const xT=mT,wT=fT,AT=gT;function ET(t){const e={};return Object.keys(t).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]}),e}class ST{validateStyleProperty(t){return bT(t)}matchesElement(t,e){return xT(t,e)}containsElement(t,e){return wT(t,e)}query(t,e,n){return AT(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,r,s=[],o){return new iT(n,i)}}let MT=(()=>{class t{}return t.NOOP=new ST,t})();const TT=1e3,CT="{{",LT="ng-enter",PT="ng-leave",RT="ng-trigger",OT=".ng-trigger",IT="ng-animating",DT=".ng-animating";function kT(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:NT(parseFloat(e[1]),e[2])}function NT(t,e){switch(e){case"s":return t*TT;default:return t}}function BT(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let i,r=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};i=NT(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(r=NT(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else i=t;if(!n){let n=!1,s=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:i,delay:r,easing:s}}(t,e,n)}function FT(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function zT(t,e,n={}){if(e)for(let i in t)n[i]=t[i];else FT(t,n);return n}function UT(t,e,n){return n?e+":"+n+";":""}function jT(t){let e="";for(let n=0;n<t.style.length;n++){const i=t.style.item(n);e+=UT(0,i,t.style.getPropertyValue(i))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=UT(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function HT(t,e,n){t.style&&(Object.keys(e).forEach(i=>{const r=ZT(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]}),oT()&&jT(t))}function VT(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=ZT(e);t.style[n]=""}),oT()&&jT(t))}function GT(t){return Array.isArray(t)?1==t.length?t[0]:tT(t):t}const WT=new RegExp(`${CT}\\s*(.+?)\\s*}}`,"g");function qT(t){let e=[];if("string"==typeof t){const n=t.toString();let i;for(;i=WT.exec(n);)e.push(i[1]);WT.lastIndex=0}return e}function XT(t,e,n){const i=t.toString(),r=i.replace(WT,(t,i)=>{let r=e[i];return e.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?t:r}function YT(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const QT=/-+([a-z0-9])/g;function ZT(t){return t.replace(QT,(...t)=>t[1].toUpperCase())}function KT(t,e){return 0===t||0===e}function JT(t,e,n){const i=Object.keys(n);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var r=1;r<e.length;r++){let n=e[r];o.forEach(function(e){n[e]=tC(t,e)})}}return e}function $T(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function tC(t,e){return window.getComputedStyle(t)[e]}const eC="*";function nC(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>(function(t,e,n){if(":"==t[0]){const i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(sC(r,o)),"<"!=s[0]||r==eC&&o==eC||e.push(sC(o,r))})(t,n,e)):n.push(t),n}const iC=new Set(["true","1"]),rC=new Set(["false","0"]);function sC(t,e){const n=iC.has(t)||rC.has(t),i=iC.has(e)||rC.has(e);return(r,s)=>{let o=t==eC||t==r,a=e==eC||e==s;return!o&&n&&"boolean"==typeof r&&(o=r?iC.has(t):rC.has(t)),!a&&i&&"boolean"==typeof s&&(a=s?iC.has(e):rC.has(e)),o&&a}}const oC=":self",aC=new RegExp(`s*${oC}s*,?`,"g");function lC(t,e,n){return new hC(t).build(e,n)}const cC="";class hC{constructor(t){this._driver=t}build(t,e){const n=new uC(e);return this._resetContextStyleTimingState(n),$T(this,GT(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector=cC,t.collectedStyles={},t.collectedStyles[cC]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0;const r=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,i=n.name;i.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=i}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,i+=r.depCount,s.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:s,queryCount:n,depCount:i,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,s=i||{};if(n.styles.forEach(t=>{if(dC(t)){const e=t;Object.keys(e).forEach(t=>{qT(e[t]).forEach(t=>{s.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=YT(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=$T(this,GT(t.animation),e);return{type:1,matchers:nC(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:pC(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>$T(this,t,e)),options:pC(t.options)}}visitGroup(t,e){const n=e.currentTime;let i=0;const r=t.steps.map(t=>{e.currentTime=n;const r=$T(this,t,e);return i=Math.max(i,e.currentTime),r});return e.currentTime=i,{type:3,steps:r,options:pC(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return fC(BT(t,e).duration,0,"");const i=t;if(i.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=fC(0,0,"");return t.dynamic=!0,t.strValue=i,t}return fC((n=n||BT(i,e)).duration,n.delay,n.easing)}(t.timings,e.errors);let i;e.currentAnimateTimings=n;let r=t.styles?t.styles:eT({});if(5==r.type)i=this.visitKeyframes(r,e);else{let r=t.styles,s=!1;if(!r){s=!0;const t={};n.easing&&(t.easing=n.easing),r=eT(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(r,e);o.isEmptyStep=s,i=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==$M?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,r=null;return n.forEach(t=>{if(dC(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf(CT)>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let i=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(r!=i&&r>=o.startTime&&i<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=o.startTime),a&&(s[n]={startTime:r,endTime:i}),e.options&&function(i,r,s){const o=e.options.params||{},a=qT(t[n]);a.length&&a.forEach(t=>{o.hasOwnProperty(t)||s.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(0,0,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let s=!1,o=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(dC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(dC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=l&&(i++,c=n.offset=l),o=o||c<0||c>1,s=s||c<a,a=c,r.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let h=0;i>0&&i<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));const u=c-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return l.forEach((t,i)=>{const s=h>0?i==u?1:h*i:r[i],o=s*f;e.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:$T(this,GT(t.animation),e),options:pC(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:pC(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:pC(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[r,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>t==oC);return e&&(t=t.replace(aC,"")),[t=t.replace(/@\*/g,OT).replace(/@\w+/g,t=>OT+"-"+t.substr(1)).replace(/:animating/g,DT),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,dT(e.collectedStyles,e.currentQuerySelector,{});const o=$T(this,GT(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:pC(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:BT(t.timings,e.errors,!0);return{type:12,animation:$T(this,GT(t.animation),e),timings:n,options:null}}}class uC{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function dC(t){return!Array.isArray(t)&&"object"==typeof t}function pC(t){var e;return t?(t=FT(t)).params&&(t.params=(e=t.params)?FT(e):null):t={},t}function fC(t,e,n){return{duration:t,delay:e,easing:n}}function mC(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class gC{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const vC=1,yC=new RegExp(":enter","g"),_C=new RegExp(":leave","g");function bC(t,e,n,i,r,s={},o={},a,l,c=[]){return(new xC).buildKeyframes(t,e,n,i,r,s,o,a,l,c)}class xC{buildKeyframes(t,e,n,i,r,s,o,a,l,c=[]){l=l||new gC;const h=new AC(t,e,l,i,r,c,[]);h.options=a,h.currentTimeline.setStyles([s],null,h.errors,a),$T(this,n,h);const u=h.timelines.filter(t=>t.containsAnimation());if(u.length&&Object.keys(o).length){const t=u[u.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,h.errors,a)}return u.length?u.map(t=>t.buildKeyframes()):[mC(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);r!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let i=e.currentTimeline.currentTime;const r=null!=n.duration?kT(n.duration):null,s=null!=n.delay?kT(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,s);i=Math.max(i,n.duration+n.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),$T(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let i=e;const r=t.options;if(r&&(r.params||r.delay)&&((i=e.createSubContext(r)).transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=wC);const t=kT(r.delay);i.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>$T(this,t,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let i=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?kT(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);r&&o.delayNextStep(r),$T(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return BT(e.params?XT(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*r),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(i+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,i=t.options||{},r=i.delay?kT(i.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=wC);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,i)=>{e.currentQueryIndex=i;const o=e.createSubContext(t.options,n);r&&o.delayNextStep(r),n===e.element&&(a=o.currentTimeline),$T(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,i=e.currentTimeline,r=t.timings,s=Math.abs(r.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;$T(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-c+(i.startTime-n.currentTimeline.startTime)}}const wC={};class AC{constructor(t,e,n,i,r,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new EC(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let i=this.options;null!=n.duration&&(i.duration=kT(n.duration)),null!=n.delay&&(i.delay=kT(n.delay));const r=n.params;if(r){let t=i.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=XT(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const i=e||this.element,r=new AC(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=wC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new SC(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,r,s){let o=[];if(i&&o.push(this.element),t.length>0){t=(t=t.replace(yC,"."+this._enterClassName)).replace(_C,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return r||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class EC{constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new EC(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=vC,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||$M,this._currentKeyframe[t]=$M}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const r=i&&i.params||{},s=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e)).forEach(t=>{n[t]=$M}):zT(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=XT(s[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:$M),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],i=t._styleSummary[e];(!n||i.time>n.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,s)=>{const o=zT(r,!0);Object.keys(o).forEach(n=>{const i=o[n];i==sT?t.add(n):i==$M&&e.add(n)}),n||(o.offset=s/this.duration),i.push(o)});const r=t.size?YT(t.values()):[],s=e.size?YT(e.values()):[];if(n){const t=i[0],e=FT(t);t.offset=0,e.offset=1,i=[t,e]}return mC(this.element,i,r,s,this.duration,this.startTime,this.easing,!1)}}class SC extends EC{constructor(t,e,n,i,r,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],s=n+e,o=e/s,a=zT(t[0],!1);a.offset=0,r.push(a);const l=zT(t[0],!1);l.offset=MC(o),r.push(l);const c=t.length-1;for(let i=1;i<=c;i++){let o=zT(t[i],!1);o.offset=MC((e+o.offset*n)/s),r.push(o)}n=s,e=0,i="",t=r}return mC(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}}function MC(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class TC{}class CC extends TC{normalizePropertyName(t,e){return ZT(t)}normalizeStyleValue(t,e,n,i){let r="";const s=n.toString().trim();if(LC[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&i.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+r}}const LC=(()=>(function(t){const e={};return t.forEach(t=>e[t]=!0),e})("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function PC(t,e,n,i,r,s,o,a,l,c,h,u,d){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:u,errors:d}}const RC={};class OC{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return function(t,e,n,i,r){return t.some(t=>t(e,n,i,r))}(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){const i=this._stateStyles["*"],r=this._stateStyles[t],s=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):s}build(t,e,n,i,r,s,o,a,l,c){const h=[],u=this.ast.options&&this.ast.options.params||RC,d=this.buildStyles(n,o&&o.params||RC,h),p=a&&a.params||RC,f=this.buildStyles(i,p,h),m=new Set,g=new Map,v=new Map,y="void"===i,_={params:Object.assign({},u,p)},b=c?[]:bC(t,e,this.ast.animation,r,s,d,f,_,l,h);let x=0;if(b.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),h.length)return PC(e,this._triggerName,n,i,y,d,f,[],[],g,v,x,h);b.forEach(t=>{const n=t.element,i=dT(g,n,{});t.preStyleProps.forEach(t=>i[t]=!0);const r=dT(v,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&m.add(n)});const w=YT(m.values());return PC(e,this._triggerName,n,i,y,d,f,b,w,g,v,x)}}class IC{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},i=FT(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let s=r[t];s.length>1&&(s=XT(s,i,e)),n[t]=s})}}),n}}class DC{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new IC(t.style,t.options&&t.options.params||{})}),kC(this.states,"true","1"),kC(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new OC(t,e,this.states))}),this.fallbackTransition=new OC(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(r=>r.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function kC(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const NC=new gC;class BC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],i=lC(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,n){const i=t.element,r=lT(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],r=this._animations[t];let s;const o=new Map;if(r?(s=bC(this._driver,e,r,LT,PT,{},{},n,NC,i)).forEach(t=>{const e=dT(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)}):(i.push("The requested animation doesn't exist or has already been destroyed"),s=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,$M)})});const a=aT(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,i){const r=uT(e,"","","");return cT(this._getPlayer(t),n,r,i),()=>{}}command(t,e,n,i){if("register"==n)return void this.register(t,i[0]);if("create"==n)return void this.create(t,e,i[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const FC="ng-animate-queued",zC=".ng-animate-queued",UC="ng-animate-disabled",jC=".ng-animate-disabled",HC="ng-star-inserted",VC=".ng-star-inserted",GC=[],WC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},XC="__ng_removed";class YC{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){const e=FT(t);delete e.value,this.options=e}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const QC="void",ZC=new YC(QC);class KC{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,sL(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var r;const s=dT(this._elementListeners,t,[]),o={name:e,phase:n,callback:i};s.push(o);const a=dT(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(sL(t,RT),sL(t,RT+"-"+e),a[e]=ZC),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,i=!0){const r=this._getTrigger(e),s=new $C(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(sL(t,RT),sL(t,RT+"-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const l=new YC(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[e]=l,a||(a=ZC),l.value!==QC&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!e.hasOwnProperty(i)||t[i]!==e[i])return!1}return!0}(a.params,l.params)){const e=[],n=r.matchStyles(a.value,a.params,e),i=r.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{VT(t,n),HT(t,i)})}return}const c=dT(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let h=r.matchTransition(a.value,l.value,t,l.params),u=!1;if(!h){if(!i)return;h=r.fallbackTransition,u=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:a,toState:l,player:s,isFallbackTransition:u}),u||(sL(t,FC),s.onStart(()=>{oL(t,FC)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e,n=!1){this._engine.driver.query(t,OT,!0).forEach(t=>{if(t[XC])return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)})}triggerLeaveAnimation(t,e,n,i){const r=this._engine.statesByElement.get(t);if(r){const s=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,QC,i);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&aT(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const i=e.name;if(n.has(i))return;n.add(i);const r=this._triggers[i].fallbackTransition,s=this._engine.statesByElement.get(t)[i]||ZC,o=new YC(QC),a=new $C(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:r,fromState:s,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)i=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){i=!0;break}}}this.prepareLeaveAnimationListeners(t),i?n.markElementAsRemoved(this.id,t,!1,e):(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}insertNode(t,e){sL(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,s=this._elementListeners.get(r);s&&s.forEach(e=>{if(e.name==n.triggerName){const i=uT(r,n.triggerName,n.fromState.value,n.toState.value);i._data=t,cT(n.player,e.phase,i,e.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,i=e.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(e=>e.element===t)||e}}class JC{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new KC(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=n[t[i]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,i){if(tL(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!tL(e))return;const r=e[XC];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const i=this._fetchNamespace(t);i&&i.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),sL(t,UC)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),oL(t,UC))}removeNode(t,e,n,i){if(tL(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,n,i){this.collectedLeaveElements.push(e),e[XC]={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,i,r){return tL(e)?this._fetchNamespace(t).listen(e,n,i,r):()=>{}}_buildInstruction(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,OT,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,DT,!0)).forEach(t=>this.finishActiveQueriedAnimationOnElement(t))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return aT(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[XC];if(e&&e.setForRemoval){if(t[XC]=WC,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,jC)&&this.markElementAsDisabled(t,!1),this.driver.query(t,jC,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)sL(this.collectedEnterElements[n],HC);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?aT(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new gC,i=[],r=new Map,s=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,zC,!0);for(let n=0;n<e.length;n++)c.add(e[n])});const h=this.bodyNode,u=Array.from(this.statesByElement.keys()),d=iL(u,this.collectedEnterElements),p=new Map;let f=0;d.forEach((t,e)=>{const n=LT+f++;p.set(e,n),t.forEach(t=>sL(t,n))});const m=[],g=new Set,v=new Set;for(let P=0;P<this.collectedLeaveElements.length;P++){const t=this.collectedLeaveElements[P],e=t[XC];e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,VC,!0).forEach(t=>g.add(t)):v.add(t))}const y=new Map,_=iL(u,Array.from(g));_.forEach((t,e)=>{const n=PT+f++;y.set(e,n),t.forEach(t=>sL(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>oL(t,n))}),_.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>oL(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const b=[],x=[];for(let P=this._namespaceList.length-1;P>=0;P--)this._namespaceList[P].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(b.push(e),this.collectedEnterElements.length){const t=r[XC];if(t&&t.setForMove)return void e.destroy()}const c=!h||!this.driver.containsElement(h,r),u=y.get(r),d=p.get(r),f=this._buildInstruction(t,n,d,u,c);if(!f.errors||!f.errors.length)return c?(e.onStart(()=>VT(r,f.fromStyles)),e.onDestroy(()=>HT(r,f.toStyles)),void i.push(e)):t.isFallbackTransition?(e.onStart(()=>VT(r,f.fromStyles)),e.onDestroy(()=>HT(r,f.toStyles)),void i.push(e)):(f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,f.timelines),s.push({instruction:f,player:e,element:r}),f.queriedElements.forEach(t=>dT(o,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),void f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let i=l.get(e);i||l.set(e,i=new Set),n.forEach(t=>i.add(t))}));x.push(f)});if(x.length){const t=[];x.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const w=new Map,A=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(A.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,w))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{dT(w,e,[]).push(t),t.destroy()})});const E=m.filter(t=>lL(t,a,l)),S=new Map;nL(S,this.driver,v,l,$M).forEach(t=>{lL(t,a,l)&&E.push(t)});const M=new Map;d.forEach((t,e)=>{nL(M,this.driver,new Set(t),a,sT)}),E.forEach(t=>{const e=S.get(t),n=M.get(t);S.set(t,Object.assign({},e,n))});const T=[],C=[],L={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>HT(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void i.push(s);let t=L;if(A.size>1){let n=e;const i=[];for(;n=n.parentNode;){const e=A.get(n);if(e){t=e;break}i.push(n)}i.forEach(e=>A.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,w,r,M,S);if(s.setRealPlayer(n),t===L)T.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=aT(e)),i.push(s)}}else VT(e,o.fromStyles),s.onDestroy(()=>HT(e,o.toStyles)),C.push(s),c.has(e)&&i.push(s)}),C.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=aT(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let P=0;P<m.length;P++){const t=m[P],e=t[XC];if(oL(t,PT),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let i=this.driver.query(t,DT,!0);for(let t=0;t<i.length;t++){let e=o.get(i[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?aL(this,t,i):this.processLeaveNode(t)}return m.length=0,T.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),T}elementContainsData(t,e){let n=!1;const i=e[XC];return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,r){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||r==QC;e.forEach(e=>{e.queued||(t||e.triggerName==i)&&s.push(e)})}}return(n||i)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||i&&i!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const i=e.element,r=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==i,l=dT(n,t,[]);this._getPreviousPlayers(t,a,r,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}VT(i,e.fromStyles)}_buildAnimation(t,e,n,i,r,s){const o=e.triggerName,a=e.element,l=[],c=new Set,h=new Set,u=e.timelines.map(e=>{const u=e.element;c.add(u);const d=u[XC];if(d&&d.removedBeforeQueried)return new iT(e.duration,e.delay);const p=u!==a,f=function(t){const e=[];return function t(e,n){for(let i=0;i<e.length;i++){const r=e[i];r instanceof rT?t(r.players,n):n.push(r)}}((n.get(u)||GC).map(t=>t.getRealPlayer()),e),e}().filter(t=>!!t.element&&t.element===u),m=r.get(u),g=s.get(u),v=lT(0,this._normalizer,0,e.keyframes,m,g),y=this._buildPlayer(e,v,f);if(e.subTimeline&&i&&h.add(u),p){const e=new $C(t,o,u);e.setRealPlayer(y),l.push(e)}return y});l.forEach(t=>{dT(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>(function(t,e,n){let i;if(t instanceof Map){if(i=t.get(e)){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&t.delete(e)}}else if(i=t[e]){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&delete t[e]}return i})(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>sL(t,IT));const d=aT(u);return d.onDestroy(()=>{c.forEach(t=>oL(t,IT)),HT(a,e.toStyles)}),h.forEach(t=>{dT(i,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new iT(t.duration,t.delay)}}class $C{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new iT,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>cT(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){dT(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function tL(t){return t&&1===t.nodeType}function eL(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function nL(t,e,n,i,r){const s=[];n.forEach(t=>s.push(eL(t)));const o=[];i.forEach((n,i)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i[XC]=qC,o.push(i))}),t.set(i,s)});let a=0;return n.forEach(t=>eL(t,s[a++])),o}function iL(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const i=new Set(e),r=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let s=r.get(e);if(s)return s;const o=e.parentNode;return s=n.has(o)?o:i.has(o)?1:t(o),r.set(e,s),s}(t);1!==e&&n.get(e).push(t)}),n}const rL="$$classes";function sL(t,e){if(t.classList)t.classList.add(e);else{let n=t[rL];n||(n=t[rL]={}),n[e]=!0}}function oL(t,e){if(t.classList)t.classList.remove(e);else{let n=t[rL];n&&delete n[e]}}function aL(t,e,n){aT(n).onDone(()=>t.processLeaveNode(e))}function lL(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(t=>r.add(t)):e.set(t,i),n.delete(t),!0}class cL{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new JC(t,e,n),this._timelineEngine=new BC(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,i,r){const s=t+"-"+i;let o=this._triggerCache[s];if(!o){const t=[],e=lC(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new DC(t,e)}(i,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,i,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if("@"==n.charAt(0)){const[t,r]=pT(n);this._timelineEngine.command(t,e,r,i)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,r){if("@"==n.charAt(0)){const[t,i]=pT(n);return this._timelineEngine.listen(t,e,i,r)}return this._transitionEngine.listen(t,e,n,i,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function hL(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=dL(e[0]),e.length>1&&(i=dL(e[e.length-1]))):e&&(n=dL(e)),n||i?new uL(t,n,i):null}let uL=(()=>{class t{constructor(e,n,i){this._element=e,this._startStyles=n,this._endStyles=i,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&HT(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(HT(this._element,this._initialStyles),this._endStyles&&(HT(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(VT(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(VT(this._element,this._endStyles),this._endStyles=null),HT(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function dL(t){let e=null;const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];pL(r)&&((e=e||{})[r]=t[r])}return e}function pL(t){return"display"===t||"position"===t}const fL=3,mL="animation",gL="animationend",vL=1e3;class yL{constructor(t,e,n,i,r,s,o){this._element=t,this._name=e,this._duration=n,this._delay=i,this._easing=r,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=EL(t,"").trim();n.length&&(function(t,e){let n=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&n++}(n),e=`${n}, ${e}`),AL(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),wL(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){_L(this._element,this._name,"paused")}resume(){_L(this._element,this._name,"running")}setPosition(t){const e=bL(this._element,this._name);this._position=t*this._duration,AL(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=parseFloat(t.elapsedTime.toFixed(fL))*vL;t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),wL(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=EL(t,"").split(","),i=xL(n,e);i>=0&&(n.splice(i,1),AL(t,"",n.join(",")))}(this._element,this._name))}}function _L(t,e,n){AL(t,"PlayState",n,bL(t,e))}function bL(t,e){const n=EL(t,"");return n.indexOf(",")>0?xL(n.split(","),e):xL([n],e)}function xL(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function wL(t,e,n){n?t.removeEventListener(gL,e):t.addEventListener(gL,e)}function AL(t,e,n,i){const r=mL+e;if(null!=i){const e=t.style[r];if(e.length){const t=e.split(",");t[i]=n,n=t.join(",")}}t.style[r]=n}function EL(t,e){return t.style[mL+e]}const SL="forwards",ML="linear";class TL{constructor(t,e,n,i,r,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||ML,this.totalTime=i+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new yL(this.element,this.animationName,this._duration,this._delay,this.easing,SL,()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:tC(this.element,n))})}this.currentSnapshot=t}}class CL extends iT{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=ET(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}const LL="gen_css_kf_",PL=" ";class RL{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return bT(t)}matchesElement(t,e){return xT(t,e)}containsElement(t,e){return wT(t,e)}query(t,e,n){return AT(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>ET(t));let i=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=PL;const e=parseFloat(t.offset);i+=`${r}${100*e}% {\n`,r+=PL,Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${e}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const s=document.createElement("style");return s.innerHTML=i,s}animate(t,e,n,i,r,s=[],o){o&&this._notifyFaultyScrubber();const a=s.filter(t=>t instanceof TL),l={};KT(n,i)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=JT(t,e,l));if(0==n)return new CL(t,c);const h=`${LL}${this._count++}`,u=this.buildKeyframeElement(t,h,e);document.querySelector("head").appendChild(u);const d=hL(t,e),p=new TL(t,e,h,n,i,r,c,d);return p.onDestroy(()=>(function(t){u.parentNode.removeChild(u)})()),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class OL{constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:tC(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class IL{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(DL().toString()),this._cssKeyframesDriver=new RL}validateStyleProperty(t){return bT(t)}matchesElement(t,e){return xT(t,e)}containsElement(t,e){return wT(t,e)}query(t,e,n){return AT(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,i,r,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,s);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const l={},c=s.filter(t=>t instanceof OL);KT(n,i)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const h=hL(t,e=JT(t,e=e.map(t=>zT(t,!1)),l));return new OL(t,e,a,h)}}function DL(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}class kL extends KM{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:Gt.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?tT(t):t;return FL(this._renderer,null,e,"register",[n]),new NL(e,this._renderer)}}class NL extends JM{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new BL(this._id,t,e||{},this._renderer)}}class BL{constructor(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return FL(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function FL(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}const zL="@",UL="@.disabled";class jL{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new HL("",n,this.engine),this._rendererCache.set(n,t)),t}const i=e.id,r=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(r,t),e.data.animation.forEach(e=>this.engine.registerTrigger(i,r,t,e.name,e)),new VL(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}class HL{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==zL&&e==UL?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class VL extends HL{constructor(t,e,n,i){super(e,n,i),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==zL?"."==e.charAt(1)&&e==UL?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==zL){const i=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),s="";return r.charAt(0)!=zL&&([r,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,i,r,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}class GL extends cL{constructor(t,e,n){super(t.body,e,n)}}function WL(){return"function"==typeof DL()?new IL:new RL}function qL(){return new CC}function XL(t,e,n){return new jL(t,e,n)}const YL=new Et("AnimationModuleType");class QL{}class ZL{}class KL{}var JL=ma(va,[_a],function(t){return function(t){const e={},n=[];let i=!1;for(let r=0;r<t.length;r++){const s=t[r];s.token===Re&&!0===s.value&&(i=!0),1073741824&s.flags&&n.push(s.token),s.index=r,e[Zn(s.token)]=s}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:i}}([Pi(512,sn,on,[[8,[Xd,bM,MM,RM,zS,zM,ZM]],[3,sn],Ut]),Pi(5120,Hr,Vs,[[3,Hr]]),Pi(4608,Ra,Oa,[Hr,[2,Pa]]),Pi(5120,wr,Gs,[ss]),Pi(5120,kr,Nr,[]),Pi(5120,Cn,js,[]),Pi(5120,Ln,Hs,[]),Pi(4608,Uc,jc,[Ba]),Pi(6144,Ee,null,[Uc]),Pi(4608,Ic,kc,[]),Pi(5120,ec,function(t,e,n,i,r,s,o,a){return[new Rc(t,e,n),new zc(i),new Nc(r,s,o,a)]},[Ba,ss,zr,Ba,Ba,Ic,jr,[2,Dc]]),Pi(4608,nc,nc,[ec,ss]),Pi(135680,sc,sc,[Ba]),Pi(4608,dc,dc,[nc,sc,kr]),Pi(5120,MT,WL,[]),Pi(5120,TC,qL,[]),Pi(4608,cL,GL,[Ba,MT,TC]),Pi(5120,dn,XL,[dc,cL,ss]),Pi(6144,rc,null,[sc]),Pi(4608,ds,ds,[ss]),Pi(5120,su,zd,[gd]),Pi(4608,Md,Md,[]),Pi(6144,Ed,null,[Md]),Pi(135680,Td,Td,[gd,Ts,Qr,Ie,Ed]),Pi(4608,Sd,Sd,[]),Pi(5120,Cd,Dd,[gd,za,Ld]),Pi(5120,Vd,Hd,[Ud]),Pi(5120,Ur,function(t){return[t]},[Vd]),Pi(4608,KM,kL,[dn,Ba]),Pi(1073742336,Na,Na,[]),Pi(1024,Jt,Qc,[]),Pi(1024,bs,function(){return[Od()]},[]),Pi(512,Ud,Ud,[Ie]),Pi(1024,Ir,function(t,e){return[(n=t,Jl("probe",tc),Jl("coreTokens",Object.assign({},$l,(n||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>tc),jd(e)];var n},[[2,bs],Ud]),Pi(512,Dr,Dr,[[2,Ir]]),Pi(131584,Ss,Ss,[ss,jr,Ie,Jt,sn,Dr]),Pi(1073742336,Ws,Ws,[Ss]),Pi(1073742336,Zc,Zc,[[3,Zc]]),Pi(1024,Pd,Nd,[[3,gd]]),Pi(512,Bh,Fh,[]),Pi(512,xd,xd,[]),Pi(256,Ld,{},[]),Pi(1024,wa,kd,[ba,[2,Aa],Ld]),Pi(512,Ea,Ea,[wa,ba]),Pi(512,Qr,Qr,[]),Pi(512,Ts,Os,[Qr,[2,Ps]]),Pi(1024,cd,function(){return[[{path:"home",component:gM},{path:"work",component:wM},{path:"vrview",component:TM},{path:"engine",component:Yd},{path:"projects",component:DM},{path:"",redirectTo:"/home",pathMatch:"full"}]]},[]),Pi(1024,gd,Fd,[Ss,Bh,xd,Ea,Ie,Ts,Qr,cd,Ld,[2,ud],[2,ad]]),Pi(1073742336,Id,Id,[[2,Pd],[2,gd]]),Pi(1073742336,ZL,ZL,[]),Pi(1073742336,hM,hM,[]),Pi(1073742336,WS,WS,[[2,GS],[2,Dc]]),Pi(1073742336,XS,XS,[]),Pi(1073742336,aM,aM,[]),Pi(1073742336,KL,KL,[]),Pi(1073742336,QL,QL,[]),Pi(1073742336,va,va,[]),Pi(256,Re,!0,[]),Pi(256,YL,"BrowserAnimations",[])])});(function(){if(te)throw new Error("Cannot enable prod mode after platform setup.");$t=!1})(),Yc().bootstrapModuleFactory(JL).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);